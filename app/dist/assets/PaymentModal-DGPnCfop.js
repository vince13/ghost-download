import{c as C,r as o,j as e,B as v,a as b,C as S}from"./index-DjhJUK_y.js";import{M as F}from"./Modal-DmPGCuwV.js";import{C as r,S as M}from"./sparkles-BkmO6wkW.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=C("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]),T=({isOpen:i,onClose:u,user:a,planDetails:t,onPaymentSuccess:L,targetPlan:d="founders"})=>{var g,p;const[m,x]=o.useState(!1),[j,l]=o.useState(null),[P,y]=o.useState(null);o.useEffect(()=>{i&&(l(null),y(null),x(!1))},[i]);const N=async()=>{if(!(a!=null&&a.uid)){l("Please sign in to purchase Founders Club");return}x(!0),l(null);try{const c=d||(s?"starter":"founders"),h=await fetch("/api/stripe-create-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a.uid,userEmail:a.email,plan:c})});if(!h.ok){const w=await h.json();throw new Error(w.error||"Failed to create checkout session")}const f=await h.json();if(f.url)window.location.href=f.url;else throw new Error("No checkout URL received")}catch(c){console.error("[PaymentModal] Checkout error:",c),l(c.message||"Failed to start checkout. Please try again."),x(!1)}};if(!i)return null;const n=((g=t==null?void 0:t.label)==null?void 0:g.toLowerCase())==="founders"||d==="founders",s=((p=t==null?void 0:t.label)==null?void 0:p.toLowerCase())==="starter"||d==="starter",k=s?99:299;return e.jsx(F,{isOpen:i,onClose:u,title:"Upgrade to Founders Club",description:"Lifetime access for early believers",footer:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Secure payment via Stripe"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{variant:"secondary",onClick:u,disabled:m,children:"Cancel"}),!n&&e.jsx(b,{variant:"primary",onClick:N,disabled:m,className:"flex items-center gap-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"w-4 h-4"}),"Continue to Checkout"]})})]})]}),children:n||s?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(r,{className:"w-16 h-16 text-green-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:n?"You're already a Founder!":"You're already on Starter!"}),e.jsx("p",{className:"text-gray-400",children:n?"You have lifetime access to Founders Club benefits.":"You're already subscribed to the Starter plan."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-900/20 to-green-950/10 border border-green-800/50 rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{className:"w-6 h-6 text-green-400"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:s?"Starter":"Founders Club"})]}),e.jsx(v,{color:"green",children:s?"MONTHLY":"LIFETIME"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsxs("span",{className:"text-4xl font-bold text-white",children:["$",k]}),e.jsx("span",{className:"text-gray-400",children:s?"per month":"one-time"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:s?"Cancel anytime":"No recurring fees, ever"})]}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(r,{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5"}),e.jsx("span",{children:"Unlimited live sessions"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(r,{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5"}),e.jsx("span",{children:"20 knowledge base documents"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(r,{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5"}),e.jsx("span",{children:"Unlimited session replays"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(r,{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5"}),e.jsx("span",{children:"Priority webhook tuning"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(r,{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5"}),e.jsx("span",{children:"Concierge onboarding call"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(r,{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5"}),e.jsx("span",{children:"Founders Club badge"})]})]})]}),j&&e.jsx("div",{className:"p-3 rounded-lg bg-red-900/30 border border-red-700 text-sm text-red-200 mb-4",children:j}),e.jsxs("div",{className:"bg-gray-900/60 border border-gray-800 rounded-xl p-4 text-xs text-gray-400 space-y-2",children:[e.jsx("p",{className:"font-semibold text-gray-300",children:"What happens next:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[e.jsx("li",{children:"Complete secure checkout via Stripe"}),e.jsx("li",{children:"Your account will be upgraded automatically"}),e.jsx("li",{children:"You'll receive a confirmation email"}),e.jsx("li",{children:"Start using Founders Club features immediately"})]})]})]})})};export{T as PaymentModal};

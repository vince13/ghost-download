const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ParametersModal-CHV2ve17.js","assets/Modal-DmPGCuwV.js","assets/KnowledgeBaseModal-C2z1wsJ9.js","assets/file-text-CEektQ_P.js","assets/trash-2-dkXp1wAJ.js","assets/UpgradeAccountModal-FJQKdmfR.js","assets/chart-column-iKTZkwYY.js","assets/SessionReplayModal-CKvvBomH.js","assets/AnalyticsDashboard-BD8pGWN8.js","assets/PaymentModal-DGPnCfop.js","assets/sparkles-BkmO6wkW.js","assets/PricingModal-BlsprqDP.js","assets/PlaybooksModal-C9SiF-Mr.js"])))=>i.map(i=>d[i]);
var _P=Object.defineProperty;var wP=(t,e,n)=>e in t?_P(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var _e=(t,e,n)=>wP(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var N_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function EP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function SP(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var ST={exports:{}},Jh={},TT={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uc=Symbol.for("react.element"),TP=Symbol.for("react.portal"),bP=Symbol.for("react.fragment"),kP=Symbol.for("react.strict_mode"),IP=Symbol.for("react.profiler"),AP=Symbol.for("react.provider"),CP=Symbol.for("react.context"),PP=Symbol.for("react.forward_ref"),RP=Symbol.for("react.suspense"),xP=Symbol.for("react.memo"),OP=Symbol.for("react.lazy"),M_=Symbol.iterator;function DP(t){return t===null||typeof t!="object"?null:(t=M_&&t[M_]||t["@@iterator"],typeof t=="function"?t:null)}var bT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kT=Object.assign,IT={};function Ja(t,e,n){this.props=t,this.context=e,this.refs=IT,this.updater=n||bT}Ja.prototype.isReactComponent={};Ja.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ja.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function AT(){}AT.prototype=Ja.prototype;function ly(t,e,n){this.props=t,this.context=e,this.refs=IT,this.updater=n||bT}var cy=ly.prototype=new AT;cy.constructor=ly;kT(cy,Ja.prototype);cy.isPureReactComponent=!0;var L_=Array.isArray,CT=Object.prototype.hasOwnProperty,uy={current:null},PT={key:!0,ref:!0,__self:!0,__source:!0};function RT(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)CT.call(e,r)&&!PT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Uc,type:t,key:s,ref:o,props:i,_owner:uy.current}}function NP(t,e){return{$$typeof:Uc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function dy(t){return typeof t=="object"&&t!==null&&t.$$typeof===Uc}function MP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var V_=/\/+/g;function ip(t,e){return typeof t=="object"&&t!==null&&t.key!=null?MP(""+t.key):e.toString(36)}function Td(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Uc:case TP:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ip(o,0):r,L_(i)?(n="",t!=null&&(n=t.replace(V_,"$&/")+"/"),Td(i,e,n,"",function(u){return u})):i!=null&&(dy(i)&&(i=NP(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(V_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",L_(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+ip(s,a);o+=Td(s,e,n,l,i)}else if(l=DP(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+ip(s,a++),o+=Td(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Vu(t,e,n){if(t==null)return t;var r=[],i=0;return Td(t,r,"","",function(s){return e.call(n,s,i++)}),r}function LP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fn={current:null},bd={transition:null},VP={ReactCurrentDispatcher:fn,ReactCurrentBatchConfig:bd,ReactCurrentOwner:uy};function xT(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:Vu,forEach:function(t,e,n){Vu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Vu(t,function(){e++}),e},toArray:function(t){return Vu(t,function(e){return e})||[]},only:function(t){if(!dy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=Ja;Te.Fragment=bP;Te.Profiler=IP;Te.PureComponent=ly;Te.StrictMode=kP;Te.Suspense=RP;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VP;Te.act=xT;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=kT({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=uy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)CT.call(e,l)&&!PT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Uc,type:t.type,key:i,ref:s,props:r,_owner:o}};Te.createContext=function(t){return t={$$typeof:CP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:AP,_context:t},t.Consumer=t};Te.createElement=RT;Te.createFactory=function(t){var e=RT.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:PP,render:t}};Te.isValidElement=dy;Te.lazy=function(t){return{$$typeof:OP,_payload:{_status:-1,_result:t},_init:LP}};Te.memo=function(t,e){return{$$typeof:xP,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=bd.transition;bd.transition={};try{t()}finally{bd.transition=e}};Te.unstable_act=xT;Te.useCallback=function(t,e){return fn.current.useCallback(t,e)};Te.useContext=function(t){return fn.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return fn.current.useDeferredValue(t)};Te.useEffect=function(t,e){return fn.current.useEffect(t,e)};Te.useId=function(){return fn.current.useId()};Te.useImperativeHandle=function(t,e,n){return fn.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return fn.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return fn.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return fn.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return fn.current.useReducer(t,e,n)};Te.useRef=function(t){return fn.current.useRef(t)};Te.useState=function(t){return fn.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return fn.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return fn.current.useTransition()};Te.version="18.3.1";TT.exports=Te;var F=TT.exports;const OT=EP(F);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jP=F,FP=Symbol.for("react.element"),UP=Symbol.for("react.fragment"),$P=Object.prototype.hasOwnProperty,BP=jP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qP={key:!0,ref:!0,__self:!0,__source:!0};function DT(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)$P.call(e,r)&&!qP.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:FP,type:t,key:s,ref:o,props:i,_owner:BP.current}}Jh.Fragment=UP;Jh.jsx=DT;Jh.jsxs=DT;ST.exports=Jh;var D=ST.exports,dm={},NT={exports:{}},Nn={},MT={exports:{}},LT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(X,ue){var he=X.length;X.push(ue);e:for(;0<he;){var Le=he-1>>>1,Se=X[Le];if(0<i(Se,ue))X[Le]=ue,X[he]=Se,he=Le;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ue=X[0],he=X.pop();if(he!==ue){X[0]=he;e:for(var Le=0,Se=X.length,d=Se>>>1;Le<d;){var w=2*(Le+1)-1,v=X[w],O=w+1,M=X[O];if(0>i(v,he))O<Se&&0>i(M,v)?(X[Le]=M,X[O]=he,Le=O):(X[Le]=v,X[w]=he,Le=w);else if(O<Se&&0>i(M,he))X[Le]=M,X[O]=he,Le=O;else break e}}return ue}function i(X,ue){var he=X.sortIndex-ue.sortIndex;return he!==0?he:X.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,p=null,g=3,T=!1,S=!1,E=!1,k=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(X){for(var ue=n(u);ue!==null;){if(ue.callback===null)r(u);else if(ue.startTime<=X)r(u),ue.sortIndex=ue.expirationTime,e(l,ue);else break;ue=n(u)}}function L(X){if(E=!1,C(X),!S)if(n(l)!==null)S=!0,kr($);else{var ue=n(u);ue!==null&&Ye(L,ue.startTime-X)}}function $(X,ue){S=!1,E&&(E=!1,_(I),I=-1),T=!0;var he=g;try{for(C(ue),p=n(l);p!==null&&(!(p.expirationTime>ue)||X&&!b());){var Le=p.callback;if(typeof Le=="function"){p.callback=null,g=p.priorityLevel;var Se=Le(p.expirationTime<=ue);ue=t.unstable_now(),typeof Se=="function"?p.callback=Se:p===n(l)&&r(l),C(ue)}else r(l);p=n(l)}if(p!==null)var d=!0;else{var w=n(u);w!==null&&Ye(L,w.startTime-ue),d=!1}return d}finally{p=null,g=he,T=!1}}var q=!1,P=null,I=-1,R=5,x=-1;function b(){return!(t.unstable_now()-x<R)}function V(){if(P!==null){var X=t.unstable_now();x=X;var ue=!0;try{ue=P(!0,X)}finally{ue?N():(q=!1,P=null)}}else q=!1}var N;if(typeof y=="function")N=function(){y(V)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,tn=Pe.port2;Pe.port1.onmessage=V,N=function(){tn.postMessage(null)}}else N=function(){k(V,0)};function kr(X){P=X,q||(q=!0,N())}function Ye(X,ue){I=k(function(){X(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){S||T||(S=!0,kr($))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(X){switch(g){case 1:case 2:case 3:var ue=3;break;default:ue=g}var he=g;g=ue;try{return X()}finally{g=he}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,ue){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var he=g;g=X;try{return ue()}finally{g=he}},t.unstable_scheduleCallback=function(X,ue,he){var Le=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Le+he:Le):he=Le,X){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=he+Se,X={id:h++,callback:ue,priorityLevel:X,startTime:he,expirationTime:Se,sortIndex:-1},he>Le?(X.sortIndex=he,e(u,X),n(l)===null&&X===n(u)&&(E?(_(I),I=-1):E=!0,Ye(L,he-Le))):(X.sortIndex=Se,e(l,X),S||T||(S=!0,kr($))),X},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(X){var ue=g;return function(){var he=g;g=ue;try{return X.apply(this,arguments)}finally{g=he}}}})(LT);MT.exports=LT;var zP=MT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HP=F,Dn=zP;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var VT=new Set,uc={};function Po(t,e){Ca(t,e),Ca(t+"Capture",e)}function Ca(t,e){for(uc[t]=e,t=0;t<e.length;t++)VT.add(e[t])}var gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hm=Object.prototype.hasOwnProperty,WP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,j_={},F_={};function GP(t){return hm.call(F_,t)?!0:hm.call(j_,t)?!1:WP.test(t)?F_[t]=!0:(j_[t]=!0,!1)}function KP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function JP(t,e,n,r){if(e===null||typeof e>"u"||KP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$t[t]=new pn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$t[e]=new pn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$t[t]=new pn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$t[t]=new pn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$t[t]=new pn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$t[t]=new pn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$t[t]=new pn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$t[t]=new pn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$t[t]=new pn(t,5,!1,t.toLowerCase(),null,!1,!1)});var hy=/[\-:]([a-z])/g;function fy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hy,fy);$t[e]=new pn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hy,fy);$t[e]=new pn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hy,fy);$t[e]=new pn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$t[t]=new pn(t,1,!1,t.toLowerCase(),null,!1,!1)});$t.xlinkHref=new pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$t[t]=new pn(t,1,!1,t.toLowerCase(),null,!0,!0)});function py(t,e,n,r){var i=$t.hasOwnProperty(e)?$t[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(JP(e,n,i,r)&&(n=null),r||i===null?GP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ii=HP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ju=Symbol.for("react.element"),ea=Symbol.for("react.portal"),ta=Symbol.for("react.fragment"),my=Symbol.for("react.strict_mode"),fm=Symbol.for("react.profiler"),jT=Symbol.for("react.provider"),FT=Symbol.for("react.context"),gy=Symbol.for("react.forward_ref"),pm=Symbol.for("react.suspense"),mm=Symbol.for("react.suspense_list"),yy=Symbol.for("react.memo"),Gi=Symbol.for("react.lazy"),UT=Symbol.for("react.offscreen"),U_=Symbol.iterator;function wl(t){return t===null||typeof t!="object"?null:(t=U_&&t[U_]||t["@@iterator"],typeof t=="function"?t:null)}var it=Object.assign,sp;function xl(t){if(sp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sp=e&&e[1]||""}return`
`+sp+t}var op=!1;function ap(t,e){if(!t||op)return"";op=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{op=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xl(t):""}function QP(t){switch(t.tag){case 5:return xl(t.type);case 16:return xl("Lazy");case 13:return xl("Suspense");case 19:return xl("SuspenseList");case 0:case 2:case 15:return t=ap(t.type,!1),t;case 11:return t=ap(t.type.render,!1),t;case 1:return t=ap(t.type,!0),t;default:return""}}function gm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ta:return"Fragment";case ea:return"Portal";case fm:return"Profiler";case my:return"StrictMode";case pm:return"Suspense";case mm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case FT:return(t.displayName||"Context")+".Consumer";case jT:return(t._context.displayName||"Context")+".Provider";case gy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yy:return e=t.displayName||null,e!==null?e:gm(t.type)||"Memo";case Gi:e=t._payload,t=t._init;try{return gm(t(e))}catch{}}return null}function YP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gm(e);case 8:return e===my?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Es(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $T(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function XP(t){var e=$T(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fu(t){t._valueTracker||(t._valueTracker=XP(t))}function BT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=$T(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Qd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ym(t,e){var n=e.checked;return it({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Es(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qT(t,e){e=e.checked,e!=null&&py(t,"checked",e,!1)}function vm(t,e){qT(t,e);var n=Es(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_m(t,e.type,n):e.hasOwnProperty("defaultValue")&&_m(t,e.type,Es(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function B_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _m(t,e,n){(e!=="number"||Qd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ol=Array.isArray;function pa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Es(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function wm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return it({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function q_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(Ol(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Es(n)}}function zT(t,e){var n=Es(e.value),r=Es(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function z_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function HT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Em(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?HT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Uu,WT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Uu=Uu||document.createElement("div"),Uu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Uu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function dc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var zl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZP=["Webkit","ms","Moz","O"];Object.keys(zl).forEach(function(t){ZP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zl[e]=zl[t]})});function GT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||zl.hasOwnProperty(t)&&zl[t]?(""+e).trim():e+"px"}function KT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=GT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var eR=it({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sm(t,e){if(e){if(eR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Tm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bm=null;function vy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var km=null,ma=null,ga=null;function H_(t){if(t=qc(t)){if(typeof km!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=ef(e),km(t.stateNode,t.type,e))}}function JT(t){ma?ga?ga.push(t):ga=[t]:ma=t}function QT(){if(ma){var t=ma,e=ga;if(ga=ma=null,H_(t),e)for(t=0;t<e.length;t++)H_(e[t])}}function YT(t,e){return t(e)}function XT(){}var lp=!1;function ZT(t,e,n){if(lp)return t(e,n);lp=!0;try{return YT(t,e,n)}finally{lp=!1,(ma!==null||ga!==null)&&(XT(),QT())}}function hc(t,e){var n=t.stateNode;if(n===null)return null;var r=ef(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Im=!1;if(gi)try{var El={};Object.defineProperty(El,"passive",{get:function(){Im=!0}}),window.addEventListener("test",El,El),window.removeEventListener("test",El,El)}catch{Im=!1}function tR(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Hl=!1,Yd=null,Xd=!1,Am=null,nR={onError:function(t){Hl=!0,Yd=t}};function rR(t,e,n,r,i,s,o,a,l){Hl=!1,Yd=null,tR.apply(nR,arguments)}function iR(t,e,n,r,i,s,o,a,l){if(rR.apply(this,arguments),Hl){if(Hl){var u=Yd;Hl=!1,Yd=null}else throw Error(Y(198));Xd||(Xd=!0,Am=u)}}function Ro(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function eb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function W_(t){if(Ro(t)!==t)throw Error(Y(188))}function sR(t){var e=t.alternate;if(!e){if(e=Ro(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return W_(i),t;if(s===r)return W_(i),e;s=s.sibling}throw Error(Y(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function tb(t){return t=sR(t),t!==null?nb(t):null}function nb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=nb(t);if(e!==null)return e;t=t.sibling}return null}var rb=Dn.unstable_scheduleCallback,G_=Dn.unstable_cancelCallback,oR=Dn.unstable_shouldYield,aR=Dn.unstable_requestPaint,dt=Dn.unstable_now,lR=Dn.unstable_getCurrentPriorityLevel,_y=Dn.unstable_ImmediatePriority,ib=Dn.unstable_UserBlockingPriority,Zd=Dn.unstable_NormalPriority,cR=Dn.unstable_LowPriority,sb=Dn.unstable_IdlePriority,Qh=null,Vr=null;function uR(t){if(Vr&&typeof Vr.onCommitFiberRoot=="function")try{Vr.onCommitFiberRoot(Qh,t,void 0,(t.current.flags&128)===128)}catch{}}var gr=Math.clz32?Math.clz32:fR,dR=Math.log,hR=Math.LN2;function fR(t){return t>>>=0,t===0?32:31-(dR(t)/hR|0)|0}var $u=64,Bu=4194304;function Dl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function eh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Dl(a):(s&=o,s!==0&&(r=Dl(s)))}else o=n&~i,o!==0?r=Dl(o):s!==0&&(r=Dl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gr(e),i=1<<n,r|=t[n],e&=~i;return r}function pR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mR(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-gr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=pR(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Cm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ob(){var t=$u;return $u<<=1,!($u&4194240)&&($u=64),t}function cp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $c(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gr(e),t[e]=n}function gR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-gr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function wy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var je=0;function ab(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var lb,Ey,cb,ub,db,Pm=!1,qu=[],os=null,as=null,ls=null,fc=new Map,pc=new Map,Qi=[],yR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function K_(t,e){switch(t){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":fc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pc.delete(e.pointerId)}}function Sl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=qc(e),e!==null&&Ey(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function vR(t,e,n,r,i){switch(e){case"focusin":return os=Sl(os,t,e,n,r,i),!0;case"dragenter":return as=Sl(as,t,e,n,r,i),!0;case"mouseover":return ls=Sl(ls,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return fc.set(s,Sl(fc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,pc.set(s,Sl(pc.get(s)||null,t,e,n,r,i)),!0}return!1}function hb(t){var e=ro(t.target);if(e!==null){var n=Ro(e);if(n!==null){if(e=n.tag,e===13){if(e=eb(n),e!==null){t.blockedOn=e,db(t.priority,function(){cb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function kd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);bm=r,n.target.dispatchEvent(r),bm=null}else return e=qc(n),e!==null&&Ey(e),t.blockedOn=n,!1;e.shift()}return!0}function J_(t,e,n){kd(t)&&n.delete(e)}function _R(){Pm=!1,os!==null&&kd(os)&&(os=null),as!==null&&kd(as)&&(as=null),ls!==null&&kd(ls)&&(ls=null),fc.forEach(J_),pc.forEach(J_)}function Tl(t,e){t.blockedOn===e&&(t.blockedOn=null,Pm||(Pm=!0,Dn.unstable_scheduleCallback(Dn.unstable_NormalPriority,_R)))}function mc(t){function e(i){return Tl(i,t)}if(0<qu.length){Tl(qu[0],t);for(var n=1;n<qu.length;n++){var r=qu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(os!==null&&Tl(os,t),as!==null&&Tl(as,t),ls!==null&&Tl(ls,t),fc.forEach(e),pc.forEach(e),n=0;n<Qi.length;n++)r=Qi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Qi.length&&(n=Qi[0],n.blockedOn===null);)hb(n),n.blockedOn===null&&Qi.shift()}var ya=Ii.ReactCurrentBatchConfig,th=!0;function wR(t,e,n,r){var i=je,s=ya.transition;ya.transition=null;try{je=1,Sy(t,e,n,r)}finally{je=i,ya.transition=s}}function ER(t,e,n,r){var i=je,s=ya.transition;ya.transition=null;try{je=4,Sy(t,e,n,r)}finally{je=i,ya.transition=s}}function Sy(t,e,n,r){if(th){var i=Rm(t,e,n,r);if(i===null)_p(t,e,r,nh,n),K_(t,r);else if(vR(i,t,e,n,r))r.stopPropagation();else if(K_(t,r),e&4&&-1<yR.indexOf(t)){for(;i!==null;){var s=qc(i);if(s!==null&&lb(s),s=Rm(t,e,n,r),s===null&&_p(t,e,r,nh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else _p(t,e,r,null,n)}}var nh=null;function Rm(t,e,n,r){if(nh=null,t=vy(r),t=ro(t),t!==null)if(e=Ro(t),e===null)t=null;else if(n=e.tag,n===13){if(t=eb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return nh=t,null}function fb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lR()){case _y:return 1;case ib:return 4;case Zd:case cR:return 16;case sb:return 536870912;default:return 16}default:return 16}}var ns=null,Ty=null,Id=null;function pb(){if(Id)return Id;var t,e=Ty,n=e.length,r,i="value"in ns?ns.value:ns.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Id=i.slice(t,1<r?1-r:void 0)}function Ad(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zu(){return!0}function Q_(){return!1}function Mn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?zu:Q_,this.isPropagationStopped=Q_,this}return it(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zu)},persist:function(){},isPersistent:zu}),e}var Qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},by=Mn(Qa),Bc=it({},Qa,{view:0,detail:0}),SR=Mn(Bc),up,dp,bl,Yh=it({},Bc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ky,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bl&&(bl&&t.type==="mousemove"?(up=t.screenX-bl.screenX,dp=t.screenY-bl.screenY):dp=up=0,bl=t),up)},movementY:function(t){return"movementY"in t?t.movementY:dp}}),Y_=Mn(Yh),TR=it({},Yh,{dataTransfer:0}),bR=Mn(TR),kR=it({},Bc,{relatedTarget:0}),hp=Mn(kR),IR=it({},Qa,{animationName:0,elapsedTime:0,pseudoElement:0}),AR=Mn(IR),CR=it({},Qa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),PR=Mn(CR),RR=it({},Qa,{data:0}),X_=Mn(RR),xR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=DR[t])?!!e[t]:!1}function ky(){return NR}var MR=it({},Bc,{key:function(t){if(t.key){var e=xR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ad(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?OR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ky,charCode:function(t){return t.type==="keypress"?Ad(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ad(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),LR=Mn(MR),VR=it({},Yh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Z_=Mn(VR),jR=it({},Bc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ky}),FR=Mn(jR),UR=it({},Qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),$R=Mn(UR),BR=it({},Yh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qR=Mn(BR),zR=[9,13,27,32],Iy=gi&&"CompositionEvent"in window,Wl=null;gi&&"documentMode"in document&&(Wl=document.documentMode);var HR=gi&&"TextEvent"in window&&!Wl,mb=gi&&(!Iy||Wl&&8<Wl&&11>=Wl),ew=" ",tw=!1;function gb(t,e){switch(t){case"keyup":return zR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var na=!1;function WR(t,e){switch(t){case"compositionend":return yb(e);case"keypress":return e.which!==32?null:(tw=!0,ew);case"textInput":return t=e.data,t===ew&&tw?null:t;default:return null}}function GR(t,e){if(na)return t==="compositionend"||!Iy&&gb(t,e)?(t=pb(),Id=Ty=ns=null,na=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mb&&e.locale!=="ko"?null:e.data;default:return null}}var KR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!KR[t.type]:e==="textarea"}function vb(t,e,n,r){JT(r),e=rh(e,"onChange"),0<e.length&&(n=new by("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Gl=null,gc=null;function JR(t){Pb(t,0)}function Xh(t){var e=sa(t);if(BT(e))return t}function QR(t,e){if(t==="change")return e}var _b=!1;if(gi){var fp;if(gi){var pp="oninput"in document;if(!pp){var rw=document.createElement("div");rw.setAttribute("oninput","return;"),pp=typeof rw.oninput=="function"}fp=pp}else fp=!1;_b=fp&&(!document.documentMode||9<document.documentMode)}function iw(){Gl&&(Gl.detachEvent("onpropertychange",wb),gc=Gl=null)}function wb(t){if(t.propertyName==="value"&&Xh(gc)){var e=[];vb(e,gc,t,vy(t)),ZT(JR,e)}}function YR(t,e,n){t==="focusin"?(iw(),Gl=e,gc=n,Gl.attachEvent("onpropertychange",wb)):t==="focusout"&&iw()}function XR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xh(gc)}function ZR(t,e){if(t==="click")return Xh(e)}function ex(t,e){if(t==="input"||t==="change")return Xh(e)}function tx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sr=typeof Object.is=="function"?Object.is:tx;function yc(t,e){if(Sr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!hm.call(e,i)||!Sr(t[i],e[i]))return!1}return!0}function sw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ow(t,e){var n=sw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sw(n)}}function Eb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Eb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Sb(){for(var t=window,e=Qd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qd(t.document)}return e}function Ay(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nx(t){var e=Sb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Eb(n.ownerDocument.documentElement,n)){if(r!==null&&Ay(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=ow(n,s);var o=ow(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rx=gi&&"documentMode"in document&&11>=document.documentMode,ra=null,xm=null,Kl=null,Om=!1;function aw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Om||ra==null||ra!==Qd(r)||(r=ra,"selectionStart"in r&&Ay(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Kl&&yc(Kl,r)||(Kl=r,r=rh(xm,"onSelect"),0<r.length&&(e=new by("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ra)))}function Hu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ia={animationend:Hu("Animation","AnimationEnd"),animationiteration:Hu("Animation","AnimationIteration"),animationstart:Hu("Animation","AnimationStart"),transitionend:Hu("Transition","TransitionEnd")},mp={},Tb={};gi&&(Tb=document.createElement("div").style,"AnimationEvent"in window||(delete ia.animationend.animation,delete ia.animationiteration.animation,delete ia.animationstart.animation),"TransitionEvent"in window||delete ia.transitionend.transition);function Zh(t){if(mp[t])return mp[t];if(!ia[t])return t;var e=ia[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Tb)return mp[t]=e[n];return t}var bb=Zh("animationend"),kb=Zh("animationiteration"),Ib=Zh("animationstart"),Ab=Zh("transitionend"),Cb=new Map,lw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xs(t,e){Cb.set(t,e),Po(e,[t])}for(var gp=0;gp<lw.length;gp++){var yp=lw[gp],ix=yp.toLowerCase(),sx=yp[0].toUpperCase()+yp.slice(1);xs(ix,"on"+sx)}xs(bb,"onAnimationEnd");xs(kb,"onAnimationIteration");xs(Ib,"onAnimationStart");xs("dblclick","onDoubleClick");xs("focusin","onFocus");xs("focusout","onBlur");xs(Ab,"onTransitionEnd");Ca("onMouseEnter",["mouseout","mouseover"]);Ca("onMouseLeave",["mouseout","mouseover"]);Ca("onPointerEnter",["pointerout","pointerover"]);Ca("onPointerLeave",["pointerout","pointerover"]);Po("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Po("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Po("onBeforeInput",["compositionend","keypress","textInput","paste"]);Po("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Po("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Po("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ox=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nl));function cw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,iR(r,e,void 0,t),t.currentTarget=null}function Pb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;cw(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;cw(i,a,u),s=l}}}if(Xd)throw t=Am,Xd=!1,Am=null,t}function Je(t,e){var n=e[Vm];n===void 0&&(n=e[Vm]=new Set);var r=t+"__bubble";n.has(r)||(Rb(e,t,2,!1),n.add(r))}function vp(t,e,n){var r=0;e&&(r|=4),Rb(n,t,r,e)}var Wu="_reactListening"+Math.random().toString(36).slice(2);function vc(t){if(!t[Wu]){t[Wu]=!0,VT.forEach(function(n){n!=="selectionchange"&&(ox.has(n)||vp(n,!1,t),vp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wu]||(e[Wu]=!0,vp("selectionchange",!1,e))}}function Rb(t,e,n,r){switch(fb(e)){case 1:var i=wR;break;case 4:i=ER;break;default:i=Sy}n=i.bind(null,e,n,t),i=void 0,!Im||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function _p(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ro(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}ZT(function(){var u=s,h=vy(n),p=[];e:{var g=Cb.get(t);if(g!==void 0){var T=by,S=t;switch(t){case"keypress":if(Ad(n)===0)break e;case"keydown":case"keyup":T=LR;break;case"focusin":S="focus",T=hp;break;case"focusout":S="blur",T=hp;break;case"beforeblur":case"afterblur":T=hp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Y_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=bR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=FR;break;case bb:case kb:case Ib:T=AR;break;case Ab:T=$R;break;case"scroll":T=SR;break;case"wheel":T=qR;break;case"copy":case"cut":case"paste":T=PR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Z_}var E=(e&4)!==0,k=!E&&t==="scroll",_=E?g!==null?g+"Capture":null:g;E=[];for(var y=u,C;y!==null;){C=y;var L=C.stateNode;if(C.tag===5&&L!==null&&(C=L,_!==null&&(L=hc(y,_),L!=null&&E.push(_c(y,L,C)))),k)break;y=y.return}0<E.length&&(g=new T(g,S,null,n,h),p.push({event:g,listeners:E}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",g&&n!==bm&&(S=n.relatedTarget||n.fromElement)&&(ro(S)||S[yi]))break e;if((T||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,T?(S=n.relatedTarget||n.toElement,T=u,S=S?ro(S):null,S!==null&&(k=Ro(S),S!==k||S.tag!==5&&S.tag!==6)&&(S=null)):(T=null,S=u),T!==S)){if(E=Y_,L="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(E=Z_,L="onPointerLeave",_="onPointerEnter",y="pointer"),k=T==null?g:sa(T),C=S==null?g:sa(S),g=new E(L,y+"leave",T,n,h),g.target=k,g.relatedTarget=C,L=null,ro(h)===u&&(E=new E(_,y+"enter",S,n,h),E.target=C,E.relatedTarget=k,L=E),k=L,T&&S)t:{for(E=T,_=S,y=0,C=E;C;C=Ko(C))y++;for(C=0,L=_;L;L=Ko(L))C++;for(;0<y-C;)E=Ko(E),y--;for(;0<C-y;)_=Ko(_),C--;for(;y--;){if(E===_||_!==null&&E===_.alternate)break t;E=Ko(E),_=Ko(_)}E=null}else E=null;T!==null&&uw(p,g,T,E,!1),S!==null&&k!==null&&uw(p,k,S,E,!0)}}e:{if(g=u?sa(u):window,T=g.nodeName&&g.nodeName.toLowerCase(),T==="select"||T==="input"&&g.type==="file")var $=QR;else if(nw(g))if(_b)$=ex;else{$=XR;var q=YR}else(T=g.nodeName)&&T.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&($=ZR);if($&&($=$(t,u))){vb(p,$,n,h);break e}q&&q(t,g,u),t==="focusout"&&(q=g._wrapperState)&&q.controlled&&g.type==="number"&&_m(g,"number",g.value)}switch(q=u?sa(u):window,t){case"focusin":(nw(q)||q.contentEditable==="true")&&(ra=q,xm=u,Kl=null);break;case"focusout":Kl=xm=ra=null;break;case"mousedown":Om=!0;break;case"contextmenu":case"mouseup":case"dragend":Om=!1,aw(p,n,h);break;case"selectionchange":if(rx)break;case"keydown":case"keyup":aw(p,n,h)}var P;if(Iy)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else na?gb(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(mb&&n.locale!=="ko"&&(na||I!=="onCompositionStart"?I==="onCompositionEnd"&&na&&(P=pb()):(ns=h,Ty="value"in ns?ns.value:ns.textContent,na=!0)),q=rh(u,I),0<q.length&&(I=new X_(I,t,null,n,h),p.push({event:I,listeners:q}),P?I.data=P:(P=yb(n),P!==null&&(I.data=P)))),(P=HR?WR(t,n):GR(t,n))&&(u=rh(u,"onBeforeInput"),0<u.length&&(h=new X_("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:u}),h.data=P))}Pb(p,e)})}function _c(t,e,n){return{instance:t,listener:e,currentTarget:n}}function rh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=hc(t,n),s!=null&&r.unshift(_c(t,s,i)),s=hc(t,e),s!=null&&r.push(_c(t,s,i))),t=t.return}return r}function Ko(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function uw(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=hc(n,s),l!=null&&o.unshift(_c(n,l,a))):i||(l=hc(n,s),l!=null&&o.push(_c(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ax=/\r\n?/g,lx=/\u0000|\uFFFD/g;function dw(t){return(typeof t=="string"?t:""+t).replace(ax,`
`).replace(lx,"")}function Gu(t,e,n){if(e=dw(e),dw(t)!==e&&n)throw Error(Y(425))}function ih(){}var Dm=null,Nm=null;function Mm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Lm=typeof setTimeout=="function"?setTimeout:void 0,cx=typeof clearTimeout=="function"?clearTimeout:void 0,hw=typeof Promise=="function"?Promise:void 0,ux=typeof queueMicrotask=="function"?queueMicrotask:typeof hw<"u"?function(t){return hw.resolve(null).then(t).catch(dx)}:Lm;function dx(t){setTimeout(function(){throw t})}function wp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),mc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);mc(e)}function cs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function fw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ya=Math.random().toString(36).slice(2),Lr="__reactFiber$"+Ya,wc="__reactProps$"+Ya,yi="__reactContainer$"+Ya,Vm="__reactEvents$"+Ya,hx="__reactListeners$"+Ya,fx="__reactHandles$"+Ya;function ro(t){var e=t[Lr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[yi]||n[Lr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=fw(t);t!==null;){if(n=t[Lr])return n;t=fw(t)}return e}t=n,n=t.parentNode}return null}function qc(t){return t=t[Lr]||t[yi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function ef(t){return t[wc]||null}var jm=[],oa=-1;function Os(t){return{current:t}}function Qe(t){0>oa||(t.current=jm[oa],jm[oa]=null,oa--)}function Ke(t,e){oa++,jm[oa]=t.current,t.current=e}var Ss={},Zt=Os(Ss),En=Os(!1),mo=Ss;function Pa(t,e){var n=t.type.contextTypes;if(!n)return Ss;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Sn(t){return t=t.childContextTypes,t!=null}function sh(){Qe(En),Qe(Zt)}function pw(t,e,n){if(Zt.current!==Ss)throw Error(Y(168));Ke(Zt,e),Ke(En,n)}function xb(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Y(108,YP(t)||"Unknown",i));return it({},n,r)}function oh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ss,mo=Zt.current,Ke(Zt,t),Ke(En,En.current),!0}function mw(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=xb(t,e,mo),r.__reactInternalMemoizedMergedChildContext=t,Qe(En),Qe(Zt),Ke(Zt,t)):Qe(En),Ke(En,n)}var ri=null,tf=!1,Ep=!1;function Ob(t){ri===null?ri=[t]:ri.push(t)}function px(t){tf=!0,Ob(t)}function Ds(){if(!Ep&&ri!==null){Ep=!0;var t=0,e=je;try{var n=ri;for(je=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ri=null,tf=!1}catch(i){throw ri!==null&&(ri=ri.slice(t+1)),rb(_y,Ds),i}finally{je=e,Ep=!1}}return null}var aa=[],la=0,ah=null,lh=0,$n=[],Bn=0,go=null,si=1,oi="";function eo(t,e){aa[la++]=lh,aa[la++]=ah,ah=t,lh=e}function Db(t,e,n){$n[Bn++]=si,$n[Bn++]=oi,$n[Bn++]=go,go=t;var r=si;t=oi;var i=32-gr(r)-1;r&=~(1<<i),n+=1;var s=32-gr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,si=1<<32-gr(e)+i|n<<i|r,oi=s+t}else si=1<<s|n<<i|r,oi=t}function Cy(t){t.return!==null&&(eo(t,1),Db(t,1,0))}function Py(t){for(;t===ah;)ah=aa[--la],aa[la]=null,lh=aa[--la],aa[la]=null;for(;t===go;)go=$n[--Bn],$n[Bn]=null,oi=$n[--Bn],$n[Bn]=null,si=$n[--Bn],$n[Bn]=null}var On=null,Pn=null,Ze=!1,pr=null;function Nb(t,e){var n=zn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function gw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,On=t,Pn=cs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,On=t,Pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=go!==null?{id:si,overflow:oi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=zn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,On=t,Pn=null,!0):!1;default:return!1}}function Fm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Um(t){if(Ze){var e=Pn;if(e){var n=e;if(!gw(t,e)){if(Fm(t))throw Error(Y(418));e=cs(n.nextSibling);var r=On;e&&gw(t,e)?Nb(r,n):(t.flags=t.flags&-4097|2,Ze=!1,On=t)}}else{if(Fm(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Ze=!1,On=t}}}function yw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;On=t}function Ku(t){if(t!==On)return!1;if(!Ze)return yw(t),Ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mm(t.type,t.memoizedProps)),e&&(e=Pn)){if(Fm(t))throw Mb(),Error(Y(418));for(;e;)Nb(t,e),e=cs(e.nextSibling)}if(yw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pn=cs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pn=null}}else Pn=On?cs(t.stateNode.nextSibling):null;return!0}function Mb(){for(var t=Pn;t;)t=cs(t.nextSibling)}function Ra(){Pn=On=null,Ze=!1}function Ry(t){pr===null?pr=[t]:pr.push(t)}var mx=Ii.ReactCurrentBatchConfig;function kl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function Ju(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vw(t){var e=t._init;return e(t._payload)}function Lb(t){function e(_,y){if(t){var C=_.deletions;C===null?(_.deletions=[y],_.flags|=16):C.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function i(_,y){return _=fs(_,y),_.index=0,_.sibling=null,_}function s(_,y,C){return _.index=C,t?(C=_.alternate,C!==null?(C=C.index,C<y?(_.flags|=2,y):C):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,C,L){return y===null||y.tag!==6?(y=Cp(C,_.mode,L),y.return=_,y):(y=i(y,C),y.return=_,y)}function l(_,y,C,L){var $=C.type;return $===ta?h(_,y,C.props.children,L,C.key):y!==null&&(y.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Gi&&vw($)===y.type)?(L=i(y,C.props),L.ref=kl(_,y,C),L.return=_,L):(L=Nd(C.type,C.key,C.props,null,_.mode,L),L.ref=kl(_,y,C),L.return=_,L)}function u(_,y,C,L){return y===null||y.tag!==4||y.stateNode.containerInfo!==C.containerInfo||y.stateNode.implementation!==C.implementation?(y=Pp(C,_.mode,L),y.return=_,y):(y=i(y,C.children||[]),y.return=_,y)}function h(_,y,C,L,$){return y===null||y.tag!==7?(y=co(C,_.mode,L,$),y.return=_,y):(y=i(y,C),y.return=_,y)}function p(_,y,C){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Cp(""+y,_.mode,C),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ju:return C=Nd(y.type,y.key,y.props,null,_.mode,C),C.ref=kl(_,null,y),C.return=_,C;case ea:return y=Pp(y,_.mode,C),y.return=_,y;case Gi:var L=y._init;return p(_,L(y._payload),C)}if(Ol(y)||wl(y))return y=co(y,_.mode,C,null),y.return=_,y;Ju(_,y)}return null}function g(_,y,C,L){var $=y!==null?y.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return $!==null?null:a(_,y,""+C,L);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ju:return C.key===$?l(_,y,C,L):null;case ea:return C.key===$?u(_,y,C,L):null;case Gi:return $=C._init,g(_,y,$(C._payload),L)}if(Ol(C)||wl(C))return $!==null?null:h(_,y,C,L,null);Ju(_,C)}return null}function T(_,y,C,L,$){if(typeof L=="string"&&L!==""||typeof L=="number")return _=_.get(C)||null,a(y,_,""+L,$);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case ju:return _=_.get(L.key===null?C:L.key)||null,l(y,_,L,$);case ea:return _=_.get(L.key===null?C:L.key)||null,u(y,_,L,$);case Gi:var q=L._init;return T(_,y,C,q(L._payload),$)}if(Ol(L)||wl(L))return _=_.get(C)||null,h(y,_,L,$,null);Ju(y,L)}return null}function S(_,y,C,L){for(var $=null,q=null,P=y,I=y=0,R=null;P!==null&&I<C.length;I++){P.index>I?(R=P,P=null):R=P.sibling;var x=g(_,P,C[I],L);if(x===null){P===null&&(P=R);break}t&&P&&x.alternate===null&&e(_,P),y=s(x,y,I),q===null?$=x:q.sibling=x,q=x,P=R}if(I===C.length)return n(_,P),Ze&&eo(_,I),$;if(P===null){for(;I<C.length;I++)P=p(_,C[I],L),P!==null&&(y=s(P,y,I),q===null?$=P:q.sibling=P,q=P);return Ze&&eo(_,I),$}for(P=r(_,P);I<C.length;I++)R=T(P,_,I,C[I],L),R!==null&&(t&&R.alternate!==null&&P.delete(R.key===null?I:R.key),y=s(R,y,I),q===null?$=R:q.sibling=R,q=R);return t&&P.forEach(function(b){return e(_,b)}),Ze&&eo(_,I),$}function E(_,y,C,L){var $=wl(C);if(typeof $!="function")throw Error(Y(150));if(C=$.call(C),C==null)throw Error(Y(151));for(var q=$=null,P=y,I=y=0,R=null,x=C.next();P!==null&&!x.done;I++,x=C.next()){P.index>I?(R=P,P=null):R=P.sibling;var b=g(_,P,x.value,L);if(b===null){P===null&&(P=R);break}t&&P&&b.alternate===null&&e(_,P),y=s(b,y,I),q===null?$=b:q.sibling=b,q=b,P=R}if(x.done)return n(_,P),Ze&&eo(_,I),$;if(P===null){for(;!x.done;I++,x=C.next())x=p(_,x.value,L),x!==null&&(y=s(x,y,I),q===null?$=x:q.sibling=x,q=x);return Ze&&eo(_,I),$}for(P=r(_,P);!x.done;I++,x=C.next())x=T(P,_,I,x.value,L),x!==null&&(t&&x.alternate!==null&&P.delete(x.key===null?I:x.key),y=s(x,y,I),q===null?$=x:q.sibling=x,q=x);return t&&P.forEach(function(V){return e(_,V)}),Ze&&eo(_,I),$}function k(_,y,C,L){if(typeof C=="object"&&C!==null&&C.type===ta&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case ju:e:{for(var $=C.key,q=y;q!==null;){if(q.key===$){if($=C.type,$===ta){if(q.tag===7){n(_,q.sibling),y=i(q,C.props.children),y.return=_,_=y;break e}}else if(q.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Gi&&vw($)===q.type){n(_,q.sibling),y=i(q,C.props),y.ref=kl(_,q,C),y.return=_,_=y;break e}n(_,q);break}else e(_,q);q=q.sibling}C.type===ta?(y=co(C.props.children,_.mode,L,C.key),y.return=_,_=y):(L=Nd(C.type,C.key,C.props,null,_.mode,L),L.ref=kl(_,y,C),L.return=_,_=L)}return o(_);case ea:e:{for(q=C.key;y!==null;){if(y.key===q)if(y.tag===4&&y.stateNode.containerInfo===C.containerInfo&&y.stateNode.implementation===C.implementation){n(_,y.sibling),y=i(y,C.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=Pp(C,_.mode,L),y.return=_,_=y}return o(_);case Gi:return q=C._init,k(_,y,q(C._payload),L)}if(Ol(C))return S(_,y,C,L);if(wl(C))return E(_,y,C,L);Ju(_,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,y!==null&&y.tag===6?(n(_,y.sibling),y=i(y,C),y.return=_,_=y):(n(_,y),y=Cp(C,_.mode,L),y.return=_,_=y),o(_)):n(_,y)}return k}var xa=Lb(!0),Vb=Lb(!1),ch=Os(null),uh=null,ca=null,xy=null;function Oy(){xy=ca=uh=null}function Dy(t){var e=ch.current;Qe(ch),t._currentValue=e}function $m(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function va(t,e){uh=t,xy=ca=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wn=!0),t.firstContext=null)}function Jn(t){var e=t._currentValue;if(xy!==t)if(t={context:t,memoizedValue:e,next:null},ca===null){if(uh===null)throw Error(Y(308));ca=t,uh.dependencies={lanes:0,firstContext:t}}else ca=ca.next=t;return e}var io=null;function Ny(t){io===null?io=[t]:io.push(t)}function jb(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ny(e)):(n.next=i.next,i.next=n),e.interleaved=n,vi(t,r)}function vi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ki=!1;function My(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function di(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function us(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,vi(t,n)}return i=r.interleaved,i===null?(e.next=e,Ny(r)):(e.next=i.next,i.next=e),r.interleaved=e,vi(t,n)}function Cd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wy(t,n)}}function _w(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function dh(t,e,n,r){var i=t.updateQueue;Ki=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;o=0,h=u=l=null,a=s;do{var g=a.lane,T=a.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:T,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=t,E=a;switch(g=e,T=n,E.tag){case 1:if(S=E.payload,typeof S=="function"){p=S.call(T,p,g);break e}p=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=E.payload,g=typeof S=="function"?S.call(T,p,g):S,g==null)break e;p=it({},p,g);break e;case 2:Ki=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[a]:g.push(a))}else T={eventTime:T,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=T,l=p):h=h.next=T,o|=g;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;g=a,a=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(h===null&&(l=p),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);vo|=o,t.lanes=o,t.memoizedState=p}}function ww(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Y(191,i));i.call(r)}}}var zc={},jr=Os(zc),Ec=Os(zc),Sc=Os(zc);function so(t){if(t===zc)throw Error(Y(174));return t}function Ly(t,e){switch(Ke(Sc,e),Ke(Ec,t),Ke(jr,zc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Em(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Em(e,t)}Qe(jr),Ke(jr,e)}function Oa(){Qe(jr),Qe(Ec),Qe(Sc)}function Ub(t){so(Sc.current);var e=so(jr.current),n=Em(e,t.type);e!==n&&(Ke(Ec,t),Ke(jr,n))}function Vy(t){Ec.current===t&&(Qe(jr),Qe(Ec))}var tt=Os(0);function hh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sp=[];function jy(){for(var t=0;t<Sp.length;t++)Sp[t]._workInProgressVersionPrimary=null;Sp.length=0}var Pd=Ii.ReactCurrentDispatcher,Tp=Ii.ReactCurrentBatchConfig,yo=0,rt=null,Et=null,Ct=null,fh=!1,Jl=!1,Tc=0,gx=0;function Ht(){throw Error(Y(321))}function Fy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Sr(t[n],e[n]))return!1;return!0}function Uy(t,e,n,r,i,s){if(yo=s,rt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pd.current=t===null||t.memoizedState===null?wx:Ex,t=n(r,i),Jl){s=0;do{if(Jl=!1,Tc=0,25<=s)throw Error(Y(301));s+=1,Ct=Et=null,e.updateQueue=null,Pd.current=Sx,t=n(r,i)}while(Jl)}if(Pd.current=ph,e=Et!==null&&Et.next!==null,yo=0,Ct=Et=rt=null,fh=!1,e)throw Error(Y(300));return t}function $y(){var t=Tc!==0;return Tc=0,t}function xr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?rt.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function Qn(){if(Et===null){var t=rt.alternate;t=t!==null?t.memoizedState:null}else t=Et.next;var e=Ct===null?rt.memoizedState:Ct.next;if(e!==null)Ct=e,Et=t;else{if(t===null)throw Error(Y(310));Et=t,t={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Ct===null?rt.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function bc(t,e){return typeof e=="function"?e(t):e}function bp(t){var e=Qn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=Et,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((yo&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,rt.lanes|=h,vo|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Sr(r,e.memoizedState)||(wn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,rt.lanes|=s,vo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function kp(t){var e=Qn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Sr(s,e.memoizedState)||(wn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function $b(){}function Bb(t,e){var n=rt,r=Qn(),i=e(),s=!Sr(r.memoizedState,i);if(s&&(r.memoizedState=i,wn=!0),r=r.queue,By(Hb.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ct!==null&&Ct.memoizedState.tag&1){if(n.flags|=2048,kc(9,zb.bind(null,n,r,i,e),void 0,null),xt===null)throw Error(Y(349));yo&30||qb(n,e,i)}return i}function qb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zb(t,e,n,r){e.value=n,e.getSnapshot=r,Wb(e)&&Gb(t)}function Hb(t,e,n){return n(function(){Wb(e)&&Gb(t)})}function Wb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Sr(t,n)}catch{return!0}}function Gb(t){var e=vi(t,1);e!==null&&yr(e,t,1,-1)}function Ew(t){var e=xr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bc,lastRenderedState:t},e.queue=t,t=t.dispatch=_x.bind(null,rt,t),[e.memoizedState,t]}function kc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Kb(){return Qn().memoizedState}function Rd(t,e,n,r){var i=xr();rt.flags|=t,i.memoizedState=kc(1|e,n,void 0,r===void 0?null:r)}function nf(t,e,n,r){var i=Qn();r=r===void 0?null:r;var s=void 0;if(Et!==null){var o=Et.memoizedState;if(s=o.destroy,r!==null&&Fy(r,o.deps)){i.memoizedState=kc(e,n,s,r);return}}rt.flags|=t,i.memoizedState=kc(1|e,n,s,r)}function Sw(t,e){return Rd(8390656,8,t,e)}function By(t,e){return nf(2048,8,t,e)}function Jb(t,e){return nf(4,2,t,e)}function Qb(t,e){return nf(4,4,t,e)}function Yb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Xb(t,e,n){return n=n!=null?n.concat([t]):null,nf(4,4,Yb.bind(null,e,t),n)}function qy(){}function Zb(t,e){var n=Qn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ek(t,e){var n=Qn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function tk(t,e,n){return yo&21?(Sr(n,e)||(n=ob(),rt.lanes|=n,vo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wn=!0),t.memoizedState=n)}function yx(t,e){var n=je;je=n!==0&&4>n?n:4,t(!0);var r=Tp.transition;Tp.transition={};try{t(!1),e()}finally{je=n,Tp.transition=r}}function nk(){return Qn().memoizedState}function vx(t,e,n){var r=hs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rk(t))ik(e,n);else if(n=jb(t,e,n,r),n!==null){var i=un();yr(n,t,r,i),sk(n,e,r)}}function _x(t,e,n){var r=hs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rk(t))ik(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Sr(a,o)){var l=e.interleaved;l===null?(i.next=i,Ny(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=jb(t,e,i,r),n!==null&&(i=un(),yr(n,t,r,i),sk(n,e,r))}}function rk(t){var e=t.alternate;return t===rt||e!==null&&e===rt}function ik(t,e){Jl=fh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wy(t,n)}}var ph={readContext:Jn,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},wx={readContext:Jn,useCallback:function(t,e){return xr().memoizedState=[t,e===void 0?null:e],t},useContext:Jn,useEffect:Sw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Rd(4194308,4,Yb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Rd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Rd(4,2,t,e)},useMemo:function(t,e){var n=xr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=xr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=vx.bind(null,rt,t),[r.memoizedState,t]},useRef:function(t){var e=xr();return t={current:t},e.memoizedState=t},useState:Ew,useDebugValue:qy,useDeferredValue:function(t){return xr().memoizedState=t},useTransition:function(){var t=Ew(!1),e=t[0];return t=yx.bind(null,t[1]),xr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=rt,i=xr();if(Ze){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),xt===null)throw Error(Y(349));yo&30||qb(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Sw(Hb.bind(null,r,s,t),[t]),r.flags|=2048,kc(9,zb.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=xr(),e=xt.identifierPrefix;if(Ze){var n=oi,r=si;n=(r&~(1<<32-gr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Tc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=gx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ex={readContext:Jn,useCallback:Zb,useContext:Jn,useEffect:By,useImperativeHandle:Xb,useInsertionEffect:Jb,useLayoutEffect:Qb,useMemo:ek,useReducer:bp,useRef:Kb,useState:function(){return bp(bc)},useDebugValue:qy,useDeferredValue:function(t){var e=Qn();return tk(e,Et.memoizedState,t)},useTransition:function(){var t=bp(bc)[0],e=Qn().memoizedState;return[t,e]},useMutableSource:$b,useSyncExternalStore:Bb,useId:nk,unstable_isNewReconciler:!1},Sx={readContext:Jn,useCallback:Zb,useContext:Jn,useEffect:By,useImperativeHandle:Xb,useInsertionEffect:Jb,useLayoutEffect:Qb,useMemo:ek,useReducer:kp,useRef:Kb,useState:function(){return kp(bc)},useDebugValue:qy,useDeferredValue:function(t){var e=Qn();return Et===null?e.memoizedState=t:tk(e,Et.memoizedState,t)},useTransition:function(){var t=kp(bc)[0],e=Qn().memoizedState;return[t,e]},useMutableSource:$b,useSyncExternalStore:Bb,useId:nk,unstable_isNewReconciler:!1};function hr(t,e){if(t&&t.defaultProps){e=it({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:it({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var rf={isMounted:function(t){return(t=t._reactInternals)?Ro(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=un(),i=hs(t),s=di(r,i);s.payload=e,n!=null&&(s.callback=n),e=us(t,s,i),e!==null&&(yr(e,t,i,r),Cd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=un(),i=hs(t),s=di(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=us(t,s,i),e!==null&&(yr(e,t,i,r),Cd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=un(),r=hs(t),i=di(n,r);i.tag=2,e!=null&&(i.callback=e),e=us(t,i,r),e!==null&&(yr(e,t,r,n),Cd(e,t,r))}};function Tw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!yc(n,r)||!yc(i,s):!0}function ok(t,e,n){var r=!1,i=Ss,s=e.contextType;return typeof s=="object"&&s!==null?s=Jn(s):(i=Sn(e)?mo:Zt.current,r=e.contextTypes,s=(r=r!=null)?Pa(t,i):Ss),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function bw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&rf.enqueueReplaceState(e,e.state,null)}function qm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},My(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Jn(s):(s=Sn(e)?mo:Zt.current,i.context=Pa(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Bm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&rf.enqueueReplaceState(i,i.state,null),dh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Da(t,e){try{var n="",r=e;do n+=QP(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ip(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Tx=typeof WeakMap=="function"?WeakMap:Map;function ak(t,e,n){n=di(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){gh||(gh=!0,eg=r),zm(t,e)},n}function lk(t,e,n){n=di(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){zm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){zm(t,e),typeof r!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function kw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Tx;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Vx.bind(null,t,e,n),e.then(t,t))}function Iw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Aw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=di(-1,1),e.tag=2,us(n,e,1))),n.lanes|=1),t)}var bx=Ii.ReactCurrentOwner,wn=!1;function an(t,e,n,r){e.child=t===null?Vb(e,null,n,r):xa(e,t.child,n,r)}function Cw(t,e,n,r,i){n=n.render;var s=e.ref;return va(e,i),r=Uy(t,e,n,r,s,i),n=$y(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_i(t,e,i)):(Ze&&n&&Cy(e),e.flags|=1,an(t,e,r,i),e.child)}function Pw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Yy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,ck(t,e,s,r,i)):(t=Nd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:yc,n(o,r)&&t.ref===e.ref)return _i(t,e,i)}return e.flags|=1,t=fs(s,r),t.ref=e.ref,t.return=e,e.child=t}function ck(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(yc(s,r)&&t.ref===e.ref)if(wn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(wn=!0);else return e.lanes=t.lanes,_i(t,e,i)}return Hm(t,e,n,r,i)}function uk(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(da,An),An|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ke(da,An),An|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ke(da,An),An|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ke(da,An),An|=r;return an(t,e,i,n),e.child}function dk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Hm(t,e,n,r,i){var s=Sn(n)?mo:Zt.current;return s=Pa(e,s),va(e,i),n=Uy(t,e,n,r,s,i),r=$y(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_i(t,e,i)):(Ze&&r&&Cy(e),e.flags|=1,an(t,e,n,i),e.child)}function Rw(t,e,n,r,i){if(Sn(n)){var s=!0;oh(e)}else s=!1;if(va(e,i),e.stateNode===null)xd(t,e),ok(e,n,r),qm(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Jn(u):(u=Sn(n)?mo:Zt.current,u=Pa(e,u));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&bw(e,o,r,u),Ki=!1;var g=e.memoizedState;o.state=g,dh(e,r,o,i),l=e.memoizedState,a!==r||g!==l||En.current||Ki?(typeof h=="function"&&(Bm(e,n,h,r),l=e.memoizedState),(a=Ki||Tw(e,n,a,r,g,l,u))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Fb(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:hr(e.type,a),o.props=u,p=e.pendingProps,g=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Jn(l):(l=Sn(n)?mo:Zt.current,l=Pa(e,l));var T=n.getDerivedStateFromProps;(h=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||g!==l)&&bw(e,o,r,l),Ki=!1,g=e.memoizedState,o.state=g,dh(e,r,o,i);var S=e.memoizedState;a!==p||g!==S||En.current||Ki?(typeof T=="function"&&(Bm(e,n,T,r),S=e.memoizedState),(u=Ki||Tw(e,n,u,r,g,S,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Wm(t,e,n,r,s,i)}function Wm(t,e,n,r,i,s){dk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&mw(e,n,!1),_i(t,e,s);r=e.stateNode,bx.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=xa(e,t.child,null,s),e.child=xa(e,null,a,s)):an(t,e,a,s),e.memoizedState=r.state,i&&mw(e,n,!0),e.child}function hk(t){var e=t.stateNode;e.pendingContext?pw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&pw(t,e.context,!1),Ly(t,e.containerInfo)}function xw(t,e,n,r,i){return Ra(),Ry(i),e.flags|=256,an(t,e,n,r),e.child}var Gm={dehydrated:null,treeContext:null,retryLane:0};function Km(t){return{baseLanes:t,cachePool:null,transitions:null}}function fk(t,e,n){var r=e.pendingProps,i=tt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ke(tt,i&1),t===null)return Um(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=af(o,r,0,null),t=co(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Km(n),e.memoizedState=Gm,t):zy(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return kx(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=fs(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=fs(a,s):(s=co(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Km(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Gm,r}return s=t.child,t=s.sibling,r=fs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zy(t,e){return e=af({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qu(t,e,n,r){return r!==null&&Ry(r),xa(e,t.child,null,n),t=zy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kx(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ip(Error(Y(422))),Qu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=af({mode:"visible",children:r.children},i,0,null),s=co(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&xa(e,t.child,null,o),e.child.memoizedState=Km(o),e.memoizedState=Gm,s);if(!(e.mode&1))return Qu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Y(419)),r=Ip(s,r,void 0),Qu(t,e,o,r)}if(a=(o&t.childLanes)!==0,wn||a){if(r=xt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,vi(t,i),yr(r,t,i,-1))}return Qy(),r=Ip(Error(Y(421))),Qu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=jx.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Pn=cs(i.nextSibling),On=e,Ze=!0,pr=null,t!==null&&($n[Bn++]=si,$n[Bn++]=oi,$n[Bn++]=go,si=t.id,oi=t.overflow,go=e),e=zy(e,r.children),e.flags|=4096,e)}function Ow(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),$m(t.return,e,n)}function Ap(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function pk(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(an(t,e,r.children,n),r=tt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ow(t,n,e);else if(t.tag===19)Ow(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ke(tt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&hh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ap(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&hh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ap(e,!0,n,null,s);break;case"together":Ap(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _i(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),vo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=fs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ix(t,e,n){switch(e.tag){case 3:hk(e),Ra();break;case 5:Ub(e);break;case 1:Sn(e.type)&&oh(e);break;case 4:Ly(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ke(ch,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ke(tt,tt.current&1),e.flags|=128,null):n&e.child.childLanes?fk(t,e,n):(Ke(tt,tt.current&1),t=_i(t,e,n),t!==null?t.sibling:null);Ke(tt,tt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return pk(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ke(tt,tt.current),r)break;return null;case 22:case 23:return e.lanes=0,uk(t,e,n)}return _i(t,e,n)}var mk,Jm,gk,yk;mk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jm=function(){};gk=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,so(jr.current);var s=null;switch(n){case"input":i=ym(t,i),r=ym(t,r),s=[];break;case"select":i=it({},i,{value:void 0}),r=it({},r,{value:void 0}),s=[];break;case"textarea":i=wm(t,i),r=wm(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ih)}Sm(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(uc.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(uc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Je("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};yk=function(t,e,n,r){n!==r&&(e.flags|=4)};function Il(t,e){if(!Ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ax(t,e,n){var r=e.pendingProps;switch(Py(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(e),null;case 1:return Sn(e.type)&&sh(),Wt(e),null;case 3:return r=e.stateNode,Oa(),Qe(En),Qe(Zt),jy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ku(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pr!==null&&(rg(pr),pr=null))),Jm(t,e),Wt(e),null;case 5:Vy(e);var i=so(Sc.current);if(n=e.type,t!==null&&e.stateNode!=null)gk(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return Wt(e),null}if(t=so(jr.current),Ku(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Lr]=e,r[wc]=s,t=(e.mode&1)!==0,n){case"dialog":Je("cancel",r),Je("close",r);break;case"iframe":case"object":case"embed":Je("load",r);break;case"video":case"audio":for(i=0;i<Nl.length;i++)Je(Nl[i],r);break;case"source":Je("error",r);break;case"img":case"image":case"link":Je("error",r),Je("load",r);break;case"details":Je("toggle",r);break;case"input":$_(r,s),Je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Je("invalid",r);break;case"textarea":q_(r,s),Je("invalid",r)}Sm(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Gu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Gu(r.textContent,a,t),i=["children",""+a]):uc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Je("scroll",r)}switch(n){case"input":Fu(r),B_(r,s,!0);break;case"textarea":Fu(r),z_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ih)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=HT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Lr]=e,t[wc]=r,mk(t,e,!1,!1),e.stateNode=t;e:{switch(o=Tm(n,r),n){case"dialog":Je("cancel",t),Je("close",t),i=r;break;case"iframe":case"object":case"embed":Je("load",t),i=r;break;case"video":case"audio":for(i=0;i<Nl.length;i++)Je(Nl[i],t);i=r;break;case"source":Je("error",t),i=r;break;case"img":case"image":case"link":Je("error",t),Je("load",t),i=r;break;case"details":Je("toggle",t),i=r;break;case"input":$_(t,r),i=ym(t,r),Je("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=it({},r,{value:void 0}),Je("invalid",t);break;case"textarea":q_(t,r),i=wm(t,r),Je("invalid",t);break;default:i=r}Sm(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?KT(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&WT(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&dc(t,l):typeof l=="number"&&dc(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(uc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Je("scroll",t):l!=null&&py(t,s,l,o))}switch(n){case"input":Fu(t),B_(t,r,!1);break;case"textarea":Fu(t),z_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Es(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?pa(t,!!r.multiple,s,!1):r.defaultValue!=null&&pa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ih)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wt(e),null;case 6:if(t&&e.stateNode!=null)yk(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=so(Sc.current),so(jr.current),Ku(e)){if(r=e.stateNode,n=e.memoizedProps,r[Lr]=e,(s=r.nodeValue!==n)&&(t=On,t!==null))switch(t.tag){case 3:Gu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Gu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Lr]=e,e.stateNode=r}return Wt(e),null;case 13:if(Qe(tt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ze&&Pn!==null&&e.mode&1&&!(e.flags&128))Mb(),Ra(),e.flags|=98560,s=!1;else if(s=Ku(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Y(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Y(317));s[Lr]=e}else Ra(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wt(e),s=!1}else pr!==null&&(rg(pr),pr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||tt.current&1?St===0&&(St=3):Qy())),e.updateQueue!==null&&(e.flags|=4),Wt(e),null);case 4:return Oa(),Jm(t,e),t===null&&vc(e.stateNode.containerInfo),Wt(e),null;case 10:return Dy(e.type._context),Wt(e),null;case 17:return Sn(e.type)&&sh(),Wt(e),null;case 19:if(Qe(tt),s=e.memoizedState,s===null)return Wt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Il(s,!1);else{if(St!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=hh(t),o!==null){for(e.flags|=128,Il(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ke(tt,tt.current&1|2),e.child}t=t.sibling}s.tail!==null&&dt()>Na&&(e.flags|=128,r=!0,Il(s,!1),e.lanes=4194304)}else{if(!r)if(t=hh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Il(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ze)return Wt(e),null}else 2*dt()-s.renderingStartTime>Na&&n!==1073741824&&(e.flags|=128,r=!0,Il(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=dt(),e.sibling=null,n=tt.current,Ke(tt,r?n&1|2:n&1),e):(Wt(e),null);case 22:case 23:return Jy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?An&1073741824&&(Wt(e),e.subtreeFlags&6&&(e.flags|=8192)):Wt(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function Cx(t,e){switch(Py(e),e.tag){case 1:return Sn(e.type)&&sh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Oa(),Qe(En),Qe(Zt),jy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Vy(e),null;case 13:if(Qe(tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Ra()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qe(tt),null;case 4:return Oa(),null;case 10:return Dy(e.type._context),null;case 22:case 23:return Jy(),null;case 24:return null;default:return null}}var Yu=!1,Jt=!1,Px=typeof WeakSet=="function"?WeakSet:Set,se=null;function ua(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){lt(t,e,r)}else n.current=null}function Qm(t,e,n){try{n()}catch(r){lt(t,e,r)}}var Dw=!1;function Rx(t,e){if(Dm=th,t=Sb(),Ay(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,p=t,g=null;t:for(;;){for(var T;p!==n||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(T=p.firstChild)!==null;)g=p,p=T;for(;;){if(p===t)break t;if(g===n&&++u===i&&(a=o),g===s&&++h===r&&(l=o),(T=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=T}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Nm={focusedElem:t,selectionRange:n},th=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var E=S.memoizedProps,k=S.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?E:hr(e.type,E),k);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(L){lt(e,e.return,L)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return S=Dw,Dw=!1,S}function Ql(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Qm(e,n,s)}i=i.next}while(i!==r)}}function sf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ym(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function vk(t){var e=t.alternate;e!==null&&(t.alternate=null,vk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Lr],delete e[wc],delete e[Vm],delete e[hx],delete e[fx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _k(t){return t.tag===5||t.tag===3||t.tag===4}function Nw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_k(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ih));else if(r!==4&&(t=t.child,t!==null))for(Xm(t,e,n),t=t.sibling;t!==null;)Xm(t,e,n),t=t.sibling}function Zm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Zm(t,e,n),t=t.sibling;t!==null;)Zm(t,e,n),t=t.sibling}var Vt=null,fr=!1;function $i(t,e,n){for(n=n.child;n!==null;)wk(t,e,n),n=n.sibling}function wk(t,e,n){if(Vr&&typeof Vr.onCommitFiberUnmount=="function")try{Vr.onCommitFiberUnmount(Qh,n)}catch{}switch(n.tag){case 5:Jt||ua(n,e);case 6:var r=Vt,i=fr;Vt=null,$i(t,e,n),Vt=r,fr=i,Vt!==null&&(fr?(t=Vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Vt.removeChild(n.stateNode));break;case 18:Vt!==null&&(fr?(t=Vt,n=n.stateNode,t.nodeType===8?wp(t.parentNode,n):t.nodeType===1&&wp(t,n),mc(t)):wp(Vt,n.stateNode));break;case 4:r=Vt,i=fr,Vt=n.stateNode.containerInfo,fr=!0,$i(t,e,n),Vt=r,fr=i;break;case 0:case 11:case 14:case 15:if(!Jt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Qm(n,e,o),i=i.next}while(i!==r)}$i(t,e,n);break;case 1:if(!Jt&&(ua(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){lt(n,e,a)}$i(t,e,n);break;case 21:$i(t,e,n);break;case 22:n.mode&1?(Jt=(r=Jt)||n.memoizedState!==null,$i(t,e,n),Jt=r):$i(t,e,n);break;default:$i(t,e,n)}}function Mw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Px),e.forEach(function(r){var i=Fx.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function cr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Vt=a.stateNode,fr=!1;break e;case 3:Vt=a.stateNode.containerInfo,fr=!0;break e;case 4:Vt=a.stateNode.containerInfo,fr=!0;break e}a=a.return}if(Vt===null)throw Error(Y(160));wk(s,o,i),Vt=null,fr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){lt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ek(e,t),e=e.sibling}function Ek(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cr(e,t),Rr(t),r&4){try{Ql(3,t,t.return),sf(3,t)}catch(E){lt(t,t.return,E)}try{Ql(5,t,t.return)}catch(E){lt(t,t.return,E)}}break;case 1:cr(e,t),Rr(t),r&512&&n!==null&&ua(n,n.return);break;case 5:if(cr(e,t),Rr(t),r&512&&n!==null&&ua(n,n.return),t.flags&32){var i=t.stateNode;try{dc(i,"")}catch(E){lt(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&qT(i,s),Tm(a,o);var u=Tm(a,s);for(o=0;o<l.length;o+=2){var h=l[o],p=l[o+1];h==="style"?KT(i,p):h==="dangerouslySetInnerHTML"?WT(i,p):h==="children"?dc(i,p):py(i,h,p,u)}switch(a){case"input":vm(i,s);break;case"textarea":zT(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var T=s.value;T!=null?pa(i,!!s.multiple,T,!1):g!==!!s.multiple&&(s.defaultValue!=null?pa(i,!!s.multiple,s.defaultValue,!0):pa(i,!!s.multiple,s.multiple?[]:"",!1))}i[wc]=s}catch(E){lt(t,t.return,E)}}break;case 6:if(cr(e,t),Rr(t),r&4){if(t.stateNode===null)throw Error(Y(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){lt(t,t.return,E)}}break;case 3:if(cr(e,t),Rr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{mc(e.containerInfo)}catch(E){lt(t,t.return,E)}break;case 4:cr(e,t),Rr(t);break;case 13:cr(e,t),Rr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Gy=dt())),r&4&&Mw(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Jt=(u=Jt)||h,cr(e,t),Jt=u):cr(e,t),Rr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(se=t,h=t.child;h!==null;){for(p=se=h;se!==null;){switch(g=se,T=g.child,g.tag){case 0:case 11:case 14:case 15:Ql(4,g,g.return);break;case 1:ua(g,g.return);var S=g.stateNode;if(typeof S.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(E){lt(r,n,E)}}break;case 5:ua(g,g.return);break;case 22:if(g.memoizedState!==null){Vw(p);continue}}T!==null?(T.return=g,se=T):Vw(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=GT("display",o))}catch(E){lt(t,t.return,E)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(E){lt(t,t.return,E)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:cr(e,t),Rr(t),r&4&&Mw(t);break;case 21:break;default:cr(e,t),Rr(t)}}function Rr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_k(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(dc(i,""),r.flags&=-33);var s=Nw(t);Zm(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Nw(t);Xm(t,a,o);break;default:throw Error(Y(161))}}catch(l){lt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xx(t,e,n){se=t,Sk(t)}function Sk(t,e,n){for(var r=(t.mode&1)!==0;se!==null;){var i=se,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Yu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Jt;a=Yu;var u=Jt;if(Yu=o,(Jt=l)&&!u)for(se=i;se!==null;)o=se,l=o.child,o.tag===22&&o.memoizedState!==null?jw(i):l!==null?(l.return=o,se=l):jw(i);for(;s!==null;)se=s,Sk(s),s=s.sibling;se=i,Yu=a,Jt=u}Lw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,se=s):Lw(t)}}function Lw(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jt||sf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Jt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:hr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ww(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ww(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&mc(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Jt||e.flags&512&&Ym(e)}catch(g){lt(e,e.return,g)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function Vw(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function jw(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sf(4,e)}catch(l){lt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){lt(e,i,l)}}var s=e.return;try{Ym(e)}catch(l){lt(e,s,l)}break;case 5:var o=e.return;try{Ym(e)}catch(l){lt(e,o,l)}}}catch(l){lt(e,e.return,l)}if(e===t){se=null;break}var a=e.sibling;if(a!==null){a.return=e.return,se=a;break}se=e.return}}var Ox=Math.ceil,mh=Ii.ReactCurrentDispatcher,Hy=Ii.ReactCurrentOwner,Wn=Ii.ReactCurrentBatchConfig,xe=0,xt=null,mt=null,Ut=0,An=0,da=Os(0),St=0,Ic=null,vo=0,of=0,Wy=0,Yl=null,yn=null,Gy=0,Na=1/0,ei=null,gh=!1,eg=null,ds=null,Xu=!1,rs=null,yh=0,Xl=0,tg=null,Od=-1,Dd=0;function un(){return xe&6?dt():Od!==-1?Od:Od=dt()}function hs(t){return t.mode&1?xe&2&&Ut!==0?Ut&-Ut:mx.transition!==null?(Dd===0&&(Dd=ob()),Dd):(t=je,t!==0||(t=window.event,t=t===void 0?16:fb(t.type)),t):1}function yr(t,e,n,r){if(50<Xl)throw Xl=0,tg=null,Error(Y(185));$c(t,n,r),(!(xe&2)||t!==xt)&&(t===xt&&(!(xe&2)&&(of|=n),St===4&&Yi(t,Ut)),Tn(t,r),n===1&&xe===0&&!(e.mode&1)&&(Na=dt()+500,tf&&Ds()))}function Tn(t,e){var n=t.callbackNode;mR(t,e);var r=eh(t,t===xt?Ut:0);if(r===0)n!==null&&G_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&G_(n),e===1)t.tag===0?px(Fw.bind(null,t)):Ob(Fw.bind(null,t)),ux(function(){!(xe&6)&&Ds()}),n=null;else{switch(ab(r)){case 1:n=_y;break;case 4:n=ib;break;case 16:n=Zd;break;case 536870912:n=sb;break;default:n=Zd}n=Rk(n,Tk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Tk(t,e){if(Od=-1,Dd=0,xe&6)throw Error(Y(327));var n=t.callbackNode;if(_a()&&t.callbackNode!==n)return null;var r=eh(t,t===xt?Ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=vh(t,r);else{e=r;var i=xe;xe|=2;var s=kk();(xt!==t||Ut!==e)&&(ei=null,Na=dt()+500,lo(t,e));do try{Mx();break}catch(a){bk(t,a)}while(!0);Oy(),mh.current=s,xe=i,mt!==null?e=0:(xt=null,Ut=0,e=St)}if(e!==0){if(e===2&&(i=Cm(t),i!==0&&(r=i,e=ng(t,i))),e===1)throw n=Ic,lo(t,0),Yi(t,r),Tn(t,dt()),n;if(e===6)Yi(t,r);else{if(i=t.current.alternate,!(r&30)&&!Dx(i)&&(e=vh(t,r),e===2&&(s=Cm(t),s!==0&&(r=s,e=ng(t,s))),e===1))throw n=Ic,lo(t,0),Yi(t,r),Tn(t,dt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:to(t,yn,ei);break;case 3:if(Yi(t,r),(r&130023424)===r&&(e=Gy+500-dt(),10<e)){if(eh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){un(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Lm(to.bind(null,t,yn,ei),e);break}to(t,yn,ei);break;case 4:if(Yi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-gr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=dt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ox(r/1960))-r,10<r){t.timeoutHandle=Lm(to.bind(null,t,yn,ei),r);break}to(t,yn,ei);break;case 5:to(t,yn,ei);break;default:throw Error(Y(329))}}}return Tn(t,dt()),t.callbackNode===n?Tk.bind(null,t):null}function ng(t,e){var n=Yl;return t.current.memoizedState.isDehydrated&&(lo(t,e).flags|=256),t=vh(t,e),t!==2&&(e=yn,yn=n,e!==null&&rg(e)),t}function rg(t){yn===null?yn=t:yn.push.apply(yn,t)}function Dx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Sr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yi(t,e){for(e&=~Wy,e&=~of,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gr(e),r=1<<n;t[n]=-1,e&=~r}}function Fw(t){if(xe&6)throw Error(Y(327));_a();var e=eh(t,0);if(!(e&1))return Tn(t,dt()),null;var n=vh(t,e);if(t.tag!==0&&n===2){var r=Cm(t);r!==0&&(e=r,n=ng(t,r))}if(n===1)throw n=Ic,lo(t,0),Yi(t,e),Tn(t,dt()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,to(t,yn,ei),Tn(t,dt()),null}function Ky(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(Na=dt()+500,tf&&Ds())}}function _o(t){rs!==null&&rs.tag===0&&!(xe&6)&&_a();var e=xe;xe|=1;var n=Wn.transition,r=je;try{if(Wn.transition=null,je=1,t)return t()}finally{je=r,Wn.transition=n,xe=e,!(xe&6)&&Ds()}}function Jy(){An=da.current,Qe(da)}function lo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cx(n)),mt!==null)for(n=mt.return;n!==null;){var r=n;switch(Py(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sh();break;case 3:Oa(),Qe(En),Qe(Zt),jy();break;case 5:Vy(r);break;case 4:Oa();break;case 13:Qe(tt);break;case 19:Qe(tt);break;case 10:Dy(r.type._context);break;case 22:case 23:Jy()}n=n.return}if(xt=t,mt=t=fs(t.current,null),Ut=An=e,St=0,Ic=null,Wy=of=vo=0,yn=Yl=null,io!==null){for(e=0;e<io.length;e++)if(n=io[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}io=null}return t}function bk(t,e){do{var n=mt;try{if(Oy(),Pd.current=ph,fh){for(var r=rt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fh=!1}if(yo=0,Ct=Et=rt=null,Jl=!1,Tc=0,Hy.current=null,n===null||n.return===null){St=1,Ic=e,mt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ut,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var T=Iw(o);if(T!==null){T.flags&=-257,Aw(T,o,a,s,e),T.mode&1&&kw(s,u,e),e=T,l=u;var S=e.updateQueue;if(S===null){var E=new Set;E.add(l),e.updateQueue=E}else S.add(l);break e}else{if(!(e&1)){kw(s,u,e),Qy();break e}l=Error(Y(426))}}else if(Ze&&a.mode&1){var k=Iw(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Aw(k,o,a,s,e),Ry(Da(l,a));break e}}s=l=Da(l,a),St!==4&&(St=2),Yl===null?Yl=[s]:Yl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=ak(s,l,e);_w(s,_);break e;case 1:a=l;var y=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(ds===null||!ds.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var L=lk(s,a,e);_w(s,L);break e}}s=s.return}while(s!==null)}Ak(n)}catch($){e=$,mt===n&&n!==null&&(mt=n=n.return);continue}break}while(!0)}function kk(){var t=mh.current;return mh.current=ph,t===null?ph:t}function Qy(){(St===0||St===3||St===2)&&(St=4),xt===null||!(vo&268435455)&&!(of&268435455)||Yi(xt,Ut)}function vh(t,e){var n=xe;xe|=2;var r=kk();(xt!==t||Ut!==e)&&(ei=null,lo(t,e));do try{Nx();break}catch(i){bk(t,i)}while(!0);if(Oy(),xe=n,mh.current=r,mt!==null)throw Error(Y(261));return xt=null,Ut=0,St}function Nx(){for(;mt!==null;)Ik(mt)}function Mx(){for(;mt!==null&&!oR();)Ik(mt)}function Ik(t){var e=Pk(t.alternate,t,An);t.memoizedProps=t.pendingProps,e===null?Ak(t):mt=e,Hy.current=null}function Ak(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Cx(n,e),n!==null){n.flags&=32767,mt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{St=6,mt=null;return}}else if(n=Ax(n,e,An),n!==null){mt=n;return}if(e=e.sibling,e!==null){mt=e;return}mt=e=t}while(e!==null);St===0&&(St=5)}function to(t,e,n){var r=je,i=Wn.transition;try{Wn.transition=null,je=1,Lx(t,e,n,r)}finally{Wn.transition=i,je=r}return null}function Lx(t,e,n,r){do _a();while(rs!==null);if(xe&6)throw Error(Y(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(gR(t,s),t===xt&&(mt=xt=null,Ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xu||(Xu=!0,Rk(Zd,function(){return _a(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Wn.transition,Wn.transition=null;var o=je;je=1;var a=xe;xe|=4,Hy.current=null,Rx(t,n),Ek(n,t),nx(Nm),th=!!Dm,Nm=Dm=null,t.current=n,xx(n),aR(),xe=a,je=o,Wn.transition=s}else t.current=n;if(Xu&&(Xu=!1,rs=t,yh=i),s=t.pendingLanes,s===0&&(ds=null),uR(n.stateNode),Tn(t,dt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(gh)throw gh=!1,t=eg,eg=null,t;return yh&1&&t.tag!==0&&_a(),s=t.pendingLanes,s&1?t===tg?Xl++:(Xl=0,tg=t):Xl=0,Ds(),null}function _a(){if(rs!==null){var t=ab(yh),e=Wn.transition,n=je;try{if(Wn.transition=null,je=16>t?16:t,rs===null)var r=!1;else{if(t=rs,rs=null,yh=0,xe&6)throw Error(Y(331));var i=xe;for(xe|=4,se=t.current;se!==null;){var s=se,o=s.child;if(se.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(se=u;se!==null;){var h=se;switch(h.tag){case 0:case 11:case 15:Ql(8,h,s)}var p=h.child;if(p!==null)p.return=h,se=p;else for(;se!==null;){h=se;var g=h.sibling,T=h.return;if(vk(h),h===u){se=null;break}if(g!==null){g.return=T,se=g;break}se=T}}}var S=s.alternate;if(S!==null){var E=S.child;if(E!==null){S.child=null;do{var k=E.sibling;E.sibling=null,E=k}while(E!==null)}}se=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,se=o;else e:for(;se!==null;){if(s=se,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ql(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,se=_;break e}se=s.return}}var y=t.current;for(se=y;se!==null;){o=se;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,se=C;else e:for(o=y;se!==null;){if(a=se,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:sf(9,a)}}catch($){lt(a,a.return,$)}if(a===o){se=null;break e}var L=a.sibling;if(L!==null){L.return=a.return,se=L;break e}se=a.return}}if(xe=i,Ds(),Vr&&typeof Vr.onPostCommitFiberRoot=="function")try{Vr.onPostCommitFiberRoot(Qh,t)}catch{}r=!0}return r}finally{je=n,Wn.transition=e}}return!1}function Uw(t,e,n){e=Da(n,e),e=ak(t,e,1),t=us(t,e,1),e=un(),t!==null&&($c(t,1,e),Tn(t,e))}function lt(t,e,n){if(t.tag===3)Uw(t,t,n);else for(;e!==null;){if(e.tag===3){Uw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ds===null||!ds.has(r))){t=Da(n,t),t=lk(e,t,1),e=us(e,t,1),t=un(),e!==null&&($c(e,1,t),Tn(e,t));break}}e=e.return}}function Vx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=un(),t.pingedLanes|=t.suspendedLanes&n,xt===t&&(Ut&n)===n&&(St===4||St===3&&(Ut&130023424)===Ut&&500>dt()-Gy?lo(t,0):Wy|=n),Tn(t,e)}function Ck(t,e){e===0&&(t.mode&1?(e=Bu,Bu<<=1,!(Bu&130023424)&&(Bu=4194304)):e=1);var n=un();t=vi(t,e),t!==null&&($c(t,e,n),Tn(t,n))}function jx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ck(t,n)}function Fx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),Ck(t,n)}var Pk;Pk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||En.current)wn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wn=!1,Ix(t,e,n);wn=!!(t.flags&131072)}else wn=!1,Ze&&e.flags&1048576&&Db(e,lh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xd(t,e),t=e.pendingProps;var i=Pa(e,Zt.current);va(e,n),i=Uy(null,e,r,t,i,n);var s=$y();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Sn(r)?(s=!0,oh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,My(e),i.updater=rf,e.stateNode=i,i._reactInternals=e,qm(e,r,t,n),e=Wm(null,e,r,!0,s,n)):(e.tag=0,Ze&&s&&Cy(e),an(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=$x(r),t=hr(r,t),i){case 0:e=Hm(null,e,r,t,n);break e;case 1:e=Rw(null,e,r,t,n);break e;case 11:e=Cw(null,e,r,t,n);break e;case 14:e=Pw(null,e,r,hr(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hr(r,i),Hm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hr(r,i),Rw(t,e,r,i,n);case 3:e:{if(hk(e),t===null)throw Error(Y(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Fb(t,e),dh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Da(Error(Y(423)),e),e=xw(t,e,r,n,i);break e}else if(r!==i){i=Da(Error(Y(424)),e),e=xw(t,e,r,n,i);break e}else for(Pn=cs(e.stateNode.containerInfo.firstChild),On=e,Ze=!0,pr=null,n=Vb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ra(),r===i){e=_i(t,e,n);break e}an(t,e,r,n)}e=e.child}return e;case 5:return Ub(e),t===null&&Um(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Mm(r,i)?o=null:s!==null&&Mm(r,s)&&(e.flags|=32),dk(t,e),an(t,e,o,n),e.child;case 6:return t===null&&Um(e),null;case 13:return fk(t,e,n);case 4:return Ly(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=xa(e,null,r,n):an(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hr(r,i),Cw(t,e,r,i,n);case 7:return an(t,e,e.pendingProps,n),e.child;case 8:return an(t,e,e.pendingProps.children,n),e.child;case 12:return an(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ke(ch,r._currentValue),r._currentValue=o,s!==null)if(Sr(s.value,o)){if(s.children===i.children&&!En.current){e=_i(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=di(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),$m(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Y(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),$m(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}an(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,va(e,n),i=Jn(i),r=r(i),e.flags|=1,an(t,e,r,n),e.child;case 14:return r=e.type,i=hr(r,e.pendingProps),i=hr(r.type,i),Pw(t,e,r,i,n);case 15:return ck(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hr(r,i),xd(t,e),e.tag=1,Sn(r)?(t=!0,oh(e)):t=!1,va(e,n),ok(e,r,i),qm(e,r,i,n),Wm(null,e,r,!0,t,n);case 19:return pk(t,e,n);case 22:return uk(t,e,n)}throw Error(Y(156,e.tag))};function Rk(t,e){return rb(t,e)}function Ux(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(t,e,n,r){return new Ux(t,e,n,r)}function Yy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $x(t){if(typeof t=="function")return Yy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gy)return 11;if(t===yy)return 14}return 2}function fs(t,e){var n=t.alternate;return n===null?(n=zn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nd(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Yy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ta:return co(n.children,i,s,e);case my:o=8,i|=8;break;case fm:return t=zn(12,n,e,i|2),t.elementType=fm,t.lanes=s,t;case pm:return t=zn(13,n,e,i),t.elementType=pm,t.lanes=s,t;case mm:return t=zn(19,n,e,i),t.elementType=mm,t.lanes=s,t;case UT:return af(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case jT:o=10;break e;case FT:o=9;break e;case gy:o=11;break e;case yy:o=14;break e;case Gi:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=zn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function co(t,e,n,r){return t=zn(7,t,r,e),t.lanes=n,t}function af(t,e,n,r){return t=zn(22,t,r,e),t.elementType=UT,t.lanes=n,t.stateNode={isHidden:!1},t}function Cp(t,e,n){return t=zn(6,t,null,e),t.lanes=n,t}function Pp(t,e,n){return e=zn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Bx(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cp(0),this.expirationTimes=cp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Xy(t,e,n,r,i,s,o,a,l){return t=new Bx(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=zn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},My(s),t}function qx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ea,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function xk(t){if(!t)return Ss;t=t._reactInternals;e:{if(Ro(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(Sn(n))return xb(t,n,e)}return e}function Ok(t,e,n,r,i,s,o,a,l){return t=Xy(n,r,!0,t,i,s,o,a,l),t.context=xk(null),n=t.current,r=un(),i=hs(n),s=di(r,i),s.callback=e??null,us(n,s,i),t.current.lanes=i,$c(t,i,r),Tn(t,r),t}function lf(t,e,n,r){var i=e.current,s=un(),o=hs(i);return n=xk(n),e.context===null?e.context=n:e.pendingContext=n,e=di(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=us(i,e,o),t!==null&&(yr(t,i,o,s),Cd(t,i,o)),o}function _h(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $w(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Zy(t,e){$w(t,e),(t=t.alternate)&&$w(t,e)}function zx(){return null}var Dk=typeof reportError=="function"?reportError:function(t){console.error(t)};function ev(t){this._internalRoot=t}cf.prototype.render=ev.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));lf(t,e,null,null)};cf.prototype.unmount=ev.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_o(function(){lf(null,t,null,null)}),e[yi]=null}};function cf(t){this._internalRoot=t}cf.prototype.unstable_scheduleHydration=function(t){if(t){var e=ub();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qi.length&&e!==0&&e<Qi[n].priority;n++);Qi.splice(n,0,t),n===0&&hb(t)}};function tv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function uf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Bw(){}function Hx(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=_h(o);s.call(u)}}var o=Ok(e,r,t,0,null,!1,!1,"",Bw);return t._reactRootContainer=o,t[yi]=o.current,vc(t.nodeType===8?t.parentNode:t),_o(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=_h(l);a.call(u)}}var l=Xy(t,0,!1,null,null,!1,!1,"",Bw);return t._reactRootContainer=l,t[yi]=l.current,vc(t.nodeType===8?t.parentNode:t),_o(function(){lf(e,l,n,r)}),l}function df(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=_h(o);a.call(l)}}lf(e,o,t,i)}else o=Hx(n,e,t,i,r);return _h(o)}lb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Dl(e.pendingLanes);n!==0&&(wy(e,n|1),Tn(e,dt()),!(xe&6)&&(Na=dt()+500,Ds()))}break;case 13:_o(function(){var r=vi(t,1);if(r!==null){var i=un();yr(r,t,1,i)}}),Zy(t,1)}};Ey=function(t){if(t.tag===13){var e=vi(t,134217728);if(e!==null){var n=un();yr(e,t,134217728,n)}Zy(t,134217728)}};cb=function(t){if(t.tag===13){var e=hs(t),n=vi(t,e);if(n!==null){var r=un();yr(n,t,e,r)}Zy(t,e)}};ub=function(){return je};db=function(t,e){var n=je;try{return je=t,e()}finally{je=n}};km=function(t,e,n){switch(e){case"input":if(vm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ef(r);if(!i)throw Error(Y(90));BT(r),vm(r,i)}}}break;case"textarea":zT(t,n);break;case"select":e=n.value,e!=null&&pa(t,!!n.multiple,e,!1)}};YT=Ky;XT=_o;var Wx={usingClientEntryPoint:!1,Events:[qc,sa,ef,JT,QT,Ky]},Al={findFiberByHostInstance:ro,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gx={bundleType:Al.bundleType,version:Al.version,rendererPackageName:Al.rendererPackageName,rendererConfig:Al.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ii.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tb(t),t===null?null:t.stateNode},findFiberByHostInstance:Al.findFiberByHostInstance||zx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zu.isDisabled&&Zu.supportsFiber)try{Qh=Zu.inject(Gx),Vr=Zu}catch{}}Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wx;Nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tv(e))throw Error(Y(200));return qx(t,e,null,n)};Nn.createRoot=function(t,e){if(!tv(t))throw Error(Y(299));var n=!1,r="",i=Dk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Xy(t,1,!1,null,null,n,!1,r,i),t[yi]=e.current,vc(t.nodeType===8?t.parentNode:t),new ev(e)};Nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=tb(e),t=t===null?null:t.stateNode,t};Nn.flushSync=function(t){return _o(t)};Nn.hydrate=function(t,e,n){if(!uf(e))throw Error(Y(200));return df(null,t,e,!0,n)};Nn.hydrateRoot=function(t,e,n){if(!tv(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Dk;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Ok(e,null,t,1,n??null,i,!1,s,o),t[yi]=e.current,vc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new cf(e)};Nn.render=function(t,e,n){if(!uf(e))throw Error(Y(200));return df(null,t,e,!1,n)};Nn.unmountComponentAtNode=function(t){if(!uf(t))throw Error(Y(40));return t._reactRootContainer?(_o(function(){df(null,null,t,!1,function(){t._reactRootContainer=null,t[yi]=null})}),!0):!1};Nn.unstable_batchedUpdates=Ky;Nn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!uf(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return df(t,e,n,!1,r)};Nn.version="18.3.1-next-f1338f8080-20240426";function Nk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nk)}catch(t){console.error(t)}}Nk(),NT.exports=Nn;var Kx=NT.exports,qw=Kx;dm.createRoot=qw.createRoot,dm.hydrateRoot=qw.hydrateRoot;const Jx="modulepreload",Qx=function(t){return"/app/"+t},zw={},Yn=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=Qx(l),l in zw)return;zw[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":Jx,u||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),u)return new Promise((g,T)=>{p.addEventListener("load",g),p.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Mk=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=F.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>F.createElement("svg",{ref:l,...Xx,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Mk("lucide",i),...a},[...o.map(([u,h])=>F.createElement(u,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=(t,e)=>{const n=F.forwardRef(({className:r,...i},s)=>F.createElement(Zx,{ref:s,iconNode:e,className:Mk(`lucide-${Yx(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=bt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=bt("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=bt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=bt("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=bt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=bt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=bt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=bt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=bt("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=bt("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=bt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=bt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=bt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=bt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=bt("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=bt("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=bt("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=bt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=bt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function Vk(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Vk(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function nv(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Vk(t))&&(r&&(r+=" "),r+=e);return r}const fO=({children:t,className:e})=>D.jsx("div",{className:nv("bg-gray-900/90 border border-gray-800 rounded-xl p-4 shadow-lg backdrop-blur-md",e),children:t}),nd=({children:t,onClick:e,variant:n="primary",className:r,disabled:i=!1,type:s="button"})=>{const o="px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2",a={primary:"bg-blue-600 hover:bg-blue-500 text-white shadow-[0_0_15px_rgba(37,99,235,0.5)]",danger:"bg-red-600 hover:bg-red-500 text-white shadow-[0_0_15px_rgba(220,38,38,0.5)]",secondary:"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700",ghost:"bg-transparent hover:bg-gray-800 text-gray-400"};return D.jsx("button",{type:s,onClick:e,disabled:i,className:nv(o,a[n],r,i&&"opacity-50 cursor-not-allowed"),children:t})},mn=({children:t,color:e="blue"})=>{const n={blue:"bg-blue-900/30 text-blue-400 border-blue-800",red:"bg-red-900/30 text-red-400 border-red-800",green:"bg-green-900/30 text-green-400 border-green-800",yellow:"bg-yellow-900/30 text-yellow-400 border-yellow-800"};return D.jsx("span",{className:nv("px-2 py-0.5 rounded text-xs font-mono border uppercase tracking-wide",n[e]),children:t})},Bi=(t=!1)=>{const[e,n]=F.useState(t),r=F.useCallback(()=>n(!0),[]),i=F.useCallback(()=>n(!1),[]),s=F.useCallback(()=>n(o=>!o),[]);return{isOpen:e,open:r,close:i,toggle:s}},pO=()=>{};var Kw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},mO=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Fk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4;let g=(a&15)<<2|u>>6,T=u&63;l||(T=64,o||(g=64)),r.push(n[h],n[p],n[g],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||p==null)throw new gO;const g=s<<2|a>>4;if(r.push(g),u!==64){const T=a<<4&240|u>>2;if(r.push(T),p!==64){const S=u<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yO=function(t){const e=jk(t);return Fk.encodeByteArray(e,!0)},wh=function(t){return yO(t).replace(/\./g,"")},Uk=function(t){try{return Fk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=()=>vO().__FIREBASE_DEFAULTS__,wO=()=>{if(typeof process>"u"||typeof Kw>"u")return;const t=Kw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},EO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Uk(t[1]);return e&&JSON.parse(e)},hf=()=>{try{return pO()||_O()||wO()||EO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$k=t=>{var e,n;return(n=(e=hf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},SO=t=>{const e=$k(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Bk=()=>{var t;return(t=hf())===null||t===void 0?void 0:t.config},qk=t=>{var e;return(e=hf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zk(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[wh(JSON.stringify(n)),wh(JSON.stringify(o)),""].join(".")}const Zl={};function kO(){const t={prod:[],emulator:[]};for(const e of Object.keys(Zl))Zl[e]?t.emulator.push(e):t.prod.push(e);return t}function IO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Jw=!1;function Hk(t,e){if(typeof window>"u"||typeof document>"u"||!Xa(window.location.host)||Zl[t]===e||Zl[t]||Jw)return;Zl[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",s=kO().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function l(g,T){g.setAttribute("width","24"),g.setAttribute("id",T),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Jw=!0,o()},g}function h(g,T){g.setAttribute("id",T),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=IO(r),T=n("text"),S=document.getElementById(T)||document.createElement("span"),E=n("learnmore"),k=document.getElementById(E)||document.createElement("a"),_=n("preprendIcon"),y=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const C=g.element;a(C),h(k,E);const L=u();l(y,_),C.append(y,S,k,L),document.body.appendChild(C)}s?(S.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function CO(){var t;const e=(t=hf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RO(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function xO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OO(){const t=en();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function DO(){return!CO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NO(){try{return typeof indexedDB=="object"}catch{return!1}}function MO(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO="FirebaseError";class Ai extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=LO,Object.setPrototypeOf(this,Ai.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hc.prototype.create)}}class Hc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?VO(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ai(i,a,r)}}function VO(t,e){return t.replace(jO,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const jO=/\{\$([^}]+)}/g;function FO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Qw(s)&&Qw(o)){if(!wo(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Qw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ml(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ll(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function UO(t,e){const n=new $O(t,e);return n.subscribe.bind(n)}class $O{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");BO(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Rp),i.error===void 0&&(i.error=Rp),i.complete===void 0&&(i.complete=Rp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Rp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t){return t&&t._delegate?t._delegate:t}class Eo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new TO;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HO(e))try{this.getOrInitializeService({instanceIdentifier:no})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=no){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=no){return this.instances.has(e)}getOptions(e=no){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:zO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=no){return this.component?this.component.multipleInstances?e:no:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zO(t){return t===no?void 0:t}function HO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(be||(be={}));const GO={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},KO=be.INFO,JO={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},QO=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=JO[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rv{constructor(e){this.name=e,this._logLevel=KO,this._logHandler=QO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const YO=(t,e)=>e.some(n=>t instanceof n);let Yw,Xw;function XO(){return Yw||(Yw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZO(){return Xw||(Xw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wk=new WeakMap,ig=new WeakMap,Gk=new WeakMap,xp=new WeakMap,iv=new WeakMap;function eD(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ps(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Wk.set(n,t)}).catch(()=>{}),iv.set(e,t),e}function tD(t){if(ig.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ig.set(t,e)}let sg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ig.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Gk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ps(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nD(t){sg=t(sg)}function rD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Op(this),e,...n);return Gk.set(r,e.sort?e.sort():[e]),ps(r)}:ZO().includes(t)?function(...e){return t.apply(Op(this),e),ps(Wk.get(this))}:function(...e){return ps(t.apply(Op(this),e))}}function iD(t){return typeof t=="function"?rD(t):(t instanceof IDBTransaction&&tD(t),YO(t,XO())?new Proxy(t,sg):t)}function ps(t){if(t instanceof IDBRequest)return eD(t);if(xp.has(t))return xp.get(t);const e=iD(t);return e!==t&&(xp.set(t,e),iv.set(e,t)),e}const Op=t=>iv.get(t);function sD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ps(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ps(o.result),l.oldVersion,l.newVersion,ps(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const oD=["get","getKey","getAll","getAllKeys","count"],aD=["put","add","delete","clear"],Dp=new Map;function Zw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dp.get(e))return Dp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=aD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||oD.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Dp.set(e,s),s}nD(t=>({...t,get:(e,n,r)=>Zw(e,n)||t.get(e,n,r),has:(e,n)=>!!Zw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cD(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function cD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const og="@firebase/app",e0="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new rv("@firebase/app"),uD="@firebase/app-compat",dD="@firebase/analytics-compat",hD="@firebase/analytics",fD="@firebase/app-check-compat",pD="@firebase/app-check",mD="@firebase/auth",gD="@firebase/auth-compat",yD="@firebase/database",vD="@firebase/data-connect",_D="@firebase/database-compat",wD="@firebase/functions",ED="@firebase/functions-compat",SD="@firebase/installations",TD="@firebase/installations-compat",bD="@firebase/messaging",kD="@firebase/messaging-compat",ID="@firebase/performance",AD="@firebase/performance-compat",CD="@firebase/remote-config",PD="@firebase/remote-config-compat",RD="@firebase/storage",xD="@firebase/storage-compat",OD="@firebase/firestore",DD="@firebase/ai",ND="@firebase/firestore-compat",MD="firebase",LD="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="[DEFAULT]",VD={[og]:"fire-core",[uD]:"fire-core-compat",[hD]:"fire-analytics",[dD]:"fire-analytics-compat",[pD]:"fire-app-check",[fD]:"fire-app-check-compat",[mD]:"fire-auth",[gD]:"fire-auth-compat",[yD]:"fire-rtdb",[vD]:"fire-data-connect",[_D]:"fire-rtdb-compat",[wD]:"fire-fn",[ED]:"fire-fn-compat",[SD]:"fire-iid",[TD]:"fire-iid-compat",[bD]:"fire-fcm",[kD]:"fire-fcm-compat",[ID]:"fire-perf",[AD]:"fire-perf-compat",[CD]:"fire-rc",[PD]:"fire-rc-compat",[RD]:"fire-gcs",[xD]:"fire-gcs-compat",[OD]:"fire-fst",[ND]:"fire-fst-compat",[DD]:"fire-vertex","fire-js":"fire-js",[MD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new Map,jD=new Map,lg=new Map;function t0(t,e){try{t.container.addComponent(e)}catch(n){wi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ma(t){const e=t.name;if(lg.has(e))return wi.debug(`There were multiple attempts to register component ${e}.`),!1;lg.set(e,t);for(const n of Eh.values())t0(n,t);for(const n of jD.values())t0(n,t);return!0}function sv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function vn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ms=new Hc("app","Firebase",FD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Eo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=LD;function $D(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ag,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ms.create("bad-app-name",{appName:String(i)});if(n||(n=Bk()),!n)throw ms.create("no-options");const s=Eh.get(i);if(s){if(wo(n,s.options)&&wo(r,s.config))return s;throw ms.create("duplicate-app",{appName:i})}const o=new WO(i);for(const l of lg.values())o.addComponent(l);const a=new UD(n,r,o);return Eh.set(i,a),a}function Kk(t=ag){const e=Eh.get(t);if(!e&&t===ag&&Bk())return $D();if(!e)throw ms.create("no-app",{appName:t});return e}function gs(t,e,n){var r;let i=(r=VD[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wi.warn(a.join(" "));return}Ma(new Eo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD="firebase-heartbeat-database",qD=1,Ac="firebase-heartbeat-store";let Np=null;function Jk(){return Np||(Np=sD(BD,qD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ac)}catch(n){console.warn(n)}}}}).catch(t=>{throw ms.create("idb-open",{originalErrorMessage:t.message})})),Np}async function zD(t){try{const n=(await Jk()).transaction(Ac),r=await n.objectStore(Ac).get(Qk(t));return await n.done,r}catch(e){if(e instanceof Ai)wi.warn(e.message);else{const n=ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wi.warn(n.message)}}}async function n0(t,e){try{const r=(await Jk()).transaction(Ac,"readwrite");await r.objectStore(Ac).put(e,Qk(t)),await r.done}catch(n){if(n instanceof Ai)wi.warn(n.message);else{const r=ms.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wi.warn(r.message)}}}function Qk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=1024,WD=30;class GD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new JD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=r0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>WD){const o=QD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){wi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=r0(),{heartbeatsToSend:r,unsentEntries:i}=KD(this._heartbeatsCache.heartbeats),s=wh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return wi.warn(n),""}}}function r0(){return new Date().toISOString().substring(0,10)}function KD(t,e=HD){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),i0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),i0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class JD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NO()?MO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return n0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return n0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function i0(t){return wh(JSON.stringify({version:2,heartbeats:t})).length}function QD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(t){Ma(new Eo("platform-logger",e=>new lD(e),"PRIVATE")),Ma(new Eo("heartbeat",e=>new GD(e),"PRIVATE")),gs(og,e0,t),gs(og,e0,"esm2017"),gs("fire-js","")}YD("");function ov(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Yk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XD=Yk,Xk=new Hc("auth","Firebase",Yk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=new rv("@firebase/auth");function ZD(t,...e){Sh.logLevel<=be.WARN&&Sh.warn(`Auth (${Za}): ${t}`,...e)}function Md(t,...e){Sh.logLevel<=be.ERROR&&Sh.error(`Auth (${Za}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t,...e){throw lv(t,...e)}function vr(t,...e){return lv(t,...e)}function av(t,e,n){const r=Object.assign(Object.assign({},XD()),{[e]:n});return new Hc("auth","Firebase",r).create(e,{appName:t.name})}function Fr(t){return av(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zk(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Xn(t,"argument-error"),av(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Xk.create(t,...e)}function de(t,e,...n){if(!t)throw lv(e,...n)}function ai(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Md(e),new Error(e)}function Ei(t,e){t||ai(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function eN(){return s0()==="http:"||s0()==="https:"}function s0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eN()||RO()||"connection"in navigator)?navigator.onLine:!0}function nN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ei(n>e,"Short delay should be less than long delay!"),this.isMobile=AO()||xO()}get(){return tN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(t,e){Ei(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ai("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ai("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ai("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sN=new Gc(3e4,6e4);function Ns(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ci(t,e,n,r,i={}){return tI(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Wc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return PO()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Xa(t.emulatorConfig.host)&&(u.credentials="include"),eI.fetch()(await nI(t,t.config.apiHost,n,a),u)})}async function tI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},rN),e);try{const i=new aN(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw rd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw rd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw rd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw rd(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw av(t,h,u);Xn(t,h)}}catch(i){if(i instanceof Ai)throw i;Xn(t,"network-request-failed",{message:String(i)})}}async function Kc(t,e,n,r,i={}){const s=await Ci(t,e,n,r,i);return"mfaPendingCredential"in s&&Xn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function nI(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?cv(t.config,i):`${t.config.apiScheme}://${i}`;return iN.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function oN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class aN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(vr(this.auth,"network-request-failed")),sN.get())})}}function rd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=vr(t,e,r);return i.customData._tokenResponse=n,i}function o0(t){return t!==void 0&&t.enterprise!==void 0}class lN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return oN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cN(t,e){return Ci(t,"GET","/v2/recaptchaConfig",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(t,e){return Ci(t,"POST","/v1/accounts:delete",e)}async function Th(t,e){return Ci(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dN(t,e=!1){const n=st(t),r=await n.getIdToken(e),i=uv(r);de(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ec(Mp(i.auth_time)),issuedAtTime:ec(Mp(i.iat)),expirationTime:ec(Mp(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Mp(t){return Number(t)*1e3}function uv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Md("JWT malformed, contained fewer than 3 sections"),null;try{const i=Uk(n);return i?JSON.parse(i):(Md("Failed to decode base64 JWT payload"),null)}catch(i){return Md("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function a0(t){const e=uv(t);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function La(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ai&&hN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function hN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ec(this.lastLoginAt),this.creationTime=ec(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await La(t,Th(n,{idToken:r}));de(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?rI(s.providerUserInfo):[],a=mN(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ug(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function pN(t){const e=st(t);await Cc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mN(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function rI(t){return t.map(e=>{var{providerId:n}=e,r=ov(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gN(t,e){const n=await tI(t,{},async()=>{const r=Wc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await nI(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Xa(t.emulatorConfig.host)&&(l.credentials="include"),eI.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yN(t,e){return Ci(t,"POST","/v2/accounts:revokeToken",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):a0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){de(e.length!==0,"internal-error");const n=a0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await gN(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new wa;return r&&(de(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(de(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(de(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wa,this.toJSON())}_performRefresh(){return ai("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(t,e){de(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class mr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=ov(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ug(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await La(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dN(this,e)}reload(){return pN(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new mr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Cc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vn(this.auth.app))return Promise.reject(Fr(this.auth));const e=await this.getIdToken();return await La(this,uN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,h;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,T=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,k=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:C,emailVerified:L,isAnonymous:$,providerData:q,stsTokenManager:P}=n;de(C&&P,e,"internal-error");const I=wa.fromJSON(this.name,P);de(typeof C=="string",e,"internal-error"),qi(p,e.name),qi(g,e.name),de(typeof L=="boolean",e,"internal-error"),de(typeof $=="boolean",e,"internal-error"),qi(T,e.name),qi(S,e.name),qi(E,e.name),qi(k,e.name),qi(_,e.name),qi(y,e.name);const R=new mr({uid:C,auth:e,email:g,emailVerified:L,displayName:p,isAnonymous:$,photoURL:S,phoneNumber:T,tenantId:E,stsTokenManager:I,createdAt:_,lastLoginAt:y});return q&&Array.isArray(q)&&(R.providerData=q.map(x=>Object.assign({},x))),k&&(R._redirectEventId=k),R}static async _fromIdTokenResponse(e,n,r=!1){const i=new wa;i.updateFromServerResponse(n);const s=new mr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Cc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];de(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?rI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new wa;a.updateFromIdToken(r);const l=new mr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ug(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=new Map;function li(t){Ei(t instanceof Function,"Expected a class definition");let e=l0.get(t);return e?(Ei(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,l0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}iI.type="NONE";const c0=iI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(t,e,n){return`firebase:${t}:${e}:${n}`}class Ea{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ld(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ld("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Th(this.auth,{idToken:e}).catch(()=>{});return n?mr._fromGetAccountInfoResponse(this.auth,n,e):null}return mr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ea(li(c0),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||li(c0);const o=Ld(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let p;if(typeof h=="string"){const g=await Th(e,{idToken:h}).catch(()=>{});if(!g)break;p=await mr._fromGetAccountInfoResponse(e,g,h)}else p=mr._fromJSON(e,h);u!==s&&(a=p),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ea(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Ea(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uI(e))return"Blackberry";if(dI(e))return"Webos";if(oI(e))return"Safari";if((e.includes("chrome/")||aI(e))&&!e.includes("edge/"))return"Chrome";if(cI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function sI(t=en()){return/firefox\//i.test(t)}function oI(t=en()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aI(t=en()){return/crios\//i.test(t)}function lI(t=en()){return/iemobile/i.test(t)}function cI(t=en()){return/android/i.test(t)}function uI(t=en()){return/blackberry/i.test(t)}function dI(t=en()){return/webos/i.test(t)}function dv(t=en()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vN(t=en()){var e;return dv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _N(){return OO()&&document.documentMode===10}function hI(t=en()){return dv(t)||cI(t)||dI(t)||uI(t)||/windows phone/i.test(t)||lI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(t,e=[]){let n;switch(t){case"Browser":n=u0(en());break;case"Worker":n=`${u0(en())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Za}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EN(t,e={}){return Ci(t,"GET","/v2/passwordPolicy",Ns(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=6;class TN{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:SN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new d0(this),this.idTokenSubscription=new d0(this),this.beforeStateQueue=new wN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=li(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Ea.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Th(this,{idToken:e}),r=await mr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(vn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Cc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vn(this.app))return Promise.reject(Fr(this));const n=e?st(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vn(this.app)?Promise.reject(Fr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vn(this.app)?Promise.reject(Fr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await EN(this),n=new TN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Hc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await yN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&li(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await Ea.create(this,[li(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&ZD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Pi(t){return st(t)}class d0{constructor(e){this.auth=e,this.observer=null,this.addObserver=UO(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ff={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kN(t){ff=t}function pI(t){return ff.loadJS(t)}function IN(){return ff.recaptchaEnterpriseScript}function AN(){return ff.gapiScript}function CN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class PN{constructor(){this.enterprise=new RN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class RN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const xN="recaptcha-enterprise",mI="NO_RECAPTCHA";class ON{constructor(e){this.type=xN,this.auth=Pi(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{cN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new lN(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;o0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(mI)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new PN().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&o0(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=IN();l.length!==0&&(l+=a),pI(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function h0(t,e,n,r=!1,i=!1){const s=new ON(t);let o;if(i)o=mI;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function dg(t,e,n,r,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await h0(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await h0(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(t,e){const n=sv(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(wo(s,e??{}))return i;Xn(i,"already-initialized")}return n.initialize({options:e})}function NN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(li);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function MN(t,e,n){const r=Pi(t);de(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=gI(e),{host:o,port:a}=LN(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){de(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),de(wo(u,r.config.emulator)&&wo(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Xa(o)?(zk(`${s}//${o}${l}`),Hk("Auth",!0)):VN()}function gI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function LN(t){const e=gI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:f0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:f0(o)}}}function f0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function VN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ai("not implemented")}_getIdTokenResponse(e){return ai("not implemented")}_linkToIdToken(e,n){return ai("not implemented")}_getReauthenticationResolver(e){return ai("not implemented")}}async function jN(t,e){return Ci(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FN(t,e){return Kc(t,"POST","/v1/accounts:signInWithPassword",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(t,e){return Kc(t,"POST","/v1/accounts:signInWithEmailLink",Ns(t,e))}async function $N(t,e){return Kc(t,"POST","/v1/accounts:signInWithEmailLink",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends hv{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Pc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Pc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dg(e,n,"signInWithPassword",FN);case"emailLink":return UN(e,{email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dg(e,r,"signUpPassword",jN);case"emailLink":return $N(e,{idToken:n,email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sa(t,e){return Kc(t,"POST","/v1/accounts:signInWithIdp",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="http://localhost";class So extends hv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new So(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=ov(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new So(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Sa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Sa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Sa(e,n)}buildRequest(){const e={requestUri:BN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Wc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zN(t){const e=Ml(Ll(t)).link,n=e?Ml(Ll(e)).deep_link_id:null,r=Ml(Ll(t)).deep_link_id;return(r?Ml(Ll(r)).link:null)||r||n||e||t}class fv{constructor(e){var n,r,i,s,o,a;const l=Ml(Ll(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,p=qN((i=l.mode)!==null&&i!==void 0?i:null);de(u&&h&&p,"argument-error"),this.apiKey=u,this.operation=p,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=zN(e);try{return new fv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.providerId=xo.PROVIDER_ID}static credential(e,n){return Pc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=fv.parseLink(n);return de(r,"argument-error"),Pc._fromEmailAndCode(e,r.code,r.tenantId)}}xo.PROVIDER_ID="password";xo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc extends pf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends Jc{constructor(){super("facebook.com")}static credential(e){return So._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xi.credential(e.oauthAccessToken)}catch{return null}}}Xi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii extends Jc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return So._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ii.credential(n,r)}catch{return null}}}ii.GOOGLE_SIGN_IN_METHOD="google.com";ii.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends Jc{constructor(){super("github.com")}static credential(e){return So._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zi.credential(e.oauthAccessToken)}catch{return null}}}Zi.GITHUB_SIGN_IN_METHOD="github.com";Zi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Jc{constructor(){super("twitter.com")}static credential(e,n){return So._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return es.credential(n,r)}catch{return null}}}es.TWITTER_SIGN_IN_METHOD="twitter.com";es.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yI(t,e){return Kc(t,"POST","/v1/accounts:signUp",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await mr._fromIdTokenResponse(e,r,i),o=p0(r);return new Si({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=p0(r);return new Si({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function p0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m0(t){var e;if(vn(t.app))return Promise.reject(Fr(t));const n=Pi(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Si({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await yI(n,{returnSecureToken:!0}),i=await Si._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh extends Ai{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,bh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new bh(e,n,r,i)}}function vI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?bh._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}async function _I(t,e,n=!1){const r=await La(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Si._forOperation(t,"link",r)}async function WN(t,e,n){await Cc(e);const r=HN(e.providerData);de(r.has(n)===t,e.auth,"provider-already-linked")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(t,e,n=!1){const{auth:r}=t;if(vn(r.app))return Promise.reject(Fr(r));const i="reauthenticate";try{const s=await La(t,vI(r,i,e,t),n);de(s.idToken,r,"internal-error");const o=uv(s.idToken);de(o,r,"internal-error");const{sub:a}=o;return de(t.uid===a,r,"user-mismatch"),Si._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Xn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wI(t,e,n=!1){if(vn(t.app))return Promise.reject(Fr(t));const r="signIn",i=await vI(t,r,e),s=await Si._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function KN(t,e){return wI(Pi(t),e)}async function JN(t,e){const n=st(t);return await WN(!1,n,e.providerId),_I(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(t){const e=Pi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function QN(t,e,n){if(vn(t.app))return Promise.reject(Fr(t));const r=Pi(t),o=await dg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yI).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&EI(t),l}),a=await Si._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function g0(t,e,n){return vn(t.app)?Promise.reject(Fr(t)):KN(st(t),xo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&EI(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YN(t,e){return Ci(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=st(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await La(r,YN(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(t,e){return st(t).setPersistence(e)}function eM(t,e,n,r){return st(t).onIdTokenChanged(e,n,r)}function tM(t,e,n){return st(t).beforeAuthStateChanged(e,n)}function nM(t,e,n,r){return st(t).onAuthStateChanged(e,n,r)}function Lp(t){return st(t).signOut()}const kh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kh,"1"),this.storage.removeItem(kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM=1e3,iM=10;class TI extends SI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);_N()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,iM):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},rM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}TI.type="LOCAL";const bI=TI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI extends SI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kI.type="SESSION";const II=kI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new mf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await sM(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=pv("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(){return window}function aM(t){Ur().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(){return typeof Ur().WorkerGlobalScope<"u"&&typeof Ur().importScripts=="function"}async function lM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function uM(){return AI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="firebaseLocalStorageDb",dM=1,Ih="firebaseLocalStorage",PI="fbase_key";class Qc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gf(t,e){return t.transaction([Ih],e?"readwrite":"readonly").objectStore(Ih)}function hM(){const t=indexedDB.deleteDatabase(CI);return new Qc(t).toPromise()}function hg(){const t=indexedDB.open(CI,dM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ih,{keyPath:PI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ih)?e(r):(r.close(),await hM(),e(await hg()))})})}async function y0(t,e,n){const r=gf(t,!0).put({[PI]:e,value:n});return new Qc(r).toPromise()}async function fM(t,e){const n=gf(t,!1).get(e),r=await new Qc(n).toPromise();return r===void 0?null:r.value}function v0(t,e){const n=gf(t,!0).delete(e);return new Qc(n).toPromise()}const pM=800,mM=3;class RI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>mM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mf._getInstance(uM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await lM(),!this.activeServiceWorker)return;this.sender=new oM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hg();return await y0(e,kh,"1"),await v0(e,kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>y0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>fM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>v0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=gf(i,!1).getAll();return new Qc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RI.type="LOCAL";const gM=RI;new Gc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(t,e){return e?li(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv extends hv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Sa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Sa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function yM(t){return wI(t.auth,new gv(t),t.bypassAuthState)}function vM(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),GN(n,new gv(t),t.bypassAuthState)}async function _M(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),_I(n,new gv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yM;case"linkViaPopup":case"linkViaRedirect":return _M;case"reauthViaPopup":case"reauthViaRedirect":return vM;default:Xn(this.auth,"internal-error")}}resolve(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=new Gc(2e3,1e4);async function _0(t,e,n){if(vn(t.app))return Promise.reject(vr(t,"operation-not-supported-in-this-environment"));const r=Pi(t);Zk(t,e,pf);const i=mv(r,n);return new is(r,"signInViaPopup",e,i).executeNotNull()}async function EM(t,e,n){const r=st(t);Zk(r.auth,e,pf);const i=mv(r.auth,n);return new is(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class is extends xI{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,is.currentPopupAction&&is.currentPopupAction.cancel(),is.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){Ei(this.filter.length===1,"Popup operations only handle one event");const e=pv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(vr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(vr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,is.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wM.get())};e()}}is.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM="pendingRedirect",Vd=new Map;class TM extends xI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Vd.get(this.auth._key());if(!e){try{const r=await bM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Vd.set(this.auth._key(),e)}return this.bypassAuthState||Vd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bM(t,e){const n=AM(e),r=IM(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function kM(t,e){Vd.set(t._key(),e)}function IM(t){return li(t._redirectPersistence)}function AM(t){return Ld(SM,t.config.apiKey,t.name)}async function CM(t,e,n=!1){if(vn(t.app))return Promise.reject(Fr(t));const r=Pi(t),i=mv(r,e),o=await new TM(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=10*60*1e3;class RM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!OI(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(vr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PM&&this.cachedEventUids.clear(),this.cachedEventUids.has(w0(e))}saveEventToCache(e){this.cachedEventUids.add(w0(e)),this.lastProcessedEventTime=Date.now()}}function w0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function OI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function xM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return OI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OM(t,e={}){return Ci(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NM=/^https?/;async function MM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await OM(t);for(const n of e)try{if(LM(n))return}catch{}Xn(t,"unauthorized-domain")}function LM(t){const e=cg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!NM.test(n))return!1;if(DM.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=new Gc(3e4,6e4);function E0(){const t=Ur().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jM(t){return new Promise((e,n)=>{var r,i,s;function o(){E0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{E0(),n(vr(t,"network-request-failed"))},timeout:VM.get()})}if(!((i=(r=Ur().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ur().gapi)===null||s===void 0)&&s.load)o();else{const a=CN("iframefcb");return Ur()[a]=()=>{gapi.load?o():n(vr(t,"network-request-failed"))},pI(`${AN()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw jd=null,e})}let jd=null;function FM(t){return jd=jd||jM(t),jd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM=new Gc(5e3,15e3),$M="__/auth/iframe",BM="emulator/auth/iframe",qM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HM(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?cv(e,BM):`https://${t.config.authDomain}/${$M}`,r={apiKey:e.apiKey,appName:t.name,v:Za},i=zM.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Wc(r).slice(1)}`}async function WM(t){const e=await FM(t),n=Ur().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:HM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qM,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=vr(t,"network-request-failed"),a=Ur().setTimeout(()=>{s(o)},UM.get());function l(){Ur().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KM=500,JM=600,QM="_blank",YM="http://localhost";class S0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XM(t,e,n,r=KM,i=JM){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},GM),{width:r.toString(),height:i.toString(),top:s,left:o}),u=en().toLowerCase();n&&(a=aI(u)?QM:n),sI(u)&&(e=e||YM,l.scrollbars="yes");const h=Object.entries(l).reduce((g,[T,S])=>`${g}${T}=${S},`,"");if(vN(u)&&a!=="_self")return ZM(e||"",a),new S0(null);const p=window.open(e||"",a,h);de(p,t,"popup-blocked");try{p.focus()}catch{}return new S0(p)}function ZM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL="__/auth/handler",tL="emulator/auth/handler",nL=encodeURIComponent("fac");async function T0(t,e,n,r,i,s){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Za,eventId:i};if(e instanceof pf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",FO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof Jc){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${nL}=${encodeURIComponent(l)}`:"";return`${rL(t)}?${Wc(a).slice(1)}${u}`}function rL({config:t}){return t.emulator?cv(t,tL):`https://${t.authDomain}/${eL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp="webStorageSupport";class iL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=II,this._completeRedirectFn=CM,this._overrideRedirectResult=kM}async _openPopup(e,n,r,i){var s;Ei((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await T0(e,n,r,cg(),i);return XM(e,o,pv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await T0(e,n,r,cg(),i);return aM(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ei(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await WM(e),r=new RM(e);return n.register("authEvent",i=>(de(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vp,{type:Vp},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Vp];o!==void 0&&n(!!o),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=MM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return hI()||oI()||dv()}}const sL=iL;var b0="@firebase/auth",k0="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lL(t){Ma(new Eo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;de(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fI(t)},u=new bN(r,i,s,l);return NN(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ma(new Eo("auth-internal",e=>{const n=Pi(e.getProvider("auth").getImmediate());return(r=>new oL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gs(b0,k0,aL(t)),gs(b0,k0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=5*60,uL=qk("authIdTokenMaxAge")||cL;let I0=null;const dL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>uL)return;const i=n==null?void 0:n.token;I0!==i&&(I0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function hL(t=Kk()){const e=sv(t,"auth");if(e.isInitialized())return e.getImmediate();const n=DN(t,{popupRedirectResolver:sL,persistence:[gM,bI,II]}),r=qk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=dL(s.toString());tM(n,o,()=>o(n.currentUser)),eM(n,a=>o(a))}}const i=$k("auth");return i&&MN(n,`http://${i}`),n}function fL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}kN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=vr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",fL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lL("Browser");var pL="firebase",mL="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gs(pL,mL,"app");var A0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ys,DI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,I){function R(){}R.prototype=I.prototype,P.D=I.prototype,P.prototype=new R,P.prototype.constructor=P,P.C=function(x,b,V){for(var N=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)N[Pe-2]=arguments[Pe];return I.prototype[b].apply(x,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,I,R){R||(R=0);var x=Array(16);if(typeof I=="string")for(var b=0;16>b;++b)x[b]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(b=0;16>b;++b)x[b]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=P.g[0],R=P.g[1],b=P.g[2];var V=P.g[3],N=I+(V^R&(b^V))+x[0]+3614090360&4294967295;I=R+(N<<7&4294967295|N>>>25),N=V+(b^I&(R^b))+x[1]+3905402710&4294967295,V=I+(N<<12&4294967295|N>>>20),N=b+(R^V&(I^R))+x[2]+606105819&4294967295,b=V+(N<<17&4294967295|N>>>15),N=R+(I^b&(V^I))+x[3]+3250441966&4294967295,R=b+(N<<22&4294967295|N>>>10),N=I+(V^R&(b^V))+x[4]+4118548399&4294967295,I=R+(N<<7&4294967295|N>>>25),N=V+(b^I&(R^b))+x[5]+1200080426&4294967295,V=I+(N<<12&4294967295|N>>>20),N=b+(R^V&(I^R))+x[6]+2821735955&4294967295,b=V+(N<<17&4294967295|N>>>15),N=R+(I^b&(V^I))+x[7]+4249261313&4294967295,R=b+(N<<22&4294967295|N>>>10),N=I+(V^R&(b^V))+x[8]+1770035416&4294967295,I=R+(N<<7&4294967295|N>>>25),N=V+(b^I&(R^b))+x[9]+2336552879&4294967295,V=I+(N<<12&4294967295|N>>>20),N=b+(R^V&(I^R))+x[10]+4294925233&4294967295,b=V+(N<<17&4294967295|N>>>15),N=R+(I^b&(V^I))+x[11]+2304563134&4294967295,R=b+(N<<22&4294967295|N>>>10),N=I+(V^R&(b^V))+x[12]+1804603682&4294967295,I=R+(N<<7&4294967295|N>>>25),N=V+(b^I&(R^b))+x[13]+4254626195&4294967295,V=I+(N<<12&4294967295|N>>>20),N=b+(R^V&(I^R))+x[14]+2792965006&4294967295,b=V+(N<<17&4294967295|N>>>15),N=R+(I^b&(V^I))+x[15]+1236535329&4294967295,R=b+(N<<22&4294967295|N>>>10),N=I+(b^V&(R^b))+x[1]+4129170786&4294967295,I=R+(N<<5&4294967295|N>>>27),N=V+(R^b&(I^R))+x[6]+3225465664&4294967295,V=I+(N<<9&4294967295|N>>>23),N=b+(I^R&(V^I))+x[11]+643717713&4294967295,b=V+(N<<14&4294967295|N>>>18),N=R+(V^I&(b^V))+x[0]+3921069994&4294967295,R=b+(N<<20&4294967295|N>>>12),N=I+(b^V&(R^b))+x[5]+3593408605&4294967295,I=R+(N<<5&4294967295|N>>>27),N=V+(R^b&(I^R))+x[10]+38016083&4294967295,V=I+(N<<9&4294967295|N>>>23),N=b+(I^R&(V^I))+x[15]+3634488961&4294967295,b=V+(N<<14&4294967295|N>>>18),N=R+(V^I&(b^V))+x[4]+3889429448&4294967295,R=b+(N<<20&4294967295|N>>>12),N=I+(b^V&(R^b))+x[9]+568446438&4294967295,I=R+(N<<5&4294967295|N>>>27),N=V+(R^b&(I^R))+x[14]+3275163606&4294967295,V=I+(N<<9&4294967295|N>>>23),N=b+(I^R&(V^I))+x[3]+4107603335&4294967295,b=V+(N<<14&4294967295|N>>>18),N=R+(V^I&(b^V))+x[8]+1163531501&4294967295,R=b+(N<<20&4294967295|N>>>12),N=I+(b^V&(R^b))+x[13]+2850285829&4294967295,I=R+(N<<5&4294967295|N>>>27),N=V+(R^b&(I^R))+x[2]+4243563512&4294967295,V=I+(N<<9&4294967295|N>>>23),N=b+(I^R&(V^I))+x[7]+1735328473&4294967295,b=V+(N<<14&4294967295|N>>>18),N=R+(V^I&(b^V))+x[12]+2368359562&4294967295,R=b+(N<<20&4294967295|N>>>12),N=I+(R^b^V)+x[5]+4294588738&4294967295,I=R+(N<<4&4294967295|N>>>28),N=V+(I^R^b)+x[8]+2272392833&4294967295,V=I+(N<<11&4294967295|N>>>21),N=b+(V^I^R)+x[11]+1839030562&4294967295,b=V+(N<<16&4294967295|N>>>16),N=R+(b^V^I)+x[14]+4259657740&4294967295,R=b+(N<<23&4294967295|N>>>9),N=I+(R^b^V)+x[1]+2763975236&4294967295,I=R+(N<<4&4294967295|N>>>28),N=V+(I^R^b)+x[4]+1272893353&4294967295,V=I+(N<<11&4294967295|N>>>21),N=b+(V^I^R)+x[7]+4139469664&4294967295,b=V+(N<<16&4294967295|N>>>16),N=R+(b^V^I)+x[10]+3200236656&4294967295,R=b+(N<<23&4294967295|N>>>9),N=I+(R^b^V)+x[13]+681279174&4294967295,I=R+(N<<4&4294967295|N>>>28),N=V+(I^R^b)+x[0]+3936430074&4294967295,V=I+(N<<11&4294967295|N>>>21),N=b+(V^I^R)+x[3]+3572445317&4294967295,b=V+(N<<16&4294967295|N>>>16),N=R+(b^V^I)+x[6]+76029189&4294967295,R=b+(N<<23&4294967295|N>>>9),N=I+(R^b^V)+x[9]+3654602809&4294967295,I=R+(N<<4&4294967295|N>>>28),N=V+(I^R^b)+x[12]+3873151461&4294967295,V=I+(N<<11&4294967295|N>>>21),N=b+(V^I^R)+x[15]+530742520&4294967295,b=V+(N<<16&4294967295|N>>>16),N=R+(b^V^I)+x[2]+3299628645&4294967295,R=b+(N<<23&4294967295|N>>>9),N=I+(b^(R|~V))+x[0]+4096336452&4294967295,I=R+(N<<6&4294967295|N>>>26),N=V+(R^(I|~b))+x[7]+1126891415&4294967295,V=I+(N<<10&4294967295|N>>>22),N=b+(I^(V|~R))+x[14]+2878612391&4294967295,b=V+(N<<15&4294967295|N>>>17),N=R+(V^(b|~I))+x[5]+4237533241&4294967295,R=b+(N<<21&4294967295|N>>>11),N=I+(b^(R|~V))+x[12]+1700485571&4294967295,I=R+(N<<6&4294967295|N>>>26),N=V+(R^(I|~b))+x[3]+2399980690&4294967295,V=I+(N<<10&4294967295|N>>>22),N=b+(I^(V|~R))+x[10]+4293915773&4294967295,b=V+(N<<15&4294967295|N>>>17),N=R+(V^(b|~I))+x[1]+2240044497&4294967295,R=b+(N<<21&4294967295|N>>>11),N=I+(b^(R|~V))+x[8]+1873313359&4294967295,I=R+(N<<6&4294967295|N>>>26),N=V+(R^(I|~b))+x[15]+4264355552&4294967295,V=I+(N<<10&4294967295|N>>>22),N=b+(I^(V|~R))+x[6]+2734768916&4294967295,b=V+(N<<15&4294967295|N>>>17),N=R+(V^(b|~I))+x[13]+1309151649&4294967295,R=b+(N<<21&4294967295|N>>>11),N=I+(b^(R|~V))+x[4]+4149444226&4294967295,I=R+(N<<6&4294967295|N>>>26),N=V+(R^(I|~b))+x[11]+3174756917&4294967295,V=I+(N<<10&4294967295|N>>>22),N=b+(I^(V|~R))+x[2]+718787259&4294967295,b=V+(N<<15&4294967295|N>>>17),N=R+(V^(b|~I))+x[9]+3951481745&4294967295,P.g[0]=P.g[0]+I&4294967295,P.g[1]=P.g[1]+(b+(N<<21&4294967295|N>>>11))&4294967295,P.g[2]=P.g[2]+b&4294967295,P.g[3]=P.g[3]+V&4294967295}r.prototype.u=function(P,I){I===void 0&&(I=P.length);for(var R=I-this.blockSize,x=this.B,b=this.h,V=0;V<I;){if(b==0)for(;V<=R;)i(this,P,V),V+=this.blockSize;if(typeof P=="string"){for(;V<I;)if(x[b++]=P.charCodeAt(V++),b==this.blockSize){i(this,x),b=0;break}}else for(;V<I;)if(x[b++]=P[V++],b==this.blockSize){i(this,x),b=0;break}}this.h=b,this.o+=I},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var I=1;I<P.length-8;++I)P[I]=0;var R=8*this.o;for(I=P.length-8;I<P.length;++I)P[I]=R&255,R/=256;for(this.u(P),P=Array(16),I=R=0;4>I;++I)for(var x=0;32>x;x+=8)P[R++]=this.g[I]>>>x&255;return P};function s(P,I){var R=a;return Object.prototype.hasOwnProperty.call(R,P)?R[P]:R[P]=I(P)}function o(P,I){this.h=I;for(var R=[],x=!0,b=P.length-1;0<=b;b--){var V=P[b]|0;x&&V==I||(R[b]=V,x=!1)}this.g=R}var a={};function l(P){return-128<=P&&128>P?s(P,function(I){return new o([I|0],0>I?-1:0)}):new o([P|0],0>P?-1:0)}function u(P){if(isNaN(P)||!isFinite(P))return p;if(0>P)return k(u(-P));for(var I=[],R=1,x=0;P>=R;x++)I[x]=P/R|0,R*=4294967296;return new o(I,0)}function h(P,I){if(P.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(P.charAt(0)=="-")return k(h(P.substring(1),I));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=u(Math.pow(I,8)),x=p,b=0;b<P.length;b+=8){var V=Math.min(8,P.length-b),N=parseInt(P.substring(b,b+V),I);8>V?(V=u(Math.pow(I,V)),x=x.j(V).add(u(N))):(x=x.j(R),x=x.add(u(N)))}return x}var p=l(0),g=l(1),T=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-k(this).m();for(var P=0,I=1,R=0;R<this.g.length;R++){var x=this.i(R);P+=(0<=x?x:4294967296+x)*I,I*=4294967296}return P},t.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(S(this))return"0";if(E(this))return"-"+k(this).toString(P);for(var I=u(Math.pow(P,6)),R=this,x="";;){var b=L(R,I).g;R=_(R,b.j(I));var V=((0<R.g.length?R.g[0]:R.h)>>>0).toString(P);if(R=b,S(R))return V+x;for(;6>V.length;)V="0"+V;x=V+x}},t.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function S(P){if(P.h!=0)return!1;for(var I=0;I<P.g.length;I++)if(P.g[I]!=0)return!1;return!0}function E(P){return P.h==-1}t.l=function(P){return P=_(this,P),E(P)?-1:S(P)?0:1};function k(P){for(var I=P.g.length,R=[],x=0;x<I;x++)R[x]=~P.g[x];return new o(R,~P.h).add(g)}t.abs=function(){return E(this)?k(this):this},t.add=function(P){for(var I=Math.max(this.g.length,P.g.length),R=[],x=0,b=0;b<=I;b++){var V=x+(this.i(b)&65535)+(P.i(b)&65535),N=(V>>>16)+(this.i(b)>>>16)+(P.i(b)>>>16);x=N>>>16,V&=65535,N&=65535,R[b]=N<<16|V}return new o(R,R[R.length-1]&-2147483648?-1:0)};function _(P,I){return P.add(k(I))}t.j=function(P){if(S(this)||S(P))return p;if(E(this))return E(P)?k(this).j(k(P)):k(k(this).j(P));if(E(P))return k(this.j(k(P)));if(0>this.l(T)&&0>P.l(T))return u(this.m()*P.m());for(var I=this.g.length+P.g.length,R=[],x=0;x<2*I;x++)R[x]=0;for(x=0;x<this.g.length;x++)for(var b=0;b<P.g.length;b++){var V=this.i(x)>>>16,N=this.i(x)&65535,Pe=P.i(b)>>>16,tn=P.i(b)&65535;R[2*x+2*b]+=N*tn,y(R,2*x+2*b),R[2*x+2*b+1]+=V*tn,y(R,2*x+2*b+1),R[2*x+2*b+1]+=N*Pe,y(R,2*x+2*b+1),R[2*x+2*b+2]+=V*Pe,y(R,2*x+2*b+2)}for(x=0;x<I;x++)R[x]=R[2*x+1]<<16|R[2*x];for(x=I;x<2*I;x++)R[x]=0;return new o(R,0)};function y(P,I){for(;(P[I]&65535)!=P[I];)P[I+1]+=P[I]>>>16,P[I]&=65535,I++}function C(P,I){this.g=P,this.h=I}function L(P,I){if(S(I))throw Error("division by zero");if(S(P))return new C(p,p);if(E(P))return I=L(k(P),I),new C(k(I.g),k(I.h));if(E(I))return I=L(P,k(I)),new C(k(I.g),I.h);if(30<P.g.length){if(E(P)||E(I))throw Error("slowDivide_ only works with positive integers.");for(var R=g,x=I;0>=x.l(P);)R=$(R),x=$(x);var b=q(R,1),V=q(x,1);for(x=q(x,2),R=q(R,2);!S(x);){var N=V.add(x);0>=N.l(P)&&(b=b.add(R),V=N),x=q(x,1),R=q(R,1)}return I=_(P,b.j(I)),new C(b,I)}for(b=p;0<=P.l(I);){for(R=Math.max(1,Math.floor(P.m()/I.m())),x=Math.ceil(Math.log(R)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),V=u(R),N=V.j(I);E(N)||0<N.l(P);)R-=x,V=u(R),N=V.j(I);S(V)&&(V=g),b=b.add(V),P=_(P,N)}return new C(b,P)}t.A=function(P){return L(this,P).h},t.and=function(P){for(var I=Math.max(this.g.length,P.g.length),R=[],x=0;x<I;x++)R[x]=this.i(x)&P.i(x);return new o(R,this.h&P.h)},t.or=function(P){for(var I=Math.max(this.g.length,P.g.length),R=[],x=0;x<I;x++)R[x]=this.i(x)|P.i(x);return new o(R,this.h|P.h)},t.xor=function(P){for(var I=Math.max(this.g.length,P.g.length),R=[],x=0;x<I;x++)R[x]=this.i(x)^P.i(x);return new o(R,this.h^P.h)};function $(P){for(var I=P.g.length+1,R=[],x=0;x<I;x++)R[x]=P.i(x)<<1|P.i(x-1)>>>31;return new o(R,P.h)}function q(P,I){var R=I>>5;I%=32;for(var x=P.g.length-R,b=[],V=0;V<x;V++)b[V]=0<I?P.i(V+R)>>>I|P.i(V+R+1)<<32-I:P.i(V+R);return new o(b,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,DI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,ys=o}).apply(typeof A0<"u"?A0:typeof self<"u"?self:typeof window<"u"?window:{});var id=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var NI,Vl,MI,Fd,fg,LI,VI,jI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,m){return c==Array.prototype||c==Object.prototype||(c[f]=m.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof id=="object"&&id];for(var f=0;f<c.length;++f){var m=c[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(c,f){if(f)e:{var m=r;c=c.split(".");for(var A=0;A<c.length-1;A++){var U=c[A];if(!(U in m))break e;m=m[U]}c=c[c.length-1],A=m[c],f=f(A),f!=A&&f!=null&&e(m,c,{configurable:!0,writable:!0,value:f})}}function s(c,f){c instanceof String&&(c+="");var m=0,A=!1,U={next:function(){if(!A&&m<c.length){var z=m++;return{value:f(z,c[z]),done:!1}}return A=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}i("Array.prototype.values",function(c){return c||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function u(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function h(c,f,m){return c.call.apply(c.bind,arguments)}function p(c,f,m){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,A),c.apply(f,U)}}return function(){return c.apply(f,arguments)}}function g(c,f,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function T(c,f){var m=Array.prototype.slice.call(arguments,1);return function(){var A=m.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function S(c,f){function m(){}m.prototype=f.prototype,c.aa=f.prototype,c.prototype=new m,c.prototype.constructor=c,c.Qb=function(A,U,z){for(var ee=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)ee[Be-2]=arguments[Be];return f.prototype[U].apply(A,ee)}}function E(c){const f=c.length;if(0<f){const m=Array(f);for(let A=0;A<f;A++)m[A]=c[A];return m}return[]}function k(c,f){for(let m=1;m<arguments.length;m++){const A=arguments[m];if(l(A)){const U=c.length||0,z=A.length||0;c.length=U+z;for(let ee=0;ee<z;ee++)c[U+ee]=A[ee]}else c.push(A)}}class _{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function y(c){return/^[\s\xa0]*$/.test(c)}function C(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function L(c){return L[" "](c),c}L[" "]=function(){};var $=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function q(c,f,m){for(const A in c)f.call(m,c[A],A,c)}function P(c,f){for(const m in c)f.call(void 0,c[m],m,c)}function I(c){const f={};for(const m in c)f[m]=c[m];return f}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(c,f){let m,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(m in A)c[m]=A[m];for(let z=0;z<R.length;z++)m=R[z],Object.prototype.hasOwnProperty.call(A,m)&&(c[m]=A[m])}}function b(c){var f=1;c=c.split(":");const m=[];for(;0<f&&c.length;)m.push(c.shift()),f--;return c.length&&m.push(c.join(":")),m}function V(c){a.setTimeout(()=>{throw c},0)}function N(){var c=ue;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class Pe{constructor(){this.h=this.g=null}add(f,m){const A=tn.get();A.set(f,m),this.h?this.h.next=A:this.g=A,this.h=A}}var tn=new _(()=>new kr,c=>c.reset());class kr{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Ye,X=!1,ue=new Pe,he=()=>{const c=a.Promise.resolve(void 0);Ye=()=>{c.then(Le)}};var Le=()=>{for(var c;c=N();){try{c.h.call(c.g)}catch(m){V(m)}var f=tn;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}X=!1};function Se(){this.s=this.s,this.C=this.C}Se.prototype.s=!1,Se.prototype.ma=function(){this.s||(this.s=!0,this.N())},Se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function d(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}d.prototype.h=function(){this.defaultPrevented=!0};var w=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return c}();function v(c,f){if(d.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var m=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if($){e:{try{L(f.nodeName);var U=!0;break e}catch{}U=!1}U||(f=null)}}else m=="mouseover"?f=c.fromElement:m=="mouseout"&&(f=c.toElement);this.relatedTarget=f,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:O[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&v.aa.h.call(this)}}S(v,d);var O={2:"touch",3:"pen",4:"mouse"};v.prototype.h=function(){v.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),B=0;function K(c,f,m,A,U){this.listener=c,this.proxy=null,this.src=f,this.type=m,this.capture=!!A,this.ha=U,this.key=++B,this.da=this.fa=!1}function J(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Z(c){this.src=c,this.g={},this.h=0}Z.prototype.add=function(c,f,m,A,U){var z=c.toString();c=this.g[z],c||(c=this.g[z]=[],this.h++);var ee=we(c,f,A,U);return-1<ee?(f=c[ee],m||(f.fa=!1)):(f=new K(f,this.src,z,!!A,U),f.fa=m,c.push(f)),f};function pe(c,f){var m=f.type;if(m in c.g){var A=c.g[m],U=Array.prototype.indexOf.call(A,f,void 0),z;(z=0<=U)&&Array.prototype.splice.call(A,U,1),z&&(J(f),c.g[m].length==0&&(delete c.g[m],c.h--))}}function we(c,f,m,A){for(var U=0;U<c.length;++U){var z=c[U];if(!z.da&&z.listener==f&&z.capture==!!m&&z.ha==A)return U}return-1}var ht="closure_lm_"+(1e6*Math.random()|0),nn={};function nr(c,f,m,A,U){if(Array.isArray(f)){for(var z=0;z<f.length;z++)nr(c,f[z],m,A,U);return null}return m=Gr(m),c&&c[M]?c.K(f,m,u(A)?!!A.capture:!1,U):Ue(c,f,m,!1,A,U)}function Ue(c,f,m,A,U,z){if(!f)throw Error("Invalid event type");var ee=u(U)?!!U.capture:!!U,Be=jn(c);if(Be||(c[ht]=Be=new Z(c)),m=Be.add(f,m,A,ee,z),m.proxy)return m;if(A=vt(),m.proxy=A,A.src=c,A.listener=m,c.addEventListener)w||(U=ee),U===void 0&&(U=!1),c.addEventListener(f.toString(),A,U);else if(c.attachEvent)c.attachEvent(Ir(f.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return m}function vt(){function c(m){return f.call(c.src,c.listener,m)}const f=Xe;return c}function at(c,f,m,A,U){if(Array.isArray(f))for(var z=0;z<f.length;z++)at(c,f[z],m,A,U);else A=u(A)?!!A.capture:!!A,m=Gr(m),c&&c[M]?(c=c.i,f=String(f).toString(),f in c.g&&(z=c.g[f],m=we(z,m,A,U),-1<m&&(J(z[m]),Array.prototype.splice.call(z,m,1),z.length==0&&(delete c.g[f],c.h--)))):c&&(c=jn(c))&&(f=c.g[f.toString()],c=-1,f&&(c=we(f,m,A,U)),(m=-1<c?f[c]:null)&&Bt(m))}function Bt(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[M])pe(f.i,c);else{var m=c.type,A=c.proxy;f.removeEventListener?f.removeEventListener(m,A,c.capture):f.detachEvent?f.detachEvent(Ir(m),A):f.addListener&&f.removeListener&&f.removeListener(A),(m=jn(f))?(pe(m,c),m.h==0&&(m.src=null,f[ht]=null)):J(c)}}}function Ir(c){return c in nn?nn[c]:nn[c]="on"+c}function Xe(c,f){if(c.da)c=!0;else{f=new v(f,this);var m=c.listener,A=c.ha||c.src;c.fa&&Bt(c),c=m.call(A,f)}return c}function jn(c){return c=c[ht],c instanceof Z?c:null}var Wr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gr(c){return typeof c=="function"?c:(c[Wr]||(c[Wr]=function(f){return c.handleEvent(f)}),c[Wr])}function ft(){Se.call(this),this.i=new Z(this),this.M=this,this.F=null}S(ft,Se),ft.prototype[M]=!0,ft.prototype.removeEventListener=function(c,f,m,A){at(this,c,f,m,A)};function _t(c,f){var m,A=c.F;if(A)for(m=[];A;A=A.F)m.push(A);if(c=c.M,A=f.type||f,typeof f=="string")f=new d(f,c);else if(f instanceof d)f.target=f.target||c;else{var U=f;f=new d(A,c),x(f,U)}if(U=!0,m)for(var z=m.length-1;0<=z;z--){var ee=f.g=m[z];U=Ri(ee,A,!0,f)&&U}if(ee=f.g=c,U=Ri(ee,A,!0,f)&&U,U=Ri(ee,A,!1,f)&&U,m)for(z=0;z<m.length;z++)ee=f.g=m[z],U=Ri(ee,A,!1,f)&&U}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var m=c.g[f],A=0;A<m.length;A++)J(m[A]);delete c.g[f],c.h--}}this.F=null},ft.prototype.K=function(c,f,m,A){return this.i.add(String(c),f,!1,m,A)},ft.prototype.L=function(c,f,m,A){return this.i.add(String(c),f,!0,m,A)};function Ri(c,f,m,A){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var U=!0,z=0;z<f.length;++z){var ee=f[z];if(ee&&!ee.da&&ee.capture==m){var Be=ee.listener,Mt=ee.ha||ee.src;ee.fa&&pe(c.i,ee),U=Be.call(Mt,A)!==!1&&U}}return U&&!A.defaultPrevented}function kt(c,f,m){if(typeof c=="function")m&&(c=g(c,m));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function Ar(c){c.g=kt(()=>{c.g=null,c.i&&(c.i=!1,Ar(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class xi extends Se{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ar(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oi(c){Se.call(this),this.h=c,this.g={}}S(Oi,Se);var Di=[];function Lo(c){q(c.g,function(f,m){this.g.hasOwnProperty(m)&&Bt(f)},c),c.g={}}Oi.prototype.N=function(){Oi.aa.N.call(this),Lo(this)},Oi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ni=a.JSON.stringify,fu=a.JSON.parse,Vo=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Vs(){}Vs.prototype.h=null;function al(c){return c.h||(c.h=c.i())}function js(){}var Fs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jo(){d.call(this,"d")}S(jo,d);function Mi(){d.call(this,"c")}S(Mi,d);var bn={},et=null;function Us(){return et=et||new ft}bn.La="serverreachability";function Fo(c){d.call(this,bn.La,c)}S(Fo,d);function Kr(c){const f=Us();_t(f,new Fo(f))}bn.STAT_EVENT="statevent";function rn(c,f){d.call(this,bn.STAT_EVENT,c),this.stat=f}S(rn,d);function wt(c){const f=Us();_t(f,new rn(f,c))}bn.Ma="timingevent";function Uo(c,f){d.call(this,bn.Ma,c),this.size=f}S(Uo,d);function Dt(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function Fn(){this.g=!0}Fn.prototype.xa=function(){this.g=!1};function ll(c,f,m,A,U,z){c.info(function(){if(c.g)if(z)for(var ee="",Be=z.split("&"),Mt=0;Mt<Be.length;Mt++){var Oe=Be[Mt].split("=");if(1<Oe.length){var qt=Oe[0];Oe=Oe[1];var zt=qt.split("_");ee=2<=zt.length&&zt[1]=="type"?ee+(qt+"="+Oe+"&"):ee+(qt+"=redacted&")}}else ee=null;else ee=z;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+f+`
`+m+`
`+ee})}function pu(c,f,m,A,U,z,ee){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+f+`
`+m+`
`+z+" "+ee})}function rr(c,f,m,A){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+cl(c,m)+(A?" "+A:"")})}function mu(c,f){c.info(function(){return"TIMEOUT: "+f})}Fn.prototype.info=function(){};function cl(c,f){if(!c.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(c=0;c<m.length;c++)if(Array.isArray(m[c])){var A=m[c];if(!(2>A.length)){var U=A[1];if(Array.isArray(U)&&!(1>U.length)){var z=U[0];if(z!="noop"&&z!="stop"&&z!="close")for(var ee=1;ee<U.length;ee++)U[ee]=""}}}}return Ni(m)}catch{return f}}var $o={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qo;function $s(){}S($s,Vs),$s.prototype.g=function(){return new XMLHttpRequest},$s.prototype.i=function(){return{}},qo=new $s;function It(c,f,m,A){this.j=c,this.i=f,this.l=m,this.R=A||1,this.U=new Oi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bs}function Bs(){this.i=null,this.g="",this.h=!1}var ul={},Li={};function qs(c,f,m){c.L=1,c.v=Ho(sr(f)),c.m=m,c.P=!0,dl(c,null)}function dl(c,f){c.F=Date.now(),Un(c),c.A=sr(c.v);var m=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),yl(m.i,"t",A),c.C=0,m=c.j.J,c.h=new Bs,c.g=R_(c.j,m?f:null,!c.m),0<c.O&&(c.M=new xi(g(c.Y,c,c.g),c.O)),f=c.U,m=c.g,A=c.ca;var U="readystatechange";Array.isArray(U)||(U&&(Di[0]=U.toString()),U=Di);for(var z=0;z<U.length;z++){var ee=nr(m,U[z],A||f.handleEvent,!1,f.h||f);if(!ee)break;f.g[ee.key]=ee}f=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),Kr(),ll(c.i,c.u,c.A,c.l,c.R,c.m)}It.prototype.ca=function(c){c=c.target;const f=this.M;f&&Xr(c)==3?f.j():this.Y(c)},It.prototype.Y=function(c){try{if(c==this.g)e:{const zt=Xr(this.g);var f=this.g.Ba();const Go=this.g.Z();if(!(3>zt)&&(zt!=3||this.g&&(this.h.h||this.g.oa()||__(this.g)))){this.J||zt!=4||f==7||(f==8||0>=Go?Kr(3):Kr(2)),ir(this);var m=this.g.Z();this.X=m;t:if(Vi(this)){var A=__(this.g);c="";var U=A.length,z=Xr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cr(this),Jr(this);var ee="";break t}this.h.i=new a.TextDecoder}for(f=0;f<U;f++)this.h.h=!0,c+=this.h.i.decode(A[f],{stream:!(z&&f==U-1)});A.length=0,this.h.g+=c,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=m==200,pu(this.i,this.u,this.A,this.l,this.R,zt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,Mt=this.g;if((Be=Mt.g?Mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Be)){var Oe=Be;break t}}Oe=null}if(m=Oe)rr(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hl(this,m);else{this.o=!1,this.s=3,wt(12),Cr(this),Jr(this);break e}}if(this.P){m=!0;let lr;for(;!this.J&&this.C<ee.length;)if(lr=gu(this,ee),lr==Li){zt==4&&(this.s=4,wt(14),m=!1),rr(this.i,this.l,null,"[Incomplete Response]");break}else if(lr==ul){this.s=4,wt(15),rr(this.i,this.l,ee,"[Invalid Chunk]"),m=!1;break}else rr(this.i,this.l,lr,null),hl(this,lr);if(Vi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||ee.length!=0||this.h.h||(this.s=1,wt(16),m=!1),this.o=this.o&&m,!m)rr(this.i,this.l,ee,"[Invalid Chunked Response]"),Cr(this),Jr(this);else if(0<ee.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),np(qt),qt.M=!0,wt(11))}}else rr(this.i,this.l,ee,null),hl(this,ee);zt==4&&Cr(this),this.o&&!this.J&&(zt==4?I_(this.j,this):(this.o=!1,Un(this)))}else yP(this.g),m==400&&0<ee.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),Cr(this),Jr(this)}}}catch{}finally{}};function Vi(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function gu(c,f){var m=c.C,A=f.indexOf(`
`,m);return A==-1?Li:(m=Number(f.substring(m,A)),isNaN(m)?ul:(A+=1,A+m>f.length?Li:(f=f.slice(A,A+m),c.C=A+m,f)))}It.prototype.cancel=function(){this.J=!0,Cr(this)};function Un(c){c.S=Date.now()+c.I,zs(c,c.I)}function zs(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Dt(g(c.ba,c),f)}function ir(c){c.B&&(a.clearTimeout(c.B),c.B=null)}It.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(mu(this.i,this.A),this.L!=2&&(Kr(),wt(17)),Cr(this),this.s=2,Jr(this)):zs(this,this.S-c)};function Jr(c){c.j.G==0||c.J||I_(c.j,c)}function Cr(c){ir(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,Lo(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function hl(c,f){try{var m=c.j;if(m.G!=0&&(m.g==c||Hs(m.h,c))){if(!c.K&&Hs(m.h,c)&&m.G==3){try{var A=m.Da.g.parse(f)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<c.F)Nu(m),Ou(m);else break e;tp(m),wt(18)}}else m.za=U[1],0<m.za-m.T&&37500>U[2]&&m.F&&m.v==0&&!m.C&&(m.C=Dt(g(m.Za,m),6e3));if(1>=vu(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Js(m,11)}else if((c.K||m.g==c)&&Nu(m),!y(f))for(U=m.Da.g.parse(f),f=0;f<U.length;f++){let Oe=U[f];if(m.T=Oe[0],Oe=Oe[1],m.G==2)if(Oe[0]=="c"){m.K=Oe[1],m.ia=Oe[2];const qt=Oe[3];qt!=null&&(m.la=qt,m.j.info("VER="+m.la));const zt=Oe[4];zt!=null&&(m.Aa=zt,m.j.info("SVER="+m.Aa));const Go=Oe[5];Go!=null&&typeof Go=="number"&&0<Go&&(A=1.5*Go,m.L=A,m.j.info("backChannelRequestTimeoutMs_="+A)),A=m;const lr=c.g;if(lr){const Lu=lr.g?lr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lu){var z=A.h;z.g||Lu.indexOf("spdy")==-1&&Lu.indexOf("quic")==-1&&Lu.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(pl(z,z.h),z.h=null))}if(A.D){const rp=lr.g?lr.g.getResponseHeader("X-HTTP-Session-Id"):null;rp&&(A.ya=rp,$e(A.I,A.D,rp))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-c.F,m.j.info("Handshake RTT: "+m.R+"ms")),A=m;var ee=c;if(A.qa=P_(A,A.J?A.ia:null,A.W),ee.K){ml(A.h,ee);var Be=ee,Mt=A.L;Mt&&(Be.I=Mt),Be.B&&(ir(Be),Un(Be)),A.g=ee}else b_(A);0<m.i.length&&Du(m)}else Oe[0]!="stop"&&Oe[0]!="close"||Js(m,7);else m.G==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?Js(m,7):ep(m):Oe[0]!="noop"&&m.l&&m.l.ta(Oe),m.v=0)}}Kr(4)}catch{}}var fl=class{constructor(c,f){this.g=c,this.map=f}};function Jf(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yu(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function vu(c){return c.h?1:c.g?c.g.size:0}function Hs(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function pl(c,f){c.g?c.g.add(f):c.h=f}function ml(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}Jf.prototype.cancel=function(){if(this.i=gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function gl(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const m of c.g.values())f=f.concat(m.D);return f}return E(c.i)}function _u(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var f=[],m=c.length,A=0;A<m;A++)f.push(c[A]);return f}f=[],m=0;for(A in c)f[m++]=c[A];return f}function Qf(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var f=[];c=c.length;for(var m=0;m<c;m++)f.push(m);return f}f=[],m=0;for(const A in c)f[m++]=A;return f}}}function wu(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var m=Qf(c),A=_u(c),U=A.length,z=0;z<U;z++)f.call(void 0,A[z],m&&m[z],c)}var Eu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yf(c,f){if(c){c=c.split("&");for(var m=0;m<c.length;m++){var A=c[m].indexOf("="),U=null;if(0<=A){var z=c[m].substring(0,A);U=c[m].substring(A+1)}else z=c[m];f(z,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Nt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Nt){this.h=c.h,or(this,c.j),this.o=c.o,this.g=c.g,zo(this,c.s),this.l=c.l;var f=c.i,m=new Fi;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Su(this,m),this.m=c.m}else c&&(f=String(c).match(Eu))?(this.h=!1,or(this,f[1]||"",!0),this.o=Ws(f[2]||""),this.g=Ws(f[3]||"",!0),zo(this,f[4]),this.l=Ws(f[5]||"",!0),Su(this,f[6]||"",!0),this.m=Ws(f[7]||"")):(this.h=!1,this.i=new Fi(null,this.h))}Nt.prototype.toString=function(){var c=[],f=this.j;f&&c.push(Gs(f,ji,!0),":");var m=this.g;return(m||f=="file")&&(c.push("//"),(f=this.o)&&c.push(Gs(f,ji,!0),"@"),c.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&c.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(Gs(m,m.charAt(0)=="/"?Qr:Ks,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",Gs(m,bu)),c.join("")};function sr(c){return new Nt(c)}function or(c,f,m){c.j=m?Ws(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function zo(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function Su(c,f,m){f instanceof Fi?(c.i=f,Au(c.i,c.h)):(m||(f=Gs(f,Tu)),c.i=new Fi(f,c.h))}function $e(c,f,m){c.i.set(f,m)}function Ho(c){return $e(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ws(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Gs(c,f,m){return typeof c=="string"?(c=encodeURI(c).replace(f,Xf),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Xf(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ji=/[#\/\?@]/g,Ks=/[#\?:]/g,Qr=/[#\?]/g,Tu=/[#\?@]/g,bu=/#/g;function Fi(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function Pr(c){c.g||(c.g=new Map,c.h=0,c.i&&Yf(c.i,function(f,m){c.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=Fi.prototype,t.add=function(c,f){Pr(this),this.i=null,c=Yr(this,c);var m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(f),this.h+=1,this};function ku(c,f){Pr(c),f=Yr(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function Iu(c,f){return Pr(c),f=Yr(c,f),c.g.has(f)}t.forEach=function(c,f){Pr(this),this.g.forEach(function(m,A){m.forEach(function(U){c.call(f,U,A,this)},this)},this)},t.na=function(){Pr(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let A=0;A<f.length;A++){const U=c[A];for(let z=0;z<U.length;z++)m.push(f[A])}return m},t.V=function(c){Pr(this);let f=[];if(typeof c=="string")Iu(this,c)&&(f=f.concat(this.g.get(Yr(this,c))));else{c=Array.from(this.g.values());for(let m=0;m<c.length;m++)f=f.concat(c[m])}return f},t.set=function(c,f){return Pr(this),this.i=null,c=Yr(this,c),Iu(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function yl(c,f,m){ku(c,f),0<m.length&&(c.i=null,c.g.set(Yr(c,f),E(m)),c.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var A=f[m];const z=encodeURIComponent(String(A)),ee=this.V(A);for(A=0;A<ee.length;A++){var U=z;ee[A]!==""&&(U+="="+encodeURIComponent(String(ee[A]))),c.push(U)}}return this.i=c.join("&")};function Yr(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function Au(c,f){f&&!c.j&&(Pr(c),c.i=null,c.g.forEach(function(m,A){var U=A.toLowerCase();A!=U&&(ku(this,A),yl(this,U,m))},c)),c.j=f}function Cu(c,f){const m=new Fn;if(a.Image){const A=new Image;A.onload=T(ar,m,"TestLoadImage: loaded",!0,f,A),A.onerror=T(ar,m,"TestLoadImage: error",!1,f,A),A.onabort=T(ar,m,"TestLoadImage: abort",!1,f,A),A.ontimeout=T(ar,m,"TestLoadImage: timeout",!1,f,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else f(!1)}function Pu(c,f){const m=new Fn,A=new AbortController,U=setTimeout(()=>{A.abort(),ar(m,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:A.signal}).then(z=>{clearTimeout(U),z.ok?ar(m,"TestPingServer: ok",!0,f):ar(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(U),ar(m,"TestPingServer: error",!1,f)})}function ar(c,f,m,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(m)}catch{}}function Ru(){this.g=new Vo}function j(c,f,m){const A=m||"";try{wu(c,function(U,z){let ee=U;u(U)&&(ee=Ni(U)),f.push(A+z+"="+encodeURIComponent(ee))})}catch(U){throw f.push(A+"type="+encodeURIComponent("_badmap")),U}}function Q(c){this.l=c.Ub||null,this.j=c.eb||!1}S(Q,Vs),Q.prototype.g=function(){return new te(this.l,this.j)},Q.prototype.i=function(c){return function(){return c}}({});function te(c,f){ft.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(te,ft),t=te.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,De(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,le(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,De(this)),this.g&&(this.readyState=3,De(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;oe(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function oe(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?le(this):De(this),this.readyState==3&&oe(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,le(this))},t.Qa=function(c){this.g&&(this.response=c,le(this))},t.ga=function(){this.g&&le(this)};function le(c){c.readyState=4,c.l=null,c.j=null,c.v=null,De(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=f.next();return c.join(`\r
`)};function De(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(te.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function sn(c){let f="";return q(c,function(m,A){f+=A,f+=":",f+=m,f+=`\r
`}),f}function Ui(c,f,m){e:{for(A in m){var A=!1;break e}A=!0}A||(m=sn(m),typeof c=="string"?m!=null&&encodeURIComponent(String(m)):$e(c,f,m))}function Ve(c){ft.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ve,ft);var Zf=/^https?$/i,gP=["POST","PUT"];t=Ve.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,m,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qo.g(),this.v=this.o?al(this.o):al(qo),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(z){m_(this,z);return}if(c=m||"",m=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)m.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const z of A.keys())m.set(z,A.get(z));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(m.keys()).find(z=>z.toLowerCase()=="content-type"),U=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(gP,f,void 0))||A||U||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,ee]of m)this.g.setRequestHeader(z,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{v_(this),this.u=!0,this.g.send(c),this.u=!1}catch(z){m_(this,z)}};function m_(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,g_(c),xu(c)}function g_(c){c.A||(c.A=!0,_t(c,"complete"),_t(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,_t(this,"complete"),_t(this,"abort"),xu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xu(this,!0)),Ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?y_(this):this.bb())},t.bb=function(){y_(this)};function y_(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Xr(c)!=4||c.Z()!=2)){if(c.u&&Xr(c)==4)kt(c.Ea,0,c);else if(_t(c,"readystatechange"),Xr(c)==4){c.h=!1;try{const ee=c.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var A;if(A=ee===0){var U=String(c.D).match(Eu)[1]||null;!U&&a.self&&a.self.location&&(U=a.self.location.protocol.slice(0,-1)),A=!Zf.test(U?U.toLowerCase():"")}m=A}if(m)_t(c,"complete"),_t(c,"success");else{c.m=6;try{var z=2<Xr(c)?c.g.statusText:""}catch{z=""}c.l=z+" ["+c.Z()+"]",g_(c)}}finally{xu(c)}}}}function xu(c,f){if(c.g){v_(c);const m=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||_t(c,"ready");try{m.onreadystatechange=A}catch{}}}function v_(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Xr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Xr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),fu(f)}};function __(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function yP(c){const f={};c=(c.g&&2<=Xr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(y(c[A]))continue;var m=b(c[A]);const U=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const z=f[U]||[];f[U]=z,z.push(m)}P(f,function(A){return A.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vl(c,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||f}function w_(c){this.Aa=0,this.i=[],this.j=new Fn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vl("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vl("baseRetryDelayMs",5e3,c),this.cb=vl("retryDelaySeedMs",1e4,c),this.Wa=vl("forwardChannelMaxRetries",2,c),this.wa=vl("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Jf(c&&c.concurrentRequestLimit),this.Da=new Ru,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=w_.prototype,t.la=8,t.G=1,t.connect=function(c,f,m,A){wt(0),this.W=c,this.H=f||{},m&&A!==void 0&&(this.H.OSID=m,this.H.OAID=A),this.F=this.X,this.I=P_(this,null,this.W),Du(this)};function ep(c){if(E_(c),c.G==3){var f=c.U++,m=sr(c.I);if($e(m,"SID",c.K),$e(m,"RID",f),$e(m,"TYPE","terminate"),_l(c,m),f=new It(c,c.j,f),f.L=2,f.v=Ho(sr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=R_(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Un(f)}C_(c)}function Ou(c){c.g&&(np(c),c.g.cancel(),c.g=null)}function E_(c){Ou(c),c.u&&(a.clearTimeout(c.u),c.u=null),Nu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Du(c){if(!yu(c.h)&&!c.s){c.s=!0;var f=c.Ga;Ye||he(),X||(Ye(),X=!0),ue.add(f,c),c.B=0}}function vP(c,f){return vu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Dt(g(c.Ga,c,f),A_(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const U=new It(this,this.j,c);let z=this.o;if(this.S&&(z?(z=I(z),x(z,this.S)):z=this.S),this.m!==null||this.O||(U.H=z,z=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var A=this.i[m];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(f+=A,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=T_(this,U,f),m=sr(this.I),$e(m,"RID",c),$e(m,"CVER",22),this.D&&$e(m,"X-HTTP-Session-Id",this.D),_l(this,m),z&&(this.O?f="headers="+encodeURIComponent(String(sn(z)))+"&"+f:this.m&&Ui(m,this.m,z)),pl(this.h,U),this.Ua&&$e(m,"TYPE","init"),this.P?($e(m,"$req",f),$e(m,"SID","null"),U.T=!0,qs(U,m,null)):qs(U,m,f),this.G=2}}else this.G==3&&(c?S_(this,c):this.i.length==0||yu(this.h)||S_(this))};function S_(c,f){var m;f?m=f.l:m=c.U++;const A=sr(c.I);$e(A,"SID",c.K),$e(A,"RID",m),$e(A,"AID",c.T),_l(c,A),c.m&&c.o&&Ui(A,c.m,c.o),m=new It(c,c.j,m,c.B+1),c.m===null&&(m.H=c.o),f&&(c.i=f.D.concat(c.i)),f=T_(c,m,1e3),m.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),pl(c.h,m),qs(m,A,f)}function _l(c,f){c.H&&q(c.H,function(m,A){$e(f,A,m)}),c.l&&wu({},function(m,A){$e(f,A,m)})}function T_(c,f,m){m=Math.min(c.i.length,m);var A=c.l?g(c.l.Na,c.l,c):null;e:{var U=c.i;let z=-1;for(;;){const ee=["count="+m];z==-1?0<m?(z=U[0].g,ee.push("ofs="+z)):z=0:ee.push("ofs="+z);let Be=!0;for(let Mt=0;Mt<m;Mt++){let Oe=U[Mt].g;const qt=U[Mt].map;if(Oe-=z,0>Oe)z=Math.max(0,U[Mt].g-100),Be=!1;else try{j(qt,ee,"req"+Oe+"_")}catch{A&&A(qt)}}if(Be){A=ee.join("&");break e}}}return c=c.i.splice(0,m),f.D=c,A}function b_(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;Ye||he(),X||(Ye(),X=!0),ue.add(f,c),c.v=0}}function tp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Dt(g(c.Fa,c),A_(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,k_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Dt(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),Ou(this),k_(this))};function np(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function k_(c){c.g=new It(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=sr(c.qa);$e(f,"RID","rpc"),$e(f,"SID",c.K),$e(f,"AID",c.T),$e(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&$e(f,"TO",c.ja),$e(f,"TYPE","xmlhttp"),_l(c,f),c.m&&c.o&&Ui(f,c.m,c.o),c.L&&(c.g.I=c.L);var m=c.g;c=c.ia,m.L=1,m.v=Ho(sr(f)),m.m=null,m.P=!0,dl(m,c)}t.Za=function(){this.C!=null&&(this.C=null,Ou(this),tp(this),wt(19))};function Nu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function I_(c,f){var m=null;if(c.g==f){Nu(c),np(c),c.g=null;var A=2}else if(Hs(c.h,f))m=f.D,ml(c.h,f),A=1;else return;if(c.G!=0){if(f.o)if(A==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var U=c.B;A=Us(),_t(A,new Uo(A,m)),Du(c)}else b_(c);else if(U=f.s,U==3||U==0&&0<f.X||!(A==1&&vP(c,f)||A==2&&tp(c)))switch(m&&0<m.length&&(f=c.h,f.i=f.i.concat(m)),U){case 1:Js(c,5);break;case 4:Js(c,10);break;case 3:Js(c,6);break;default:Js(c,2)}}}function A_(c,f){let m=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(m*=2),m*f}function Js(c,f){if(c.j.info("Error code "+f),f==2){var m=g(c.fb,c),A=c.Xa;const U=!A;A=new Nt(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||or(A,"https"),Ho(A),U?Cu(A.toString(),m):Pu(A.toString(),m)}else wt(2);c.G=0,c.l&&c.l.sa(f),C_(c),E_(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function C_(c){if(c.G=0,c.ka=[],c.l){const f=gl(c.h);(f.length!=0||c.i.length!=0)&&(k(c.ka,f),k(c.ka,c.i),c.h.i.length=0,E(c.i),c.i.length=0),c.l.ra()}}function P_(c,f,m){var A=m instanceof Nt?sr(m):new Nt(m);if(A.g!="")f&&(A.g=f+"."+A.g),zo(A,A.s);else{var U=a.location;A=U.protocol,f=f?f+"."+U.hostname:U.hostname,U=+U.port;var z=new Nt(null);A&&or(z,A),f&&(z.g=f),U&&zo(z,U),m&&(z.l=m),A=z}return m=c.D,f=c.ya,m&&f&&$e(A,m,f),$e(A,"VER",c.la),_l(c,A),A}function R_(c,f,m){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new Ve(new Q({eb:m})):new Ve(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function x_(){}t=x_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Mu(){}Mu.prototype.g=function(c,f){return new kn(c,f)};function kn(c,f){ft.call(this),this.g=new w_(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!y(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!y(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Wo(this)}S(kn,ft),kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){ep(this.g)},kn.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.u&&(m={},m.__data__=Ni(c),c=m);f.i.push(new fl(f.Ya++,c)),f.G==3&&Du(f)},kn.prototype.N=function(){this.g.l=null,delete this.j,ep(this.g),delete this.g,kn.aa.N.call(this)};function O_(c){jo.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const m in f){c=m;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}S(O_,jo);function D_(){Mi.call(this),this.status=1}S(D_,Mi);function Wo(c){this.g=c}S(Wo,x_),Wo.prototype.ua=function(){_t(this.g,"a")},Wo.prototype.ta=function(c){_t(this.g,new O_(c))},Wo.prototype.sa=function(c){_t(this.g,new D_)},Wo.prototype.ra=function(){_t(this.g,"b")},Mu.prototype.createWebChannel=Mu.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,jI=function(){return new Mu},VI=function(){return Us()},LI=bn,fg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$o.NO_ERROR=0,$o.TIMEOUT=8,$o.HTTP_ERROR=6,Fd=$o,Bo.COMPLETE="complete",MI=Bo,js.EventType=Fs,Fs.OPEN="a",Fs.CLOSE="b",Fs.ERROR="c",Fs.MESSAGE="d",ft.prototype.listen=ft.prototype.K,Vl=js,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,NI=Ve}).apply(typeof id<"u"?id:typeof self<"u"?self:typeof window<"u"?window:{});const C0="@firebase/firestore",P0="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kt.UNAUTHENTICATED=new Kt(null),Kt.GOOGLE_CREDENTIALS=new Kt("google-credentials-uid"),Kt.FIRST_PARTY=new Kt("first-party-uid"),Kt.MOCK_USER=new Kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=new rv("@firebase/firestore");function Qo(){return To.logLevel}function ie(t,...e){if(To.logLevel<=be.DEBUG){const n=e.map(yv);To.debug(`Firestore (${el}): ${t}`,...n)}}function Ti(t,...e){if(To.logLevel<=be.ERROR){const n=e.map(yv);To.error(`Firestore (${el}): ${t}`,...n)}}function bi(t,...e){if(To.logLevel<=be.WARN){const n=e.map(yv);To.warn(`Firestore (${el}): ${t}`,...n)}}function yv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,FI(t,r,n)}function FI(t,e,n){let r=`FIRESTORE (${el}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ti(r),new Error(r)}function Me(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||FI(e,i,r)}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends Ai{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $I{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Kt.UNAUTHENTICATED))}shutdown(){}}class gL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class yL{constructor(e){this.t=e,this.currentUser=Kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Me(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new hi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new hi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new hi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Me(typeof r.accessToken=="string",31837,{l:r}),new UI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Me(e===null||typeof e=="string",2055,{h:e}),new Kt(e)}}class vL{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Kt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _L{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new vL(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class R0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wL{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Me(this.o===void 0,3512);const r=s=>{s.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new R0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Me(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new R0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=EL(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function pg(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Ee(r,i);{const s=BI(),o=SL(s.encode(x0(t,n)),s.encode(x0(e,n)));return o!==0?o:Ee(r,i)}}n+=r>65535?2:1}return Ee(t.length,e.length)}function x0(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function SL(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ee(t[n],e[n]);return Ee(t.length,e.length)}function Va(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="__name__";class Or{constructor(e,n,r){n===void 0?n=0:n>e.length&&fe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&fe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Or.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Or?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Or.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return Ee(e.length,n.length)}static compareSegments(e,n){const r=Or.isNumericId(e),i=Or.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Or.extractNumericId(e).compare(Or.extractNumericId(n)):pg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ys.fromString(e.substring(4,e.length-2))}}class We extends Or{construct(e,n,r){return new We(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new We(n)}static emptyPath(){return new We([])}}const TL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rt extends Or{construct(e,n,r){return new Rt(e,n,r)}static isValidIdentifier(e){return TL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===O0}static keyField(){return new Rt([O0])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new re(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new re(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new re(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new re(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rt(n)}static emptyPath(){return new Rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(We.fromString(e))}static fromName(e){return new ce(We.fromString(e).popFirst(5))}static empty(){return new ce(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return We.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new We(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(t,e,n){if(!n)throw new re(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function zI(t,e,n,r){if(e===!0&&r===!0)throw new re(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function D0(t){if(!ce.isDocumentKey(t))throw new re(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function N0(t){if(ce.isDocumentKey(t))throw new re(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function HI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function vf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe(12329,{type:typeof t})}function dn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vf(t);throw new re(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function bL(t,e){if(e<=0)throw new re(H.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Yc(t,e){if(!HI(t))throw new re(H.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new re(H.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0=-62135596800,L0=1e6;class Ge{static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*L0);return new Ge(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<M0)throw new re(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/L0}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ge._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yc(e,Ge._jsonSchema))return new Ge(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-M0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ge._jsonSchemaVersion="firestore/timestamp/1.0",Ge._jsonSchema={type:yt("string",Ge._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{static fromTimestamp(e){return new ge(e)}static min(){return new ge(new Ge(0,0))}static max(){return new ge(new Ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc=-1;function kL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ge.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new Ts(i,ce.empty(),e)}function IL(t){return new Ts(t.readTime,t.key,Rc)}class Ts{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ts(ge.min(),ce.empty(),Rc)}static max(){return new Ts(ge.max(),ce.empty(),Rc)}}function AL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==CL)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):W.reject(n)}static resolve(e){return new W((n,r)=>{n(e)})}static reject(e){return new W((n,r)=>{r(e)})}static waitFor(e){return new W((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=W.resolve(!1);for(const r of e)n=n.next(i=>i?W.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new W((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new W((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function RL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function nl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}_f.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=-1;function wf(t){return t==null}function Ah(t){return t===0&&1/t==-1/0}function xL(t){return typeof t=="number"&&Number.isInteger(t)&&!Ah(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="";function OL(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=V0(e)),e=DL(t.get(n),e);return V0(e)}function DL(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case WI:n+="";break;default:n+=s}}return n}function V0(t){return t+WI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ms(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function GI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.comparator=e,this.root=n||jt.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sd(this.root,e,this.comparator,!1)}getReverseIterator(){return new sd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sd(this.root,e,this.comparator,!0)}}class sd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??jt.RED,this.left=i??jt.EMPTY,this.right=s??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new jt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return jt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fe(27949);return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe(57766)}get value(){throw fe(16141)}get color(){throw fe(16727)}get left(){throw fe(29726)}get right(){throw fe(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new F0(this.data.getIterator())}getIteratorFrom(e){return new F0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Tt(this.comparator);return n.data=e,n}}class F0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new Rn([])}unionWith(e){let n=new Tt(Rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Va(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new KI("Invalid base64 string: "+s):s}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const NL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(t){if(Me(!!t,39018),typeof t=="string"){let e=0;const n=NL.exec(t);if(Me(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ut(t.seconds),nanos:ut(t.nanos)}}function ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ks(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI="server_timestamp",QI="__type__",YI="__previous_value__",XI="__local_write_time__";function _v(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[QI])===null||n===void 0?void 0:n.stringValue)===JI}function Ef(t){const e=t.mapValue.fields[YI];return _v(e)?Ef(e):e}function xc(t){const e=bs(t.mapValue.fields[XI].timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,n,r,i,s,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Ch="(default)";class ja{constructor(e,n){this.projectId=e,this.database=n||Ch}static empty(){return new ja("","")}get isDefaultDatabase(){return this.database===Ch}isEqual(e){return e instanceof ja&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="__type__",LL="__max__",od={mapValue:{}},eA="__vector__",Ph="value";function Is(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_v(t)?4:jL(t)?9007199254740991:VL(t)?10:11:fe(28295,{value:t})}function qr(t,e){if(t===e)return!0;const n=Is(t);if(n!==Is(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xc(t).isEqual(xc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=bs(i.timestampValue),a=bs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ks(i.bytesValue).isEqual(ks(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ut(i.geoPointValue.latitude)===ut(s.geoPointValue.latitude)&&ut(i.geoPointValue.longitude)===ut(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ut(i.integerValue)===ut(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ut(i.doubleValue),a=ut(s.doubleValue);return o===a?Ah(o)===Ah(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Va(t.arrayValue.values||[],e.arrayValue.values||[],qr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(j0(o)!==j0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!qr(o[l],a[l])))return!1;return!0}(t,e);default:return fe(52216,{left:t})}}function Oc(t,e){return(t.values||[]).find(n=>qr(n,e))!==void 0}function Fa(t,e){if(t===e)return 0;const n=Is(t),r=Is(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ut(s.integerValue||s.doubleValue),l=ut(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return U0(t.timestampValue,e.timestampValue);case 4:return U0(xc(t),xc(e));case 5:return pg(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ks(s),l=ks(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Ee(a[u],l[u]);if(h!==0)return h}return Ee(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ee(ut(s.latitude),ut(o.latitude));return a!==0?a:Ee(ut(s.longitude),ut(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return $0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,h;const p=s.fields||{},g=o.fields||{},T=(a=p[Ph])===null||a===void 0?void 0:a.arrayValue,S=(l=g[Ph])===null||l===void 0?void 0:l.arrayValue,E=Ee(((u=T==null?void 0:T.values)===null||u===void 0?void 0:u.length)||0,((h=S==null?void 0:S.values)===null||h===void 0?void 0:h.length)||0);return E!==0?E:$0(T,S)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===od.mapValue&&o===od.mapValue)return 0;if(s===od.mapValue)return 1;if(o===od.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){const g=pg(l[p],h[p]);if(g!==0)return g;const T=Fa(a[l[p]],u[h[p]]);if(T!==0)return T}return Ee(l.length,h.length)}(t.mapValue,e.mapValue);default:throw fe(23264,{le:n})}}function U0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=bs(t),r=bs(e),i=Ee(n.seconds,r.seconds);return i!==0?i:Ee(n.nanos,r.nanos)}function $0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Fa(n[i],r[i]);if(s)return s}return Ee(n.length,r.length)}function Ua(t){return mg(t)}function mg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=bs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ks(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=mg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${mg(n.fields[o])}`;return i+"}"}(t.mapValue):fe(61005,{value:t})}function Ud(t){switch(Is(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ef(t);return e?16+Ud(e):16;case 5:return 2*t.stringValue.length;case 6:return ks(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Ud(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ms(r.fields,(s,o)=>{i+=s.length+Ud(o)}),i}(t.mapValue);default:throw fe(13486,{value:t})}}function B0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function gg(t){return!!t&&"integerValue"in t}function wv(t){return!!t&&"arrayValue"in t}function q0(t){return!!t&&"nullValue"in t}function z0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $d(t){return!!t&&"mapValue"in t}function VL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[ZI])===null||n===void 0?void 0:n.stringValue)===eA}function tc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ms(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=tc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=tc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function jL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===LL}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!$d(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=tc(n)}setAll(e){let n=Rt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=tc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());$d(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];$d(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ms(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new _n(tc(this.value))}}function tA(t){const e=[];return Ms(t.fields,(n,r)=>{const i=new Rt([n]);if($d(r)){const s=tA(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Qt(e,0,ge.min(),ge.min(),ge.min(),_n.empty(),0)}static newFoundDocument(e,n,r,i){return new Qt(e,1,n,ge.min(),r,i,0)}static newNoDocument(e,n){return new Qt(e,2,n,ge.min(),ge.min(),_n.empty(),0)}static newUnknownDocument(e,n){return new Qt(e,3,n,ge.min(),ge.min(),_n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.position=e,this.inclusive=n}}function H0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ce.comparator(ce.fromName(o.referenceValue),n.key):r=Fa(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function W0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,n="asc"){this.field=e,this.dir=n}}function FL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{}class gt extends nA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new $L(e,n,r):n==="array-contains"?new zL(e,r):n==="in"?new HL(e,r):n==="not-in"?new WL(e,r):n==="array-contains-any"?new GL(e,r):new gt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new BL(e,r):new qL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Fa(n,this.value)):n!==null&&Is(this.value)===Is(n)&&this.matchesComparison(Fa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tr extends nA{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Tr(e,n)}matches(e){return rA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function rA(t){return t.op==="and"}function iA(t){return UL(t)&&rA(t)}function UL(t){for(const e of t.filters)if(e instanceof Tr)return!1;return!0}function yg(t){if(t instanceof gt)return t.field.canonicalString()+t.op.toString()+Ua(t.value);if(iA(t))return t.filters.map(e=>yg(e)).join(",");{const e=t.filters.map(n=>yg(n)).join(",");return`${t.op}(${e})`}}function sA(t,e){return t instanceof gt?function(r,i){return i instanceof gt&&r.op===i.op&&r.field.isEqual(i.field)&&qr(r.value,i.value)}(t,e):t instanceof Tr?function(r,i){return i instanceof Tr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&sA(o,i.filters[a]),!0):!1}(t,e):void fe(19439)}function oA(t){return t instanceof gt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ua(n.value)}`}(t):t instanceof Tr?function(n){return n.op.toString()+" {"+n.getFilters().map(oA).join(" ,")+"}"}(t):"Filter"}class $L extends gt{constructor(e,n,r){super(e,n,r),this.key=ce.fromName(r.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class BL extends gt{constructor(e,n){super(e,"in",n),this.keys=aA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class qL extends gt{constructor(e,n){super(e,"not-in",n),this.keys=aA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function aA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ce.fromName(r.referenceValue))}class zL extends gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return wv(n)&&Oc(n.arrayValue,this.value)}}class HL extends gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Oc(this.value.arrayValue,n)}}class WL extends gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Oc(this.value.arrayValue,n)}}class GL extends gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!wv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Oc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}}function G0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new KL(t,e,n,r,i,s,o)}function Ev(t){const e=ve(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>yg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),wf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ua(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ua(r)).join(",")),e.Pe=n}return e.Pe}function Sv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!FL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!W0(t.startAt,e.startAt)&&W0(t.endAt,e.endAt)}function vg(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function JL(t,e,n,r,i,s,o,a){return new rl(t,e,n,r,i,s,o,a)}function Sf(t){return new rl(t)}function K0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function lA(t){return t.collectionGroup!==null}function nc(t){const e=ve(t);if(e.Te===null){e.Te=[];const n=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Tt(Rt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new Dc(s,r))}),n.has(Rt.keyField().canonicalString())||e.Te.push(new Dc(Rt.keyField(),r))}return e.Te}function $r(t){const e=ve(t);return e.Ie||(e.Ie=QL(e,nc(t))),e.Ie}function QL(t,e){if(t.limitType==="F")return G0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Dc(i.field,s)});const n=t.endAt?new Rh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Rh(t.startAt.position,t.startAt.inclusive):null;return G0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function _g(t,e){const n=t.filters.concat([e]);return new rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function xh(t,e,n){return new rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Tf(t,e){return Sv($r(t),$r(e))&&t.limitType===e.limitType}function cA(t){return`${Ev($r(t))}|lt:${t.limitType}`}function Yo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>oA(i)).join(", ")}]`),wf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ua(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ua(i)).join(",")),`Target(${r})`}($r(t))}; limitType=${t.limitType})`}function bf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ce.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of nc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=H0(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,nc(r),i)||r.endAt&&!function(o,a,l){const u=H0(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,nc(r),i))}(t,e)}function YL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uA(t){return(e,n)=>{let r=!1;for(const i of nc(t)){const s=XL(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function XL(t,e,n){const r=t.field.isKeyField()?ce.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Fa(l,u):fe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ms(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return GI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL=new ot(ce.comparator);function ki(){return ZL}const dA=new ot(ce.comparator);function jl(...t){let e=dA;for(const n of t)e=e.insert(n.key,n);return e}function hA(t){let e=dA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function oo(){return rc()}function fA(){return rc()}function rc(){return new Oo(t=>t.toString(),(t,e)=>t.isEqual(e))}const e2=new ot(ce.comparator),t2=new Tt(ce.comparator);function ke(...t){let e=t2;for(const n of t)e=e.add(n);return e}const n2=new Tt(Ee);function r2(){return n2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ah(e)?"-0":e}}function pA(t){return{integerValue:""+t}}function i2(t,e){return xL(e)?pA(e):Tv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(){this._=void 0}}function s2(t,e,n){return t instanceof Nc?function(i,s){const o={fields:{[QI]:{stringValue:JI},[XI]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&_v(s)&&(s=Ef(s)),s&&(o.fields[YI]=s),{mapValue:o}}(n,e):t instanceof Mc?gA(t,e):t instanceof Lc?yA(t,e):function(i,s){const o=mA(i,s),a=J0(o)+J0(i.Ee);return gg(o)&&gg(i.Ee)?pA(a):Tv(i.serializer,a)}(t,e)}function o2(t,e,n){return t instanceof Mc?gA(t,e):t instanceof Lc?yA(t,e):n}function mA(t,e){return t instanceof Oh?function(r){return gg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Nc extends kf{}class Mc extends kf{constructor(e){super(),this.elements=e}}function gA(t,e){const n=vA(e);for(const r of t.elements)n.some(i=>qr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Lc extends kf{constructor(e){super(),this.elements=e}}function yA(t,e){let n=vA(e);for(const r of t.elements)n=n.filter(i=>!qr(i,r));return{arrayValue:{values:n}}}class Oh extends kf{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function J0(t){return ut(t.integerValue||t.doubleValue)}function vA(t){return wv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n){this.field=e,this.transform=n}}function l2(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Mc&&i instanceof Mc||r instanceof Lc&&i instanceof Lc?Va(r.elements,i.elements,qr):r instanceof Oh&&i instanceof Oh?qr(r.Ee,i.Ee):r instanceof Nc&&i instanceof Nc}(t.transform,e.transform)}class c2{constructor(e,n){this.version=e,this.transformResults=n}}class Gn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gn}static exists(e){return new Gn(void 0,e)}static updateTime(e){return new Gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class If{}function _A(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bv(t.key,Gn.none()):new Xc(t.key,t.data,Gn.none());{const n=t.data,r=_n.empty();let i=new Tt(Rt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ls(t.key,r,new Rn(i.toArray()),Gn.none())}}function u2(t,e,n){t instanceof Xc?function(i,s,o){const a=i.value.clone(),l=Y0(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ls?function(i,s,o){if(!Bd(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Y0(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(wA(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ic(t,e,n,r){return t instanceof Xc?function(s,o,a,l){if(!Bd(s.precondition,o))return a;const u=s.value.clone(),h=X0(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ls?function(s,o,a,l){if(!Bd(s.precondition,o))return a;const u=X0(s.fieldTransforms,l,o),h=o.data;return h.setAll(wA(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return Bd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function d2(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=mA(r.transform,i||null);s!=null&&(n===null&&(n=_n.empty()),n.set(r.field,s))}return n||null}function Q0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Va(r,i,(s,o)=>l2(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xc extends If{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ls extends If{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function wA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Y0(t,e,n){const r=new Map;Me(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,o2(o,a,n[i]))}return r}function X0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,s2(s,o,e))}return r}class bv extends If{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class h2 extends If{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&u2(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ic(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ic(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=fA();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=_A(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&Va(this.mutations,e.mutations,(n,r)=>Q0(n,r))&&Va(this.baseMutations,e.baseMutations,(n,r)=>Q0(n,r))}}class kv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Me(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return e2}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new kv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,Ce;function g2(t){switch(t){case H.OK:return fe(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return fe(15467,{code:t})}}function EA(t){if(t===void 0)return Ti("GRPC error has no .code"),H.UNKNOWN;switch(t){case pt.OK:return H.OK;case pt.CANCELLED:return H.CANCELLED;case pt.UNKNOWN:return H.UNKNOWN;case pt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case pt.INTERNAL:return H.INTERNAL;case pt.UNAVAILABLE:return H.UNAVAILABLE;case pt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case pt.NOT_FOUND:return H.NOT_FOUND;case pt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case pt.ABORTED:return H.ABORTED;case pt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case pt.DATA_LOSS:return H.DATA_LOSS;default:return fe(39323,{code:t})}}(Ce=pt||(pt={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=new ys([4294967295,4294967295],0);function Z0(t){const e=BI().encode(t),n=new DI;return n.update(e),new Uint8Array(n.digest())}function eE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ys([n,r],0),new ys([i,s],0)]}class Iv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Fl(`Invalid padding: ${n}`);if(r<0)throw new Fl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Fl(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=ys.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(ys.fromNumber(r)));return i.compare(y2)===1&&(i=new ys([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Z0(e),[r,i]=eE(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Iv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;const n=Z0(e),[r,i]=eE(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Fl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Zc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Af(ge.min(),i,new ot(Ee),ki(),ke())}}class Zc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Zc(r,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class SA{constructor(e,n){this.targetId=e,this.De=n}}class TA{constructor(e,n,r=Ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class tE{constructor(){this.ve=0,this.Ce=nE(),this.Fe=Ot.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ke(),n=ke(),r=ke();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:fe(38017,{changeType:s})}}),new Zc(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=nE()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Me(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class v2{constructor(e){this.We=e,this.Ge=new Map,this.ze=ki(),this.je=ad(),this.Je=ad(),this.He=new ot(Ee)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:fe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const s=i.target;if(vg(s))if(r===0){const o=new ce(s.path);this.Xe(n,o,Qt.newNoDocument(o,ge.min()))}else Me(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const a=this._t(e),l=a?this.ut(a,e,o):1;if(l!==0){this.rt(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,u)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ks(r).toUint8Array()}catch(l){if(l instanceof KI)return bi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Iv(o,i,s)}catch(l){return bi(l instanceof Fl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,s,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((s,o)=>{const a=this.st(o);if(a){if(s.current&&vg(a.target)){const l=new ce(a.target.path);this.Tt(l).has(o)||this.It(o,l)||this.Xe(o,l,Qt.newNoDocument(l,e))}s.Ne&&(n.set(o,s.Le()),s.ke())}});let r=ke();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.st(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));const i=new Af(e,n,this.He,this.ze,r);return this.ze=ki(),this.je=ad(),this.Je=ad(),this.He=new ot(Ee),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new tE,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Tt(Ee),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Tt(Ee),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new tE),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function ad(){return new ot(ce.comparator)}function nE(){return new ot(ce.comparator)}const _2={asc:"ASCENDING",desc:"DESCENDING"},w2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},E2={and:"AND",or:"OR"};class S2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function wg(t,e){return t.useProto3Json||wf(e)?e:{value:e}}function Dh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function T2(t,e){return Dh(t,e.toTimestamp())}function Br(t){return Me(!!t,49232),ge.fromTimestamp(function(n){const r=bs(n);return new Ge(r.seconds,r.nanos)}(t))}function Av(t,e){return Eg(t,e).canonicalString()}function Eg(t,e){const n=function(i){return new We(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function kA(t){const e=We.fromString(t);return Me(RA(e),10190,{key:e.toString()}),e}function Sg(t,e){return Av(t.databaseId,e.path)}function jp(t,e){const n=kA(e);if(n.get(1)!==t.databaseId.projectId)throw new re(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(AA(n))}function IA(t,e){return Av(t.databaseId,e)}function b2(t){const e=kA(t);return e.length===4?We.emptyPath():AA(e)}function Tg(t){return new We(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function AA(t){return Me(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function rE(t,e,n){return{name:Sg(t,e),fields:n.value.mapValue.fields}}function k2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:fe(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(Me(h===void 0||typeof h=="string",58123),Ot.fromBase64String(h||"")):(Me(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ot.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?H.UNKNOWN:EA(u.code);return new re(h,u.message||"")}(o);n=new TA(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=jp(t,r.document.name),s=Br(r.document.updateTime),o=r.document.createTime?Br(r.document.createTime):ge.min(),a=new _n({mapValue:{fields:r.document.fields}}),l=Qt.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new qd(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=jp(t,r.document),s=r.readTime?Br(r.readTime):ge.min(),o=Qt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new qd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=jp(t,r.document),s=r.removedTargetIds||[];n=new qd([],s,i,null)}else{if(!("filter"in e))return fe(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new m2(i,s),a=r.targetId;n=new SA(a,o)}}return n}function I2(t,e){let n;if(e instanceof Xc)n={update:rE(t,e.key,e.value)};else if(e instanceof bv)n={delete:Sg(t,e.key)};else if(e instanceof Ls)n={update:rE(t,e.key,e.data),updateMask:M2(e.fieldMask)};else{if(!(e instanceof h2))return fe(16599,{Rt:e.type});n={verify:Sg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Nc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Mc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Lc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Oh)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw fe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:T2(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:fe(27497)}(t,e.precondition)),n}function A2(t,e){return t&&t.length>0?(Me(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?Br(i.updateTime):Br(s);return o.isEqual(ge.min())&&(o=Br(s)),new c2(o,i.transformResults||[])}(n,e))):[]}function C2(t,e){return{documents:[IA(t,e.path)]}}function P2(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=IA(t,i);const s=function(u){if(u.length!==0)return PA(Tr.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(g){return{field:Xo(g.field),direction:O2(g.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=wg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:n,parent:i}}function R2(t){let e=b2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Me(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){const g=CA(p);return g instanceof Tr&&iA(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(S){return new Dc(Zo(S.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,wf(g)?null:g}(n.limit));let l=null;n.startAt&&(l=function(p){const g=!!p.before,T=p.values||[];return new Rh(T,g)}(n.startAt));let u=null;return n.endAt&&(u=function(p){const g=!p.before,T=p.values||[];return new Rh(T,g)}(n.endAt)),JL(e,i,o,s,a,"F",l,u)}function x2(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function CA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Zo(n.unaryFilter.field);return gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Zo(n.unaryFilter.field);return gt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Zo(n.unaryFilter.field);return gt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Zo(n.unaryFilter.field);return gt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fe(61313);default:return fe(60726)}}(t):t.fieldFilter!==void 0?function(n){return gt.create(Zo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fe(58110);default:return fe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Tr.create(n.compositeFilter.filters.map(r=>CA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return fe(1026)}}(n.compositeFilter.op))}(t):fe(30097,{filter:t})}function O2(t){return _2[t]}function D2(t){return w2[t]}function N2(t){return E2[t]}function Xo(t){return{fieldPath:t.canonicalString()}}function Zo(t){return Rt.fromServerFormat(t.fieldPath)}function PA(t){return t instanceof gt?function(n){if(n.op==="=="){if(z0(n.value))return{unaryFilter:{field:Xo(n.field),op:"IS_NAN"}};if(q0(n.value))return{unaryFilter:{field:Xo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(z0(n.value))return{unaryFilter:{field:Xo(n.field),op:"IS_NOT_NAN"}};if(q0(n.value))return{unaryFilter:{field:Xo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xo(n.field),op:D2(n.op),value:n.value}}}(t):t instanceof Tr?function(n){const r=n.getFilters().map(i=>PA(i));return r.length===1?r[0]:{compositeFilter:{op:N2(n.op),filters:r}}}(t):fe(54877,{filter:t})}function M2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function RA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n,r,i,s=ge.min(),o=ge.min(),a=Ot.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e){this.gt=e}}function V2(t){const e=R2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this.Dn=new F2}addToCollectionParentIndex(e,n){return this.Dn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(Ts.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(Ts.min())}updateCollectionGroup(e,n,r){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class F2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Tt(We.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tt(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xA=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(xA,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new $a(0)}static ur(){return new $a(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="LruGarbageCollector",U2=1048576;function oE([t,e],[n,r]){const i=Ee(t,n);return i===0?Ee(e,r):i}class $2{constructor(e){this.Tr=e,this.buffer=new Tt(oE),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();oE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class B2{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ie(sE,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){nl(n)?ie(sE,"Ignoring IndexedDB error during garbage collection: ",n):await tl(n)}await this.Rr(3e5)})}}class q2{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return W.resolve(_f.ue);const r=new $2(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(iE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iE):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,s,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(s=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),Qo()<=be.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function z2(t,e){return new q2(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(){this.changes=new Oo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?W.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ic(r.mutation,i,Rn.empty(),Ge.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ke()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ke()){const i=oo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=jl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=oo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ke()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ki();const o=rc(),a=function(){return rc()}();return n.forEach((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Ls)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),ic(h.mutation,u,h.mutation.getFieldMask(),Ge.now())):o.set(u.key,Rn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var p;return a.set(u,new W2(h,(p=o.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=rc();let i=new ot((o,a)=>o-a),s=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||Rn.empty();h=a.applyToLocalView(u,h),r.set(l,h);const p=(i.get(a.batchId)||ke()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,p=fA();h.forEach(g=>{if(!s.has(g)){const T=_A(n.get(g),r.get(g));T!==null&&p.set(g,T),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ce.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):lA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):W.resolve(oo());let a=Rc,l=s;return o.next(u=>W.forEach(u,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?W.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{l=l.insert(h,g)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,ke())).next(h=>({batchId:a,changes:hA(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(r=>{let i=jl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=jl();return this.indexManager.getCollectionParents(e,s).next(a=>W.forEach(a,l=>{const u=function(p,g){return new rl(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Qt.newInvalidDocument(h)))});let a=jl();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&ic(h.mutation,u,Rn.empty(),Ge.now()),bf(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return W.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Br(i.createTime)}}(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:V2(i.bundledQuery),readTime:Br(i.readTime)}}(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(){this.overlays=new ot(ce.comparator),this.kr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const r=oo();return W.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.wt(e,n,s)}),W.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),W.resolve()}getOverlaysForCollection(e,n,r){const i=oo(),s=n.length+1,o=new ce(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return W.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ot((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=oo(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=oo(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return W.resolve(a)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new p2(n,r));let s=this.kr.get(n);s===void 0&&(s=ke(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(){this.qr=new Tt(At.Qr),this.$r=new Tt(At.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new At(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new At(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new ce(new We([])),r=new At(n,e),i=new At(n,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ce(new We([])),r=new At(n,e),i=new At(n,e+1);let s=ke();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new At(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class At{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ce.comparator(e.key,n.key)||Ee(e.Hr,n.Hr)}static Ur(e,n){return Ee(e.Hr,n.Hr)||ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Tt(At.Qr)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new f2(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Yr=this.Yr.add(new At(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,n){return W.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?vv:this.er-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new At(n,0),i=new At(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{const a=this.Zr(o.Hr);s.push(a)}),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Tt(Ee);return n.forEach(i=>{const s=new At(i,0),o=new At(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),W.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ce.isDocumentKey(s)||(s=s.child(""));const o=new At(new ce(s),0);let a=new Tt(Ee);return this.Yr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Hr)),!0)},o),W.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Me(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return W.forEach(n.mutations,i=>{const s=new At(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new At(n,0),i=this.Yr.firstAfterOrEqual(r);return W.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e){this.ni=e,this.docs=function(){return new ot(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return W.resolve(r?r.document.mutableCopy():Qt.newInvalidDocument(n))}getEntries(e,n){let r=ki();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Qt.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ki();const o=n.path,a=new ce(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||AL(IL(h),r)<=0||(i.has(h.key)||bf(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,n,r,i){fe(9500)}ri(e,n){return W.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Z2(this)}getSize(e){return W.resolve(this.size)}}class Z2 extends H2{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),W.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e){this.persistence=e,this.ii=new Oo(n=>Ev(n),Sv),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.si=0,this.oi=new Cv,this.targetCount=0,this._i=$a.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),W.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new $a(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.hr(n),W.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),W.waitFor(s).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return W.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),W.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),W.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return W.resolve(r)}containsKey(e,n){return W.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,n){this.ai={},this.overlays={},this.ui=new _f(0),this.ci=!1,this.ci=!0,this.li=new Q2,this.referenceDelegate=e(this),this.hi=new eV(this),this.indexManager=new j2,this.remoteDocumentCache=function(i){return new X2(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new L2(n),this.Ti=new K2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new J2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new Y2(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){ie("MemoryPersistence","Starting transaction:",e);const i=new tV(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return W.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class tV extends PL{constructor(e){super(),this.currentSequenceNumber=e}}class Pv{constructor(e){this.persistence=e,this.Ai=new Cv,this.Ri=null}static Vi(e){return new Pv(e)}get mi(){if(this.Ri)return this.Ri;throw fe(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),W.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),W.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.mi,r=>{const i=ce.fromPath(r);return this.fi(e,i).next(s=>{s||n.removeEntry(i,ge.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return W.or([()=>W.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Nh{constructor(e,n){this.persistence=e,this.gi=new Oo(r=>OL(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=z2(this,n)}static Vi(e,n){return new Nh(e,n)}Ii(){}di(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return W.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?W.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,n).next(a=>{a||(r++,s.removeEntry(o,ge.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),W.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ud(e.data.value)),n}Sr(e,n,r){return W.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return W.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=ke(),i=ke();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Rv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return DO()?8:RL(en())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ps(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new nV;return this.ws(e,n,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,n,o,a.size)})}).next(()=>s.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Qo()<=be.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Yo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),W.resolve()):(Qo()<=be.DEBUG&&ie("QueryEngine","Query:",Yo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Qo()<=be.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Yo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$r(n))):W.resolve())}ps(e,n){if(K0(n))return W.resolve(null);let r=$r(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=xh(n,null,"F"),r=$r(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ke(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.bs(n,a);return this.Ds(n,u,o,l.readTime)?this.ps(e,xh(n,null,"F")):this.vs(e,u,n,l)}))})))}ys(e,n,r,i){return K0(n)||i.isEqual(ge.min())?W.resolve(null):this.gs.getDocuments(e,r).next(s=>{const o=this.bs(n,s);return this.Ds(n,o,r,i)?W.resolve(null):(Qo()<=be.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Yo(n)),this.vs(e,o,n,kL(i,Rc)).next(a=>a))})}bs(e,n){let r=new Tt(uA(e));return n.forEach((i,s)=>{bf(e,s)&&(r=r.add(s))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,n,r){return Qo()<=be.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Yo(n)),this.gs.getDocumentsMatchingQuery(e,n,Ts.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="LocalStore",iV=3e8;class sV{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new ot(Ee),this.Ms=new Oo(s=>Ev(s),Sv),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new G2(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function oV(t,e,n,r){return new sV(t,e,n,r)}async function DA(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ke();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Bs:u,removedBatchIds:o,addedBatchIds:a}))})})}function aV(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const p=u.batch,g=p.keys();let T=W.resolve();return g.forEach(S=>{T=T.next(()=>h.getEntry(l,S)).next(E=>{const k=u.docVersions.get(S);Me(k!==null,48541),E.version.compareTo(k)<0&&(p.applyToRemoteDocument(E,u),E.isValidDocument()&&(E.setReadTime(u.commitVersion),h.addEntry(E)))})}),T.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ke();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function NA(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function lV(t,e){const n=ve(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const a=[];e.targetChanges.forEach((h,p)=>{const g=i.get(p);if(!g)return;a.push(n.hi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(s,h.addedDocuments,p)));let T=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?T=T.withResumeToken(Ot.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):h.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(h.resumeToken,r)),i=i.insert(p,T),function(E,k,_){return E.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=iV?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(g,T,h)&&a.push(n.hi.updateTargetData(s,T))});let l=ki(),u=ke();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(cV(s,o,e.documentUpdates).next(h=>{l=h.Ls,u=h.ks})),!r.isEqual(ge.min())){const h=n.hi.getLastRemoteSnapshotVersion(s).next(p=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return W.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Fs=i,s))}function cV(t,e,n){let r=ke(),i=ke();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ki();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ge.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ie(xv,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ls:o,ks:i}})}function uV(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=vv),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dV(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(s=>s?(i=s,W.resolve(i)):n.hi.allocateTargetId(r).next(o=>(i=new ss(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function bg(t,e,n){const r=ve(t),i=r.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!nl(o))throw o;ie(xv,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function aE(t,e,n){const r=ve(t);let i=ge.min(),s=ke();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const p=ve(l),g=p.Ms.get(h);return g!==void 0?W.resolve(p.Fs.get(g)):p.hi.getTargetData(u,h)}(r,o,$r(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:ge.min(),n?s:ke())).next(a=>(hV(r,YL(e),a),{documents:a,qs:s})))}function hV(t,e,n){let r=t.xs.get(e)||ge.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.xs.set(e,r)}class lE{constructor(){this.activeTargetIds=r2()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fV{constructor(){this.Fo=new lE,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new lE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="ConnectivityMonitor";class uE{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ie(cE,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ie(cE,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld=null;function kg(){return ld===null?ld=function(){return 268435456+Math.round(2147483648*Math.random())}():ld++,"0x"+ld.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="RestConnection",mV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gV{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Ch?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const o=kg(),a=this.Go(e,n.toUriEncodedString());ie(Fp,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,s);const{host:u}=new URL(a),h=Xa(u);return this.jo(e,a,l,r,h).then(p=>(ie(Fp,`Received RPC '${e}' ${o}: `,p),p),p=>{throw bi(Fp,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,s,o){return this.Wo(e,n,r,i,s)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+el}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,n){const r=mV[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class vV extends gV{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,s){const o=kg();return new Promise((a,l)=>{const u=new NI;u.setWithCredentials(!0),u.listenOnce(MI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Fd.NO_ERROR:const p=u.getResponseJson();ie(Gt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case Fd.TIMEOUT:ie(Gt,`RPC '${e}' ${o} timed out`),l(new re(H.DEADLINE_EXCEEDED,"Request time out"));break;case Fd.HTTP_ERROR:const g=u.getStatus();if(ie(Gt,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let T=u.getResponseJson();Array.isArray(T)&&(T=T[0]);const S=T==null?void 0:T.error;if(S&&S.status&&S.message){const E=function(_){const y=_.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(y)>=0?y:H.UNKNOWN}(S.status);l(new re(E,S.message))}else l(new re(H.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new re(H.UNAVAILABLE,"Connection failed."));break;default:fe(9055,{c_:e,streamId:o,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{ie(Gt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);ie(Gt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",h,r,15)})}P_(e,n,r){const i=kg(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=jI(),a=VI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");ie(Gt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const p=o.createWebChannel(h,l);this.T_(p);let g=!1,T=!1;const S=new yV({Ho:k=>{T?ie(Gt,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(g||(ie(Gt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),ie(Gt,`RPC '${e}' stream ${i} sending:`,k),p.send(k))},Yo:()=>p.close()}),E=(k,_,y)=>{k.listen(_,C=>{try{y(C)}catch(L){setTimeout(()=>{throw L},0)}})};return E(p,Vl.EventType.OPEN,()=>{T||(ie(Gt,`RPC '${e}' stream ${i} transport opened.`),S.s_())}),E(p,Vl.EventType.CLOSE,()=>{T||(T=!0,ie(Gt,`RPC '${e}' stream ${i} transport closed`),S.__(),this.I_(p))}),E(p,Vl.EventType.ERROR,k=>{T||(T=!0,bi(Gt,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),S.__(new re(H.UNAVAILABLE,"The operation could not be completed")))}),E(p,Vl.EventType.MESSAGE,k=>{var _;if(!T){const y=k.data[0];Me(!!y,16349);const C=y,L=(C==null?void 0:C.error)||((_=C[0])===null||_===void 0?void 0:_.error);if(L){ie(Gt,`RPC '${e}' stream ${i} received error:`,L);const $=L.status;let q=function(R){const x=pt[R];if(x!==void 0)return EA(x)}($),P=L.message;q===void 0&&(q=H.INTERNAL,P="Unknown error status: "+$+" with message "+L.message),T=!0,S.__(new re(q,P)),p.close()}else ie(Gt,`RPC '${e}' stream ${i} received:`,y),S.a_(y)}}),E(a,LI.STAT_EVENT,k=>{k.stat===fg.PROXY?ie(Gt,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===fg.NOPROXY&&ie(Gt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Up(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(t){return new S2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="PersistentStream";class LA{constructor(e,n,r,i,s,o,a,l){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new MA(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(Ti(n.toString()),Ti("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new re(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ie(dE,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(ie(dE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _V extends LA{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=k2(this.serializer,e),r=function(s){if(!("targetChange"in s))return ge.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?Br(o.readTime):ge.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Tg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=vg(l)?{documents:C2(s,l)}:{query:P2(s,l).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=bA(s,o.resumeToken);const u=wg(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ge.min())>0){a.readTime=Dh(s,o.snapshotVersion.toTimestamp());const u=wg(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=x2(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Tg(this.serializer),n.removeTarget=e,this.k_(n)}}class wV extends LA{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=A2(e.writeResults,e.commitTime),r=Br(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Tg(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>I2(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{}class SV extends EV{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new re(H.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,Eg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new re(H.UNKNOWN,s.toString())})}Jo(e,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,Eg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(H.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class TV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ti(n),this._a=!1):ie("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="RemoteStore";class bV{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Do(this)&&(ie(bo,"Restarting streams for network reachability change."),await async function(l){const u=ve(l);u.Ia.add(4),await eu(u),u.Aa.set("Unknown"),u.Ia.delete(4),await Pf(u)}(this))})}),this.Aa=new TV(r,i)}}async function Pf(t){if(Do(t))for(const e of t.da)await e(!0)}async function eu(t){for(const e of t.da)await e(!1)}function VA(t,e){const n=ve(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Mv(n)?Nv(n):il(n).x_()&&Dv(n,e))}function Ov(t,e){const n=ve(t),r=il(n);n.Ta.delete(e),r.x_()&&jA(n,e),n.Ta.size===0&&(r.x_()?r.B_():Do(n)&&n.Aa.set("Unknown"))}function Dv(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}il(t).H_(e)}function jA(t,e){t.Ra.$e(e),il(t).Y_(e)}function Nv(t){t.Ra=new v2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),il(t).start(),t.Aa.aa()}function Mv(t){return Do(t)&&!il(t).M_()&&t.Ta.size>0}function Do(t){return ve(t).Ia.size===0}function FA(t){t.Ra=void 0}async function kV(t){t.Aa.set("Online")}async function IV(t){t.Ta.forEach((e,n)=>{Dv(t,e)})}async function AV(t,e){FA(t),Mv(t)?(t.Aa.la(e),Nv(t)):t.Aa.set("Unknown")}async function CV(t,e,n){if(t.Aa.set("Online"),e instanceof TA&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))}(t,e)}catch(r){ie(bo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Mh(t,r)}else if(e instanceof qd?t.Ra.Ye(e):e instanceof SA?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ge.min()))try{const r=await NA(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Ra.Pt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ta.get(u);h&&s.Ta.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.Ta.get(l);if(!h)return;s.Ta.set(l,h.withResumeToken(Ot.EMPTY_BYTE_STRING,h.snapshotVersion)),jA(s,l);const p=new ss(h.target,l,u,h.sequenceNumber);Dv(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ie(bo,"Failed to raise snapshot:",r),await Mh(t,r)}}async function Mh(t,e,n){if(!nl(e))throw e;t.Ia.add(1),await eu(t),t.Aa.set("Offline"),n||(n=()=>NA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie(bo,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Pf(t)})}function UA(t,e){return e().catch(n=>Mh(t,n,e))}async function Rf(t){const e=ve(t),n=As(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:vv;for(;PV(e);)try{const i=await uV(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,RV(e,i)}catch(i){await Mh(e,i)}$A(e)&&BA(e)}function PV(t){return Do(t)&&t.Pa.length<10}function RV(t,e){t.Pa.push(e);const n=As(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function $A(t){return Do(t)&&!As(t).M_()&&t.Pa.length>0}function BA(t){As(t).start()}async function xV(t){As(t).na()}async function OV(t){const e=As(t);for(const n of t.Pa)e.X_(n.mutations)}async function DV(t,e,n){const r=t.Pa.shift(),i=kv.from(r,e,n);await UA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Rf(t)}async function NV(t,e){e&&As(t).Z_&&await async function(r,i){if(function(o){return g2(o)&&o!==H.ABORTED}(i.code)){const s=r.Pa.shift();As(r).N_(),await UA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Rf(r)}}(t,e),$A(t)&&BA(t)}async function hE(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),ie(bo,"RemoteStore received new credentials");const r=Do(n);n.Ia.add(3),await eu(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Pf(n)}async function MV(t,e){const n=ve(t);e?(n.Ia.delete(2),await Pf(n)):e||(n.Ia.add(2),await eu(n),n.Aa.set("Unknown"))}function il(t){return t.Va||(t.Va=function(n,r,i){const s=ve(n);return s.ia(),new _V(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:kV.bind(null,t),e_:IV.bind(null,t),n_:AV.bind(null,t),J_:CV.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Mv(t)?Nv(t):t.Aa.set("Unknown")):(await t.Va.stop(),FA(t))})),t.Va}function As(t){return t.ma||(t.ma=function(n,r,i){const s=ve(n);return s.ia(),new wV(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:xV.bind(null,t),n_:NV.bind(null,t),ea:OV.bind(null,t),ta:DV.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Rf(t)):(await t.ma.stop(),t.Pa.length>0&&(ie(bo,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Lv(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vv(t,e){if(Ti("AsyncQueue",`${e}: ${t}`),nl(t))return new re(H.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{static emptySet(e){return new Ta(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ce.comparator(n.key,r.key):(n,r)=>ce.comparator(n.key,r.key),this.keyedMap=jl(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ta)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ta;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.fa=new ot(ce.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):fe(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ba{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ba(e,n,Ta.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class VV{constructor(){this.queries=pE(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=ve(n),s=i.queries;i.queries=pE(),s.forEach((o,a)=>{for(const l of a.wa)l.onError(r)})})(this,new re(H.ABORTED,"Firestore shutting down"))}}function pE(){return new Oo(t=>cA(t),Tf)}async function jv(t,e){const n=ve(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new LV,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Vv(o,`Initialization of query '${Yo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&Uv(n)}async function Fv(t,e){const n=ve(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jV(t,e){const n=ve(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&Uv(n)}function FV(t,e,n){const r=ve(t),i=r.queries.get(e);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(e)}function Uv(t){t.Da.forEach(e=>{e.next()})}var Ig,mE;(mE=Ig||(Ig={})).Fa="default",mE.Cache="cache";class $v{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ba(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Ba.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Ig.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e){this.key=e}}class zA{constructor(e){this.key=e}}class UV{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ke(),this.mutatedKeys=ke(),this.Xa=uA(e),this.eu=new Ta(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new fE,i=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const g=i.get(h),T=bf(this.query,p)?p:null,S=!!g&&this.mutatedKeys.has(g.key),E=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let k=!1;g&&T?g.data.isEqual(T.data)?S!==E&&(r.track({type:3,doc:T}),k=!0):this.iu(g,T)||(r.track({type:2,doc:T}),k=!0,(l&&this.Xa(T,l)>0||u&&this.Xa(T,u)<0)&&(a=!0)):!g&&T?(r.track({type:0,doc:T}),k=!0):g&&!T&&(r.track({type:1,doc:g}),k=!0,(l||u)&&(a=!0)),k&&(T?(o=o.add(T),s=E?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((h,p)=>function(T,S){const E=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe(20277,{At:k})}};return E(T)-E(S)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;const a=n&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,u=l!==this.Ya;return this.Ya=l,o.length!==0||u?{snapshot:new Ba(this.query,e.eu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new fE,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ke(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new zA(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new qA(r))}),n}uu(e){this.Ha=e.qs,this.Za=ke();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ba.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Bv="SyncEngine";class $V{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class BV{constructor(e){this.key=e,this.lu=!1}}class qV{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Oo(a=>cA(a),Tf),this.Tu=new Map,this.Iu=new Set,this.du=new ot(ce.comparator),this.Eu=new Map,this.Au=new Cv,this.Ru={},this.Vu=new Map,this.mu=$a.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function zV(t,e,n=!0){const r=QA(t);let i;const s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await HA(r,e,n,!0),i}async function HV(t,e){const n=QA(t);await HA(n,e,!0,!1)}async function HA(t,e,n,r){const i=await dV(t.localStore,$r(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await WV(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&VA(t.remoteStore,i),a}async function WV(t,e,n,r,i){t.gu=(p,g,T)=>async function(E,k,_,y){let C=k.view.nu(_);C.Ds&&(C=await aE(E.localStore,k.query,!1).then(({documents:P})=>k.view.nu(P,C)));const L=y&&y.targetChanges.get(k.targetId),$=y&&y.targetMismatches.get(k.targetId)!=null,q=k.view.applyChanges(C,E.isPrimaryClient,L,$);return yE(E,k.targetId,q._u),q.snapshot}(t,p,g,T);const s=await aE(t.localStore,e,!0),o=new UV(e,s.qs),a=o.nu(s.documents),l=Zc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);yE(t,n,u._u);const h=new $V(e,n,o);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),u.snapshot}async function GV(t,e,n){const r=ve(t),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!Tf(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await bg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ov(r.remoteStore,i.targetId),Ag(r,i.targetId)}).catch(tl)):(Ag(r,i.targetId),await bg(r.localStore,i.targetId,!0))}async function KV(t,e){const n=ve(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ov(n.remoteStore,r.targetId))}async function JV(t,e,n){const r=nj(t);try{const i=await function(o,a){const l=ve(o),u=Ge.now(),h=a.reduce((T,S)=>T.add(S.key),ke());let p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",T=>{let S=ki(),E=ke();return l.Os.getEntries(T,h).next(k=>{S=k,S.forEach((_,y)=>{y.isValidDocument()||(E=E.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(T,S)).next(k=>{p=k;const _=[];for(const y of a){const C=d2(y,p.get(y.key).overlayedDocument);C!=null&&_.push(new Ls(y.key,C,tA(C.value.mapValue),Gn.exists(!0)))}return l.mutationQueue.addMutationBatch(T,u,_,a)}).next(k=>{g=k;const _=k.applyToLocalDocumentSet(p,E);return l.documentOverlayCache.saveOverlays(T,k.batchId,_)})}).then(()=>({batchId:g.batchId,changes:hA(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ru[o.currentUser.toKey()];u||(u=new ot(Ee)),u=u.insert(a,l),o.Ru[o.currentUser.toKey()]=u}(r,i.batchId,n),await tu(r,i.changes),await Rf(r.remoteStore)}catch(i){const s=Vv(i,"Failed to persist write");n.reject(s)}}async function WA(t,e){const n=ve(t);try{const r=await lV(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Eu.get(s);o&&(Me(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?Me(o.lu,14607):i.removedDocuments.size>0&&(Me(o.lu,42227),o.lu=!1))}),await tu(n,r,e)}catch(r){await tl(r)}}function gE(t,e,n){const r=ve(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ve(o);l.onlineState=a;let u=!1;l.queries.forEach((h,p)=>{for(const g of p.wa)g.va(a)&&(u=!0)}),u&&Uv(l)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function QV(t,e,n){const r=ve(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),s=i&&i.key;if(s){let o=new ot(ce.comparator);o=o.insert(s,Qt.newNoDocument(s,ge.min()));const a=ke().add(s),l=new Af(ge.min(),new Map,new ot(Ee),o,a);await WA(r,l),r.du=r.du.remove(s),r.Eu.delete(e),qv(r)}else await bg(r.localStore,e,!1).then(()=>Ag(r,e,n)).catch(tl)}async function YV(t,e){const n=ve(t),r=e.batch.batchId;try{const i=await aV(n.localStore,e);KA(n,r,null),GA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await tu(n,i)}catch(i){await tl(i)}}async function XV(t,e,n){const r=ve(t);try{const i=await function(o,a){const l=ve(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(p=>(Me(p!==null,37113),h=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);KA(r,e,n),GA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await tu(r,i)}catch(i){await tl(i)}}function GA(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function KA(t,e,n){const r=ve(t);let i=r.Ru[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Ag(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||JA(t,r)})}function JA(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ov(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),qv(t))}function yE(t,e,n){for(const r of n)r instanceof qA?(t.Au.addReference(r.key,e),ZV(t,r)):r instanceof zA?(ie(Bv,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||JA(t,r.key)):fe(19791,{yu:r})}function ZV(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(ie(Bv,"New document in limbo: "+n),t.Iu.add(r),qv(t))}function qv(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ce(We.fromString(e)),r=t.mu.next();t.Eu.set(r,new BV(n)),t.du=t.du.insert(n,r),VA(t.remoteStore,new ss($r(Sf(n.path)),r,"TargetPurposeLimboResolution",_f.ue))}}async function tu(t,e,n){const r=ve(t),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,l)=>{o.push(r.gu(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const p=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){i.push(u);const p=Rv.Es(l.targetId,u);s.push(p)}}))}),await Promise.all(o),r.hu.J_(i),await async function(l,u){const h=ve(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>W.forEach(u,g=>W.forEach(g.Is,T=>h.persistence.referenceDelegate.addReference(p,g.targetId,T)).next(()=>W.forEach(g.ds,T=>h.persistence.referenceDelegate.removeReference(p,g.targetId,T)))))}catch(p){if(!nl(p))throw p;ie(xv,"Failed to update sequence numbers: "+p)}for(const p of u){const g=p.targetId;if(!p.fromCache){const T=h.Fs.get(g),S=T.snapshotVersion,E=T.withLastLimboFreeSnapshotVersion(S);h.Fs=h.Fs.insert(g,E)}}}(r.localStore,s))}async function ej(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){ie(Bv,"User change. New user:",e.toKey());const r=await DA(n.localStore,e);n.currentUser=e,function(s,o){s.Vu.forEach(a=>{a.forEach(l=>{l.reject(new re(H.CANCELLED,o))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await tu(n,r.Bs)}}function tj(t,e){const n=ve(t),r=n.Eu.get(e);if(r&&r.lu)return ke().add(r.key);{let i=ke();const s=n.Tu.get(e);if(!s)return i;for(const o of s){const a=n.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function QA(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=WA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QV.bind(null,e),e.hu.J_=jV.bind(null,e.eventManager),e.hu.pu=FV.bind(null,e.eventManager),e}function nj(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XV.bind(null,e),e}class Lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return oV(this.persistence,new rV,e.initialUser,this.serializer)}Du(e){return new OA(Pv.Vi,this.serializer)}bu(e){return new fV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lh.provider={build:()=>new Lh};class rj extends Lh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Me(this.persistence.referenceDelegate instanceof Nh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new B2(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new OA(r=>Nh.Vi(r,n),this.serializer)}}class Cg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ej.bind(null,this.syncEngine),await MV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new VV}()}createDatastore(e){const n=Cf(e.databaseInfo.databaseId),r=function(s){return new vV(s)}(e.databaseInfo);return function(s,o,a,l){return new SV(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new bV(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>gE(this.syncEngine,n,0),function(){return uE.C()?new uE:new pV}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,h){const p=new qV(i,s,o,a,l,u);return h&&(p.fu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ve(i);ie(bo,"RemoteStore shutting down."),s.Ia.add(5),await eu(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Cg.provider={build:()=>new Cg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ti("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="FirestoreClient";class ij{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Kt.UNAUTHENTICATED,this.clientId=yf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ie(Cs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ie(Cs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Vv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $p(t,e){t.asyncQueue.verifyOperationInProgress(),ie(Cs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await DA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{bi("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{ie("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{bi("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function vE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await sj(t);ie(Cs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>hE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>hE(e.remoteStore,i)),t._onlineComponents=e}async function sj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie(Cs,"Using user provided OfflineComponentProvider");try{await $p(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===H.FAILED_PRECONDITION||i.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;bi("Error using user provided cache. Falling back to memory cache: "+n),await $p(t,new Lh)}}else ie(Cs,"Using default OfflineComponentProvider"),await $p(t,new rj(void 0));return t._offlineComponents}async function YA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie(Cs,"Using user provided OnlineComponentProvider"),await vE(t,t._uninitializedComponentsProvider._online)):(ie(Cs,"Using default OnlineComponentProvider"),await vE(t,new Cg))),t._onlineComponents}function oj(t){return YA(t).then(e=>e.syncEngine)}async function Vh(t){const e=await YA(t),n=e.eventManager;return n.onListen=zV.bind(null,e.syncEngine),n.onUnlisten=GV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=HV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=KV.bind(null,e.syncEngine),n}function aj(t,e,n={}){const r=new hi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new zv({next:g=>{h.Ou(),o.enqueueAndForget(()=>Fv(s,p));const T=g.docs.has(a);!T&&g.fromCache?u.reject(new re(H.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&g.fromCache&&l&&l.source==="server"?u.reject(new re(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new $v(Sf(a.path),h,{includeMetadataChanges:!0,ka:!0});return jv(s,p)}(await Vh(t),t.asyncQueue,e,n,r)),r.promise}function lj(t,e,n={}){const r=new hi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new zv({next:g=>{h.Ou(),o.enqueueAndForget(()=>Fv(s,p)),g.fromCache&&l.source==="server"?u.reject(new re(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new $v(a,h,{includeMetadataChanges:!0,ka:!0});return jv(s,p)}(await Vh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="firestore.googleapis.com",wE=!0;class EE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZA,this.ssl=wE}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:wE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<U2)throw new re(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new re(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new re(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new re(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new EE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new EE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $I;switch(r.type){case"firstParty":return new _L(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=_E.get(n);r&&(ie("ComponentProvider","Removing Datastore"),_E.delete(n),r.terminate())}(this),Promise.resolve()}}function eC(t,e,n,r={}){var i;t=dn(t,xf);const s=Xa(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;s&&(zk(`https://${l}`),Hk("Firestore",!0)),o.host!==ZA&&o.host!==l&&bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:r});if(!wo(u,a)&&(t._setSettings(u),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Kt.MOCK_USER;else{h=bO(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new re(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Kt(g)}t._authCredentials=new gL(new UI(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hr(this.firestore,e,this._query)}}class nt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nt(this.firestore,e,this._key)}toJSON(){return{type:nt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Yc(n,nt._jsonSchema))return new nt(e,r||null,new ce(We.fromString(n.referencePath)))}}nt._jsonSchemaVersion="firestore/documentReference/1.0",nt._jsonSchema={type:yt("string",nt._jsonSchemaVersion),referencePath:yt("string")};class fi extends Hr{constructor(e,n,r){super(e,n,Sf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nt(this.firestore,null,new ce(e))}withConverter(e){return new fi(this.firestore,e,this._path)}}function Zn(t,e,...n){if(t=st(t),qI("collection","path",e),t instanceof xf){const r=We.fromString(e,...n);return N0(r),new fi(t,null,r)}{if(!(t instanceof nt||t instanceof fi))throw new re(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return N0(r),new fi(t.firestore,null,r)}}function er(t,e,...n){if(t=st(t),arguments.length===1&&(e=yf.newId()),qI("doc","path",e),t instanceof xf){const r=We.fromString(e,...n);return D0(r),new nt(t,null,new ce(r))}{if(!(t instanceof nt||t instanceof fi))throw new re(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return D0(r),new nt(t.firestore,t instanceof fi?t.converter:null,new ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="AsyncQueue";class TE{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new MA(this,"async_queue_retry"),this.oc=()=>{const r=Up();r&&ie(SE,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Up();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Up();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new hi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!nl(e))throw e;ie(SE,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Ti("INTERNAL UNHANDLED ERROR: ",bE(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=Lv.createAndSchedule(this,e,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&fe(47125,{hc:bE(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function bE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class zr extends xf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new TE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new TE(e),this._firestoreClient=void 0,await e}}}function tC(t,e){const n=typeof t=="object"?t:Kk(),r=typeof t=="string"?t:Ch,i=sv(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=SO("firestore");s&&eC(i,...s)}return i}function nu(t){if(t._terminated)throw new re(H.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||cj(t),t._firestoreClient}function cj(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,h){return new ML(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,XA(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new ij(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cn(Ot.fromBase64String(e))}catch(n){throw new re(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Cn(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Cn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yc(e,Cn._jsonSchema))return Cn.fromBase64String(e.bytes)}}Cn._jsonSchemaVersion="firestore/bytes/1.0",Cn._jsonSchema={type:yt("string",Cn._jsonSchemaVersion),bytes:yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_r._jsonSchemaVersion}}static fromJSON(e){if(Yc(e,_r._jsonSchema))return new _r(e.latitude,e.longitude)}}_r._jsonSchemaVersion="firestore/geoPoint/1.0",_r._jsonSchema={type:yt("string",_r._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:wr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yc(e,wr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new wr(e.vectorValues);throw new re(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wr._jsonSchemaVersion="firestore/vectorValue/1.0",wr._jsonSchema={type:yt("string",wr._jsonSchemaVersion),vectorValues:yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=/^__.*__$/;class dj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ls(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xc(e,this.data,n,this.fieldTransforms)}}class nC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ls(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function rC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe(40011,{Ec:t})}}class Hv{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Hv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return jh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(rC(this.Ec)&&uj.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class hj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Cf(e)}Dc(e,n,r,i=!1){return new Hv({Ec:e,methodName:n,bc:r,path:Rt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Of(t){const e=t._freezeSettings(),n=Cf(t._databaseId);return new hj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function iC(t,e,n,r,i,s={}){const o=t.Dc(s.merge||s.mergeFields?2:0,e,n,i);Gv("Data must be an object, but it was:",o,r);const a=sC(r,o);let l,u;if(s.merge)l=new Rn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const p of s.mergeFields){const g=Pg(e,p,n);if(!o.contains(g))throw new re(H.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);aC(h,g)||h.push(g)}l=new Rn(h),u=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=o.fieldTransforms;return new dj(new _n(a),l,u)}class Df extends iu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Df}}class Wv extends iu{_toFieldTransform(e){return new a2(e.path,new Nc)}isEqual(e){return e instanceof Wv}}function fj(t,e,n,r){const i=t.Dc(1,e,n);Gv("Data must be an object, but it was:",i,r);const s=[],o=_n.empty();Ms(r,(l,u)=>{const h=Kv(e,l,n);u=st(u);const p=i.gc(h);if(u instanceof Df)s.push(h);else{const g=su(u,p);g!=null&&(s.push(h),o.set(h,g))}});const a=new Rn(s);return new nC(o,a,i.fieldTransforms)}function pj(t,e,n,r,i,s){const o=t.Dc(1,e,n),a=[Pg(e,r,n)],l=[i];if(s.length%2!=0)throw new re(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(Pg(e,s[g])),l.push(s[g+1]);const u=[],h=_n.empty();for(let g=a.length-1;g>=0;--g)if(!aC(u,a[g])){const T=a[g];let S=l[g];S=st(S);const E=o.gc(T);if(S instanceof Df)u.push(T);else{const k=su(S,E);k!=null&&(u.push(T),h.set(T,k))}}const p=new Rn(u);return new nC(h,p,o.fieldTransforms)}function mj(t,e,n,r=!1){return su(n,t.Dc(r?4:3,e))}function su(t,e){if(oC(t=st(t)))return Gv("Unsupported field value:",e,t),sC(t,e);if(t instanceof iu)return function(r,i){if(!rC(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=su(a,i.yc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=st(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return i2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ge.fromDate(r);return{timestampValue:Dh(i.serializer,s)}}if(r instanceof Ge){const s=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Dh(i.serializer,s)}}if(r instanceof _r)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Cn)return{bytesValue:bA(i.serializer,r._byteString)};if(r instanceof nt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Av(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof wr)return function(o,a){return{mapValue:{fields:{[ZI]:{stringValue:eA},[Ph]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return Tv(a.serializer,u)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${vf(r)}`)}(t,e)}function sC(t,e){const n={};return GI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ms(t,(r,i)=>{const s=su(i,e.Vc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function oC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof _r||t instanceof Cn||t instanceof nt||t instanceof iu||t instanceof wr)}function Gv(t,e,n){if(!oC(n)||!HI(n)){const r=vf(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Pg(t,e,n){if((e=st(e))instanceof ru)return e._internalPath;if(typeof e=="string")return Kv(t,e);throw jh("Field path arguments must be of type string or ",t,!1,void 0,n)}const gj=new RegExp("[~\\*/\\[\\]]");function Kv(t,e,n){if(e.search(gj)>=0)throw jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ru(...e.split("."))._internalPath}catch{throw jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new re(H.INVALID_ARGUMENT,a+t+l)}function aC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Nf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class yj extends lC{data(){return super.data()}}function Nf(t,e){return typeof e=="string"?Kv(t,e):e instanceof ru?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jv{}class Mf extends Jv{}function uo(t,e,...n){let r=[];e instanceof Jv&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Lf).length,a=s.filter(l=>l instanceof ou).length;if(o>1||o>0&&a>0)throw new re(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class ou extends Mf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ou(e,n,r)}_apply(e){const n=this._parse(e);return uC(e._query,n),new Hr(e.firestore,e.converter,_g(e._query,n))}_parse(e){const n=Of(e.firestore);return function(s,o,a,l,u,h,p){let g;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new re(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){AE(p,h);const S=[];for(const E of p)S.push(IE(l,s,E));g={arrayValue:{values:S}}}else g=IE(l,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||AE(p,h),g=mj(a,o,p,h==="in"||h==="not-in");return gt.create(u,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function vj(t,e,n){const r=e,i=Nf("where",t);return ou._create(i,r,n)}class Lf extends Jv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Lf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Tr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)uC(o,l),o=_g(o,l)}(e._query,n),new Hr(e.firestore,e.converter,_g(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vf extends Mf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Vf(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new re(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new re(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dc(s,o)}(e._query,this._field,this._direction);return new Hr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new rl(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function qa(t,e="asc"){const n=e,r=Nf("orderBy",t);return Vf._create(r,n)}class jf extends Mf{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new jf(e,n,r)}_apply(e){return new Hr(e.firestore,e.converter,xh(e._query,this._limit,this._limitType))}}function Vc(t){return bL("limit",t),jf._create("limit",t,"F")}function IE(t,e,n){if(typeof(n=st(n))=="string"){if(n==="")throw new re(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lA(e)&&n.indexOf("/")!==-1)throw new re(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(We.fromString(n));if(!ce.isDocumentKey(r))throw new re(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return B0(t,new ce(r))}if(n instanceof nt)return B0(t,n._key);throw new re(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vf(n)}.`)}function AE(t,e){if(!Array.isArray(t)||t.length===0)throw new re(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uC(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new re(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class dC{convertValue(e,n="none"){switch(Is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ms(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Ph].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ut(o.doubleValue));return new wr(s)}convertGeoPoint(e){return new _r(ut(e.latitude),ut(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ef(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(xc(e));default:return null}}convertTimestamp(e){const n=bs(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=We.fromString(e);Me(RA(r),9688,{name:e});const i=new ja(r.get(1),r.get(3)),s=new ce(r.popFirst(5));return i.isEqual(n)||Ti(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ha{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vs extends lC{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Nf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=vs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}vs._jsonSchemaVersion="firestore/documentSnapshot/1.0",vs._jsonSchema={type:yt("string",vs._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class sc extends vs{data(e={}){return super.data(e)}}class _s{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ha(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new sc(this._firestore,this._userDataWriter,r.key,r,new ha(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new sc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ha(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new sc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ha(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:_j(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_s._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _j(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(t){t=dn(t,nt);const e=dn(t.firestore,zr);return aj(nu(e),t._key).then(n=>fC(e,t,n))}_s._jsonSchemaVersion="firestore/querySnapshot/1.0",_s._jsonSchema={type:yt("string",_s._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};class Yv extends dC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new nt(this.firestore,null,n)}}function Rg(t){t=dn(t,Hr);const e=dn(t.firestore,zr),n=nu(e),r=new Yv(e);return cC(t._query),lj(n,t._query).then(i=>new _s(e,r,t,i))}function au(t,e,n){t=dn(t,nt);const r=dn(t.firestore,zr),i=hC(t.converter,e,n);return cu(r,[iC(Of(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Gn.none())])}function oc(t,e,n,...r){t=dn(t,nt);const i=dn(t.firestore,zr),s=Of(i);let o;return o=typeof(e=st(e))=="string"||e instanceof ru?pj(s,"updateDoc",t._key,e,n,r):fj(s,"updateDoc",t._key,e),cu(i,[o.toMutation(t._key,Gn.exists(!0))])}function ba(t){return cu(dn(t.firestore,zr),[new bv(t._key,Gn.none())])}function lu(t,e){const n=dn(t.firestore,zr),r=er(t),i=hC(t.converter,e);return cu(n,[iC(Of(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Gn.exists(!1))]).then(()=>r)}function pi(t,...e){var n,r,i;t=st(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||kE(e[o])||(s=e[o++]);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(kE(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let l,u,h;if(t instanceof nt)u=dn(t.firestore,zr),h=Sf(t._key.path),l={next:p=>{e[o]&&e[o](fC(u,t,p))},error:e[o+1],complete:e[o+2]};else{const p=dn(t,Hr);u=dn(p.firestore,zr),h=p._query;const g=new Yv(u);l={next:T=>{e[o]&&e[o](new _s(u,g,p,T))},error:e[o+1],complete:e[o+2]},cC(t._query)}return function(g,T,S,E){const k=new zv(E),_=new $v(T,k,S);return g.asyncQueue.enqueueAndForget(async()=>jv(await Vh(g),_)),()=>{k.Ou(),g.asyncQueue.enqueueAndForget(async()=>Fv(await Vh(g),_))}}(nu(u),h,a,l)}function cu(t,e){return function(r,i){const s=new hi;return r.asyncQueue.enqueueAndForget(async()=>JV(await oj(r),i,s)),s.promise}(nu(t),e)}function fC(t,e,n){const r=n.docs.get(e._key),i=new Yv(t);return new vs(t,i,e._key,r,new ha(n.hasPendingWrites,n.fromCache),e.converter)}function hn(){return new Wv("serverTimestamp")}(function(e,n=!0){(function(i){el=i})(Za),Ma(new Eo("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new zr(new yL(r.getProvider("auth-internal")),new wL(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new re(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ja(u.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),gs(C0,P0,e),gs(C0,P0,"esm2017")})();const wj=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:dC,Bytes:Cn,CollectionReference:fi,DocumentReference:nt,DocumentSnapshot:vs,FieldPath:ru,FieldValue:iu,Firestore:zr,FirestoreError:re,GeoPoint:_r,Query:Hr,QueryCompositeFilterConstraint:Lf,QueryConstraint:Mf,QueryDocumentSnapshot:sc,QueryFieldFilterConstraint:ou,QueryLimitConstraint:jf,QueryOrderByConstraint:Vf,QuerySnapshot:_s,SnapshotMetadata:ha,Timestamp:Ge,VectorValue:wr,_AutoId:yf,_ByteString:Ot,_DatabaseId:ja,_DocumentKey:ce,_EmptyAuthCredentialsProvider:$I,_FieldPath:Rt,_cast:dn,_logWarn:bi,_validateIsNotUsedTogether:zI,addDoc:lu,collection:Zn,connectFirestoreEmulator:eC,deleteDoc:ba,doc:er,ensureFirestoreConfigured:nu,executeWrite:cu,getDoc:Qv,getDocs:Rg,getFirestore:tC,limit:Vc,onSnapshot:pi,orderBy:qa,query:uo,serverTimestamp:hn,setDoc:au,updateDoc:oc,where:vj},Symbol.toStringTag,{value:"Module"})),Xv=()=>(console.warn("Firebase config missing. App will work in limited mode."),null);let Cl=null;const pC=()=>{const t=Xv();return t?Cl||(Cl=hL(t),ZN(Cl,bI).catch(e=>{console.error("[Firebase] Failed to set auth persistence:",e)}),Cl):null},Ft=()=>{const t=Xv();return t?tC(t):null},Ej=Object.freeze(Object.defineProperty({__proto__:null,getFirebaseApp:Xv,getFirebaseAuth:pC,getFirestoreDb:Ft},Symbol.toStringTag,{value:"Module"})),Bp=async(t,e={})=>{var h,p,g;const n=Ft();if(!n||!(t!=null&&t.uid))return null;const r=er(n,"users",t.uid),i=await Qv(r),{plan:s,forcePlanOverride:o,...a}=e,l=i.exists()?{}:{createdAt:hn(),plan:t.isAnonymous?"guest":"trial",onboardingStage:t.isAnonymous?"demo":"signed_in"},u={uid:t.uid,email:t.email??null,displayName:t.displayName??null,photoURL:t.photoURL??null,authProvider:((p=(h=t.providerData)==null?void 0:h[0])==null?void 0:p.providerId)??(t.isAnonymous?"anonymous":"custom"),lastActiveAt:hn(),...l,...a};if(s!==void 0){const T=i.exists()?(g=i.data())==null?void 0:g.plan:null;(o||!T||T==="guest"||s!=="trial")&&(u.plan=s)}return await au(r,u,{merge:!0}),u},Sj=()=>{const t=pC(),[e,n]=F.useState(null),[r,i]=F.useState(!0),[s,o]=F.useState(null),[a,l]=F.useState(!1);F.useEffect(()=>{if(!t){i(!1);return}let S=!0;const E=nM(t,async k=>{if(console.log("[useFirebaseAuth] Auth state changed:",{hasUser:!!k,isAnonymous:k==null?void 0:k.isAnonymous,uid:k==null?void 0:k.uid,email:k==null?void 0:k.email,isInitialLoad:S}),n(k),k)try{await Bp(k)}catch(_){console.error("Failed to ensure user profile document:",_)}S&&!k&&(console.log("[useFirebaseAuth] No persisted session found, creating anonymous session"),m0(t).catch(_=>{console.error("Firebase anonymous auth failed:",_)})),S=!1,i(!1)});return()=>E()},[t]);const u=F.useCallback(async S=>{if(!t)throw new Error("Firebase not configured.");o(null),l(!0);try{return await S()}catch(E){let k=E;throw E.code==="auth/credential-already-in-use"?(k=new Error("This account is already linked to another Ghost session. Signing you in with your existing account..."),k.code=E.code):E.code==="auth/popup-closed-by-user"?(k=new Error("Sign-in popup was closed. Please try again."),k.code=E.code):E.code==="auth/popup-blocked"?(k=new Error("Pop-up was blocked by your browser. Please allow pop-ups for this site and try again."),k.code=E.code):E.code==="auth/network-request-failed"&&(k=new Error("Network error. Please check your connection and try again."),k.code=E.code),o(k),k}finally{l(!1)}},[t]),h=F.useCallback(()=>u(async()=>{var _,y,C;const S=(_=t.currentUser)==null?void 0:_.isAnonymous;(y=t.currentUser)==null||y.uid;const E=new ii;E.setCustomParameters({prompt:"select_account"});let k;try{t.currentUser&&t.currentUser.isAnonymous?k=await EM(t.currentUser,E):k=await _0(t,E)}catch(L){if(L.code==="auth/credential-already-in-use")console.log("[useFirebaseAuth] Google account already linked to another user, signing in with existing account"),(C=L.customData)==null||C.email,S&&await Lp(t),k=await _0(t,E);else throw L}return await Bp(k.user,{authProvider:"google",linkedFromAnonymous:!!S,plan:"trial"}),n(k.user),k.user}),[t,u]),p=F.useCallback(({email:S,password:E,displayName:k})=>u(async()=>{var L;if(!S||!E)throw new Error("Email and password are required.");const _=xo.credential(S,E);let y;const C=(L=t.currentUser)==null?void 0:L.isAnonymous;try{if(t.currentUser&&t.currentUser.isAnonymous)y=await JN(t.currentUser,_);else try{y=await g0(t,S,E)}catch($){if($.code==="auth/user-not-found")y=await QN(t,S,E);else throw $}}catch($){if($.code==="auth/credential-already-in-use")console.log("[useFirebaseAuth] Email account already linked to another user, signing in with existing account"),C&&await Lp(t),y=await g0(t,S,E);else throw $}return k&&y.user.displayName!==k&&await XN(y.user,{displayName:k}),await Bp(y.user,{authProvider:"password",linkedFromAnonymous:!!C,plan:"trial"}),n(y.user),y.user}),[t,u]),g=F.useCallback(()=>t?u(async()=>{await Lp(t),n(null),await m0(t).catch(S=>{console.error("Failed to start new anonymous session after sign out:",S)})}):Promise.resolve(),[t,u]),T=F.useMemo(()=>({upgradeWithGoogle:h,upgradeWithEmail:p,signOutUser:g,authError:s,isActionInFlight:a}),[s,a,g,p,h]);return{user:e,isLoading:r,...T}},Tj=()=>{const[t,e]=F.useState(!1),[n,r]=F.useState(0),i=F.useRef(null),s=F.useRef(null),o=F.useRef(null),a=F.useRef(null),l=F.useRef(null),u=F.useCallback(()=>{i.current&&(i.current.close(),i.current=null),l.current&&cancelAnimationFrame(l.current),a.current&&a.current.disconnect(),e(!1),r(0)},[]),h=F.useCallback(async()=>{try{const p=await navigator.mediaDevices.getUserMedia({audio:!0});i.current=new(window.AudioContext||window.webkitAudioContext),s.current=i.current.createAnalyser(),s.current.fftSize=256,a.current=i.current.createMediaStreamSource(p),a.current.connect(s.current),o.current=new Uint8Array(s.current.frequencyBinCount);const g=()=>{if(!s.current)return;s.current.getByteFrequencyData(o.current);const T=o.current.reduce((S,E)=>S+E,0)/o.current.length;r(T),l.current=requestAnimationFrame(g)};g(),e(!0)}catch(p){throw console.error("Error accessing microphone:",p),u(),p}},[u]);return F.useEffect(()=>u,[u]),{isActive:t,audioLevel:n,start:h,stop:u}},bj=["pending","chunking","indexed"],kj=(t,e={})=>{const[n,r]=F.useState([]),i=typeof e.maxDocuments=="number"?e.maxDocuments:Number.POSITIVE_INFINITY,s=Ft(),o=F.useMemo(()=>t?Zn(s,"users",t,"knowledgeBase"):null,[s,t]);F.useEffect(()=>{if(!o){r([]);return}return pi(o,p=>{r(p.docs.map(g=>{const T=g.data(),S=T.createdAt&&typeof T.createdAt.toDate=="function"?T.createdAt.toDate().toISOString():new Date().toISOString();return{id:g.id,...T,createdAt:S}}).sort((g,T)=>new Date(T.createdAt)-new Date(g.createdAt)))})},[o]);const a=Number.isFinite(i)&&n.length>=i,l=async p=>{if(a)throw new Error("Knowledge base limit reached for your current plan.");const g={name:p.name,size:p.size,type:p.type||"application/octet-stream",status:"pending"};if(!o){const S=crypto.randomUUID(),E=new Date().toISOString();r(k=>[{id:S,...g,createdAt:E},...k]),bj.slice(1).forEach((k,_)=>{setTimeout(()=>{r(y=>y.map(C=>C.id===S?{...C,status:k}:C))},(_+1)*1200)});return}const T={...g,createdAt:hn()};try{const S=await lu(o,T),E=S.id,k=await u(p);await oc(S,{status:"chunking"});try{console.log("[useKnowledgeBase] Starting RAG processing for document:",E);const{ragService:_}=await Yn(async()=>{const{ragService:C}=await import("./ragService-CZtZrTmo.js");return{ragService:C}},[]),y=await _.storeDocument(t,E,k,{name:p.name,size:p.size,type:p.type});console.log("[useKnowledgeBase]  RAG processing complete:",y),await oc(S,{status:"indexed",indexedAt:hn(),chunkCount:y.chunks})}catch(_){console.error("[useKnowledgeBase]  RAG processing failed:",_),await oc(S,{status:"indexed",indexedAt:hn(),ragError:_.message})}}catch(S){throw console.error("Failed to upload knowledge base doc",S),S}},u=p=>new Promise((g,T)=>{const S=new FileReader;S.onload=_=>{const y=_.target.result;if(!y||y.trim().length===0){T(new Error("File appears to be empty or could not be read as text."));return}g(y)},S.onerror=_=>{console.error("[useKnowledgeBase] FileReader error:",_),T(new Error("Failed to read file. Please ensure it's a valid text file."))};const E=p.type||"",k=p.name.toLowerCase();E==="application/pdf"||k.endsWith(".pdf")?T(new Error("PDF processing not yet implemented. Please upload text files (.txt, .md, .docx).")):(E.startsWith("text/")||E==="application/json"||k.endsWith(".txt")||k.endsWith(".md")||k.endsWith(".markdown")||k.endsWith(".docx")||k.endsWith(".doc")||console.warn("[useKnowledgeBase] Unknown file type, attempting to read as text:",E,k),S.readAsText(p))});return{documents:n,uploadDocument:l,removeDocument:async p=>{if(o){try{try{const{ragService:g}=await Yn(async()=>{const{ragService:T}=await import("./ragService-CZtZrTmo.js");return{ragService:T}},[]);await g.deleteDocument(t,p)}catch(g){console.warn("[useKnowledgeBase] Failed to delete from Pinecone:",g)}await ba(er(o,p))}catch(g){throw console.error("Failed to delete doc",g),g}return}r(g=>g.filter(T=>T.id!==p))},limitReached:a,maxDocuments:i}},Ij=({userId:t,sessionId:e,enabled:n=!0})=>{const[r,i]=F.useState([]),[s,o]=F.useState([]),[a,l]=F.useState(!1),u=F.useRef(null),h=F.useRef(null);return F.useEffect(()=>{if(u.current&&(u.current(),u.current=null),h.current&&(h.current(),h.current=null),i([]),o([]),l(!1),!n||!t||!e)return;l(!0);const p=Ft(),g=Zn(p,"users",t,"sessions",e,"transcript"),T=uo(g,qa("createdAt","desc"),Vc(200));u.current=pi(T,k=>{const _=k.docs.map(y=>({id:y.id,...y.data()}));_.reverse(),i(_),l(!1)},k=>{console.error("Firestore transcript listener error:",k),l(!1)});const S=Zn(p,"users",t,"sessions",e,"suggestions"),E=uo(S,qa("createdAt","desc"),Vc(50));return h.current=pi(E,k=>{const _=k.docs.map(y=>({id:y.id,...y.data()}));o(_)},k=>{console.error("Firestore suggestions listener error:",k)}),()=>{u.current&&(u.current(),u.current=null),h.current&&(h.current(),h.current=null)}},[t,e,n]),{transcript:r,suggestions:s,isLoading:a}},Aj=({callId:t,enabled:e})=>{const[n,r]=F.useState([]),[i,s]=F.useState([]),[o,a]=F.useState(!0),[l,u]=F.useState(null);return F.useEffect(()=>{if(t&&t!==l&&(console.log("[useVapiCallPlayback] New call detected, clearing old data:",{oldCallId:l,newCallId:t}),r([]),s([]),u(t)),!e||!t){console.log("[useVapiCallPlayback] Disabled or no callId:",{enabled:e,callId:t}),a(!1);return}console.log("[useVapiCallPlayback] Setting up listeners for callId:",t);const h=Ft();if(!h){console.error("[useVapiCallPlayback] Firestore DB not available"),a(!1);return}a(!0);const p=Zn(h,"calls",t,"transcripts"),g=uo(p,qa("timestamp","desc"),Vc(100)),T=pi(g,_=>{console.log("[useVapiCallPlayback] Transcript snapshot:",_.size,"docs");const y=_.docs.map(C=>{var $,q;const L=C.data();return{id:C.id,...L,timestamp:($=L.timestamp)!=null&&$.toDate?L.timestamp.toDate():L.timestamp||new Date,createdAt:(q=L.createdAt)!=null&&q.toDate?L.createdAt.toDate():L.createdAt||new Date}});y.reverse(),console.log("[useVapiCallPlayback] Transcripts:",y.length),r(y),a(!1)},_=>{console.error("[useVapiCallPlayback] Error listening to Vapi call transcripts:",_),a(!1)}),S=Zn(h,"calls",t,"suggestions"),E=uo(S,qa("createdAt","desc"),Vc(50)),k=pi(E,_=>{console.log("[useVapiCallPlayback]  Suggestions snapshot received:",_.size,"docs"),_.size>0&&console.log("[useVapiCallPlayback]  First suggestion doc:",_.docs[0].id,_.docs[0].data());const y=_.docs.map(C=>{var q,P,I;const L=C.data(),$={id:C.id,...L,timestamp:(q=L.timestamp)!=null&&q.toDate?L.timestamp.toDate():L.timestamp||new Date,createdAt:(P=L.createdAt)!=null&&P.toDate?L.createdAt.toDate():L.createdAt||new Date};return console.log("[useVapiCallPlayback] Processed suggestion:",$.id,(I=$.text)==null?void 0:I.substring(0,50)),$});y.sort((C,L)=>{const $=C.createdAt instanceof Date?C.createdAt.getTime():new Date(C.createdAt).getTime();return(L.createdAt instanceof Date?L.createdAt.getTime():new Date(L.createdAt).getTime())-$}),console.log("[useVapiCallPlayback]  Final suggestions array:",y.length,"items"),s(y),a(!1)},_=>{var y;if(console.error("[useVapiCallPlayback]  Error listening to Vapi call suggestions:",_),console.error("[useVapiCallPlayback] Error details:",_.code,_.message),_.code==="failed-precondition"||(y=_.message)!=null&&y.includes("index")){console.log("[useVapiCallPlayback]  Retrying with simple query (no orderBy)...");const C=uo(S);pi(C,L=>{const $=L.docs.map(q=>{var I,R;const P=q.data();return{id:q.id,...P,timestamp:(I=P.timestamp)!=null&&I.toDate?P.timestamp.toDate():P.timestamp||new Date,createdAt:(R=P.createdAt)!=null&&R.toDate?P.createdAt.toDate():P.createdAt||new Date}});$.sort((q,P)=>{const I=q.createdAt instanceof Date?q.createdAt.getTime():new Date(q.createdAt).getTime();return(P.createdAt instanceof Date?P.createdAt.getTime():new Date(P.createdAt).getTime())-I}),s($),a(!1)},L=>{console.error("[useVapiCallPlayback]  Retry also failed:",L),a(!1)})}else a(!1)});return()=>{T(),k()}},[t,e]),{transcript:n,suggestions:i,isLoading:o}},qp=Number.POSITIVE_INFINITY,CE={free:{label:"Free",headline:"Try Ghost with essential features",description:"Perfect for testing and getting started. No credit card required.",badgeColor:"blue",upgradeCta:"Upgrade to unlock more features",entitlements:{kbLimit:3,playbackLimit:5,analyticsAccess:!0,conciergeAccess:!1,desktopStealth:!1,apiAccess:!1}},starter:{label:"Starter",headline:"For individual professionals",description:"Everything you need for regular use with more capacity.",badgeColor:"green",upgradeCta:"Upgrade to Founders Club for lifetime access",entitlements:{kbLimit:10,playbackLimit:50,analyticsAccess:!0,conciergeAccess:!1,desktopStealth:!1,apiAccess:!1}},founders:{label:"Founders Club",headline:"Lifetime access for early believers",description:"Unlimited everything, one-time payment, lifetime access.",badgeColor:"green",upgradeCta:"Contact us for enterprise solutions",entitlements:{kbLimit:20,playbackLimit:qp,analyticsAccess:!0,conciergeAccess:!0,desktopStealth:!0,apiAccess:!1}},enterprise:{label:"Enterprise",headline:"Custom solutions for teams",description:"SAML/SCIM, SOC2 compliance, API access, dedicated support, and more.",badgeColor:"green",upgradeCta:"Contact sales for custom pricing",entitlements:{kbLimit:qp,playbackLimit:qp,analyticsAccess:!0,conciergeAccess:!0,desktopStealth:!0,apiAccess:!0}}},ac=t=>{const n={guest:"free",trial:"free",concierge:"enterprise"}[t]||t,r=CE[n]?n:"free";return CE[r]},Cj=t=>{const[e,n]=F.useState(null),[r,i]=F.useState(!0);F.useEffect(()=>{if(!t){n(null),i(!1);return}const o=Ft();if(!o){n(null),i(!1);return}const a=pi(er(o,"users",t),l=>{n(l.exists()?l.data():null),i(!1)},l=>{console.error("Failed to load user profile:",l),i(!1)});return()=>a()},[t]);const s=F.useMemo(()=>e!=null&&e.plan?ac(e.plan):ac("guest"),[e==null?void 0:e.plan]);return{profile:e,planDetails:s,isLoading:r}},cd={latencyTarget:500,persona:"Calm",triggers:{price:!0,competitor:!0,timeline:!0,security:!1},mode:"sales"},Pj=t=>{const[e,n]=F.useState(cd),[r,i]=F.useState(!0),[s,o]=F.useState(!1);F.useEffect(()=>{if(!t){i(!1);return}a(t)},[t]);const a=async h=>{try{const p=Ft(),g=er(p,"users",h,"settings","app"),T=await Qv(g);if(T.exists()){const S=T.data();n({...cd,...S})}else await l(h,cd,!0)}catch(p){console.error("Failed to load settings",p)}finally{i(!1)}},l=async(h,p,g=!1)=>{if(h){o(!0);try{const T=Ft(),S=er(T,"users",h,"settings","app");await au(S,{...p,updatedAt:hn(),...g&&{createdAt:hn()}},{merge:!0}),n(p)}catch(T){throw console.error("Failed to save settings",T),T}finally{o(!1)}}},u=async h=>{const p={...e,...h};t?await l(t,p):n(p)};return{settings:e,isLoading:r,isSaving:s,updateSettings:u,resetSettings:()=>u(cd)}},Rj=({enabled:t=!0,volume:e=.3,rate:n=1.1,pitch:r=1})=>{const i=F.useRef(null),s=F.useRef(!1),o=F.useRef(0),a=F.useCallback(u=>{if(!t||!u||!u.trim())return;const h=Date.now();if(h-o.current<2e3){console.log("[TTS]  Skipping whisper (too soon after last one):",u);return}if(o.current=h,(i.current||window.speechSynthesis.speaking)&&window.speechSynthesis.cancel(),!("speechSynthesis"in window)){console.warn("[TTS] Speech synthesis not supported in this browser");return}const p=new SpeechSynthesisUtterance(u);p.volume=e,p.rate=n,p.pitch=r,p.lang="en-US";const g=window.speechSynthesis.getVoices(),T=g.find(S=>S.name.toLowerCase().includes("whisper")||S.name.toLowerCase().includes("soft")||S.name.toLowerCase().includes("samantha")||S.name.toLowerCase().includes("karen"));T&&(p.voice=T),s.current=!0,p.onend=()=>{s.current=!1,i.current=null},p.onerror=S=>{console.error("[TTS] Error:",S),s.current=!1,i.current=null},i.current=p,g.length===0?window.speechSynthesis.onvoiceschanged=()=>{window.speechSynthesis.speak(p)}:window.speechSynthesis.speak(p),console.log("[TTS] Whispering coaching cue:",u)},[t,e,n,r]),l=F.useCallback(()=>{i.current&&(window.speechSynthesis.cancel(),i.current=null,s.current=!1)},[]);return{whisper:a,stop:l,isSpeaking:s.current}},xj=t=>{const e=F.useMemo(()=>{try{return t&&t.entitlements||ac("guest").entitlements}catch(l){return console.error("[useEntitlements] Error getting entitlements:",l),ac("guest").entitlements}},[t]),n=F.useMemo(()=>{try{return((e==null?void 0:e.playbackLimit)??0)>0}catch(l){return console.error("[useEntitlements] Error checking session replay access:",l),!1}},[e]),r=F.useMemo(()=>{var l;try{return(((l=t==null?void 0:t.label)==null?void 0:l.toLowerCase())||"guest")!=="guest"}catch(u){return console.error("[useEntitlements] Error checking TTS whispers access:",u),!1}},[t]),i=F.useMemo(()=>{var l;try{return(((l=t==null?void 0:t.label)==null?void 0:l.toLowerCase())||"guest")!=="guest"}catch(u){return console.error("[useEntitlements] Error checking export access:",u),!1}},[t]),s=F.useMemo(()=>{try{return((e==null?void 0:e.kbLimit)??0)>0}catch(l){return console.error("[useEntitlements] Error checking KB access:",l),!1}},[e]),o=F.useMemo(()=>{try{return(e==null?void 0:e.analyticsAccess)??!1}catch(l){return console.error("[useEntitlements] Error checking analytics access:",l),!1}},[e]),a=F.useMemo(()=>{try{const l=(e==null?void 0:e.playbackLimit)??0;return Number.isFinite(l)?l:null}catch(l){return console.error("[useEntitlements] Error getting playback limit:",l),0}},[e]);return{entitlements:e,canAccessSessionReplay:n,canUseTTSWhispers:r,canExportSessions:i,canAccessKnowledgeBase:s,canAccessAnalytics:o,playbackLimit:a,canViewSession:l=>{const u=(e==null?void 0:e.playbackLimit)??0;return Number.isFinite(u)?l<u:!0}}},Zv=async(t,e,n={})=>{if(!t)return;const r=Ft();if(r)try{const i=Zn(r,"users",t,"analytics");await lu(i,{eventType:e,...n,timestamp:hn(),createdAt:hn()})}catch(i){console.error("[Analytics] Failed to track event:",i)}},Oj=async(t,e,n)=>{if(!(!t||!e))try{await Zv(t,"session_metrics",{sessionId:e,...n})}catch(r){console.error("[Analytics] Failed to track session metrics:",r)}},Dj=async(t,e,n,r={})=>{if(t)try{await Zv(t,"feature_used",{feature:e,action:n,...r})}catch(i){console.error("[Analytics] Failed to track feature usage:",i)}},Nj=t=>{const e=F.useCallback((i,s={})=>{t&&Zv(t,i,s)},[t]),n=F.useCallback((i,s)=>{!t||!i||Oj(t,i,s)},[t]),r=F.useCallback((i,s,o={})=>{t&&Dj(t,i,s,o)},[t]);return{track:e,trackSession:n,trackFeature:r}},Mj=t=>{const[e,n]=F.useState([]),[r,i]=F.useState(!0),[s,o]=F.useState(null);return F.useEffect(()=>{if(!t){n([]),i(!1);return}const h=Ft();if(!h){o("Firestore not available"),i(!1);return}i(!0),o(null);const p=Zn(h,"users",t,"playbooks"),g=uo(p,qa("createdAt","desc")),T=pi(g,S=>{const E=S.docs.map(k=>{var _,y;return{id:k.id,...k.data(),createdAt:(_=k.data().createdAt)!=null&&_.toDate?k.data().createdAt.toDate():new Date(k.data().createdAt),updatedAt:(y=k.data().updatedAt)!=null&&y.toDate?k.data().updatedAt.toDate():k.data().updatedAt?new Date(k.data().updatedAt):null}});n(E),i(!1)},S=>{console.error("[usePlaybooks] Error fetching playbooks:",S),o(S.message),i(!1)});return()=>T()},[t]),{playbooks:e,isLoading:r,error:s,createPlaybook:async h=>{if(!t)throw new Error("User must be logged in to create playbooks");const p=Ft();if(!p)throw new Error("Firestore not available");const g=Zn(p,"users",t,"playbooks"),T=new Date,S={...h,createdAt:T,updatedAt:T};return(await lu(g,S)).id},updatePlaybook:async(h,p)=>{if(!t)throw new Error("User must be logged in to update playbooks");const g=Ft();if(!g)throw new Error("Firestore not available");const T=er(g,"users",t,"playbooks",h);await oc(T,{...p,updatedAt:new Date})},deletePlaybook:async h=>{if(!t)throw new Error("User must be logged in to delete playbooks");const p=Ft();if(!p)throw new Error("Firestore not available");const g=er(p,"users",t,"playbooks",h);await ba(g)}}};var mC={};function PE(t,e){if(t==null)return{};var n,r,i=function(o,a){if(o==null)return{};var l={};for(var u in o)if({}.hasOwnProperty.call(o,u)){if(a.indexOf(u)!==-1)continue;l[u]=o[u]}return l}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ln(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Re(t){return Re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(t)}function gC(t){var e=function(n,r){if(Re(n)!="object"||!n)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,r);if(Re(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(t,"string");return Re(e)=="symbol"?e:e+""}function RE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gC(r.key),r)}}function Vn(t,e,n){return e&&RE(t.prototype,e),n&&RE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ff(t,e){if(e&&(Re(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}function br(t){return br=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},br(t)}function jc(t,e){return jc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},jc(t,e)}function Uf(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jc(t,e)}function Mr(t,e,n){return(e=gC(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xE(t,e,n,r,i,s,o){try{var a=t[s](o),l=a.value}catch(u){return void n(u)}a.done?e(l):Promise.resolve(l).then(r,i)}function me(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(l){xE(s,r,i,o,a,"next",l)}function a(l){xE(s,r,i,o,a,"throw",l)}o(void 0)})}}function OE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Xt(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var s,o,a,l,u=[],h=!0,p=!1;try{if(a=(i=i.call(n)).next,r===0){if(Object(i)!==i)return;h=!1}else for(;!(h=(s=a.call(i)).done)&&(u.push(s.value),u.length!==r);h=!0);}catch(g){p=!0,o=g}finally{try{if(!h&&i.return!=null&&(l=i.return(),Object(l)!==l))return}finally{if(p)throw o}}return u}}(t,e)||function(n,r){if(n){if(typeof n=="string")return OE(n,r);var i={}.toString.call(n).slice(8,-1);return i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set"?Array.from(n):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?OE(n,r):void 0}}(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Lj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var DE,ud={exports:{}},xg=function(){if(DE)return ud.exports;DE=1;var t,e=typeof Reflect=="object"?Reflect:null,n=e&&typeof e.apply=="function"?e.apply:function(E,k,_){return Function.prototype.apply.call(E,k,_)};t=e&&typeof e.ownKeys=="function"?e.ownKeys:Object.getOwnPropertySymbols?function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:function(E){return Object.getOwnPropertyNames(E)};var r=Number.isNaN||function(E){return E!=E};function i(){i.init.call(this)}ud.exports=i,ud.exports.once=function(E,k){return new Promise(function(_,y){function C($){E.removeListener(k,L),y($)}function L(){typeof E.removeListener=="function"&&E.removeListener("error",C),_([].slice.call(arguments))}S(E,k,L,{once:!0}),k!=="error"&&function($,q,P){typeof $.on=="function"&&S($,"error",q,P)}(E,C,{once:!0})})},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function o(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}function a(E){return E._maxListeners===void 0?i.defaultMaxListeners:E._maxListeners}function l(E,k,_,y){var C,L,$,q;if(o(_),(L=E._events)===void 0?(L=E._events=Object.create(null),E._eventsCount=0):(L.newListener!==void 0&&(E.emit("newListener",k,_.listener?_.listener:_),L=E._events),$=L[k]),$===void 0)$=L[k]=_,++E._eventsCount;else if(typeof $=="function"?$=L[k]=y?[_,$]:[$,_]:y?$.unshift(_):$.push(_),(C=a(E))>0&&$.length>C&&!$.warned){$.warned=!0;var P=new Error("Possible EventEmitter memory leak detected. "+$.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");P.name="MaxListenersExceededWarning",P.emitter=E,P.type=k,P.count=$.length,q=P,console&&console.warn&&console.warn(q)}return E}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(E,k,_){var y={fired:!1,wrapFn:void 0,target:E,type:k,listener:_},C=u.bind(y);return C.listener=_,y.wrapFn=C,C}function p(E,k,_){var y=E._events;if(y===void 0)return[];var C=y[k];return C===void 0?[]:typeof C=="function"?_?[C.listener||C]:[C]:_?function(L){for(var $=new Array(L.length),q=0;q<$.length;++q)$[q]=L[q].listener||L[q];return $}(C):T(C,C.length)}function g(E){var k=this._events;if(k!==void 0){var _=k[E];if(typeof _=="function")return 1;if(_!==void 0)return _.length}return 0}function T(E,k){for(var _=new Array(k),y=0;y<k;++y)_[y]=E[y];return _}function S(E,k,_,y){if(typeof E.on=="function")y.once?E.once(k,_):E.on(k,_);else{if(typeof E.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E);E.addEventListener(k,function C(L){y.once&&E.removeEventListener(k,C),_(L)})}}return Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(E){if(typeof E!="number"||E<0||r(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");s=E}}),i.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(E){if(typeof E!="number"||E<0||r(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this},i.prototype.getMaxListeners=function(){return a(this)},i.prototype.emit=function(E){for(var k=[],_=1;_<arguments.length;_++)k.push(arguments[_]);var y=E==="error",C=this._events;if(C!==void 0)y=y&&C.error===void 0;else if(!y)return!1;if(y){var L;if(k.length>0&&(L=k[0]),L instanceof Error)throw L;var $=new Error("Unhandled error."+(L?" ("+L.message+")":""));throw $.context=L,$}var q=C[E];if(q===void 0)return!1;if(typeof q=="function")n(q,this,k);else{var P=q.length,I=T(q,P);for(_=0;_<P;++_)n(I[_],this,k)}return!0},i.prototype.addListener=function(E,k){return l(this,E,k,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(E,k){return l(this,E,k,!0)},i.prototype.once=function(E,k){return o(k),this.on(E,h(this,E,k)),this},i.prototype.prependOnceListener=function(E,k){return o(k),this.prependListener(E,h(this,E,k)),this},i.prototype.removeListener=function(E,k){var _,y,C,L,$;if(o(k),(y=this._events)===void 0)return this;if((_=y[E])===void 0)return this;if(_===k||_.listener===k)--this._eventsCount==0?this._events=Object.create(null):(delete y[E],y.removeListener&&this.emit("removeListener",E,_.listener||k));else if(typeof _!="function"){for(C=-1,L=_.length-1;L>=0;L--)if(_[L]===k||_[L].listener===k){$=_[L].listener,C=L;break}if(C<0)return this;C===0?_.shift():function(q,P){for(;P+1<q.length;P++)q[P]=q[P+1];q.pop()}(_,C),_.length===1&&(y[E]=_[0]),y.removeListener!==void 0&&this.emit("removeListener",E,$||k)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(E){var k,_,y;if((_=this._events)===void 0)return this;if(_.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):_[E]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete _[E]),this;if(arguments.length===0){var C,L=Object.keys(_);for(y=0;y<L.length;++y)(C=L[y])!=="removeListener"&&this.removeAllListeners(C);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(k=_[E])=="function")this.removeListener(E,k);else if(k!==void 0)for(y=k.length-1;y>=0;y--)this.removeListener(E,k[y]);return this},i.prototype.listeners=function(E){return p(this,E,!0)},i.prototype.rawListeners=function(E){return p(this,E,!1)},i.listenerCount=function(E,k){return typeof E.listenerCount=="function"?E.listenerCount(k):g.call(E,k)},i.prototype.listenerCount=g,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]},ud.exports}(),dd=Lj(xg),NE=Object.prototype.hasOwnProperty;function ME(t,e,n){for(n of t.keys())if(ln(n,e))return n}function ln(t,e){var n,r,i;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&ln(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if((i=r)&&typeof i=="object"&&!(i=ME(e,i))||!e.has(i))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if((i=r[0])&&typeof i=="object"&&!(i=ME(e,i))||!ln(r[1],e.get(i)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){for(n in r=0,t)if(NE.call(t,n)&&++r&&!NE.call(e,n)||!(n in e)||!ln(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!=t&&e!=e}const Vj={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},yC={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},ct={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},on={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Hi={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class G{static getFirstMatch(e,n){const r=n.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,n){const r=n.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,n,r){if(e.test(n))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),!(n[0]===1&&n[1]<5))return n[0]===1&&n[1]<6?"Cupcake":n[0]===1&&n[1]>=6?"Donut":n[0]===2&&n[1]<2?"Eclair":n[0]===2&&n[1]===2?"Froyo":n[0]===2&&n[1]>2?"Gingerbread":n[0]===3?"Honeycomb":n[0]===4&&n[1]<1?"Ice Cream Sandwich":n[0]===4&&n[1]<4?"Jelly Bean":n[0]===4&&n[1]>=4?"KitKat":n[0]===5?"Lollipop":n[0]===6?"Marshmallow":n[0]===7?"Nougat":n[0]===8?"Oreo":n[0]===9?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,n,r=!1){const i=G.getVersionPrecision(e),s=G.getVersionPrecision(n);let o=Math.max(i,s),a=0;const l=G.map([e,n],u=>{const h=o-G.getVersionPrecision(u),p=u+new Array(h+1).join(".0");return G.map(p.split("."),g=>new Array(20-g.length).join("0")+g).reverse()});for(r&&(a=o-Math.min(i,s)),o-=1;o>=a;){if(l[0][o]>l[1][o])return 1;if(l[0][o]===l[1][o]){if(o===a)return 0;o-=1}else if(l[0][o]<l[1][o])return-1}}static map(e,n){const r=[];let i;if(Array.prototype.map)return Array.prototype.map.call(e,n);for(i=0;i<e.length;i+=1)r.push(n(e[i]));return r}static find(e,n){let r,i;if(Array.prototype.find)return Array.prototype.find.call(e,n);for(r=0,i=e.length;r<i;r+=1){const s=e[r];if(n(s,r))return s}}static assign(e,...n){const r=e;let i,s;if(Object.assign)return Object.assign(e,...n);for(i=0,s=n.length;i<s;i+=1){const o=n[i];typeof o=="object"&&o!==null&&Object.keys(o).forEach(a=>{r[a]=o[a]})}return e}static getBrowserAlias(e){return Vj[e]}static getBrowserTypeByAlias(e){return yC[e]||""}}const qe=/version\/(\d+(\.?_?\d+)+)/i,jj=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},n=G.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||G.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},n=G.getFirstMatch(qe,t)||G.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},n=G.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||G.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},n=G.getFirstMatch(qe,t)||G.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},n=G.getFirstMatch(qe,t)||G.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},n=G.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||G.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},n=G.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||G.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},n=G.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||G.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},n=G.getFirstMatch(qe,t)||G.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},n=G.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||G.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},n=G.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||G.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},n=G.getFirstMatch(qe,t)||G.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},n=G.getFirstMatch(qe,t)||G.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},n=G.getFirstMatch(qe,t)||G.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},n=G.getFirstMatch(qe,t)||G.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},n=G.getFirstMatch(qe,t)||G.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},n=G.getFirstMatch(qe,t)||G.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},n=G.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||G.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},n=G.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||G.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},n=G.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},n=G.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},n=G.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},n=G.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},n=G.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},n=G.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return n&&(e.version=n),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},n=G.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},n=G.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},n=G.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},n=G.getFirstMatch(qe,t)||G.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},n=G.getFirstMatch(qe,t)||G.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},n=G.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},n=G.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||G.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},n=G.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||G.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},n=G.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},n=G.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},n=G.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},n=G.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||G.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},n=G.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},n=G.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e={name:"Android Browser"},n=G.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},n=G.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},n=G.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/.*/i],describe(t){const e=t.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:G.getFirstMatch(e,t),version:G.getSecondMatch(e,t)}}}];var Fj=[{test:[/Roku\/DVP/],describe(t){const e=G.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:on.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=G.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:on.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=G.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),n=G.getWindowsVersionName(e);return{name:on.Windows,version:e,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:on.iOS},n=G.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return n&&(e.version=n),e}},{test:[/macintosh/i],describe(t){const e=G.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),n=G.getMacOSVersionName(e),r={name:on.MacOS,version:e};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=G.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:on.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e=G.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),n=G.getAndroidVersionName(e),r={name:on.Android,version:e};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=G.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),n={name:on.WebOS};return e&&e.length&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=G.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||G.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||G.getFirstMatch(/\bbb(\d+)/i,t);return{name:on.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=G.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:on.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=G.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:on.Tizen,version:e}}},{test:[/linux/i],describe:()=>({name:on.Linux})},{test:[/CrOS/],describe:()=>({name:on.ChromeOS})},{test:[/PlayStation 4/],describe(t){const e=G.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:on.PlayStation4,version:e}}}],Uj=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(t){const e=G.getFirstMatch(/(can-l01)/i,t)&&"Nova",n={type:ct.mobile,vendor:"Huawei"};return e&&(n.model=e),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:ct.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:ct.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:ct.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:ct.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:ct.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:ct.tablet})},{test(t){const e=t.test(/ipod|iphone/i),n=t.test(/like (ipod|iphone)/i);return e&&!n},describe(t){const e=G.getFirstMatch(/(ipod|iphone)/i,t);return{type:ct.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:ct.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:ct.mobile})},{test:t=>t.getBrowserName(!0)==="blackberry",describe:()=>({type:ct.mobile,vendor:"BlackBerry"})},{test:t=>t.getBrowserName(!0)==="bada",describe:()=>({type:ct.mobile})},{test:t=>t.getBrowserName()==="windows phone",describe:()=>({type:ct.mobile,vendor:"Microsoft"})},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe:()=>({type:ct.tablet})},{test:t=>t.getOSName(!0)==="android",describe:()=>({type:ct.mobile})},{test:t=>t.getOSName(!0)==="macos",describe:()=>({type:ct.desktop,vendor:"Apple"})},{test:t=>t.getOSName(!0)==="windows",describe:()=>({type:ct.desktop})},{test:t=>t.getOSName(!0)==="linux",describe:()=>({type:ct.desktop})},{test:t=>t.getOSName(!0)==="playstation 4",describe:()=>({type:ct.tv})},{test:t=>t.getOSName(!0)==="roku",describe:()=>({type:ct.tv})}],$j=[{test:t=>t.getBrowserName(!0)==="microsoft edge",describe(t){if(/\sedg\//i.test(t))return{name:Hi.Blink};const e=G.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:Hi.EdgeHTML,version:e}}},{test:[/trident/i],describe(t){const e={name:Hi.Trident},n=G.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:t=>t.test(/presto/i),describe(t){const e={name:Hi.Presto},n=G.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=t.test(/gecko/i),n=t.test(/like gecko/i);return e&&!n},describe(t){const e={name:Hi.Gecko},n=G.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:Hi.Blink})},{test:[/(apple)?webkit/i],describe(t){const e={name:Hi.WebKit},n=G.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}}];class LE{constructor(e,n=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=G.find(jj,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=G.find(Fj,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:n}=this.getOS();return e?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:n}=this.getPlatform();return e?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const e=G.find(Uj,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=G.find($j,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return G.assign({},this.parsedResult)}satisfies(e){const n={};let r=0;const i={};let s=0;if(Object.keys(e).forEach(o=>{const a=e[o];typeof a=="string"?(i[o]=a,s+=1):typeof a=="object"&&(n[o]=a,r+=1)}),r>0){const o=Object.keys(n),a=G.find(o,u=>this.isOS(u));if(a){const u=this.satisfies(n[a]);if(u!==void 0)return u}const l=G.find(o,u=>this.isPlatform(u));if(l){const u=this.satisfies(n[l]);if(u!==void 0)return u}}if(s>0){const o=Object.keys(i),a=G.find(o,l=>this.isBrowser(l,!0));if(a!==void 0)return this.compareVersion(i[a])}}isBrowser(e,n=!1){const r=this.getBrowserName().toLowerCase();let i=e.toLowerCase();const s=G.getBrowserTypeByAlias(i);return n&&s&&(i=s.toLowerCase()),i===r}compareVersion(e){let n=[0],r=e,i=!1;const s=this.getBrowserVersion();if(typeof s=="string")return e[0]===">"||e[0]==="<"?(r=e.substr(1),e[1]==="="?(i=!0,r=e.substr(2)):n=[],e[0]===">"?n.push(1):n.push(-1)):e[0]==="="?r=e.substr(1):e[0]==="~"&&(i=!0,r=e.substr(1)),n.indexOf(G.compareVersions(s,r,i))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,n=!1){return this.isBrowser(e,n)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(n=>this.is(n))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Bj{static getParser(e,n=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new LE(e,n)}static parse(e){return new LE(e).getResult()}static get BROWSER_MAP(){return yC}static get ENGINE_MAP(){return Hi}static get OS_MAP(){return on}static get PLATFORMS_MAP(){return ct}}function $f(){return Date.now()+Math.random().toString()}function Pl(){throw new Error("Method must be implemented in subclass")}function vC(t,e){return e!=null&&e.proxyUrl?e.proxyUrl+(e.proxyUrl.slice(-1)==="/"?"":"/")+t.substring(8):t}function Fh(t){return t!=null&&t.callObjectBundleUrlOverride?t.callObjectBundleUrlOverride:vC("https://c.daily.co/call-machine/versioned/".concat("0.85.0","/static/call-machine-object-bundle.js"),t)}function Uh(t){try{new URL(t)}catch{return!1}return!0}const He=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ho="8.55.0",Ne=globalThis;function $h(t,e,n){const r=Ne,i=r.__SENTRY__=r.__SENTRY__||{},s=i[ho]=i[ho]||{};return s[t]||(s[t]=e())}const No=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Og=["debug","info","warn","error","log","assert","trace"],Bh={};function uu(t){if(!("console"in Ne))return t();const e=Ne.console,n={},r=Object.keys(Bh);r.forEach(i=>{const s=Bh[i];n[i]=e[i],e[i]=s});try{return t()}finally{r.forEach(i=>{e[i]=n[i]})}}const ye=$h("logger",function(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return No?Og.forEach(n=>{e[n]=(...r)=>{t&&uu(()=>{Ne.console[n](`Sentry Logger [${n}]:`,...r)})}}):Og.forEach(n=>{e[n]=()=>{}}),e}),ao="?",VE=/\(error: (.*)\)/,jE=/captureMessage|captureException/;function hd(t){return t[t.length-1]||{}}const FE="<anonymous>";function Ps(t){try{return t&&typeof t=="function"&&t.name||FE}catch{return FE}}function UE(t){const e=t.exception;if(e){const n=[];try{return e.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}const zd={},$E={};function fo(t,e){zd[t]=zd[t]||[],zd[t].push(e)}function po(t,e){if(!$E[t]){$E[t]=!0;try{e()}catch(n){No&&ye.error(`Error while instrumenting ${t}`,n)}}}function Er(t,e){const n=t&&zd[t];if(n)for(const r of n)try{r(e)}catch(i){No&&ye.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${Ps(r)}
Error:`,i)}}let zp=null;function qj(){zp=Ne.onerror,Ne.onerror=function(t,e,n,r,i){return Er("error",{column:r,error:i,line:n,msg:t,url:e}),!!zp&&zp.apply(this,arguments)},Ne.onerror.__SENTRY_INSTRUMENTED__=!0}let Hp=null;function zj(){Hp=Ne.onunhandledrejection,Ne.onunhandledrejection=function(t){return Er("unhandledrejection",t),!Hp||Hp.apply(this,arguments)},Ne.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function Bf(){return e_(Ne),Ne}function e_(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||ho,e[ho]=e[ho]||{}}const _C=Object.prototype.toString;function t_(t){switch(_C.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return ko(t,Error)}}function sl(t,e){return _C.call(t)===`[object ${e}]`}function wC(t){return sl(t,"ErrorEvent")}function BE(t){return sl(t,"DOMError")}function ci(t){return sl(t,"String")}function n_(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function Dg(t){return t===null||n_(t)||typeof t!="object"&&typeof t!="function"}function za(t){return sl(t,"Object")}function qf(t){return typeof Event<"u"&&ko(t,Event)}function zf(t){return!!(t&&t.then&&typeof t.then=="function")}function ko(t,e){try{return t instanceof e}catch{return!1}}function EC(t){return!(typeof t!="object"||t===null||!t.__isVue&&!t._isVue)}const r_=Ne;function SC(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,i=[];let s=0,o=0;const a=" > ",l=a.length;let u;const h=Array.isArray(e)?e:e.keyAttrs,p=!Array.isArray(e)&&e.maxStringLength||80;for(;n&&s++<r&&(u=Hj(n,h),!(u==="html"||s>1&&o+i.length*l+u.length>=p));)i.push(u),o+=u.length,n=n.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function Hj(t,e){const n=t,r=[];if(!n||!n.tagName)return"";if(r_.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const i=e&&e.length?e.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(i&&i.length)i.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const o=n.className;if(o&&ci(o)){const a=o.split(/\s+/);for(const l of a)r.push(`.${l}`)}}const s=["aria-label","type","name","title","alt"];for(const o of s){const a=n.getAttribute(o);a&&r.push(`[${o}="${a}"]`)}return r.join("")}function ka(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function qE(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const i=t[r];try{EC(i)?n.push("[VueViewModel]"):n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function Wj(t,e,n=!1){return!!ci(t)&&(sl(e,"RegExp")?e.test(t):!!ci(e)&&(n?t===e:t.includes(e)))}function fd(t,e=[],n=!1){return e.some(r=>Wj(t,r,n))}function xn(t,e,n){if(!(e in t))return;const r=t[e],i=n(r);typeof i=="function"&&TC(i,r);try{t[e]=i}catch{No&&ye.log(`Failed to replace method "${e}" in object`,t)}}function Io(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{No&&ye.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function TC(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,Io(t,"__sentry_original__",e)}catch{}}function i_(t){return t.__sentry_original__}function bC(t){if(t_(t))return{message:t.message,name:t.name,stack:t.stack,...HE(t)};if(qf(t)){const e={type:t.type,target:zE(t.target),currentTarget:zE(t.currentTarget),...HE(t)};return typeof CustomEvent<"u"&&ko(t,CustomEvent)&&(e.detail=t.detail),e}return t}function zE(t){try{return e=t,typeof Element<"u"&&ko(e,Element)?SC(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}var e}function HE(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}return{}}function Hn(t){return Ng(t,new Map)}function Ng(t,e){if(function(n){if(!za(n))return!1;try{const r=Object.getPrototypeOf(n).constructor.name;return!r||r==="Object"}catch{return!0}}(t)){const n=e.get(t);if(n!==void 0)return n;const r={};e.set(t,r);for(const i of Object.getOwnPropertyNames(t))t[i]!==void 0&&(r[i]=Ng(t[i],e));return r}if(Array.isArray(t)){const n=e.get(t);if(n!==void 0)return n;const r=[];return e.set(t,r),t.forEach(i=>{r.push(Ng(i,e))}),r}return t}function du(){return Date.now()/1e3}const mi=function(){const{performance:t}=Ne;if(!t||!t.now)return du;const e=Date.now()-t.now(),n=t.timeOrigin==null?e:t.timeOrigin;return()=>(n+t.now())/1e3}();function Kn(){const t=Ne,e=t.crypto||t.msCrypto;let n=()=>16*Math.random();try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return e.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(15&n())>>r/4).toString(16))}function kC(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function Ji(t){const{message:e,event_id:n}=t;if(e)return e;const r=kC(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Mg(t,e,n){const r=t.exception=t.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=e||""),s.type||(s.type="Error")}function Ha(t,e){const n=kC(t);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...e},e&&"data"in e){const i={...r&&r.data,...e.data};n.mechanism.data=i}}function WE(t){if(function(e){try{return e.__sentry_captured__}catch{}}(t))return!0;try{Io(t,"__sentry_captured__",!0)}catch{}return!1}var ti;function Ao(t){return new qn(e=>{e(t)})}function qh(t){return new qn((e,n)=>{n(t)})}(()=>{const{performance:t}=Ne;!t||!t.now||(t.now(),t.timing&&t.timing.navigationStart)})(),function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"}(ti||(ti={}));class qn{constructor(e){qn.prototype.__init.call(this),qn.prototype.__init2.call(this),qn.prototype.__init3.call(this),qn.prototype.__init4.call(this),this._state=ti.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}then(e,n){return new qn((r,i)=>{this._handlers.push([!1,s=>{if(e)try{r(e(s))}catch(o){i(o)}else r(s)},s=>{if(n)try{r(n(s))}catch(o){i(o)}else i(s)}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new qn((n,r)=>{let i,s;return this.then(o=>{s=!1,i=o,e&&e()},o=>{s=!0,i=o,e&&e()}).then(()=>{s?r(i):n(i)})})}__init(){this._resolve=e=>{this._setResult(ti.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(ti.REJECTED,e)}}__init3(){this._setResult=(e,n)=>{this._state===ti.PENDING&&(zf(n)?n.then(this._resolve,this._reject):(this._state=e,this._value=n,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===ti.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===ti.RESOLVED&&n[1](this._value),this._state===ti.REJECTED&&n[2](this._value),n[0]=!0)})}}}function Gj(t){const e=mi(),n={sid:Kn(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(r){return Hn({sid:`${r.sid}`,init:r.init,started:new Date(1e3*r.started).toISOString(),timestamp:new Date(1e3*r.timestamp).toISOString(),status:r.status,errors:r.errors,did:typeof r.did=="number"||typeof r.did=="string"?`${r.did}`:void 0,duration:r.duration,abnormal_mechanism:r.abnormal_mechanism,attrs:{release:r.release,environment:r.environment,ip_address:r.ipAddress,user_agent:r.userAgent}})}(n)};return t&&Wa(n,t),n}function Wa(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||mi(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:Kn()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function GE(){return Kn()}function Lg(){return Kn().substring(16)}function Hf(t,e,n=2){if(!e||typeof e!="object"||n<=0)return e;if(t&&e&&Object.keys(e).length===0)return t;const r={...t};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=Hf(r[i],e[i],n-1));return r}const Vg="_sentrySpan";function KE(t,e){e?Io(t,Vg,e):delete t[Vg]}function JE(t){return t[Vg]}class s_{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:GE(),spanId:Lg()}}clone(){const e=new s_;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,KE(e,JE(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Wa(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,[r,i]=n instanceof Rs?[n.getScopeData(),n.getRequestSession()]:za(n)?[e,e.requestSession]:[],{tags:s,extra:o,user:a,contexts:l,level:u,fingerprint:h=[],propagationContext:p}=r||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...o},this._contexts={...this._contexts,...l},a&&Object.keys(a).length&&(this._user=a),u&&(this._level=u),h.length&&(this._fingerprint=h),p&&(this._propagationContext=p),i&&(this._requestSession=i),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,KE(this,void 0),this._attachments=[],this.setPropagationContext({traceId:GE()}),this._notifyScopeListeners(),this}addBreadcrumb(e,n){const r=typeof n=="number"?n:100;if(r<=0)return this;const i={timestamp:du(),...e};return this._breadcrumbs.push(i),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client&&this._client.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:JE(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=Hf(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext={spanId:Lg(),...e},this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=n&&n.event_id?n.event_id:Kn();if(!this._client)return ye.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...n,event_id:r},this),r}captureMessage(e,n,r){const i=r&&r.event_id?r.event_id:Kn();if(!this._client)return ye.warn("No client configured on scope - will not capture message!"),i;const s=new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:s,...r,event_id:i},this),i}captureEvent(e,n){const r=n&&n.event_id?n.event_id:Kn();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(ye.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}const Rs=s_;class Kj{constructor(e,n){let r,i;r=e||new Rs,i=n||new Rs,this._stack=[{scope:r}],this._isolationScope=i}withScope(e){const n=this._pushScope();let r;try{r=e(n)}catch(i){throw this._popScope(),i}return zf(r)?r.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function Ga(){const t=e_(Bf());return t.stack=t.stack||new Kj($h("defaultCurrentScope",()=>new Rs),$h("defaultIsolationScope",()=>new Rs))}function Jj(t){return Ga().withScope(t)}function Qj(t,e){const n=Ga();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function QE(t){return Ga().withScope(()=>t(Ga().getIsolationScope()))}function o_(t){const e=e_(t);return e.acs?e.acs:{withIsolationScope:QE,withScope:Jj,withSetScope:Qj,withSetIsolationScope:(n,r)=>QE(r),getCurrentScope:()=>Ga().getScope(),getIsolationScope:()=>Ga().getIsolationScope()}}function Mo(){return o_(Bf()).getCurrentScope()}function hu(){return o_(Bf()).getIsolationScope()}function Yt(){return Mo().getClient()}function Yj(t){const e=t.getPropagationContext(),{traceId:n,spanId:r,parentSpanId:i}=e;return Hn({trace_id:n,span_id:r,parent_span_id:i})}function Xj(t){const e=t._sentryMetrics;if(!e)return;const n={};for(const[,[r,i]]of e)(n[r]||(n[r]=[])).push(Hn(i));return n}const Zj=/^sentry-/;function eF(t){const e=function(r){if(!(!r||!ci(r)&&!Array.isArray(r)))return Array.isArray(r)?r.reduce((i,s)=>{const o=YE(s);return Object.entries(o).forEach(([a,l])=>{i[a]=l}),i},{}):YE(r)}(t);if(!e)return;const n=Object.entries(e).reduce((r,[i,s])=>(i.match(Zj)&&(r[i.slice(7)]=s),r),{});return Object.keys(n).length>0?n:void 0}function YE(t){return t.split(",").map(e=>e.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((e,[n,r])=>(n&&r&&(e[n]=r),e),{})}let XE=!1;function tF(t){const{spanId:e,traceId:n,isRemote:r}=t.spanContext();return Hn({parent_span_id:r?e:a_(t).parent_span_id,span_id:r?Lg():e,trace_id:n})}function ZE(t){return typeof t=="number"?eS(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?eS(t.getTime()):mi()}function eS(t){return t>9999999999?t/1e3:t}function a_(t){if(function(e){return typeof e.getSpanJSON=="function"}(t))return t.getSpanJSON();try{const{spanId:e,traceId:n}=t.spanContext();if(function(r){const i=r;return!!(i.attributes&&i.startTime&&i.name&&i.endTime&&i.status)}(t)){const{attributes:r,startTime:i,name:s,endTime:o,parentSpanId:a,status:l}=t;return Hn({span_id:e,trace_id:n,data:r,description:s,parent_span_id:a,start_timestamp:ZE(i),timestamp:ZE(o)||void 0,status:nF(l),op:r["sentry.op"],origin:r["sentry.origin"],_metrics_summary:Xj(t)})}return{span_id:e,trace_id:n}}catch{return{}}}function nF(t){if(t&&t.code!==0)return t.code===1?"ok":t.message||"unknown_error"}function IC(t){return t._sentryRootSpan||t}function rF(){XE||(uu(()=>{console.warn("[Sentry] Deprecation warning: Returning null from `beforeSendSpan` will be disallowed from SDK version 9.0.0 onwards. The callback will only support mutating spans. To drop certain spans, configure the respective integrations directly.")}),XE=!0)}const l_="production";function AC(t,e){const n=e.getOptions(),{publicKey:r}=e.getDsn()||{},i=Hn({environment:n.environment||l_,release:n.release,public_key:r,trace_id:t});return e.emit("createDsc",i),i}function iF(t){const e=Yt();if(!e)return{};const n=IC(t),r=n._frozenDsc;if(r)return r;const i=n.spanContext().traceState,s=i&&i.get("sentry.dsc"),o=s&&eF(s);if(o)return o;const a=AC(t.spanContext().traceId,e),l=a_(n),u=l.data||{},h=u["sentry.sample_rate"];h!=null&&(a.sample_rate=`${h}`);const p=u["sentry.source"],g=l.description;return p!=="url"&&g&&(a.transaction=g),function(T){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const S=Yt(),E=S&&S.getOptions();return!!E&&(E.enableTracing||"tracesSampleRate"in E||"tracesSampler"in E)}()&&(a.sampled=String(function(T){const{traceFlags:S}=T.spanContext();return S===1}(n))),e.emit("createDsc",a,n),a}const sF=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function zh(t,e=!1){const{host:n,path:r,pass:i,port:s,projectId:o,protocol:a,publicKey:l}=t;return`${a}://${l}${e&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r&&`${r}/`}${o}`}function tS(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function oF(t){const e=typeof t=="string"?function(n){const r=sF.exec(n);if(!r)return void uu(()=>{console.error(`Invalid Sentry Dsn: ${n}`)});const[i,s,o="",a="",l="",u=""]=r.slice(1);let h="",p=u;const g=p.split("/");if(g.length>1&&(h=g.slice(0,-1).join("/"),p=g.pop()),p){const T=p.match(/^\d+/);T&&(p=T[0])}return tS({host:a,pass:o,path:h,projectId:p,port:l,protocol:i,publicKey:s})}(t):tS(t);if(e&&function(n){if(!No)return!0;const{port:r,projectId:i,protocol:s}=n;return!(["protocol","publicKey","host","projectId"].find(o=>!n[o]&&(ye.error(`Invalid Sentry Dsn: ${o} missing`),!0))||(i.match(/^\d+$/)?function(o){return o==="http"||o==="https"}(s)?r&&isNaN(parseInt(r,10))&&(ye.error(`Invalid Sentry Dsn: Invalid port ${r}`),1):(ye.error(`Invalid Sentry Dsn: Invalid protocol ${s}`),1):(ye.error(`Invalid Sentry Dsn: Invalid projectId ${i}`),1)))}(e))return e}function ni(t,e=100,n=1/0){try{return jg("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function CC(t,e=3,n=102400){const r=ni(t,e);return i=r,function(s){return~-encodeURI(s).split(/%..|./).length}(JSON.stringify(i))>n?CC(t,e-1,n):r;var i}function jg(t,e,n=1/0,r=1/0,i=function(){const s=typeof WeakSet=="function",o=s?new WeakSet:[];return[function(a){if(s)return!!o.has(a)||(o.add(a),!1);for(let l=0;l<o.length;l++)if(o[l]===a)return!0;return o.push(a),!1},function(a){if(s)o.delete(a);else for(let l=0;l<o.length;l++)if(o[l]===a){o.splice(l,1);break}}]}()){const[s,o]=i;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const a=function(T,S){try{if(T==="domain"&&S&&typeof S=="object"&&S._events)return"[Domain]";if(T==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&S===global)return"[Global]";if(typeof window<"u"&&S===window)return"[Window]";if(typeof document<"u"&&S===document)return"[Document]";if(EC(S))return"[VueViewModel]";if(za(E=S)&&"nativeEvent"in E&&"preventDefault"in E&&"stopPropagation"in E)return"[SyntheticEvent]";if(typeof S=="number"&&!Number.isFinite(S))return`[${S}]`;if(typeof S=="function")return`[Function: ${Ps(S)}]`;if(typeof S=="symbol")return`[${String(S)}]`;if(typeof S=="bigint")return`[BigInt: ${String(S)}]`;const k=function(_){const y=Object.getPrototypeOf(_);return y?y.constructor.name:"null prototype"}(S);return/^HTML(\w*)Element$/.test(k)?`[HTMLElement: ${k}]`:`[object ${k}]`}catch(k){return`**non-serializable** (${k})`}var E}(t,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;const l=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(l===0)return a.replace("object ","");if(s(e))return"[Circular ~]";const u=e;if(u&&typeof u.toJSON=="function")try{return jg("",u.toJSON(),l-1,r,i)}catch{}const h=Array.isArray(e)?[]:{};let p=0;const g=bC(e);for(const T in g){if(!Object.prototype.hasOwnProperty.call(g,T))continue;if(p>=r){h[T]="[MaxProperties ~]";break}const S=g[T];h[T]=jg(T,S,l-1,r,i),p++}return o(e),h}function Fc(t,e=[]){return[t,e]}function aF(t,e){const[n,r]=t;return[n,[...r,e]]}function nS(t,e){const n=t[1];for(const r of n)if(e(r,r[0].type))return!0;return!1}function Fg(t){return Ne.__SENTRY__&&Ne.__SENTRY__.encodePolyfill?Ne.__SENTRY__.encodePolyfill(t):new TextEncoder().encode(t)}function lF(t){const[e,n]=t;let r=JSON.stringify(e);function i(s){typeof r=="string"?r=typeof s=="string"?r+s:[Fg(r),s]:r.push(typeof s=="string"?Fg(s):s)}for(const s of n){const[o,a]=s;if(i(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)i(a);else{let l;try{l=JSON.stringify(a)}catch{l=JSON.stringify(ni(a))}i(l)}}return typeof r=="string"?r:function(s){const o=s.reduce((u,h)=>u+h.length,0),a=new Uint8Array(o);let l=0;for(const u of s)a.set(u,l),l+=u.length;return a}(r)}function cF(t){const e=typeof t.data=="string"?Fg(t.data):t.data;return[Hn({type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),e]}const uF={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket",raw_security:"security"};function rS(t){return uF[t]}function PC(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function dF(t,e,n,r){const i=PC(n),s=t.type&&t.type!=="replay_event"?t.type:"event";(function(a,l){l&&(a.sdk=a.sdk||{},a.sdk.name=a.sdk.name||l.name,a.sdk.version=a.sdk.version||l.version,a.sdk.integrations=[...a.sdk.integrations||[],...l.integrations||[]],a.sdk.packages=[...a.sdk.packages||[],...l.packages||[]])})(t,n&&n.sdk);const o=function(a,l,u,h){const p=a.sdkProcessingMetadata&&a.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:a.event_id,sent_at:new Date().toISOString(),...l&&{sdk:l},...!!u&&h&&{dsn:zh(h)},...p&&{trace:Hn({...p})}}}(t,i,r,e);return delete t.sdkProcessingMetadata,Fc(o,[[{type:s},t]])}function Ug(t,e,n,r=0){return new qn((i,s)=>{const o=t[r];if(e===null||typeof o!="function")i(e);else{const a=o({...e},n);He&&o.id&&a===null&&ye.log(`Event processor "${o.id}" dropped event`),zf(a)?a.then(l=>Ug(t,l,n,r+1).then(i)).then(null,s):Ug(t,a,n,r+1).then(i).then(null,s)}})}let pd,iS,Wp;function hF(t,e){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:s}=e;(function(o,a){const{extra:l,tags:u,user:h,contexts:p,level:g,transactionName:T}=a,S=Hn(l);S&&Object.keys(S).length&&(o.extra={...S,...o.extra});const E=Hn(u);E&&Object.keys(E).length&&(o.tags={...E,...o.tags});const k=Hn(h);k&&Object.keys(k).length&&(o.user={...k,...o.user});const _=Hn(p);_&&Object.keys(_).length&&(o.contexts={..._,...o.contexts}),g&&(o.level=g),T&&o.type!=="transaction"&&(o.transaction=T)})(t,e),r&&function(o,a){o.contexts={trace:tF(a),...o.contexts},o.sdkProcessingMetadata={dynamicSamplingContext:iF(a),...o.sdkProcessingMetadata};const l=IC(a),u=a_(l).description;u&&!o.transaction&&o.type==="transaction"&&(o.transaction=u)}(t,r),function(o,a){o.fingerprint=o.fingerprint?Array.isArray(o.fingerprint)?o.fingerprint:[o.fingerprint]:[],a&&(o.fingerprint=o.fingerprint.concat(a)),o.fingerprint&&!o.fingerprint.length&&delete o.fingerprint}(t,n),function(o,a){const l=[...o.breadcrumbs||[],...a];o.breadcrumbs=l.length?l:void 0}(t,i),function(o,a){o.sdkProcessingMetadata={...o.sdkProcessingMetadata,...a}}(t,s)}function sS(t,e){const{extra:n,tags:r,user:i,contexts:s,level:o,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:u,eventProcessors:h,attachments:p,propagationContext:g,transactionName:T,span:S}=e;md(t,"extra",n),md(t,"tags",r),md(t,"user",i),md(t,"contexts",s),t.sdkProcessingMetadata=Hf(t.sdkProcessingMetadata,a,2),o&&(t.level=o),T&&(t.transactionName=T),S&&(t.span=S),l.length&&(t.breadcrumbs=[...t.breadcrumbs,...l]),u.length&&(t.fingerprint=[...t.fingerprint,...u]),h.length&&(t.eventProcessors=[...t.eventProcessors,...h]),p.length&&(t.attachments=[...t.attachments,...p]),t.propagationContext={...t.propagationContext,...g}}function md(t,e,n){t[e]=Hf(t[e],n,1)}function fF(t,e,n,r,i,s){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=t,l={...e,event_id:e.event_id||n.event_id||Kn(),timestamp:e.timestamp||du()},u=n.integrations||t.integrations.map(S=>S.name);(function(S,E){const{environment:k,release:_,dist:y,maxValueLength:C=250}=E;S.environment=S.environment||k||l_,!S.release&&_&&(S.release=_),!S.dist&&y&&(S.dist=y),S.message&&(S.message=ka(S.message,C));const L=S.exception&&S.exception.values&&S.exception.values[0];L&&L.value&&(L.value=ka(L.value,C));const $=S.request;$&&$.url&&($.url=ka($.url,C))})(l,t),function(S,E){E.length>0&&(S.sdk=S.sdk||{},S.sdk.integrations=[...S.sdk.integrations||[],...E])}(l,u),i&&i.emit("applyFrameMetadata",e),e.type===void 0&&function(S,E){const k=function(_){const y=Ne._sentryDebugIds;if(!y)return{};const C=Object.keys(y);return Wp&&C.length===iS||(iS=C.length,Wp=C.reduce((L,$)=>{pd||(pd={});const q=pd[$];if(q)L[q[0]]=q[1];else{const P=_($);for(let I=P.length-1;I>=0;I--){const R=P[I],x=R&&R.filename,b=y[$];if(x&&b){L[x]=b,pd[$]=[x,b];break}}}return L},{})),Wp}(E);try{S.exception.values.forEach(_=>{_.stacktrace.frames.forEach(y=>{k&&y.filename&&(y.debug_id=k[y.filename])})})}catch{}}(l,t.stackParser);const h=function(S,E){if(!E)return S;const k=S?S.clone():new Rs;return k.update(E),k}(r,n.captureContext);n.mechanism&&Ha(l,n.mechanism);const p=i?i.getEventProcessors():[],g=$h("globalScope",()=>new Rs).getScopeData();s&&sS(g,s.getScopeData()),h&&sS(g,h.getScopeData());const T=[...n.attachments||[],...g.attachments];return T.length&&(n.attachments=T),hF(l,g),Ug([...p,...g.eventProcessors],l,n).then(S=>(S&&function(E){const k={};try{E.exception.values.forEach(y=>{y.stacktrace.frames.forEach(C=>{C.debug_id&&(C.abs_path?k[C.abs_path]=C.debug_id:C.filename&&(k[C.filename]=C.debug_id),delete C.debug_id)})})}catch{}if(Object.keys(k).length===0)return;E.debug_meta=E.debug_meta||{},E.debug_meta.images=E.debug_meta.images||[];const _=E.debug_meta.images;Object.entries(k).forEach(([y,C])=>{_.push({type:"sourcemap",code_file:y,debug_id:C})})}(S),typeof o=="number"&&o>0?function(E,k,_){if(!E)return null;const y={...E,...E.breadcrumbs&&{breadcrumbs:E.breadcrumbs.map(C=>({...C,...C.data&&{data:ni(C.data,k,_)}}))},...E.user&&{user:ni(E.user,k,_)},...E.contexts&&{contexts:ni(E.contexts,k,_)},...E.extra&&{extra:ni(E.extra,k,_)}};return E.contexts&&E.contexts.trace&&y.contexts&&(y.contexts.trace=E.contexts.trace,E.contexts.trace.data&&(y.contexts.trace.data=ni(E.contexts.trace.data,k,_))),E.spans&&(y.spans=E.spans.map(C=>({...C,...C.data&&{data:ni(C.data,k,_)}}))),E.contexts&&E.contexts.flags&&y.contexts&&(y.contexts.flags=ni(E.contexts.flags,3,_)),y}(S,o,a):S))}function oS(t,e){return Mo().captureEvent(t,e)}function aS(t){const e=Yt(),n=hu(),r=Mo(),{release:i,environment:s=l_}=e&&e.getOptions()||{},{userAgent:o}=Ne.navigator||{},a=Gj({release:i,environment:s,user:r.getUser()||n.getUser(),...o&&{userAgent:o},...t}),l=n.getSession();return l&&l.status==="ok"&&Wa(l,{status:"exited"}),RC(),n.setSession(a),r.setSession(a),a}function RC(){const t=hu(),e=Mo(),n=e.getSession()||t.getSession();n&&function(r,i){let s={};r.status==="ok"&&(s={status:"exited"}),Wa(r,s)}(n),xC(),t.setSession(),e.setSession()}function xC(){const t=hu(),e=Mo(),n=Yt(),r=e.getSession()||t.getSession();r&&n&&n.captureSession(r)}function lS(t=!1){t?RC():xC()}function pF(t,e,n){return e||`${function(r){return`${function(i){const s=i.protocol?`${i.protocol}:`:"",o=i.port?`:${i.port}`:"";return`${s}//${i.host}${o}${i.path?`/${i.path}`:""}/api/`}(r)}${r.projectId}/envelope/`}(t)}?${function(r,i){const s={sentry_version:"7"};return r.publicKey&&(s.sentry_key=r.publicKey),i&&(s.sentry_client=`${i.name}/${i.version}`),new URLSearchParams(s).toString()}(t,n)}`}const cS=[];function uS(t,e){for(const n of e)n&&n.afterAllSetup&&n.afterAllSetup(t)}function dS(t,e,n){if(n[e.name])He&&ye.log(`Integration skipped because it was already installed: ${e.name}`);else{if(n[e.name]=e,cS.indexOf(e.name)===-1&&typeof e.setupOnce=="function"&&(e.setupOnce(),cS.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const r=e.preprocessEvent.bind(e);t.on("preprocessEvent",(i,s)=>r(i,s,t))}if(typeof e.processEvent=="function"){const r=e.processEvent.bind(e),i=Object.assign((s,o)=>r(s,o,t),{id:e.name});t.addEventProcessor(i)}He&&ye.log(`Integration installed: ${e.name}`)}}class dr extends Error{constructor(e,n="warn"){super(e),this.message=e,this.logLevel=n}}const hS="Not capturing exception because it's already been captured.";class mF{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=oF(e.dsn):He&&ye.warn("No DSN provided, client will not send events."),this._dsn){const r=pF(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:r})}const n=["enableTracing","tracesSampleRate","tracesSampler"].find(r=>r in e&&e[r]==null);n&&uu(()=>{console.warn(`[Sentry] Deprecation warning: \`${n}\` is set to undefined, which leads to tracing being enabled. In v9, a value of \`undefined\` will result in tracing being disabled.`)})}captureException(e,n,r){const i=Kn();if(WE(e))return He&&ye.log(hS),i;const s={event_id:i,...n};return this._process(this.eventFromException(e,s).then(o=>this._captureEvent(o,s,r))),s.event_id}captureMessage(e,n,r,i){const s={event_id:Kn(),...r},o=n_(e)?e:String(e),a=Dg(e)?this.eventFromMessage(o,n,s):this.eventFromException(e,s);return this._process(a.then(l=>this._captureEvent(l,s,i))),s.event_id}captureEvent(e,n,r){const i=Kn();if(n&&n.originalException&&WE(n.originalException))return He&&ye.log(hS),i;const s={event_id:i,...n},o=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,s,o||r)),s.event_id}captureSession(e){typeof e.release!="string"?He&&ye.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),Wa(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(e).then(r=>n.flush(e).then(i=>r&&i))):Ao(!0)}close(e){return this.flush(e).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const n=this._integrations[e.name];dS(this,e,this._integrations),n||uS(this,[e])}sendEvent(e,n={}){this.emit("beforeSendEvent",e,n);let r=dF(e,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])r=aF(r,cF(s));const i=this.sendEnvelope(r);i&&i.then(s=>this.emit("afterSendEvent",e,s),null)}sendSession(e){const n=function(r,i,s,o){const a=PC(s);return Fc({sent_at:new Date().toISOString(),...a&&{sdk:a},...!!o&&i&&{dsn:zh(i)}},["aggregates"in r?[{type:"sessions"},r]:[{type:"session"},r.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(n)}recordDroppedEvent(e,n,r){if(this._options.sendClientReports){const i=typeof r=="number"?r:1,s=`${e}:${n}`;He&&ye.log(`Recording outcome: "${s}"${i>1?` (${i} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+i}}on(e,n){const r=this._hooks[e]=this._hooks[e]||[];return r.push(n),()=>{const i=r.indexOf(n);i>-1&&r.splice(i,1)}}emit(e,...n){const r=this._hooks[e];r&&r.forEach(i=>i(...n))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,n=>(He&&ye.error("Error while sending envelope:",n),n)):(He&&ye.error("Transport disabled"),Ao({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(n,r){const i={};return r.forEach(s=>{s&&dS(n,s,i)}),i}(this,e),uS(this,e)}_updateSessionFromEvent(e,n){let r=n.level==="fatal",i=!1;const s=n.exception&&n.exception.values;if(s){i=!0;for(const a of s){const l=a.mechanism;if(l&&l.handled===!1){r=!0;break}}}const o=e.status==="ok";(o&&e.errors===0||o&&r)&&(Wa(e,{...r&&{status:"crashed"},errors:e.errors||Number(i||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new qn(n=>{let r=0;const i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),n(!0)):(r+=1,e&&r>=e&&(clearInterval(i),n(!1)))},1)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,n,r=Mo(),i=hu()){const s=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o.length>0&&(n.integrations=o),this.emit("preprocessEvent",e,n),e.type||i.setLastEventId(e.event_id||n.event_id),fF(s,e,n,r,this,i).then(a=>{if(a===null)return a;a.contexts={trace:Yj(r),...a.contexts};const l=function(u,h){const p=h.getPropagationContext();return p.dsc||AC(p.traceId,u)}(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:l,...a.sdkProcessingMetadata},a})}_captureEvent(e,n={},r){return this._processEvent(e,n,r).then(i=>i.event_id,i=>{He&&(i instanceof dr&&i.logLevel==="log"?ye.log(i.message):ye.warn(i))})}_processEvent(e,n,r){const i=this.getOptions(),{sampleRate:s}=i,o=pS(e),a=fS(e),l=e.type||"error",u=`before send for type \`${l}\``,h=s===void 0?void 0:function(T){if(typeof T=="boolean")return Number(T);const S=typeof T=="string"?parseFloat(T):T;if(!(typeof S!="number"||isNaN(S)||S<0||S>1))return S;He&&ye.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(T)} of type ${JSON.stringify(typeof T)}.`)}(s);if(a&&typeof h=="number"&&Math.random()>h)return this.recordDroppedEvent("sample_rate","error",e),qh(new dr(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const p=l==="replay_event"?"replay":l,g=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,n,r,g).then(T=>{if(T===null)throw this.recordDroppedEvent("event_processor",p,e),new dr("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return T;const S=function(E,k,_,y){const{beforeSend:C,beforeSendTransaction:L,beforeSendSpan:$}=k;if(fS(_)&&C)return C(_,y);if(pS(_)){if(_.spans&&$){const q=[];for(const P of _.spans){const I=$(P);I?q.push(I):(rF(),E.recordDroppedEvent("before_send","span"))}_.spans=q}if(L){if(_.spans){const q=_.spans.length;_.sdkProcessingMetadata={..._.sdkProcessingMetadata,spanCountBeforeProcessing:q}}return L(_,y)}}return _}(this,i,T,n);return function(E,k){const _=`${k} must return \`null\` or a valid event.`;if(zf(E))return E.then(y=>{if(!za(y)&&y!==null)throw new dr(_);return y},y=>{throw new dr(`${k} rejected with ${y}`)});if(!za(E)&&E!==null)throw new dr(_);return E}(S,u)}).then(T=>{if(T===null){if(this.recordDroppedEvent("before_send",p,e),o){const k=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",k)}throw new dr(`${u} returned \`null\`, will not send event.`,"log")}const S=r&&r.getSession();if(!o&&S&&this._updateSessionFromEvent(S,T),o){const k=(T.sdkProcessingMetadata&&T.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(T.spans?T.spans.length:0);k>0&&this.recordDroppedEvent("before_send","span",k)}const E=T.transaction_info;if(o&&E&&T.transaction!==e.transaction){const k="custom";T.transaction_info={...E,source:k}}return this.sendEvent(T,n),T}).then(null,T=>{throw T instanceof dr?T:(this.captureException(T,{data:{__sentry__:!0},originalException:T}),new dr(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${T}`))})}_process(e){this._numProcessing++,e.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([n,r])=>{const[i,s]=n.split(":");return{reason:i,category:s,quantity:r}})}_flushOutcomes(){He&&ye.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0)return void(He&&ye.log("No outcomes to send"));if(!this._dsn)return void(He&&ye.log("No dsn provided, will not send outcomes"));He&&ye.log("Sending outcomes:",e);const n=(r=e,Fc((i=this._options.tunnel&&zh(this._dsn))?{dsn:i}:{},[[{type:"client_report"},{timestamp:s||du(),discarded_events:r}]]));var r,i,s;this.sendEnvelope(n)}}function fS(t){return t.type===void 0}function pS(t){return t.type==="transaction"}function gF(t){const e=[];function n(r){return e.splice(e.indexOf(r),1)[0]||Promise.resolve(void 0)}return{$:e,add:function(r){if(!(t===void 0||e.length<t))return qh(new dr("Not adding Promise because buffer limit was reached."));const i=r();return e.indexOf(i)===-1&&e.push(i),i.then(()=>n(i)).then(null,()=>n(i).then(null,()=>{})),i},drain:function(r){return new qn((i,s)=>{let o=e.length;if(!o)return i(!0);const a=setTimeout(()=>{r&&r>0&&i(!1)},r);e.forEach(l=>{Ao(l).then(()=>{--o||(clearTimeout(a),i(!0))},s)})})}}}function yF(t,{statusCode:e,headers:n},r=Date.now()){const i={...t},s=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(s)for(const a of s.trim().split(",")){const[l,u,,,h]=a.split(":",5),p=parseInt(l,10),g=1e3*(isNaN(p)?60:p);if(u)for(const T of u.split(";"))T==="metric_bucket"&&h&&!h.split(";").includes("custom")||(i[T]=r+g);else i.all=r+g}else o?i.all=r+function(a,l=Date.now()){const u=parseInt(`${a}`,10);if(!isNaN(u))return 1e3*u;const h=Date.parse(`${a}`);return isNaN(h)?6e4:h-l}(o,r):e===429&&(i.all=r+6e4);return i}function vF(t,e,n=gF(t.bufferSize||64)){let r={};return{send:function(i){const s=[];if(nS(i,(l,u)=>{const h=rS(u);if(function(p,g,T=Date.now()){return function(S,E){return S[E]||S.all||0}(p,g)>T}(r,h)){const p=mS(l,u);t.recordDroppedEvent("ratelimit_backoff",h,p)}else s.push(l)}),s.length===0)return Ao({});const o=Fc(i[0],s),a=l=>{nS(o,(u,h)=>{const p=mS(u,h);t.recordDroppedEvent(l,rS(h),p)})};return n.add(()=>e({body:lF(o)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&He&&ye.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=yF(r,l),l),l=>{throw a("network_error"),l})).then(l=>l,l=>{if(l instanceof dr)return He&&ye.error("Skipped sending event because buffer is full."),a("queue_overflow"),Ao({});throw l})},flush:i=>n.drain(i)}}function mS(t,e){if(e==="event"||e==="transaction")return Array.isArray(t)?t[1]:void 0}const _F=100;function Qs(t,e){const n=Yt(),r=hu();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:s=_F}=n.getOptions();if(s<=0)return;const o={timestamp:du(),...t},a=i?uu(()=>i(o,e)):o;a!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",a,e),r.addBreadcrumb(a,s))}let gS;const yS=new WeakMap,wF=()=>({name:"FunctionToString",setupOnce(){gS=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=i_(this),n=yS.has(Yt())&&e!==void 0?e:this;return gS.apply(n,t)}}catch{}},setup(t){yS.set(t,!0)}}),EF=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/],SF=(t={})=>({name:"InboundFilters",processEvent(e,n,r){const i=r.getOptions(),s=function(o={},a={}){return{allowUrls:[...o.allowUrls||[],...a.allowUrls||[]],denyUrls:[...o.denyUrls||[],...a.denyUrls||[]],ignoreErrors:[...o.ignoreErrors||[],...a.ignoreErrors||[],...o.disableErrorDefaults?[]:EF],ignoreTransactions:[...o.ignoreTransactions||[],...a.ignoreTransactions||[]],ignoreInternal:o.ignoreInternal===void 0||o.ignoreInternal}}(t,i);return function(o,a){return a.ignoreInternal&&function(l){try{return l.exception.values[0].type==="SentryError"}catch{}return!1}(o)?(He&&ye.warn(`Event dropped due to being internal Sentry Error.
Event: ${Ji(o)}`),!0):function(l,u){return l.type||!u||!u.length?!1:function(h){const p=[];h.message&&p.push(h.message);let g;try{g=h.exception.values[h.exception.values.length-1]}catch{}return g&&g.value&&(p.push(g.value),g.type&&p.push(`${g.type}: ${g.value}`)),p}(l).some(h=>fd(h,u))}(o,a.ignoreErrors)?(He&&ye.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Ji(o)}`),!0):function(l){return l.type||!l.exception||!l.exception.values||l.exception.values.length===0?!1:!l.message&&!l.exception.values.some(u=>u.stacktrace||u.type&&u.type!=="Error"||u.value)}(o)?(He&&ye.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Ji(o)}`),!0):function(l,u){if(l.type!=="transaction"||!u||!u.length)return!1;const h=l.transaction;return!!h&&fd(h,u)}(o,a.ignoreTransactions)?(He&&ye.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Ji(o)}`),!0):function(l,u){if(!u||!u.length)return!1;const h=gd(l);return!!h&&fd(h,u)}(o,a.denyUrls)?(He&&ye.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Ji(o)}.
Url: ${gd(o)}`),!0):function(l,u){if(!u||!u.length)return!0;const h=gd(l);return!h||fd(h,u)}(o,a.allowUrls)?!1:(He&&ye.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Ji(o)}.
Url: ${gd(o)}`),!0)}(e,s)?null:e}});function gd(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?function(n=[]){for(let r=n.length-1;r>=0;r--){const i=n[r];if(i&&i.filename!=="<anonymous>"&&i.filename!=="[native code]")return i.filename||null}return null}(e):null}catch{return He&&ye.error(`Cannot extract url for event ${Ji(t)}`),null}}function TF(t,e,n=250,r,i,s,o){if(!(s.exception&&s.exception.values&&o&&ko(o.originalException,Error)))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;var l,u;a&&(s.exception.values=(l=$g(t,e,i,o.originalException,r,s.exception.values,a,0),u=n,l.map(h=>(h.value&&(h.value=ka(h.value,u)),h))))}function $g(t,e,n,r,i,s,o,a){if(s.length>=n+1)return s;let l=[...s];if(ko(r[i],Error)){vS(o,a);const u=t(e,r[i]),h=l.length;_S(u,i,h,a),l=$g(t,e,n,r[i],i,[u,...l],u,h)}return Array.isArray(r.errors)&&r.errors.forEach((u,h)=>{if(ko(u,Error)){vS(o,a);const p=t(e,u),g=l.length;_S(p,`errors[${h}]`,g,a),l=$g(t,e,n,u,i,[p,...l],p,g)}}),l}function vS(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function _S(t,e,n,r){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function Gp(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}function bF(){"console"in Ne&&Og.forEach(function(t){t in Ne.console&&xn(Ne.console,t,function(e){return Bh[t]=e,function(...n){Er("console",{args:n,level:t});const r=Bh[t];r&&r.apply(Ne.console,n)}})})}function kF(t){return t==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}const IF=()=>{let t;return{name:"Dedupe",processEvent(e){if(e.type)return e;try{if(function(n,r){return r?!!(function(i,s){const o=i.message,a=s.message;return!(!o&&!a||o&&!a||!o&&a||o!==a||!ES(i,s)||!wS(i,s))}(n,r)||function(i,s){const o=SS(s),a=SS(i);return!(!o||!a||o.type!==a.type||o.value!==a.value||!ES(i,s)||!wS(i,s))}(n,r)):!1}(e,t))return He&&ye.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}};function wS(t,e){let n=UE(t),r=UE(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||r.length!==n.length)return!1;for(let i=0;i<r.length;i++){const s=r[i],o=n[i];if(s.filename!==o.filename||s.lineno!==o.lineno||s.colno!==o.colno||s.function!==o.function)return!1}return!0}function ES(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return n.join("")===r.join("")}catch{return!1}}function SS(t){return t.exception&&t.exception.values&&t.exception.values[0]}function TS(t){return t===void 0?void 0:t>=400&&t<500?"warning":t>=500?"error":void 0}const Kp=Ne;function Bg(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function AF(){if(typeof EdgeRuntime=="string")return!0;if(!function(){if(!("fetch"in Kp))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}())return!1;if(Bg(Kp.fetch))return!0;let t=!1;const e=Kp.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=Bg(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){No&&ye.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}function CF(t,e){const n="fetch";fo(n,t),po(n,()=>function(r,i=!1){i&&!AF()||xn(Ne,"fetch",function(s){return function(...o){const a=new Error,{method:l,url:u}=function(p){if(p.length===0)return{method:"GET",url:""};if(p.length===2){const[T,S]=p;return{url:bS(T),method:qg(S,"method")?String(S.method).toUpperCase():"GET"}}const g=p[0];return{url:bS(g),method:qg(g,"method")?String(g.method).toUpperCase():"GET"}}(o),h={args:o,fetchData:{method:l,url:u},startTimestamp:1e3*mi(),virtualError:a};return r||Er("fetch",{...h}),s.apply(Ne,o).then(async p=>(r?r(p):Er("fetch",{...h,endTimestamp:1e3*mi(),response:p}),p),p=>{throw Er("fetch",{...h,endTimestamp:1e3*mi(),error:p}),t_(p)&&p.stack===void 0&&(p.stack=a.stack,Io(p,"framesToPop",1)),p})}})}(void 0,e))}function qg(t,e){return!!t&&typeof t=="object"&&!!t[e]}function bS(t){return typeof t=="string"?t:t?qg(t,"url")?t.url:t.toString?t.toString():"":""}const yd=Ne,Pt=Ne;let zg=0;function kS(){return zg>0}function Ka(t,e={}){if(!function(r){return typeof r=="function"}(t))return t;try{const r=t.__sentry_wrapped__;if(r)return typeof r=="function"?r:t;if(i_(t))return t}catch{return t}const n=function(...r){try{const i=r.map(s=>Ka(s,e));return t.apply(this,i)}catch(i){throw zg++,setTimeout(()=>{zg--}),function(...s){const o=o_(Bf());if(s.length===2){const[a,l]=s;return a?o.withSetScope(a,l):o.withScope(l)}o.withScope(s[0])}(s=>{var o;s.addEventProcessor(a=>(e.mechanism&&(Mg(a,void 0),Ha(a,e.mechanism)),a.extra={...a.extra,arguments:r},a)),o=i,Mo().captureException(o,void 0)}),i}};try{for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}catch{}TC(n,t),Io(t,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>t.name})}catch{}return n}const Wf=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function c_(t,e){const n=u_(t,e),r={type:xF(e),value:OF(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function PF(t,e,n,r){const i=Yt(),s=i&&i.getOptions().normalizeDepth,o=function(u){for(const h in u)if(Object.prototype.hasOwnProperty.call(u,h)){const p=u[h];if(p instanceof Error)return p}}(e),a={__serialized__:CC(e,s)};if(o)return{exception:{values:[c_(t,o)]},extra:a};const l={exception:{values:[{type:qf(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:DF(e,{isUnhandledRejection:r})}]},extra:a};if(n){const u=u_(t,n);u.length&&(l.exception.values[0].stacktrace={frames:u})}return l}function Jp(t,e){return{exception:{values:[c_(t,e)]}}}function u_(t,e){const n=e.stacktrace||e.stack||"",r=function(s){return s&&RF.test(s.message)?1:0}(e),i=function(s){return typeof s.framesToPop=="number"?s.framesToPop:0}(e);try{return t(n,r,i)}catch{}return[]}const RF=/Minified React error #\d+;/i;function OC(t){return typeof WebAssembly<"u"&&WebAssembly.Exception!==void 0&&t instanceof WebAssembly.Exception}function xF(t){const e=t&&t.name;return!e&&OC(t)?t.message&&Array.isArray(t.message)&&t.message.length==2?t.message[0]:"WebAssembly.Exception":e}function OF(t){const e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:OC(t)&&Array.isArray(t.message)&&t.message.length==2?t.message[1]:e:"No error message"}function Hg(t,e,n,r,i){let s;if(wC(e)&&e.error)return Jp(t,e.error);if(BE(e)||sl(e,"DOMException")){const o=e;if("stack"in e)s=Jp(t,e);else{const a=o.name||(BE(o)?"DOMError":"DOMException"),l=o.message?`${a}: ${o.message}`:a;s=Wg(t,l,n,r),Mg(s,l)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}return t_(e)?Jp(t,e):za(e)||qf(e)?(s=PF(t,e,n,i),Ha(s,{synthetic:!0}),s):(s=Wg(t,e,n,r),Mg(s,`${e}`),Ha(s,{synthetic:!0}),s)}function Wg(t,e,n,r){const i={};if(r&&n){const s=u_(t,n);s.length&&(i.exception={values:[{value:e,stacktrace:{frames:s}}]}),Ha(i,{synthetic:!0})}if(n_(e)){const{__sentry_template_string__:s,__sentry_template_values__:o}=e;return i.logentry={message:s,params:o},i}return i.message=e,i}function DF(t,{isUnhandledRejection:e}){const n=function(i,s=40){const o=Object.keys(bC(i));o.sort();const a=o[0];if(!a)return"[object has no keys]";if(a.length>=s)return ka(a,s);for(let l=o.length;l>0;l--){const u=o.slice(0,l).join(", ");if(!(u.length>s))return l===o.length?u:ka(u,s)}return""}(t),r=e?"promise rejection":"exception";return wC(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:qf(t)?`Event \`${function(i){try{const s=Object.getPrototypeOf(i);return s?s.constructor.name:void 0}catch{}}(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}class NF extends mF{constructor(e){const n={parentSpanIsAlwaysRootSpan:!0,...e};(function(r,i,s=[i],o="npm"){const a=r._metadata||{};a.sdk||(a.sdk={name:`sentry.javascript.${i}`,packages:s.map(l=>({name:`${o}:@sentry/${l}`,version:ho})),version:ho}),r._metadata=a})(n,"browser",["browser"],Pt.SENTRY_SDK_SOURCE||"npm"),super(n),n.sendClientReports&&Pt.document&&Pt.document.addEventListener("visibilitychange",()=>{Pt.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,n){return function(r,i,s,o){const a=Hg(r,i,s&&s.syntheticException||void 0,o);return Ha(a),a.level="error",s&&s.event_id&&(a.event_id=s.event_id),Ao(a)}(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return function(i,s,o="info",a,l){const u=Wg(i,s,a&&a.syntheticException||void 0,l);return u.level=o,a&&a.event_id&&(u.event_id=a.event_id),Ao(u)}(this._options.stackParser,e,n,r,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(Wf&&ye.warn("SDK not enabled, will not capture user feedback."));const n=function(r,{metadata:i,tunnel:s,dsn:o}){const a={event_id:r.event_id,sent_at:new Date().toISOString(),...i&&i.sdk&&{sdk:{name:i.sdk.name,version:i.sdk.version}},...!!s&&!!o&&{dsn:zh(o)}};return Fc(a,[function(u){return[{type:"user_report"},u]}(r)])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(n)}_prepareEvent(e,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r)}}const MF=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,cn=Ne;let IS,Qp,Yp,vd;function LF(){if(!cn.document)return;const t=Er.bind(null,"dom"),e=AS(t,!0);cn.document.addEventListener("click",e,!1),cn.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(n=>{const r=cn[n],i=r&&r.prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&(xn(i,"addEventListener",function(s){return function(o,a,l){if(o==="click"||o=="keypress")try{const u=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},h=u[o]=u[o]||{refCount:0};if(!h.handler){const p=AS(t);h.handler=p,s.call(this,o,p,l)}h.refCount++}catch{}return s.call(this,o,a,l)}}),xn(i,"removeEventListener",function(s){return function(o,a,l){if(o==="click"||o=="keypress")try{const u=this.__sentry_instrumentation_handlers__||{},h=u[o];h&&(h.refCount--,h.refCount<=0&&(s.call(this,o,h.handler,l),h.handler=void 0,delete u[o]),Object.keys(u).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return s.call(this,o,a,l)}}))})}function AS(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(s){try{return s.target}catch{return null}}(n);if(function(s,o){return s==="keypress"&&(!o||!o.tagName||o.tagName!=="INPUT"&&o.tagName!=="TEXTAREA"&&!o.isContentEditable)}(n.type,r))return;Io(n,"_sentryCaptured",!0),r&&!r._sentryId&&Io(r,"_sentryId",Kn());const i=n.type==="keypress"?"input":n.type;(function(s){if(s.type!==Qp)return!1;try{if(!s.target||s.target._sentryId!==Yp)return!1}catch{}return!0})(n)||(t({event:n,name:i,global:e}),Qp=n.type,Yp=r?r._sentryId:void 0),clearTimeout(IS),IS=cn.setTimeout(()=>{Yp=void 0,Qp=void 0},1e3)}}function DC(t){const e="history";fo(e,t),po(e,VF)}function VF(){if(!function(){const n=yd.chrome,r=n&&n.app&&n.app.runtime,i="history"in yd&&!!yd.history.pushState&&!!yd.history.replaceState;return!r&&i}())return;const t=cn.onpopstate;function e(n){return function(...r){const i=r.length>2?r[2]:void 0;if(i){const s=vd,o=String(i);vd=o,Er("history",{from:s,to:o})}return n.apply(this,r)}}cn.onpopstate=function(...n){const r=cn.location.href,i=vd;if(vd=r,Er("history",{from:i,to:r}),t)try{return t.apply(this,n)}catch{}},xn(cn.history,"pushState",e),xn(cn.history,"replaceState",e)}const Hd={};function CS(t){Hd[t]=void 0}const Ul="__sentry_xhr_v3__";function jF(){if(!cn.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(e,n,r){const i=new Error,s=1e3*mi(),o=ci(r[0])?r[0].toUpperCase():void 0,a=function(u){if(ci(u))return u;try{return u.toString()}catch{}}(r[1]);if(!o||!a)return e.apply(n,r);n[Ul]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const l=()=>{const u=n[Ul];if(u&&n.readyState===4){try{u.status_code=n.status}catch{}Er("xhr",{endTimestamp:1e3*mi(),startTimestamp:s,xhr:n,virtualError:i})}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply:(u,h,p)=>(l(),u.apply(h,p))}):n.addEventListener("readystatechange",l),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(u,h,p){const[g,T]=p,S=h[Ul];return S&&ci(g)&&ci(T)&&(S.request_headers[g.toLowerCase()]=T),u.apply(h,p)}}),e.apply(n,r)}}),t.send=new Proxy(t.send,{apply(e,n,r){const i=n[Ul];return i?(r[0]!==void 0&&(i.body=r[0]),Er("xhr",{startTimestamp:1e3*mi(),xhr:n}),e.apply(n,r)):e.apply(n,r)}})}function FF(t,e=function(n){const r=Hd[n];if(r)return r;let i=cn[n];if(Bg(i))return Hd[n]=i.bind(cn);const s=cn.document;if(s&&typeof s.createElement=="function")try{const o=s.createElement("iframe");o.hidden=!0,s.head.appendChild(o);const a=o.contentWindow;a&&a[n]&&(i=a[n]),s.head.removeChild(o)}catch(o){MF&&ye.warn(`Could not create sandbox iframe for ${n} check, bailing to window.${n}: `,o)}return i&&(Hd[n]=i.bind(cn))}("fetch")){let n=0,r=0;return vF(t,function(i){const s=i.body.length;n+=s,r++;const o={body:i.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};if(!e)return CS("fetch"),qh("No fetch implementation available");try{return e(t.url,o).then(a=>(n-=s,r--,{statusCode:a.status,headers:{"x-sentry-rate-limits":a.headers.get("X-Sentry-Rate-Limits"),"retry-after":a.headers.get("Retry-After")}}))}catch(a){return CS("fetch"),n-=s,r--,qh(a)}})}function Xp(t,e,n,r){const i={filename:t,function:e==="<anonymous>"?ao:e,in_app:!0};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}const UF=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,$F=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,BF=/\((\S*)(?::(\d+))(?::(\d+))\)/,qF=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,zF=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,HF=function(...t){const e=t.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,i=0)=>{const s=[],o=n.split(`
`);for(let a=r;a<o.length;a++){const l=o[a];if(l.length>1024)continue;const u=VE.test(l)?l.replace(VE,"$1"):l;if(!u.match(/\S*Error: /)){for(const h of e){const p=h(u);if(p){s.push(p);break}}if(s.length>=50+i)break}}return function(a){if(!a.length)return[];const l=Array.from(a);return/sentryWrapped/.test(hd(l).function||"")&&l.pop(),l.reverse(),jE.test(hd(l).function||"")&&(l.pop(),jE.test(hd(l).function||"")&&l.pop()),l.slice(0,50).map(u=>({...u,filename:u.filename||hd(l).filename,function:u.function||ao}))}(s.slice(i))}}([30,t=>{const e=UF.exec(t);if(e){const[,r,i,s]=e;return Xp(r,ao,+i,+s)}const n=$F.exec(t);if(n){if(n[2]&&n[2].indexOf("eval")===0){const s=BF.exec(n[2]);s&&(n[2]=s[1],n[3]=s[2],n[4]=s[3])}const[r,i]=PS(n[1]||ao,n[2]);return Xp(i,r,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],[50,t=>{const e=qF.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const i=zF.exec(e[3]);i&&(e[1]=e[1]||"eval",e[3]=i[1],e[4]=i[2],e[5]="")}let n=e[3],r=e[1]||ao;return[r,n]=PS(r,n),Xp(n,r,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]),PS=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:ao,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},RS=1024,WF=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:"Breadcrumbs",setup(n){var r;e.console&&function(i){const s="console";fo(s,i),po(s,bF)}(function(i){return function(s){if(Yt()!==i)return;const o={category:"console",data:{arguments:s.args,logger:"console"},level:kF(s.level),message:qE(s.args," ")};if(s.level==="assert"){if(s.args[0]!==!1)return;o.message=`Assertion failed: ${qE(s.args.slice(1)," ")||"console.assert"}`,o.data.arguments=s.args.slice(1)}Qs(o,{input:s.args,level:s.level})}}(n)),e.dom&&(r=function(i,s){return function(o){if(Yt()!==i)return;let a,l,u=typeof s=="object"?s.serializeAttribute:void 0,h=typeof s=="object"&&typeof s.maxStringLength=="number"?s.maxStringLength:void 0;h&&h>RS&&(Wf&&ye.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${h} was configured. Sentry will use 1024 instead.`),h=RS),typeof u=="string"&&(u=[u]);try{const g=o.event,T=function(S){return!!S&&!!S.target}(g)?g.target:g;a=SC(T,{keyAttrs:u,maxStringLength:h}),l=function(S){if(!r_.HTMLElement)return null;let E=S;for(let k=0;k<5;k++){if(!E)return null;if(E instanceof HTMLElement){if(E.dataset.sentryComponent)return E.dataset.sentryComponent;if(E.dataset.sentryElement)return E.dataset.sentryElement}E=E.parentNode}return null}(T)}catch{a="<unknown>"}if(a.length===0)return;const p={category:`ui.${o.name}`,message:a};l&&(p.data={"ui.component_name":l}),Qs(p,{event:o.event,name:o.name,global:o.global})}}(n,e.dom),fo("dom",r),po("dom",LF)),e.xhr&&function(i){fo("xhr",i),po("xhr",jF)}(function(i){return function(s){if(Yt()!==i)return;const{startTimestamp:o,endTimestamp:a}=s,l=s.xhr[Ul];if(!o||!a||!l)return;const{method:u,url:h,status_code:p,body:g}=l,T={method:u,url:h,status_code:p},S={xhr:s.xhr,input:g,startTimestamp:o,endTimestamp:a};Qs({category:"xhr",data:T,type:"http",level:TS(p)},S)}}(n)),e.fetch&&CF(function(i){return function(s){if(Yt()!==i)return;const{startTimestamp:o,endTimestamp:a}=s;if(a&&(!s.fetchData.url.match(/sentry_key/)||s.fetchData.method!=="POST"))if(s.error)Qs({category:"fetch",data:s.fetchData,level:"error",type:"http"},{data:s.error,input:s.args,startTimestamp:o,endTimestamp:a});else{const l=s.response,u={...s.fetchData,status_code:l&&l.status},h={input:s.args,response:l,startTimestamp:o,endTimestamp:a};Qs({category:"fetch",data:u,type:"http",level:TS(u.status_code)},h)}}}(n)),e.history&&DC(function(i){return function(s){if(Yt()!==i)return;let o=s.from,a=s.to;const l=Gp(Pt.location.href);let u=o?Gp(o):void 0;const h=Gp(a);u&&u.path||(u=l),l.protocol===h.protocol&&l.host===h.host&&(a=h.relative),l.protocol===u.protocol&&l.host===u.host&&(o=u.relative),Qs({category:"navigation",data:{from:o,to:a}})}}(n)),e.sentry&&n.on("beforeSendEvent",function(i){return function(s){Yt()===i&&Qs({category:"sentry."+(s.type==="transaction"?"transaction":"event"),event_id:s.event_id,level:s.level,message:Ji(s)},{event:s})}}(n))}}},GF=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],KF=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:"BrowserApiErrors",setupOnce(){e.setTimeout&&xn(Pt,"setTimeout",xS),e.setInterval&&xn(Pt,"setInterval",xS),e.requestAnimationFrame&&xn(Pt,"requestAnimationFrame",JF),e.XMLHttpRequest&&"XMLHttpRequest"in Pt&&xn(XMLHttpRequest.prototype,"send",QF);const n=e.eventTarget;n&&(Array.isArray(n)?n:GF).forEach(YF)}}};function xS(t){return function(...e){const n=e[0];return e[0]=Ka(n,{mechanism:{data:{function:Ps(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function JF(t){return function(e){return t.apply(this,[Ka(e,{mechanism:{data:{function:"requestAnimationFrame",handler:Ps(t)},handled:!1,type:"instrument"}})])}}function QF(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(r=>{r in n&&typeof n[r]=="function"&&xn(n,r,function(i){const s={mechanism:{data:{function:r,handler:Ps(i)},handled:!1,type:"instrument"}},o=i_(i);return o&&(s.mechanism.data.handler=Ps(o)),Ka(i,s)})}),t.apply(this,e)}}function YF(t){const e=Pt[t],n=e&&e.prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(xn(n,"addEventListener",function(r){return function(i,s,o){try{typeof s.handleEvent=="function"&&(s.handleEvent=Ka(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Ps(s),target:t},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[i,Ka(s,{mechanism:{data:{function:"addEventListener",handler:Ps(s),target:t},handled:!1,type:"instrument"}}),o])}}),xn(n,"removeEventListener",function(r){return function(i,s,o){try{const a=s.__sentry_wrapped__;a&&r.call(this,i,a,o)}catch{}return r.call(this,i,s,o)}}))}const XF=()=>({name:"BrowserSession",setupOnce(){Pt.document!==void 0?(aS({ignoreDuration:!0}),lS(),DC(({from:t,to:e})=>{t!==void 0&&t!==e&&(aS({ignoreDuration:!0}),lS())})):Wf&&ye.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}}),ZF=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(n){e.onerror&&(function(r){(function(i){const s="error";fo(s,i),po(s,qj)})(i=>{const{stackParser:s,attachStacktrace:o}=DS();if(Yt()!==r||kS())return;const{msg:a,url:l,line:u,column:h,error:p}=i,g=function(T,S,E,k){const _=T.exception=T.exception||{},y=_.values=_.values||[],C=y[0]=y[0]||{},L=C.stacktrace=C.stacktrace||{},$=L.frames=L.frames||[],q=k,P=E,I=ci(S)&&S.length>0?S:function(){try{return r_.document.location.href}catch{return""}}();return $.length===0&&$.push({colno:q,filename:I,function:ao,in_app:!0,lineno:P}),T}(Hg(s,p||a,void 0,o,!1),l,u,h);g.level="error",oS(g,{originalException:p,mechanism:{handled:!1,type:"onerror"}})})}(n),OS("onerror")),e.onunhandledrejection&&(function(r){(function(i){const s="unhandledrejection";fo(s,i),po(s,zj)})(i=>{const{stackParser:s,attachStacktrace:o}=DS();if(Yt()!==r||kS())return;const a=function(u){if(Dg(u))return u;try{if("reason"in u)return u.reason;if("detail"in u&&"reason"in u.detail)return u.detail.reason}catch{}return u}(i),l=Dg(a)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(a)}`}]}}:Hg(s,a,void 0,o,!0);l.level="error",oS(l,{originalException:a,mechanism:{handled:!1,type:"onunhandledrejection"}})})}(n),OS("onunhandledrejection"))}}};function OS(t){Wf&&ye.log(`Global Handler attached: ${t}`)}function DS(){const t=Yt();return t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const e4=()=>({name:"HttpContext",preprocessEvent(t){if(!Pt.navigator&&!Pt.location&&!Pt.document)return;const e=t.request&&t.request.url||Pt.location&&Pt.location.href,{referrer:n}=Pt.document||{},{userAgent:r}=Pt.navigator||{},i={...t.request&&t.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...t.request,...e&&{url:e},headers:i};t.request=s}}),t4=(t={})=>{const e=t.limit||5,n=t.key||"cause";return{name:"LinkedErrors",preprocessEvent(r,i,s){const o=s.getOptions();TF(c_,o.stackParser,o.maxValueLength,n,e,r,i)}}};var Gg="new",NS="loading",MS="loaded",Hh="joining-meeting",ts="joined-meeting",Wi="left-meeting",Zr="error",n4="blocked",r4="off",i4="sendable",s4="loading",o4="interrupted",NC="playable",Wd="unknown",MC="full",a4="lobby",l4="none",LC="base",c4="*",u4="ejected",d4="nbf-room",h4="nbf-token",f4="exp-room",p4="exp-token",Kg="no-room",m4="meeting-full",VC="end-of-life",g4="not-allowed",jC="connection-error",y4="cam-in-use",v4="mic-in-use",_4="cam-mic-in-use",w4="permissions",E4="undefined-mediadevices",S4="not-found",T4="constraints",b4="unknown",FC="iframe-ready-for-launch-config",UC="iframe-launch-config",$C="theme-updated",BC="loading",qC="load-attempt-failed",Jg="loaded",zC="started-camera",HC="camera-error",WC="joining-meeting",GC="joined-meeting",KC="left-meeting",JC="participant-joined",QC="participant-updated",YC="participant-left",XC="participant-counts-updated",ZC="access-state-updated",e1="meeting-session-summary-updated",t1="meeting-session-state-updated",k4="meeting-session-data-error",n1="waiting-participant-added",r1="waiting-participant-updated",i1="waiting-participant-removed",s1="track-started",o1="track-stopped",a1="transcription-started",l1="transcription-stopped",c1="transcription-error",Qg="recording-started",Yg="recording-stopped",u1="recording-stats",d1="recording-error",h1="recording-upload-completed",f1="recording-data",p1="app-message",m1="transcription-message",g1="remote-media-player-started",y1="remote-media-player-updated",v1="remote-media-player-stopped",_1="local-screen-share-started",w1="local-screen-share-stopped",E1="local-screen-share-canceled",S1="active-speaker-change",T1="active-speaker-mode-change",b1="network-quality-change",k1="network-connection",I1="cpu-load-change",A1="face-counts-updated",$l="fullscreen",Bl="exited-fullscreen",C1="live-streaming-started",P1="live-streaming-updated",R1="live-streaming-stopped",x1="live-streaming-error",O1="lang-updated",D1="receive-settings-updated",Xg="input-settings-updated",Zg="nonfatal-error",ey="error",Zp=4096,LS=102400,em="iframe-call-message",VS="local-screen-start",jS="daily-method-update-live-streaming-endpoints",_d="transmit-log",ui="daily-custom-track",Gd={NONE:"none",BGBLUR:"background-blur",BGIMAGE:"background-image",FACE_DETECTION:"face-detection"},N1={NONE:"none",NOISE_CANCELLATION:"noise-cancellation"},ty={PLAY:"play",PAUSE:"pause"},tm=["jpg","png","jpeg"],I4="add-endpoints",A4="remove-endpoints",FS="sip-call-transfer";function tr(){return!Ae()&&typeof window<"u"&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}function Ae(){return typeof navigator<"u"&&navigator.product&&navigator.product==="ReactNative"}function M1(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function C4(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)&&(function(t,e){if(!t||!e)return!0;switch(t){case"Chrome":return e.major>=75;case"Safari":return RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")&&!(e.major===13&&e.minor===0&&e.point===0);case"Firefox":return e.major>=67}return!0}(Co(),Wh())||Ae())}function US(){if(Ae()||!document)return!1;var t=document.createElement("iframe");return!!t.requestFullscreen||!!t.webkitRequestFullscreen}var ny="none",P4="software",R4="hardware",x4=function(){try{var t,e=document.createElement("canvas"),n=!1;(t=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0}))||(n=!0,t=e.getContext("webgl2"));var r=t!=null;return e.remove(),r?n?P4:R4:ny}catch{return ny}}();function L1(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return!Ae()&&x4!==ny&&(t?function(){return $S()?!1:["Chrome","Firefox"].includes(Co())}():function(){if($S())return!1;var e=Co();if(e==="Safari"){var n=h_();if(n.major<15||n.major===15&&n.minor<4)return!1}return e==="Chrome"?d_().major>=77:e==="Firefox"?f_().major>=97:["Chrome","Firefox","Safari"].includes(e)}())}function V1(){if(Ae()||j1()||typeof AudioWorkletNode>"u")return!1;switch(Co()){case"Chrome":case"Firefox":return!0;case"Safari":var t=Wh();return t.major>17||t.major===17&&t.minor>=4}return!1}function nm(){return M1()&&typeof MediaStreamTrack<"u"&&!function(){var t,e=Co();if(!tr())return!0;switch(e){case"Chrome":return(t=d_()).major&&t.major>0&&t.major<75;case"Firefox":return(t=f_()).major<91;case"Safari":return(t=h_()).major<13||t.major===13&&t.minor<1;default:return!0}}()}function j1(){return tr().match(/Linux; Android/)}function $S(){var t,e=tr(),n=e.match(/Mac/)&&(!Ae()&&typeof window<"u"&&(t=window)!==null&&t!==void 0&&(t=t.navigator)!==null&&t!==void 0&&t.maxTouchPoints?window.navigator.maxTouchPoints:0)>=5;return!!(e.match(/Mobi/)||e.match(/Android/)||n)||!!tr().match(/DailyAnd\//)||void 0}function Co(){if(typeof window<"u"){var t=tr();return F1()?"Safari":t.indexOf("Edge")>-1?"Edge":t.match(/Chrome\//)?"Chrome":t.indexOf("Safari")>-1||U1()?"Safari":t.indexOf("Firefox")>-1?"Firefox":t.indexOf("MSIE")>-1||t.indexOf(".NET")>-1?"IE":"Unknown Browser"}}function Wh(){switch(Co()){case"Chrome":return d_();case"Safari":return h_();case"Firefox":return f_();case"Edge":return function(){var t=0,e=0;if(typeof window<"u"){var n=tr().match(/Edge\/(\d+).(\d+)/);if(n)try{t=parseInt(n[1]),e=parseInt(n[2])}catch{}}return{major:t,minor:e}}()}}function d_(){var t=0,e=0,n=0,r=0,i=!1;if(typeof window<"u"){var s=tr(),o=s.match(/Chrome\/(\d+).(\d+).(\d+).(\d+)/);if(o)try{t=parseInt(o[1]),e=parseInt(o[2]),n=parseInt(o[3]),r=parseInt(o[4]),i=s.indexOf("OPR/")>-1}catch{}}return{major:t,minor:e,build:n,patch:r,opera:i}}function F1(){return!!tr().match(/iPad|iPhone|iPod/i)&&M1()}function U1(){return tr().indexOf("AppleWebKit/605.1.15")>-1}function h_(){var t=0,e=0,n=0;if(typeof window<"u"){var r=tr().match(/Version\/(\d+).(\d+)(.(\d+))?/);if(r)try{t=parseInt(r[1]),e=parseInt(r[2]),n=parseInt(r[4])}catch{}else(F1()||U1())&&(t=14,e=0,n=3)}return{major:t,minor:e,point:n}}function f_(){var t=0,e=0;if(typeof window<"u"){var n=tr().match(/Firefox\/(\d+).(\d+)/);if(n)try{t=parseInt(n[1]),e=parseInt(n[2])}catch{}}return{major:t,minor:e}}var $1=function(){return Vn(function t(){Ln(this,t)},[{key:"addListenerForMessagesFromCallMachine",value:function(t,e,n){Pl()}},{key:"addListenerForMessagesFromDailyJs",value:function(t,e,n){Pl()}},{key:"sendMessageToCallMachine",value:function(t,e,n,r){Pl()}},{key:"sendMessageToDailyJs",value:function(t,e){Pl()}},{key:"removeListener",value:function(t){Pl()}}])}();function BS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BS(Object(n),!0).forEach(function(r){Mr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function B1(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(B1=function(){return!!t})()}var O4=function(){function t(){var e,n,r,i;return Ln(this,t),n=this,r=br(r=t),(e=Ff(n,B1()?Reflect.construct(r,[],br(n).constructor):r.apply(n,i)))._wrappedListeners={},e._messageCallbacks={},e}return Uf(t,$1),Vn(t,[{key:"addListenerForMessagesFromCallMachine",value:function(e,n,r){var i=this,s=function(o){if(o.data&&o.data.what==="iframe-call-message"&&(!o.data.callClientId||o.data.callClientId===n)&&(!o.data.from||o.data.from!=="module")){var a=rm({},o.data);if(delete a.from,a.callbackStamp&&i._messageCallbacks[a.callbackStamp]){var l=a.callbackStamp;i._messageCallbacks[l].call(r,a),delete i._messageCallbacks[l]}delete a.what,delete a.callbackStamp,e.call(r,a)}};this._wrappedListeners[e]=s,window.addEventListener("message",s)}},{key:"addListenerForMessagesFromDailyJs",value:function(e,n,r){var i=function(s){var o;if(!(!s.data||s.data.what!==em||!s.data.action||s.data.from&&s.data.from!=="module"||s.data.callClientId&&n&&s.data.callClientId!==n||s!=null&&(o=s.data)!==null&&o!==void 0&&o.callFrameId)){var a=s.data;e.call(r,a)}};this._wrappedListeners[e]=i,window.addEventListener("message",i)}},{key:"sendMessageToCallMachine",value:function(e,n,r,i){if(!r)throw new Error("undefined callClientId. Are you trying to use a DailyCall instance previously destroyed?");var s=rm({},e);if(s.what=em,s.from="module",s.callClientId=r,n){var o=$f();this._messageCallbacks[o]=n,s.callbackStamp=o}var a=i?i.contentWindow:window,l=this._callMachineTargetOrigin(i);l&&a.postMessage(s,l)}},{key:"sendMessageToDailyJs",value:function(e,n){e.what=em,e.callClientId=n,e.from="embedded",window.postMessage(e,this._targetOriginFromWindowLocation())}},{key:"removeListener",value:function(e){var n=this._wrappedListeners[e];n&&(window.removeEventListener("message",n),delete this._wrappedListeners[e])}},{key:"forwardPackagedMessageToCallMachine",value:function(e,n,r){var i=rm({},e);i.callClientId=r;var s=n?n.contentWindow:window,o=this._callMachineTargetOrigin(n);o&&s.postMessage(i,o)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(e,n){var r=function(i){if(i.data&&i.data.what==="iframe-call-message"&&(!i.data.callClientId||i.data.callClientId===n)&&(!i.data.from||i.data.from!=="module")){var s=i.data;e(s)}};return this._wrappedListeners[e]=r,window.addEventListener("message",r),e}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(e){var n=this._wrappedListeners[e];n&&(window.removeEventListener("message",n),delete this._wrappedListeners[e])}},{key:"_callMachineTargetOrigin",value:function(e){return e?e.src?new URL(e.src).origin:void 0:this._targetOriginFromWindowLocation()}},{key:"_targetOriginFromWindowLocation",value:function(){return window.location.protocol==="file:"?"*":window.location.origin}}])}();function qS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function q1(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q1=function(){return!!t})()}var D4=function(){function t(){var e,n,r,i;return Ln(this,t),n=this,r=br(r=t),e=Ff(n,q1()?Reflect.construct(r,[],br(n).constructor):r.apply(n,i)),global.callMachineToDailyJsEmitter=global.callMachineToDailyJsEmitter||new xg.EventEmitter,global.dailyJsToCallMachineEmitter=global.dailyJsToCallMachineEmitter||new xg.EventEmitter,e._wrappedListeners={},e._messageCallbacks={},e}return Uf(t,$1),Vn(t,[{key:"addListenerForMessagesFromCallMachine",value:function(e,n,r){this._addListener(e,global.callMachineToDailyJsEmitter,n,r,"received call machine message")}},{key:"addListenerForMessagesFromDailyJs",value:function(e,n,r){this._addListener(e,global.dailyJsToCallMachineEmitter,n,r,"received daily-js message")}},{key:"sendMessageToCallMachine",value:function(e,n,r){this._sendMessage(e,global.dailyJsToCallMachineEmitter,r,n,"sending message to call machine")}},{key:"sendMessageToDailyJs",value:function(e,n){this._sendMessage(e,global.callMachineToDailyJsEmitter,n,null,"sending message to daily-js")}},{key:"removeListener",value:function(e){var n=this._wrappedListeners[e];n&&(global.callMachineToDailyJsEmitter.removeListener("message",n),global.dailyJsToCallMachineEmitter.removeListener("message",n),delete this._wrappedListeners[e])}},{key:"_addListener",value:function(e,n,r,i,s){var o=this,a=function(l){if(l.callClientId===r){if(l.callbackStamp&&o._messageCallbacks[l.callbackStamp]){var u=l.callbackStamp;o._messageCallbacks[u].call(i,l),delete o._messageCallbacks[u]}e.call(i,l)}};this._wrappedListeners[e]=a,n.addListener("message",a)}},{key:"_sendMessage",value:function(e,n,r,i,s){var o=function(l){for(var u=1;u<arguments.length;u++){var h=arguments[u]!=null?arguments[u]:{};u%2?qS(Object(h),!0).forEach(function(p){Mr(l,p,h[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(h)):qS(Object(h)).forEach(function(p){Object.defineProperty(l,p,Object.getOwnPropertyDescriptor(h,p))})}return l}({},e);if(o.callClientId=r,i){var a=$f();this._messageCallbacks[a]=i,o.callbackStamp=a}n.emit("message",o)}}])}(),ry="replace",iy="shallow-merge",zS=[ry,iy],N4=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data,r=e.mergeStrategy,i=r===void 0?ry:r;Ln(this,t),t._validateMergeStrategy(i),t._validateData(n,i),this.mergeStrategy=i,this.data=n}return Vn(t,[{key:"isNoOp",value:function(){return t.isNoOpUpdate(this.data,this.mergeStrategy)}}],[{key:"isNoOpUpdate",value:function(e,n){return Object.keys(e).length===0&&n===iy}},{key:"_validateMergeStrategy",value:function(e){if(!zS.includes(e))throw Error("Unrecognized mergeStrategy provided. Options are: [".concat(zS,"]"))}},{key:"_validateData",value:function(e,n){if(!function(a){if(a==null||Re(a)!=="object")return!1;var l=Object.getPrototypeOf(a);return l==null||l===Object.prototype}(e))throw Error("Meeting session data must be a plain (map-like) object");var r;try{if(r=JSON.stringify(e),n===ry){var i=JSON.parse(r);ln(i,e)||console.warn("The meeting session data provided will be modified when serialized.",i,e)}else if(n===iy){for(var s in e)if(Object.hasOwnProperty.call(e,s)&&e[s]!==void 0){var o=JSON.parse(JSON.stringify(e[s]));ln(e[s],o)||console.warn("At least one key in the meeting session data provided will be modified when serialized.",o,e[s])}}}catch(a){throw Error("Meeting session data must be serializable to JSON: ".concat(a))}if(r.length>LS)throw Error("Meeting session data is too large (".concat(r.length," characters). Maximum size suppported is ").concat(LS,"."))}}])}();function z1(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z1=function(){return!!t})()}function sy(t){var e=typeof Map=="function"?new Map:void 0;return sy=function(n){if(n===null||!function(i){try{return Function.toString.call(i).indexOf("[native code]")!==-1}catch{return typeof i=="function"}}(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,r)}function r(){return function(i,s,o){if(z1())return Reflect.construct.apply(null,arguments);var a=[null];a.push.apply(a,s);var l=new(i.bind.apply(i,a));return o&&jc(l,o.prototype),l}(n,arguments,br(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),jc(r,n)},sy(t)}function H1(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H1=function(){return!!t})()}function HS(t){var e,n=(e=window._daily)===null||e===void 0?void 0:e.pendings;if(n){var r=n.indexOf(t);r!==-1&&n.splice(r,1)}}var M4=function(){return Vn(function t(e){Ln(this,t),this._currentLoad=null,this._callClientId=e},[{key:"load",value:function(){var t,e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;if(this.loaded)return window._daily.instances[this._callClientId].callMachine.reset(),void r(!0);t=this._callClientId,window._daily.pendings.push(t),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new L4(n,function(){r(!1)},function(s,o){o||HS(e._callClientId),i(s,o)}),this._currentLoad.start()}},{key:"cancel",value:function(){this._currentLoad&&this._currentLoad.cancel(),HS(this._callClientId)}},{key:"loaded",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}])}(),L4=function(){return Vn(function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;Ln(this,t),this._attemptsRemaining=3,this._currentAttempt=null,this._dailyConfig=e,this._successCallback=n,this._failureCallback=r},[{key:"start",value:function(){var t=this;if(!this._currentAttempt){var e=function(n){t._currentAttempt.cancelled||(t._attemptsRemaining--,t._failureCallback(n,t._attemptsRemaining>0),t._attemptsRemaining<=0||setTimeout(function(){t._currentAttempt.cancelled||(t._currentAttempt=new WS(t._dailyConfig,t._successCallback,e),t._currentAttempt.start())},3e3))};this._currentAttempt=new WS(this._dailyConfig,this._successCallback,e),this._currentAttempt.start()}}},{key:"cancel",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:"cancelled",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:"succeeded",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}])}(),im=function(){function t(){return Ln(this,t),e=this,r=arguments,n=br(n=t),Ff(e,H1()?Reflect.construct(n,r||[],br(e).constructor):n.apply(e,r));var e,n,r}return Uf(t,sy(Error)),Vn(t)}(),Gh=2e4,WS=function(){return Vn(function e(n,r,i){Ln(this,e),this._loadAttemptImpl=Ae()||!n.avoidEval?new V4(n,r,i):new j4(n,r,i)},[{key:"start",value:(t=me(function*(){return this._loadAttemptImpl.start()}),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(){this._loadAttemptImpl.cancel()}},{key:"cancelled",get:function(){return this._loadAttemptImpl.cancelled}},{key:"succeeded",get:function(){return this._loadAttemptImpl.succeeded}}]);var t}(),V4=function(){return Vn(function i(s,o,a){Ln(this,i),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache=typeof iOSCallObjectBundleCache<"u"&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._dailyConfig=s,this._successCallback=o,this._failureCallback=a},[{key:"start",value:(r=me(function*(){var i=Fh(this._dailyConfig);!(yield this._tryLoadFromIOSCache(i))&&this._loadFromNetwork(i)}),function(){return r.apply(this,arguments)})},{key:"cancel",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:"_tryLoadFromIOSCache",value:(n=me(function*(i){if(!this._iosCache)return!1;try{var s=yield this._iosCache.get(i);return!!this.cancelled||!!s&&(s.code?(Function('"use strict";'+s.code)(),this.succeeded=!0,this._successCallback(),!0):(this._refetchHeaders=s.refetchHeaders,!1))}catch{return!1}}),function(i){return n.apply(this,arguments)})},{key:"_loadFromNetwork",value:(e=me(function*(i){var s=this;this._networkTimeout=setTimeout(function(){s._networkTimedOut=!0,s._failureCallback({msg:"Timed out (>".concat(Gh," ms) when loading call object bundle ").concat(i),type:"timeout"})},Gh);try{var o=this._refetchHeaders?{headers:this._refetchHeaders}:{},a=yield fetch(i,o);if(clearTimeout(this._networkTimeout),this.cancelled||this._networkTimedOut)throw new im;var l=yield this._getBundleCodeFromResponse(i,a);if(this.cancelled)throw new im;Function('"use strict";'+l)(),this._iosCache&&this._iosCache.set(i,l,a.headers),this.succeeded=!0,this._successCallback()}catch(u){if(clearTimeout(this._networkTimeout),u instanceof im||this.cancelled||this._networkTimedOut)return;this._failureCallback({msg:"Failed to load call object bundle ".concat(i,": ").concat(u),type:u.message})}}),function(i){return e.apply(this,arguments)})},{key:"_getBundleCodeFromResponse",value:(t=me(function*(i,s){if(s.ok)return yield s.text();if(this._iosCache&&s.status===304)return(yield this._iosCache.renew(i,s.headers)).code;throw new Error("Received ".concat(s.status," response"))}),function(i,s){return t.apply(this,arguments)})}]);var t,e,n,r}(),j4=function(){return Vn(function t(e,n,r){Ln(this,t),this.cancelled=!1,this.succeeded=!1,this._dailyConfig=e,this._successCallback=n,this._failureCallback=r,this._attemptId=$f(),this._networkTimeout=null,this._scriptElement=null},[{key:"start",value:function(){window._dailyCallMachineLoadWaitlist||(window._dailyCallMachineLoadWaitlist=new Set);var t=Fh(this._dailyConfig);(typeof document>"u"?"undefined":Re(document))==="object"?this._startLoading(t):this._failureCallback({msg:"Call object bundle must be loaded in a DOM/web context",type:"missing context"})}},{key:"cancel",value:function(){this._stopLoading(),this.cancelled=!0}},{key:"_startLoading",value:function(t){var e=this;this._signUpForCallMachineLoadWaitlist(),this._networkTimeout=setTimeout(function(){e._stopLoading(),e._failureCallback({msg:"Timed out (>".concat(Gh," ms) when loading call object bundle ").concat(t),type:"timeout"})},Gh);var n=document.getElementsByTagName("head")[0],r=document.createElement("script");this._scriptElement=r,r.onload=function(){e._stopLoading(),e.succeeded=!0,e._successCallback()},r.onerror=function(i){e._stopLoading(),e._failureCallback({msg:"Failed to load call object bundle ".concat(i.target.src),type:i.message})},r.src=t,n.appendChild(r)}},{key:"_stopLoading",value:function(){this._withdrawFromCallMachineLoadWaitlist(),clearTimeout(this._networkTimeout),this._scriptElement&&(this._scriptElement.onload=null,this._scriptElement.onerror=null)}},{key:"_signUpForCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.add(this._attemptId)}},{key:"_withdrawFromCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.delete(this._attemptId)}}])}(),wd=function(t,e,n){return U4(t.local,e,n)===!0},F4=function(t,e,n){return t.local.streams&&t.local.streams[e]&&t.local.streams[e].stream&&t.local.streams[e].stream["get".concat(n==="video"?"Video":"Audio","Tracks")]()[0]},fa=function(t,e,n,r){var i=$4(t,e,n,r);return i&&i.pendingTrack},U4=function(t,e,n){if(!t)return!1;var r=function(s){switch(s){case"avatar":return!0;case"staged":return s;default:return!!s}},i=t.public.subscribedTracks;return i&&i[e]?["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo"].indexOf(n)===-1&&i[e].custom?[!0,"staged"].includes(i[e].custom)?r(i[e].custom):r(i[e].custom[n]):r(i[e][n]):!i||r(i.ALL)},$4=function(t,e,n,r){var i=Object.values(t.streams||{}).filter(function(s){return s.participantId===e&&s.type===n&&s.pendingTrack&&s.pendingTrack.kind===r}).sort(function(s,o){return new Date(o.starttime)-new Date(s.starttime)});return i&&i[0]},B4=function(t,e){var n=t.local.public.customTracks;if(n&&n[e])return n[e].track};function GS(t,e){for(var n=e.getState(),r=0,i=["cam","screen"];r<i.length;r++)for(var s=i[r],o=0,a=["video","audio"];o<a.length;o++){var l=a[o],u=s==="cam"?l:"screen".concat(l.charAt(0).toUpperCase()+l.slice(1)),h=t.tracks[u];if(h){var p=t.local?F4(n,s,l):fa(n,t.session_id,s,l);h.state==="playable"&&(h.track=p),h.persistentTrack=p}}}function KS(t,e){try{var n=e.getState();for(var r in t.tracks)if(!q4(r)){var i=t.tracks[r].kind;if(i){var s=t.tracks[r];if(s){var o=t.local?B4(n,r):fa(n,t.session_id,r,i);s.state==="playable"&&(t.tracks[r].track=o),s.persistentTrack=o}}else console.error("unknown type for custom track")}}catch(a){console.error(a)}}function q4(t){return["video","audio","screenVideo","screenAudio"].includes(t)}function JS(t,e,n){var r=n.getState();if(t.local){if(t.audio)try{t.audioTrack=r.local.streams.cam.stream.getAudioTracks()[0],t.audioTrack||(t.audio=!1)}catch{}if(t.video)try{t.videoTrack=r.local.streams.cam.stream.getVideoTracks()[0],t.videoTrack||(t.video=!1)}catch{}if(t.screen)try{t.screenVideoTrack=r.local.streams.screen.stream.getVideoTracks()[0],t.screenAudioTrack=r.local.streams.screen.stream.getAudioTracks()[0],t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch{}}else{var i=!0;try{var s=r.participants[t.session_id];s&&s.public&&s.public.rtcType&&s.public.rtcType.impl==="peer-to-peer"&&s.private&&!["connected","completed"].includes(s.private.peeringState)&&(i=!1)}catch(h){console.error(h)}if(!i)return t.audio=!1,t.audioTrack=!1,t.video=!1,t.videoTrack=!1,t.screen=!1,void(t.screenTrack=!1);try{if(r.streams,t.audio&&wd(r,t.session_id,"cam-audio")){var o=fa(r,t.session_id,"cam","audio");o&&(e&&e.audioTrack&&e.audioTrack.id===o.id?t.audioTrack=o:o.muted||(t.audioTrack=o)),t.audioTrack||(t.audio=!1)}if(t.video&&wd(r,t.session_id,"cam-video")){var a=fa(r,t.session_id,"cam","video");a&&(e&&e.videoTrack&&e.videoTrack.id===a.id?t.videoTrack=a:a.muted||(t.videoTrack=a)),t.videoTrack||(t.video=!1)}if(t.screen&&wd(r,t.session_id,"screen-audio")){var l=fa(r,t.session_id,"screen","audio");l&&(e&&e.screenAudioTrack&&e.screenAudioTrack.id===l.id?t.screenAudioTrack=l:l.muted||(t.screenAudioTrack=l))}if(t.screen&&wd(r,t.session_id,"screen-video")){var u=fa(r,t.session_id,"screen","video");u&&(e&&e.screenVideoTrack&&e.screenVideoTrack.id===u.id?t.screenVideoTrack=u:u.muted||(t.screenVideoTrack=u))}t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch(h){console.error("unexpected error matching up tracks",h)}}}function z4(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(l,u){if(l){if(typeof l=="string")return QS(l,u);var h={}.toString.call(l).slice(8,-1);return h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set"?Array.from(l):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?QS(l,u):void 0}}(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var l=n.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{o||n.return==null||n.return()}finally{if(a)throw s}}}}function QS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Dr=new Map,Ia=null;function H4(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(l,u){if(l){if(typeof l=="string")return YS(l,u);var h={}.toString.call(l).slice(8,-1);return h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set"?Array.from(l):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?YS(l,u):void 0}}(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var l=n.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{o||n.return==null||n.return()}finally{if(a)throw s}}}}function YS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Nr=new Map,lc=null;function W4(t){W1()?function(e){Dr.has(e)||(Dr.set(e,{}),navigator.mediaDevices.enumerateDevices().then(function(n){Dr.has(e)&&(Dr.get(e).lastDevicesString=JSON.stringify(n),Ia||(Ia=function(){var r=me(function*(){var i,s=yield navigator.mediaDevices.enumerateDevices(),o=z4(Dr.keys());try{for(o.s();!(i=o.n()).done;){var a=i.value,l=JSON.stringify(s);l!==Dr.get(a).lastDevicesString&&(Dr.get(a).lastDevicesString=l,a(s))}}catch(u){o.e(u)}finally{o.f()}});return function(){return r.apply(this,arguments)}}(),navigator.mediaDevices.addEventListener("devicechange",Ia)))}).catch(function(){}))}(t):function(e){Nr.has(e)||(Nr.set(e,{}),navigator.mediaDevices.enumerateDevices().then(function(n){Nr.has(e)&&(Nr.get(e).lastDevicesString=JSON.stringify(n),lc||(lc=setInterval(me(function*(){var r,i=yield navigator.mediaDevices.enumerateDevices(),s=H4(Nr.keys());try{for(s.s();!(r=s.n()).done;){var o=r.value,a=JSON.stringify(i);a!==Nr.get(o).lastDevicesString&&(Nr.get(o).lastDevicesString=a,o(i))}}catch(l){s.e(l)}finally{s.f()}}),3e3)))}))}(t)}function G4(t){W1()?function(e){Dr.has(e)&&(Dr.delete(e),Dr.size===0&&Ia&&(navigator.mediaDevices.removeEventListener("devicechange",Ia),Ia=null))}(t):function(e){Nr.has(e)&&(Nr.delete(e),Nr.size===0&&lc&&(clearInterval(lc),lc=null))}(t)}function W1(){var t;return Ae()||((t=navigator.mediaDevices)===null||t===void 0?void 0:t.ondevicechange)!==void 0}var K4=new Set;function J4(t,e){return t&&t.readyState==="live"&&!function(n,r){return n.muted&&!K4.has(n.id)}(t)}function XS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XS(Object(n),!0).forEach(function(r){Mr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var ql=Object.freeze({VIDEO:"video",AUDIO:"audio",SCREEN_VIDEO:"screenVideo",SCREEN_AUDIO:"screenAudio",CUSTOM_VIDEO:"customVideo",CUSTOM_AUDIO:"customAudio"}),Q4=Object.freeze({PARTICIPANTS:"participants",STREAMING:"streaming",TRANSCRIPTION:"transcription"}),cc=Object.values(ql),ZS=["v","a","sv","sa","cv","ca"];Object.freeze(cc.reduce(function(t,e,n){return t[e]=ZS[n],t},{})),Object.freeze(ZS.reduce(function(t,e,n){return t[e]=cc[n],t},{}));var Y4=[ql.VIDEO,ql.AUDIO,ql.SCREEN_VIDEO,ql.SCREEN_AUDIO],eT=Object.values(Q4),tT=["p","s","t"];Object.freeze(eT.reduce(function(t,e,n){return t[e]=tT[n],t},{})),Object.freeze(tT.reduce(function(t,e,n){return t[e]=eT[n],t},{}));var G1=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.base,r=e.byUserId,i=e.byParticipantId;Ln(this,t),this.base=n,this.byUserId=r,this.byParticipantId=i}return Vn(t,[{key:"clone",value:function(){var e=new t;if(this.base instanceof Lt?e.base=this.base.clone():e.base=this.base,this.byUserId!==void 0)for(var n in e.byUserId={},this.byUserId){var r=this.byUserId[n];e.byUserId[n]=r instanceof Lt?r.clone():r}if(this.byParticipantId!==void 0)for(var i in e.byParticipantId={},this.byParticipantId){var s=this.byParticipantId[i];e.byParticipantId[i]=s instanceof Lt?s.clone():s}return e}},{key:"toJSONObject",value:function(){var e={};if(typeof this.base=="boolean"?e.base=this.base:this.base instanceof Lt&&(e.base=this.base.toJSONObject()),this.byUserId!==void 0)for(var n in e.byUserId={},this.byUserId){var r=this.byUserId[n];e.byUserId[n]=r instanceof Lt?r.toJSONObject():r}if(this.byParticipantId!==void 0)for(var i in e.byParticipantId={},this.byParticipantId){var s=this.byParticipantId[i];e.byParticipantId[i]=s instanceof Lt?s.toJSONObject():s}return e}},{key:"toMinifiedJSONObject",value:function(){var e={};if(this.base!==void 0&&(typeof this.base=="boolean"?e.b=this.base:e.b=this.base.toMinifiedJSONObject()),this.byUserId!==void 0)for(var n in e.u={},this.byUserId){var r=this.byUserId[n];e.u[n]=typeof r=="boolean"?r:r.toMinifiedJSONObject()}if(this.byParticipantId!==void 0)for(var i in e.p={},this.byParticipantId){var s=this.byParticipantId[i];e.p[i]=typeof s=="boolean"?s:s.toMinifiedJSONObject()}return e}},{key:"normalize",value:function(){return this.base instanceof Lt&&(this.base=this.base.normalize()),this.byUserId&&(this.byUserId=Object.fromEntries(Object.entries(this.byUserId).map(function(e){var n=Xt(e,2),r=n[0],i=n[1];return[r,i instanceof Lt?i.normalize():i]}))),this.byParticipantId&&(this.byParticipantId=Object.fromEntries(Object.entries(this.byParticipantId).map(function(e){var n=Xt(e,2),r=n[0],i=n[1];return[r,i instanceof Lt?i.normalize():i]}))),this}}],[{key:"fromJSONObject",value:function(e){var n,r,i;if(e.base!==void 0&&(n=typeof e.base=="boolean"?e.base:Lt.fromJSONObject(e.base)),e.byUserId!==void 0)for(var s in r={},e.byUserId){var o=e.byUserId[s];r[s]=typeof o=="boolean"?o:Lt.fromJSONObject(o)}if(e.byParticipantId!==void 0)for(var a in i={},e.byParticipantId){var l=e.byParticipantId[a];i[a]=typeof l=="boolean"?l:Lt.fromJSONObject(l)}return new t({base:n,byUserId:r,byParticipantId:i})}},{key:"fromMinifiedJSONObject",value:function(e){var n,r,i;if(e.b!==void 0&&(n=typeof e.b=="boolean"?e.b:Lt.fromMinifiedJSONObject(e.b)),e.u!==void 0)for(var s in r={},e.u){var o=e.u[s];r[s]=typeof o=="boolean"?o:Lt.fromMinifiedJSONObject(o)}if(e.p!==void 0)for(var a in i={},e.p){var l=e.p[a];i[a]=typeof l=="boolean"?l:Lt.fromMinifiedJSONObject(l)}return new t({base:n,byUserId:r,byParticipantId:i})}},{key:"validateJSONObject",value:function(e){if(Re(e)!=="object")return[!1,"canReceive must be an object"];for(var n=["base","byUserId","byParticipantId"],r=0,i=Object.keys(e);r<i.length;r++){var s=i[r];if(!n.includes(s))return[!1,"canReceive can only contain keys (".concat(n.join(", "),")")];if(s==="base"){var o=Xt(Lt.validateJSONObject(e.base,!0),2),a=o[0],l=o[1];if(!a)return[!1,l]}else{if(Re(e[s])!=="object")return[!1,"invalid (non-object) value for field '".concat(s,"' in canReceive")];for(var u=0,h=Object.values(e[s]);u<h.length;u++){var p=h[u],g=Xt(Lt.validateJSONObject(p),2),T=g[0],S=g[1];if(!T)return[!1,S]}}}return[!0]}}])}(),Lt=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.video,r=e.audio,i=e.screenVideo,s=e.screenAudio,o=e.customVideo,a=e.customAudio;Ln(this,t),this.video=n,this.audio=r,this.screenVideo=i,this.screenAudio=s,this.customVideo=o,this.customAudio=a}return Vn(t,[{key:"clone",value:function(){var e=new t;return this.video!==void 0&&(e.video=this.video),this.audio!==void 0&&(e.audio=this.audio),this.screenVideo!==void 0&&(e.screenVideo=this.screenVideo),this.screenAudio!==void 0&&(e.screenAudio=this.screenAudio),this.customVideo!==void 0&&(e.customVideo=zi({},this.customVideo)),this.customAudio!==void 0&&(e.customAudio=zi({},this.customAudio)),e}},{key:"toJSONObject",value:function(){var e={};return this.video!==void 0&&(e.video=this.video),this.audio!==void 0&&(e.audio=this.audio),this.screenVideo!==void 0&&(e.screenVideo=this.screenVideo),this.screenAudio!==void 0&&(e.screenAudio=this.screenAudio),this.customVideo!==void 0&&(e.customVideo=zi({},this.customVideo)),this.customAudio!==void 0&&(e.customAudio=zi({},this.customAudio)),e}},{key:"toMinifiedJSONObject",value:function(){var e={};return this.video!==void 0&&(e.v=this.video),this.audio!==void 0&&(e.a=this.audio),this.screenVideo!==void 0&&(e.sv=this.screenVideo),this.screenAudio!==void 0&&(e.sa=this.screenAudio),this.customVideo!==void 0&&(e.cv=zi({},this.customVideo)),this.customAudio!==void 0&&(e.ca=zi({},this.customAudio)),e}},{key:"normalize",value:function(){function e(n,r){return n&&Object.keys(n).length===1&&n["*"]===r}return!(this.video!==!0||this.audio!==!0||this.screenVideo!==!0||this.screenAudio!==!0||!e(this.customVideo,!0)||!e(this.customAudio,!0))||(this.video!==!1||this.audio!==!1||this.screenVideo!==!1||this.screenAudio!==!1||!e(this.customVideo,!1)||!e(this.customAudio,!1))&&this}}],[{key:"fromBoolean",value:function(e){return new t({video:e,audio:e,screenVideo:e,screenAudio:e,customVideo:{"*":e},customAudio:{"*":e}})}},{key:"fromJSONObject",value:function(e){return new t({video:e.video,audio:e.audio,screenVideo:e.screenVideo,screenAudio:e.screenAudio,customVideo:e.customVideo!==void 0?zi({},e.customVideo):void 0,customAudio:e.customAudio!==void 0?zi({},e.customAudio):void 0})}},{key:"fromMinifiedJSONObject",value:function(e){return new t({video:e.v,audio:e.a,screenVideo:e.sv,screenAudio:e.sa,customVideo:e.cv,customAudio:e.ca})}},{key:"validateJSONObject",value:function(e,n){if(typeof e=="boolean")return[!0];if(Re(e)!=="object")return[!1,"invalid (non-object, non-boolean) value in canReceive"];for(var r=Object.keys(e),i=0,s=r;i<s.length;i++){var o=s[i];if(!cc.includes(o))return[!1,"invalid media type '".concat(o,"' in canReceive")];if(Y4.includes(o)){if(typeof e[o]!="boolean")return[!1,"invalid (non-boolean) value for media type '".concat(o,"' in canReceive")]}else{if(Re(e[o])!=="object")return[!1,"invalid (non-object) value for media type '".concat(o,"' in canReceive")];for(var a=0,l=Object.values(e[o]);a<l.length;a++)if(typeof l[a]!="boolean")return[!1,"invalid (non-boolean) value for entry within '".concat(o,"' in canReceive")];if(n&&e[o]["*"]===void 0)return[!1,`canReceive "base" permission must specify "*" as an entry within '`.concat(o,"'")]}}return n&&r.length!==cc.length?[!1,'canReceive "base" permission must specify all media types: '.concat(cc.join(", ")," (or be set to a boolean shorthand)")]:[!0]}}])}(),X4=["result"],Z4=["preserveIframe"];function nT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nT(Object(n),!0).forEach(function(r){Mr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function K1(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(K1=function(){return!!t})()}function rT(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(l,u){if(l){if(typeof l=="string")return iT(l,u);var h={}.toString.call(l).slice(8,-1);return h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set"?Array.from(l):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?iT(l,u):void 0}}(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var l=n.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{o||n.return==null||n.return()}finally{if(a)throw s}}}}function iT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Ys={},sT="video",eU="voice",oT=Ae()?{data:{}}:{data:{},topology:"none"},aT={present:0,hidden:0},J1={maxBitrate:{min:1e5,max:25e5},maxFramerate:{min:1,max:30},scaleResolutionDownBy:{min:1,max:8}},sm=Object.keys(J1),lT=["state","volume","simulcastEncodings"],cT={androidInCallNotification:{title:"string",subtitle:"string",iconName:"string",disableForCustomOverride:"boolean"},disableAutoDeviceManagement:{audio:"boolean",video:"boolean"}},Kh={id:{iconPath:"string",iconPathDarkMode:"string",label:"string",tooltip:"string",visualState:"'default' | 'sidebar-open' | 'active'"}},oy={id:{allow:"string",controlledBy:"'*' | 'owners' | string[]",csp:"string",iconURL:"string",label:"string",loading:"'eager' | 'lazy'",location:"'main' | 'sidebar'",name:"string",referrerPolicy:"string",sandbox:"string",src:"string",srcdoc:"string",shared:"string[] | 'owners' | boolean"}},Xs={customIntegrations:{validate:rP,help:tP()},customTrayButtons:{validate:nP,help:"customTrayButtons should be a dictionary of the type ".concat(JSON.stringify(Kh))},url:{validate:function(t){return typeof t=="string"},help:"url should be a string"},baseUrl:{validate:function(t){return typeof t=="string"},help:"baseUrl should be a string"},token:{validate:function(t){return typeof t=="string"},help:"token should be a string",queryString:"t"},dailyConfig:{validate:function(t,e){try{return e.validateDailyConfig(t),!0}catch(n){console.error("Failed to validate dailyConfig",n)}return!1},help:"Unsupported dailyConfig. Check error logs for detailed info."},reactNativeConfig:{validate:function(t){return iP(t,cT)},help:"reactNativeConfig should look like ".concat(JSON.stringify(cT),", all fields optional")},lang:{validate:function(t){return["da","de","en-us","en","es","fi","fr","it","jp","ka","nl","no","pl","pt","pt-BR","ru","sv","tr","user"].includes(t)},help:"language not supported. Options are: da, de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, pt-BR, ru, sv, tr, user"},userName:!0,userData:{validate:function(t){try{return Q1(t),!0}catch(e){return console.error(e),!1}},help:"invalid userData type provided"},startVideoOff:!0,startAudioOff:!0,allowLocalVideo:!0,allowLocalAudio:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,showUserNameChangeUI:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(t,e){if(typeof t=="boolean")return e._preloadCache.allowLocalVideo=t,!0;var n;if(t instanceof MediaStreamTrack)e._sharedTracks.videoTrack=t,n={customTrack:ui};else{if(delete e._sharedTracks.videoTrack,typeof t!="string")return console.error("videoSource must be a MediaStreamTrack, boolean, or a string"),!1;n={deviceId:t}}return e._updatePreloadCacheInputSettings({video:{settings:n}},!1),!0}},audioSource:{validate:function(t,e){if(typeof t=="boolean")return e._preloadCache.allowLocalAudio=t,!0;var n;if(t instanceof MediaStreamTrack)e._sharedTracks.audioTrack=t,n={customTrack:ui};else{if(delete e._sharedTracks.audioTrack,typeof t!="string")return console.error("audioSource must be a MediaStreamTrack, boolean, or a string"),!1;n={deviceId:t}}return e._updatePreloadCacheInputSettings({audio:{settings:n}},!1),!0}},subscribeToTracksAutomatically:{validate:function(t,e){return e._preloadCache.subscribeToTracksAutomatically=t,!0}},theme:{validate:function(t){var e=["accent","accentText","background","backgroundAccent","baseText","border","mainAreaBg","mainAreaBgAccent","mainAreaText","supportiveText"],n=function(r){for(var i=0,s=Object.keys(r);i<s.length;i++){var o=s[i];if(!e.includes(o))return console.error('unsupported color "'.concat(o,'". Valid colors: ').concat(e.join(", "))),!1;if(!r[o].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return console.error("".concat(o,' theme color should be provided in valid hex color format. Received: "').concat(r[o],'"')),!1}return!0};return Re(t)==="object"&&("light"in t&&"dark"in t||"colors"in t)?"light"in t&&"dark"in t?"colors"in t.light?"colors"in t.dark?n(t.light.colors)&&n(t.dark.colors):(console.error('Dark theme is missing "colors" property.',t),!1):(console.error('Light theme is missing "colors" property.',t),!1):n(t.colors):(console.error('Theme must contain either both "light" and "dark" properties, or "colors".',t),!1)},help:"unsupported theme configuration. Check error logs for detailed info."},layoutConfig:{validate:function(t){if("grid"in t){var e=t.grid;if("maxTilesPerPage"in e){if(!Number.isInteger(e.maxTilesPerPage))return console.error("grid.maxTilesPerPage should be an integer. You passed ".concat(e.maxTilesPerPage,".")),!1;if(e.maxTilesPerPage>49)return console.error("grid.maxTilesPerPage can't be larger than 49 without sacrificing browser performance. Please contact us at https://www.daily.co/contact to talk about your use case."),!1}if("minTilesPerPage"in e){if(!Number.isInteger(e.minTilesPerPage))return console.error("grid.minTilesPerPage should be an integer. You passed ".concat(e.minTilesPerPage,".")),!1;if(e.minTilesPerPage<1)return console.error("grid.minTilesPerPage can't be lower than 1."),!1;if("maxTilesPerPage"in e&&e.minTilesPerPage>e.maxTilesPerPage)return console.error("grid.minTilesPerPage can't be higher than grid.maxTilesPerPage."),!1}}return!0},help:"unsupported layoutConfig. Check error logs for detailed info."},receiveSettings:{validate:function(t){return Y1(t,{allowAllParticipantsKey:!1})},help:eP({allowAllParticipantsKey:!1})},sendSettings:{validate:function(t,e){return!!function(n,r){try{return r.validateUpdateSendSettings(n),!0}catch(i){return console.error("Failed to validate send settings",i),!1}}(t,e)&&(e._preloadCache.sendSettings=t,!0)},help:"Invalid sendSettings provided. Check error logs for detailed info."},inputSettings:{validate:function(t,e){var n;return!!X1(t)&&(e._inputSettings||(e._inputSettings={}),Z1(t,(n=e.properties)===null||n===void 0?void 0:n.dailyConfig,e._sharedTracks),e._updatePreloadCacheInputSettings(t,!0),!0)},help:ay()},layout:{validate:function(t){return t==="custom-v1"||t==="browser"||t==="none"},help:'layout may only be set to "custom-v1"',queryString:"layout"},emb:{queryString:"emb"},embHref:{queryString:"embHref"},dailyJsVersion:{queryString:"dailyJsVersion"},proxy:{queryString:"proxy"},strictMode:!0,allowMultipleCallInstances:!0},Ed={styles:{validate:function(t){for(var e in t)if(e!=="cam"&&e!=="screen")return!1;if(t.cam){for(var n in t.cam)if(n!=="div"&&n!=="video")return!1}if(t.screen){for(var r in t.screen)if(r!=="div"&&r!=="video")return!1}return!0},help:"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }"},setSubscribedTracks:{validate:function(t,e){if(e._preloadCache.subscribeToTracksAutomatically)return!1;var n=[!0,!1,"staged"];if(n.includes(t)||!Ae()&&t==="avatar")return!0;var r=["audio","video","screenAudio","screenVideo","rmpAudio","rmpVideo"],i=function(s){var o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];for(var a in s)if(a==="custom"){if(!n.includes(s[a])&&!i(s[a],!0))return!1}else{var l=!o&&!r.includes(a),u=!n.includes(s[a]);if(l||u)return!1}return!0};return i(t)},help:"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: "+"true".concat(Ae()?"":" | 'avatar'"," | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }")},setAudio:!0,setVideo:!0,setScreenShare:{validate:function(t){return t===!1},help:"setScreenShare must be false, as it's only meant for stopping remote participants' screen shares"},eject:!0,updatePermissions:{validate:function(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var r=Xt(n[e],2),i=r[0],s=r[1];switch(i){case"hasPresence":if(typeof s!="boolean")return!1;break;case"canSend":if(s instanceof Set||s instanceof Array||Array.isArray(s)){var o,a=["video","audio","screenVideo","screenAudio","customVideo","customAudio"],l=rT(s);try{for(l.s();!(o=l.n()).done;){var u=o.value;if(!a.includes(u))return!1}}catch(_){l.e(_)}finally{l.f()}}else if(typeof s!="boolean")return!1;(s instanceof Array||Array.isArray(s))&&(t.canSend=new Set(s));break;case"canReceive":var h=Xt(G1.validateJSONObject(s),2),p=h[0],g=h[1];if(!p)return console.error(g),!1;break;case"canAdmin":if(s instanceof Set||s instanceof Array||Array.isArray(s)){var T,S=["participants","streaming","transcription"],E=rT(s);try{for(E.s();!(T=E.n()).done;){var k=T.value;if(!S.includes(k))return!1}}catch(_){E.e(_)}finally{E.f()}}else if(typeof s!="boolean")return!1;(s instanceof Array||Array.isArray(s))&&(t.canAdmin=new Set(s));break;default:return!1}}return!0},help:"updatePermissions can take hasPresence, canSend, canReceive, and canAdmin permissions. hasPresence must be a boolean. canSend can be a boolean or an Array or Set of media types (video, audio, screenVideo, screenAudio, customVideo, customAudio). canReceive must be an object specifying base, byUserId, and/or byParticipantId fields (see documentation for more details). canAdmin can be a boolean or an Array or Set of admin types (participants, streaming, transcription)."}};Promise.any||(Promise.any=function(){var t=me(function*(e){return new Promise(function(n,r){var i=[];e.forEach(function(s){return Promise.resolve(s).then(function(o){n(o)}).catch(function(o){i.push(o),i.length===e.length&&r(i)})})})});return function(e){return t.apply(this,arguments)}}());var tU=function(){function t(d){var w,v,O,M,B,K,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ln(this,t),O=this,M=br(M=t),Mr(v=Ff(O,K1()?Reflect.construct(M,[],br(O).constructor):M.apply(O,B)),"startListeningForDeviceChanges",function(){W4(v.handleDeviceChange)}),Mr(v,"stopListeningForDeviceChanges",function(){G4(v.handleDeviceChange)}),Mr(v,"handleDeviceChange",function(pe){pe=pe.map(function(we){return JSON.parse(JSON.stringify(we))}),v.emitDailyJSEvent({action:"available-devices-updated",availableDevices:pe})}),Mr(v,"handleNativeAppStateChange",function(){var pe=me(function*(we){if(we==="destroyed")return console.warn("App has been destroyed before leaving the meeting. Cleaning up all the resources!"),void(yield v.destroy());var ht=we==="active";v.disableReactNativeAutoDeviceManagement("video")||(ht?v.camUnmutedBeforeLosingNativeActiveState&&v.setLocalVideo(!0):(v.camUnmutedBeforeLosingNativeActiveState=v.localVideo(),v.camUnmutedBeforeLosingNativeActiveState&&v.setLocalVideo(!1)))});return function(we){return pe.apply(this,arguments)}}()),Mr(v,"handleNativeAudioFocusChange",function(pe){v.disableReactNativeAutoDeviceManagement("audio")||(v._hasNativeAudioFocus=pe,v.toggleParticipantAudioBasedOnNativeAudioFocus(),v._hasNativeAudioFocus?v.micUnmutedBeforeLosingNativeAudioFocus&&v.setLocalAudio(!0):(v.micUnmutedBeforeLosingNativeAudioFocus=v.localAudio(),v.setLocalAudio(!1)))}),Mr(v,"handleNativeSystemScreenCaptureStop",function(){v.stopScreenShare()}),!nm()&&!Ae())throw new Error("WebRTC not supported or suppressed");if(v.strictMode=J.strictMode===void 0||J.strictMode,v.allowMultipleCallInstances=(w=J.allowMultipleCallInstances)!==null&&w!==void 0&&w,Object.keys(Ys).length&&(v._logDuplicateInstanceAttempt(),!v.allowMultipleCallInstances)){if(v.strictMode)throw new Error("Duplicate DailyIframe instances are not allowed");console.warn("Using strictMode: false to allow multiple call instances is now deprecated. Set `allowMultipleCallInstances: true`")}if(window._daily||(window._daily={pendings:[],instances:{}}),v.callClientId=$f(),Ys[(K=v).callClientId]=K,window._daily.instances[v.callClientId]={},v._sharedTracks={},window._daily.instances[v.callClientId].tracks=v._sharedTracks,J.dailyJsVersion=t.version(),v._iframe=d,v._callObjectMode=J.layout==="none"&&!v._iframe,v._preloadCache={subscribeToTracksAutomatically:!0,outputDeviceId:null,inputSettings:null,sendSettings:null,videoTrackForNetworkConnectivityTest:null,videoTrackForConnectionQualityTest:null},J.showLocalVideo!==void 0?v._callObjectMode?console.error("showLocalVideo is not available in call object mode"):v._showLocalVideo=!!J.showLocalVideo:v._showLocalVideo=!0,J.showParticipantsBar!==void 0?v._callObjectMode?console.error("showParticipantsBar is not available in call object mode"):v._showParticipantsBar=!!J.showParticipantsBar:v._showParticipantsBar=!0,J.customIntegrations!==void 0?v._callObjectMode?console.error("customIntegrations is not available in call object mode"):v._customIntegrations=J.customIntegrations:v._customIntegrations={},J.customTrayButtons!==void 0?v._callObjectMode?console.error("customTrayButtons is not available in call object mode"):v._customTrayButtons=J.customTrayButtons:v._customTrayButtons={},J.activeSpeakerMode!==void 0?v._callObjectMode?console.error("activeSpeakerMode is not available in call object mode"):v._activeSpeakerMode=!!J.activeSpeakerMode:v._activeSpeakerMode=!1,J.receiveSettings?v._callObjectMode?v._receiveSettings=J.receiveSettings:console.error("receiveSettings is only available in call object mode"):v._receiveSettings={},v.validateProperties(J),v.properties=ae({},J),v._inputSettings||(v._inputSettings={}),v._callObjectLoader=v._callObjectMode?new M4(v.callClientId):null,v._callState=Gg,v._isPreparingToJoin=!1,v._accessState={access:Wd},v._meetingSessionSummary={},v._finalSummaryOfPrevSession={},v._meetingSessionState=lm(oT,v._callObjectMode),v._nativeInCallAudioMode=sT,v._participants={},v._isScreenSharing=!1,v._participantCounts=aT,v._rmpPlayerState={},v._waitingParticipants={},v._network={threshold:"good",quality:100,networkState:"unknown",stats:{}},v._activeSpeaker={},v._localAudioLevel=0,v._isLocalAudioLevelObserverRunning=!1,v._remoteParticipantsAudioLevel={},v._isRemoteParticipantsAudioLevelObserverRunning=!1,v._maxAppMessageSize=Zp,v._messageChannel=Ae()?new D4:new O4,v._iframe&&(v._iframe.requestFullscreen?v._iframe.addEventListener("fullscreenchange",function(){document.fullscreenElement===v._iframe?(v.emitDailyJSEvent({action:$l}),v.sendMessageToCallMachine({action:$l})):(v.emitDailyJSEvent({action:Bl}),v.sendMessageToCallMachine({action:Bl}))}):v._iframe.webkitRequestFullscreen&&v._iframe.addEventListener("webkitfullscreenchange",function(){document.webkitFullscreenElement===v._iframe?(v.emitDailyJSEvent({action:$l}),v.sendMessageToCallMachine({action:$l})):(v.emitDailyJSEvent({action:Bl}),v.sendMessageToCallMachine({action:Bl}))})),Ae()){var Z=v.nativeUtils();Z.addAudioFocusChangeListener&&Z.removeAudioFocusChangeListener&&Z.addAppStateChangeListener&&Z.removeAppStateChangeListener&&Z.addSystemScreenCaptureStopListener&&Z.removeSystemScreenCaptureStopListener||console.warn("expected (add|remove)(AudioFocusChange|AppActiveStateChange|SystemScreenCaptureStop)Listener to be available in React Native"),v._hasNativeAudioFocus=!0,Z.addAudioFocusChangeListener(v.handleNativeAudioFocusChange),Z.addAppStateChangeListener(v.handleNativeAppStateChange),Z.addSystemScreenCaptureStopListener(v.handleNativeSystemScreenCaptureStop)}return v._callObjectMode&&v.startListeningForDeviceChanges(),v._messageChannel.addListenerForMessagesFromCallMachine(v.handleMessageFromCallMachine,v.callClientId,v),v}return Uf(t,dd),Vn(t,[{key:"destroy",value:(Se=me(function*(){var d;try{yield this.leave()}catch{}var w=this._iframe;if(w){var v=w.parentElement;v&&v.removeChild(w)}if(this._messageChannel.removeListener(this.handleMessageFromCallMachine),Ae()){var O=this.nativeUtils();O.removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),O.removeAppStateChangeListener(this.handleNativeAppStateChange),O.removeSystemScreenCaptureStopListener(this.handleNativeSystemScreenCaptureStop)}this._callObjectMode&&this.stopListeningForDeviceChanges(),this.resetMeetingDependentVars(),this._destroyed=!0,this.emitDailyJSEvent({action:"call-instance-destroyed"}),delete Ys[this.callClientId],!((d=window)===null||d===void 0||(d=d._daily)===null||d===void 0)&&d.instances&&delete window._daily.instances[this.callClientId],this.strictMode&&(this.callClientId=void 0)}),function(){return Se.apply(this,arguments)})},{key:"isDestroyed",value:function(){return!!this._destroyed}},{key:"loadCss",value:function(d){var w=d.bodyClass,v=d.cssFile,O=d.cssText;return Ie(),this.sendMessageToCallMachine({action:"load-css",cssFile:this.absoluteUrl(v),bodyClass:w,cssText:O}),this}},{key:"iframe",value:function(){return Ie(),this._iframe}},{key:"meetingState",value:function(){return this._callState}},{key:"accessState",value:function(){return ur(this._callObjectMode,"accessState()"),this._accessState}},{key:"participants",value:function(){return this._participants}},{key:"participantCounts",value:function(){return this._participantCounts}},{key:"waitingParticipants",value:function(){return ur(this._callObjectMode,"waitingParticipants()"),this._waitingParticipants}},{key:"validateParticipantProperties",value:function(d,w){for(var v in w){if(!Ed[v])throw new Error("unrecognized updateParticipant property ".concat(v));if(Ed[v].validate&&!Ed[v].validate(w[v],this,this._participants[d]))throw new Error(Ed[v].help)}}},{key:"updateParticipant",value:function(d,w){return this._participants.local&&this._participants.local.session_id===d&&(d="local"),d&&w&&(this.validateParticipantProperties(d,w),this.sendMessageToCallMachine({action:"update-participant",id:d,properties:w})),this}},{key:"updateParticipants",value:function(d){var w=this._participants.local&&this._participants.local.session_id;for(var v in d)v===w&&(v="local"),v&&d[v]&&this.validateParticipantProperties(v,d[v]);return this.sendMessageToCallMachine({action:"update-participants",participants:d}),this}},{key:"updateWaitingParticipant",value:(Le=me(function*(){var d=this,w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ur(this._callObjectMode,"updateWaitingParticipant()"),ze(this._callState,"updateWaitingParticipant()"),typeof w!="string"||Re(v)!=="object")throw new Error("updateWaitingParticipant() must take an id string and a updates object");return new Promise(function(O,M){d.sendMessageToCallMachine({action:"daily-method-update-waiting-participant",id:w,updates:v},function(B){B.error&&M(B.error),B.id||M(new Error("unknown error in updateWaitingParticipant()")),O({id:B.id})})})}),function(){return Le.apply(this,arguments)})},{key:"updateWaitingParticipants",value:(he=me(function*(){var d=this,w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ur(this._callObjectMode,"updateWaitingParticipants()"),ze(this._callState,"updateWaitingParticipants()"),Re(w)!=="object")throw new Error("updateWaitingParticipants() must take a mapping between ids and update objects");return new Promise(function(v,O){d.sendMessageToCallMachine({action:"daily-method-update-waiting-participants",updatesById:w},function(M){M.error&&O(M.error),M.ids||O(new Error("unknown error in updateWaitingParticipants()")),v({ids:M.ids})})})}),function(){return he.apply(this,arguments)})},{key:"requestAccess",value:(ue=me(function*(){var d=this,w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=w.access,O=v===void 0?{level:MC}:v,M=w.name,B=M===void 0?"":M;return ur(this._callObjectMode,"requestAccess()"),ze(this._callState,"requestAccess()"),new Promise(function(K,J){d.sendMessageToCallMachine({action:"daily-method-request-access",access:O,name:B},function(Z){Z.error&&J(Z.error),Z.access||J(new Error("unknown error in requestAccess()")),K({access:Z.access,granted:Z.granted})})})}),function(){return ue.apply(this,arguments)})},{key:"localAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.audio.state):null}},{key:"localVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.video.state):null}},{key:"setLocalAudio",value:function(d){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return"forceDiscardTrack"in w&&(Ae()?(console.warn("forceDiscardTrack option not supported in React Native; ignoring"),w={}):d&&(console.warn("forceDiscardTrack option only supported when calling setLocalAudio(false); ignoring"),w={})),this.sendMessageToCallMachine({action:"local-audio",state:d,options:w}),this}},{key:"localScreenAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenAudio.state):null}},{key:"localScreenVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenVideo.state):null}},{key:"updateScreenShare",value:function(d){if(this._isScreenSharing)return this.sendMessageToCallMachine({action:"local-screen-update",options:d}),this;console.warn("There is no screen share in progress. Try calling startScreenShare first.")}},{key:"setLocalVideo",value:function(d){return this.sendMessageToCallMachine({action:"local-video",state:d}),this}},{key:"_setAllowLocalAudio",value:function(d){if(this._preloadCache.allowLocalAudio=d,this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-allow-local-audio",state:d}),this}},{key:"_setAllowLocalVideo",value:function(d){if(this._preloadCache.allowLocalVideo=d,this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-allow-local-video",state:d}),this}},{key:"getReceiveSettings",value:(X=me(function*(d){var w=this,v=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).showInheritedValues,O=v!==void 0&&v;if(ur(this._callObjectMode,"getReceiveSettings()"),!this._callMachineInitialized)return this._receiveSettings;switch(Re(d)){case"string":return new Promise(function(M){w.sendMessageToCallMachine({action:"get-single-participant-receive-settings",id:d,showInheritedValues:O},function(B){M(B.receiveSettings)})});case"undefined":return this._receiveSettings;default:throw new Error('first argument to getReceiveSettings() must be a participant id (or "base"), or there should be no arguments')}}),function(d){return X.apply(this,arguments)})},{key:"updateReceiveSettings",value:(Ye=me(function*(d){var w=this;if(ur(this._callObjectMode,"updateReceiveSettings()"),!Y1(d,{allowAllParticipantsKey:!0}))throw new Error(eP({allowAllParticipantsKey:!0}));return ze(this._callState,"updateReceiveSettings()","To specify receive settings earlier, use the receiveSettings config property."),new Promise(function(v){w.sendMessageToCallMachine({action:"update-receive-settings",receiveSettings:d},function(O){v({receiveSettings:O.receiveSettings})})})}),function(d){return Ye.apply(this,arguments)})},{key:"_prepInputSettingsForSharing",value:function(d,w){if(d){var v={};if(d.audio){var O,M,B;d.audio.settings&&(!Object.keys(d.audio.settings).length&&w||(v.audio={settings:ae({},d.audio.settings)})),w&&(O=v.audio)!==null&&O!==void 0&&(O=O.settings)!==null&&O!==void 0&&O.customTrack&&(v.audio.settings={customTrack:this._sharedTracks.audioTrack});var K=((M=d.audio.processor)===null||M===void 0?void 0:M.type)==="none"&&((B=d.audio.processor)===null||B===void 0?void 0:B._isDefaultWhenNone);if(d.audio.processor&&!K){var J=ae({},d.audio.processor);delete J._isDefaultWhenNone,v.audio=ae(ae({},v.audio),{},{processor:J})}}if(d.video){var Z,pe,we;d.video.settings&&(!Object.keys(d.video.settings).length&&w||(v.video={settings:ae({},d.video.settings)})),w&&(Z=v.video)!==null&&Z!==void 0&&(Z=Z.settings)!==null&&Z!==void 0&&Z.customTrack&&(v.video.settings={customTrack:this._sharedTracks.videoTrack});var ht=((pe=d.video.processor)===null||pe===void 0?void 0:pe.type)==="none"&&((we=d.video.processor)===null||we===void 0?void 0:we._isDefaultWhenNone);if(d.video.processor&&!ht){var nn=ae({},d.video.processor);delete nn._isDefaultWhenNone,v.video=ae(ae({},v.video),{},{processor:nn})}}return v}}},{key:"getInputSettings",value:function(){var d=this;return Ie(),new Promise(function(w){w(d._getInputSettings())})}},{key:"_getInputSettings",value:function(){var d,w,v,O,M,B,K={processor:{type:"none",_isDefaultWhenNone:!0}};this._inputSettings?(d=((v=this._inputSettings)===null||v===void 0?void 0:v.video)||K,w=((O=this._inputSettings)===null||O===void 0?void 0:O.audio)||K):(d=((M=this._preloadCache)===null||M===void 0||(M=M.inputSettings)===null||M===void 0?void 0:M.video)||K,w=((B=this._preloadCache)===null||B===void 0||(B=B.inputSettings)===null||B===void 0?void 0:B.audio)||K);var J={audio:w,video:d};return this._prepInputSettingsForSharing(J,!0)}},{key:"_updatePreloadCacheInputSettings",value:function(d,w){var v=this._inputSettings||{},O={};if(d.video){var M,B,K;O.video={},d.video.settings?(O.video.settings={},w||d.video.settings.customTrack||(K=v.video)===null||K===void 0||!K.settings?O.video.settings=d.video.settings:O.video.settings=ae(ae({},v.video.settings),d.video.settings),Object.keys(O.video.settings).length||delete O.video.settings):(M=v.video)!==null&&M!==void 0&&M.settings&&(O.video.settings=v.video.settings),d.video.processor?O.video.processor=d.video.processor:(B=v.video)!==null&&B!==void 0&&B.processor&&(O.video.processor=v.video.processor)}else v.video&&(O.video=v.video);if(d.audio){var J,Z,pe;O.audio={},d.audio.settings?(O.audio.settings={},w||d.audio.settings.customTrack||(pe=v.audio)===null||pe===void 0||!pe.settings?O.audio.settings=d.audio.settings:O.audio.settings=ae(ae({},v.audio.settings),d.audio.settings),Object.keys(O.audio.settings).length||delete O.audio.settings):(J=v.audio)!==null&&J!==void 0&&J.settings&&(O.audio.settings=v.audio.settings),d.audio.processor?O.audio.processor=d.audio.processor:(Z=v.audio)!==null&&Z!==void 0&&Z.processor&&(O.audio.processor=v.audio.processor)}else v.audio&&(O.audio=v.audio);this._maybeUpdateInputSettings(O)}},{key:"_devicesFromInputSettings",value:function(d){var w,v,O=(d==null||(w=d.video)===null||w===void 0||(w=w.settings)===null||w===void 0?void 0:w.deviceId)||null,M=(d==null||(v=d.audio)===null||v===void 0||(v=v.settings)===null||v===void 0?void 0:v.deviceId)||null,B=this._preloadCache.outputDeviceId||null;return{camera:O?{deviceId:O}:{},mic:M?{deviceId:M}:{},speaker:B?{deviceId:B}:{}}}},{key:"updateInputSettings",value:(kr=me(function*(d){var w=this;return Ie(),X1(d)?d.video||d.audio?(Z1(d,this.properties.dailyConfig,this._sharedTracks),this._callObjectMode&&!this._callMachineInitialized?(this._updatePreloadCacheInputSettings(d,!0),this._getInputSettings()):new Promise(function(v,O){w.sendMessageToCallMachine({action:"update-input-settings",inputSettings:d},function(M){if(M.error)O(M.error);else{if(M.returnPreloadCache)return w._updatePreloadCacheInputSettings(d,!0),void v(w._getInputSettings());w._maybeUpdateInputSettings(M.inputSettings),v(w._prepInputSettingsForSharing(M.inputSettings,!0))}})})):this._getInputSettings():(console.error(ay()),Promise.reject(ay()))}),function(d){return kr.apply(this,arguments)})},{key:"setBandwidth",value:function(d){var w=d.kbs,v=d.trackConstraints;if(Ie(),this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-bandwidth",kbs:w,trackConstraints:v}),this}},{key:"getDailyLang",value:function(){var d=this;if(Ie(),this._callMachineInitialized)return new Promise(function(w){d.sendMessageToCallMachine({action:"get-daily-lang"},function(v){delete v.action,delete v.callbackStamp,w(v)})})}},{key:"setDailyLang",value:function(d){return Ie(),this.sendMessageToCallMachine({action:"set-daily-lang",lang:d}),this}},{key:"setProxyUrl",value:function(d){return this.sendMessageToCallMachine({action:"set-proxy-url",proxyUrl:d}),this}},{key:"setIceConfig",value:function(d){return this.sendMessageToCallMachine({action:"set-ice-config",iceConfig:d}),this}},{key:"meetingSessionSummary",value:function(){return[Wi,Zr].includes(this._callState)?this._finalSummaryOfPrevSession:this._meetingSessionSummary}},{key:"getMeetingSession",value:(tn=me(function*(){var d=this;return console.warn("getMeetingSession() is deprecated: use meetingSessionSummary(), which will return immediately"),ze(this._callState,"getMeetingSession()"),new Promise(function(w){d.sendMessageToCallMachine({action:"get-meeting-session"},function(v){delete v.action,delete v.callbackStamp,w(v)})})}),function(){return tn.apply(this,arguments)})},{key:"meetingSessionState",value:function(){return ze(this._callState,"meetingSessionState"),this._meetingSessionState}},{key:"setMeetingSessionData",value:function(d){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"replace";ur(this._callObjectMode,"setMeetingSessionData()"),ze(this._callState,"setMeetingSessionData");try{(function(v,O){new N4({data:v,mergeStrategy:O})})(d,w)}catch(v){throw console.error(v),v}try{this.sendMessageToCallMachine({action:"set-session-data",data:d,mergeStrategy:w})}catch(v){throw new Error("Error setting meeting session data: ".concat(v))}}},{key:"setUserName",value:function(d,w){var v=this;return this.properties.userName=d,new Promise(function(O){v.sendMessageToCallMachine({action:"set-user-name",name:d??"",thisMeetingOnly:Ae()||!!w&&!!w.thisMeetingOnly},function(M){delete M.action,delete M.callbackStamp,O(M)})})}},{key:"setUserData",value:(Pe=me(function*(d){var w=this;try{Q1(d)}catch(v){throw console.error(v),v}if(this.properties.userData=d,this._callMachineInitialized)return new Promise(function(v){try{w.sendMessageToCallMachine({action:"set-user-data",userData:d},function(O){delete O.action,delete O.callbackStamp,v(O)})}catch(O){throw new Error("Error setting user data: ".concat(O))}})}),function(d){return Pe.apply(this,arguments)})},{key:"validateAudioLevelInterval",value:function(d){if(d&&(d<100||typeof d!="number"))throw new Error("The interval must be a number greater than or equal to 100 milliseconds.")}},{key:"startLocalAudioLevelObserver",value:function(d){var w=this;if(typeof AudioWorkletNode>"u"&&!Ae())throw new Error("startLocalAudioLevelObserver() is not supported on this browser");if(this.validateAudioLevelInterval(d),this._callMachineInitialized)return this._isLocalAudioLevelObserverRunning=!0,new Promise(function(v,O){w.sendMessageToCallMachine({action:"start-local-audio-level-observer",interval:d},function(M){w._isLocalAudioLevelObserverRunning=!M.error,M.error?O({error:M.error}):v()})});this._preloadCache.localAudioLevelObserver={enabled:!0,interval:d}}},{key:"isLocalAudioLevelObserverRunning",value:function(){return this._isLocalAudioLevelObserverRunning}},{key:"stopLocalAudioLevelObserver",value:function(){this._preloadCache.localAudioLevelObserver=null,this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-local-audio-level-observer"})}},{key:"startRemoteParticipantsAudioLevelObserver",value:function(d){var w=this;if(this.validateAudioLevelInterval(d),this._callMachineInitialized)return this._isRemoteParticipantsAudioLevelObserverRunning=!0,new Promise(function(v,O){w.sendMessageToCallMachine({action:"start-remote-participants-audio-level-observer",interval:d},function(M){w._isRemoteParticipantsAudioLevelObserverRunning=!M.error,M.error?O({error:M.error}):v()})});this._preloadCache.remoteParticipantsAudioLevelObserver={enabled:!0,interval:d}}},{key:"isRemoteParticipantsAudioLevelObserverRunning",value:function(){return this._isRemoteParticipantsAudioLevelObserverRunning}},{key:"stopRemoteParticipantsAudioLevelObserver",value:function(){this._preloadCache.remoteParticipantsAudioLevelObserver=null,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-remote-participants-audio-level-observer"})}},{key:"startCamera",value:(N=me(function*(){var d=this,w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ur(this._callObjectMode,"startCamera()"),om(this._callState,this._isPreparingToJoin,"startCamera()","Did you mean to use setLocalAudio() and/or setLocalVideo() instead?"),this.needsLoad())try{yield this.load(w)}catch(v){return Promise.reject(v)}else{if(this._didPreAuth){if(w.url&&w.url!==this.properties.url)return console.error("url in startCamera() is different than the one used in preAuth()"),Promise.reject();if(w.token&&w.token!==this.properties.token)return console.error("token in startCamera() is different than the one used in preAuth()"),Promise.reject()}this.validateProperties(w),this.properties=ae(ae({},this.properties),w)}return new Promise(function(v){d._preloadCache.inputSettings=d._prepInputSettingsForSharing(d._inputSettings,!1),d.sendMessageToCallMachine({action:"start-camera",properties:Jo(d.properties,d.callClientId),preloadCache:Jo(d._preloadCache,d.callClientId)},function(O){v({camera:O.camera,mic:O.mic,speaker:O.speaker})})})}),function(){return N.apply(this,arguments)})},{key:"validateCustomTrack",value:function(d,w,v){if(v&&v.length>50)throw new Error("Custom track `trackName` must not be more than 50 characters");if(w&&w!=="music"&&w!=="speech"&&!(w instanceof Object))throw new Error("Custom track `mode` must be either `music` | `speech` | `DailyMicAudioModeSettings` or `undefined`");if(v&&["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo","customVideoDefaults"].includes(v))throw new Error("Custom track `trackName` must not match a track name already used by daily: cam-audio, cam-video, customVideoDefaults, screen-video, screen-audio, rmpAudio, rmpVideo");if(!(d instanceof MediaStreamTrack))throw new Error("Custom tracks provided must be instances of MediaStreamTrack")}},{key:"startCustomTrack",value:function(){var d=this,w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{track,mode,trackName,ignoreAudioLevel};return Ie(),ze(this._callState,"startCustomTrack()"),this.validateCustomTrack(w.track,w.mode,w.trackName),new Promise(function(v,O){d._sharedTracks.customTrack=w.track,w.track=ui,d.sendMessageToCallMachine({action:"start-custom-track",properties:w},function(M){M.error?O({error:M.error}):v(M.mediaTag)})})}},{key:"stopCustomTrack",value:function(d){var w=this;return Ie(),ze(this._callState,"stopCustomTrack()"),new Promise(function(v){w.sendMessageToCallMachine({action:"stop-custom-track",mediaTag:d},function(O){v(O.mediaTag)})})}},{key:"setCamera",value:function(d){var w=this;return Rl(),Sd(this._callMachineInitialized,"setCamera()"),new Promise(function(v){w.sendMessageToCallMachine({action:"set-camera",cameraDeviceId:d},function(O){v({device:O.device})})})}},{key:"setAudioDevice",value:(V=me(function*(d){return Rl(),this.nativeUtils().setAudioDevice(d),{deviceId:yield this.nativeUtils().getAudioDevice()}}),function(d){return V.apply(this,arguments)})},{key:"cycleCamera",value:function(){var d=this,w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(v){d.sendMessageToCallMachine({action:"cycle-camera",properties:w},function(O){v({device:O.device})})})}},{key:"cycleMic",value:function(){var d=this;return Ie(),new Promise(function(w){d.sendMessageToCallMachine({action:"cycle-mic"},function(v){w({device:v.device})})})}},{key:"getCameraFacingMode",value:function(){var d=this;return Rl(),new Promise(function(w){d.sendMessageToCallMachine({action:"get-camera-facing-mode"},function(v){w(v.facingMode)})})}},{key:"setInputDevicesAsync",value:(b=me(function*(d){var w=this,v=d.audioDeviceId,O=d.videoDeviceId,M=d.audioSource,B=d.videoSource;if(Ie(),M!==void 0&&(v=M),B!==void 0&&(O=B),typeof v=="boolean"&&(this._setAllowLocalAudio(v),v=void 0),typeof O=="boolean"&&(this._setAllowLocalVideo(O),O=void 0),!v&&!O)return yield this.getInputDevices();var K={};return v&&(v instanceof MediaStreamTrack?(this._sharedTracks.audioTrack=v,v=ui,K.audio={settings:{customTrack:v}}):(delete this._sharedTracks.audioTrack,K.audio={settings:{deviceId:v}})),O&&(O instanceof MediaStreamTrack?(this._sharedTracks.videoTrack=O,O=ui,K.video={settings:{customTrack:O}}):(delete this._sharedTracks.videoTrack,K.video={settings:{deviceId:O}})),this._callObjectMode&&this.needsLoad()?(this._updatePreloadCacheInputSettings(K,!1),this._devicesFromInputSettings(this._inputSettings)):new Promise(function(J){w.sendMessageToCallMachine({action:"set-input-devices",audioDeviceId:v,videoDeviceId:O},function(Z){if(delete Z.action,delete Z.callbackStamp,Z.returnPreloadCache)return w._updatePreloadCacheInputSettings(K,!1),void J(w._devicesFromInputSettings(w._inputSettings));J(Z)})})}),function(d){return b.apply(this,arguments)})},{key:"setOutputDeviceAsync",value:(x=me(function*(d){var w=this,v=d.outputDeviceId;if(Ie(),!v||typeof v!="string")throw new Error("outputDeviceId must be provided and must be a valid device id");return this._preloadCache.outputDeviceId=v,this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise(function(O,M){w.sendMessageToCallMachine({action:"set-output-device",outputDeviceId:v},function(B){if(delete B.action,delete B.callbackStamp,B.error){var K=new Error(B.error.message);return K.type=B.error.type,void M(K)}B.returnPreloadCache?O(w._devicesFromInputSettings(w._inputSettings)):O(B)})})}),function(d){return x.apply(this,arguments)})},{key:"getInputDevices",value:(R=me(function*(){var d=this;return this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise(function(w){d.sendMessageToCallMachine({action:"get-input-devices"},function(v){v.returnPreloadCache?w(d._devicesFromInputSettings(d._inputSettings)):w({camera:v.camera,mic:v.mic,speaker:v.speaker})})})}),function(){return R.apply(this,arguments)})},{key:"nativeInCallAudioMode",value:function(){return Rl(),this._nativeInCallAudioMode}},{key:"setNativeInCallAudioMode",value:function(d){if(Rl(),[sT,eU].includes(d)){if(d!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=d,!this.disableReactNativeAutoDeviceManagement("audio")&&Kd(this._callState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}else console.error("invalid in-call audio mode specified: ",d)}},{key:"preAuth",value:(I=me(function*(){var d=this,w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ur(this._callObjectMode,"preAuth()"),om(this._callState,this._isPreparingToJoin,"preAuth()"),this.needsLoad()&&(yield this.load(w)),!w.url)throw new Error("preAuth() requires at least a url to be provided");return this.validateProperties(w),this.properties=ae(ae({},this.properties),w),new Promise(function(v,O){d._preloadCache.inputSettings=d._prepInputSettingsForSharing(d._inputSettings,!1),d.sendMessageToCallMachine({action:"daily-method-preauth",properties:Jo(d.properties,d.callClientId),preloadCache:Jo(d._preloadCache,d.callClientId)},function(M){return M.error?O(M.error):M.access?(d._didPreAuth=!0,void v({access:M.access})):O(new Error("unknown error in preAuth()"))})})}),function(){return I.apply(this,arguments)})},{key:"load",value:(P=me(function*(d){var w=this;if(this.needsLoad()){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");if(d&&(this.validateProperties(d),this.properties=ae(ae({},this.properties),d)),!this._callObjectMode&&!this.properties.url)throw new Error("can't load iframe meeting because url property isn't set");return this._updateCallState(NS),this.emitDailyJSEvent({action:BC}),this._callObjectMode?new Promise(function(v,O){w._callObjectLoader.cancel();var M=Date.now();w._callObjectLoader.load(w.properties.dailyConfig,function(B){w._bundleLoadTime=B?"no-op":Date.now()-M,w._updateCallState(MS),B&&w.emitDailyJSEvent({action:Jg}),v()},function(B,K){if(w.emitDailyJSEvent({action:qC}),!K){w._updateCallState(Zr),w.resetMeetingDependentVars();var J={action:ey,errorMsg:B.msg,error:{type:"connection-error",msg:"Failed to load call object bundle.",details:{on:"load",sourceError:B,bundleUrl:Fh(w.properties.dailyConfig)}}};w._maybeSendToSentry(J),w.emitDailyJSEvent(J),O(B.msg)}})}):(this._iframe.src=vC(this.assembleMeetingUrl(),this.properties.dailyConfig),new Promise(function(v,O){w._loadedCallback=function(M){w._callState!==Zr?(w._updateCallState(MS),(w.properties.cssFile||w.properties.cssText)&&w.loadCss(w.properties),v()):O(M)}}))}}),function(d){return P.apply(this,arguments)})},{key:"join",value:(q=me(function*(){var d=this,w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._testCallInProgress&&this.stopTestCallQuality();var v=!1;if(this.needsLoad()){this.updateIsPreparingToJoin(!0);try{yield this.load(w)}catch(O){return this.updateIsPreparingToJoin(!1),Promise.reject(O)}}else{if(v=!(!this.properties.cssFile&&!this.properties.cssText),this._didPreAuth){if(w.url&&w.url!==this.properties.url)return console.error("url in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject();if(w.token&&w.token!==this.properties.token)return console.error("token in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject()}if(w.url&&!this._callObjectMode&&w.url&&w.url!==this.properties.url)return console.error("url in join() is different than the one used in load() (".concat(this.properties.url," -> ").concat(w.url,")")),this.updateIsPreparingToJoin(!1),Promise.reject();this.validateProperties(w),this.properties=ae(ae({},this.properties),w)}return w.showLocalVideo!==void 0&&(this._callObjectMode?console.error("showLocalVideo is not available in callObject mode"):this._showLocalVideo=!!w.showLocalVideo),w.showParticipantsBar!==void 0&&(this._callObjectMode?console.error("showParticipantsBar is not available in callObject mode"):this._showParticipantsBar=!!w.showParticipantsBar),this._callState===ts||this._callState===Hh?(console.warn("already joined meeting, call leave() before joining again"),void this.updateIsPreparingToJoin(!1)):(this._updateCallState(Hh,!1),this.emitDailyJSEvent({action:WC}),this._preloadCache.inputSettings=this._prepInputSettingsForSharing(this._inputSettings||{},!1),this.sendMessageToCallMachine({action:"join-meeting",properties:Jo(this.properties,this.callClientId),preloadCache:Jo(this._preloadCache,this.callClientId)}),new Promise(function(O,M){d._joinedCallback=function(B,K){if(d._callState!==Zr){if(d._updateCallState(ts),B)for(var J in B){if(d._callObjectMode){var Z=d._callMachine().store;GS(B[J],Z),KS(B[J],Z),JS(B[J],d._participants[J],Z)}d._participants[J]=ae({},B[J]),d.toggleParticipantAudioBasedOnNativeAudioFocus()}v&&d.loadCss(d.properties),O(B)}else M(K)}}))}),function(){return q.apply(this,arguments)})},{key:"leave",value:($=me(function*(){var d=this;return this._testCallInProgress&&this.stopTestCallQuality(),new Promise(function(w){d._callState===Wi||d._callState===Zr?w():d._callObjectLoader&&!d._callObjectLoader.loaded?(d._callObjectLoader.cancel(),d._updateCallState(Wi),d.resetMeetingDependentVars(),d.emitDailyJSEvent({action:Wi}),w()):(d._resolveLeave=w,d.sendMessageToCallMachine({action:"leave-meeting"}))})}),function(){return $.apply(this,arguments)})},{key:"startScreenShare",value:(L=me(function*(){var d=this,w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Sd(this._callMachineInitialized,"startScreenShare()"),w.screenVideoSendSettings&&this._validateVideoSendSettings("screenVideo",w.screenVideoSendSettings),w.mediaStream&&(this._sharedTracks.screenMediaStream=w.mediaStream,w.mediaStream=ui),typeof DailyNativeUtils<"u"&&DailyNativeUtils.isIOS!==void 0&&DailyNativeUtils.isIOS){var v=this.nativeUtils();if(yield v.isScreenBeingCaptured())return void this.emitDailyJSEvent({action:Zg,type:"screen-share-error",errorMsg:"Could not start the screen sharing. The screen is already been captured!"});v.setSystemScreenCaptureStartCallback(function(){v.setSystemScreenCaptureStartCallback(null),d.sendMessageToCallMachine({action:VS,captureOptions:w})}),v.presentSystemScreenCapturePrompt()}else this.sendMessageToCallMachine({action:VS,captureOptions:w})}),function(){return L.apply(this,arguments)})},{key:"stopScreenShare",value:function(){Sd(this._callMachineInitialized,"stopScreenShare()"),this.sendMessageToCallMachine({action:"local-screen-stop"})}},{key:"startRecording",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},w=d.type;if(w&&w!=="cloud"&&w!=="raw-tracks"&&w!=="local")throw new Error("invalid type: ".concat(w,", allowed values 'cloud', 'raw-tracks', or 'local'"));this.sendMessageToCallMachine(ae({action:"local-recording-start"},d))}},{key:"updateRecording",value:function(d){var w=d.layout,v=w===void 0?{preset:"default"}:w,O=d.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-recording",layout:v,instanceId:O})}},{key:"stopRecording",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(ae({action:"local-recording-stop"},d))}},{key:"startLiveStreaming",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(ae({action:"daily-method-start-live-streaming"},d))}},{key:"updateLiveStreaming",value:function(d){var w=d.layout,v=w===void 0?{preset:"default"}:w,O=d.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming",layout:v,instanceId:O})}},{key:"addLiveStreamingEndpoints",value:function(d){var w=d.endpoints,v=d.instanceId;this.sendMessageToCallMachine({action:jS,endpointsOp:I4,endpoints:w,instanceId:v})}},{key:"removeLiveStreamingEndpoints",value:function(d){var w=d.endpoints,v=d.instanceId;this.sendMessageToCallMachine({action:jS,endpointsOp:A4,endpoints:w,instanceId:v})}},{key:"stopLiveStreaming",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(ae({action:"daily-method-stop-live-streaming"},d))}},{key:"validateDailyConfig",value:function(d){d.camSimulcastEncodings&&(console.warn("camSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide camera simulcast settings."),this.validateSimulcastEncodings(d.camSimulcastEncodings)),d.screenSimulcastEncodings&&console.warn("screenSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide screen simulcast settings."),j1()&&d.noAutoDefaultDeviceChange&&console.warn("noAutoDefaultDeviceChange is not supported on Android, and will be ignored.")}},{key:"validateSimulcastEncodings",value:function(d){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,v=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(d){if(!(d instanceof Array||Array.isArray(d)))throw new Error("encodings must be an Array");if(!pT(d.length,1,3))throw new Error("encodings must be an Array with between 1 to ".concat(3," layers"));for(var O=0;O<d.length;O++){var M=d[O];for(var B in this._validateEncodingLayerHasValidProperties(M),M)if(sm.includes(B)){if(typeof M[B]!="number")throw new Error("".concat(B," must be a number"));if(w){var K=w[B],J=K.min,Z=K.max;if(!pT(M[B],J,Z))throw new Error("".concat(B," value not in range. valid range: ").concat(J," to ").concat(Z))}}else if(!["active","scalabilityMode"].includes(B))throw new Error("Invalid key ".concat(B,", valid keys are:")+Object.values(sm));if(v&&!M.hasOwnProperty("maxBitrate"))throw new Error("maxBitrate is not specified")}}}},{key:"startRemoteMediaPlayer",value:(C=me(function*(d){var w=this,v=d.url,O=d.settings,M=O===void 0?{state:ty.PLAY}:O;try{(function(B){if(typeof B!="string")throw new Error('url parameter must be "string" type')})(v),fT(M),function(B){for(var K in B)if(!lT.includes(K))throw new Error("Invalid key ".concat(K,", valid keys are: ").concat(lT));B.simulcastEncodings&&this.validateSimulcastEncodings(B.simulcastEncodings,J1,!0)}(M)}catch(B){throw console.error("invalid argument Error: ".concat(B)),console.error(`startRemoteMediaPlayer arguments must be of the form:
  { url: "playback url",
  settings?:
  {state: "play"|"pause", simulcastEncodings?: [{}] } }`),B}return new Promise(function(B,K){w.sendMessageToCallMachine({action:"daily-method-start-remote-media-player",url:v,settings:M},function(J){J.error?K({error:J.error,errorMsg:J.errorMsg}):B({session_id:J.session_id,remoteMediaPlayerState:{state:J.state,settings:J.settings}})})})}),function(d){return C.apply(this,arguments)})},{key:"stopRemoteMediaPlayer",value:(y=me(function*(d){var w=this;if(typeof d!="string")throw new Error(" remotePlayerID must be of type string");return new Promise(function(v,O){w.sendMessageToCallMachine({action:"daily-method-stop-remote-media-player",session_id:d},function(M){M.error?O({error:M.error,errorMsg:M.errorMsg}):v()})})}),function(d){return y.apply(this,arguments)})},{key:"updateRemoteMediaPlayer",value:(_=me(function*(d){var w=this,v=d.session_id,O=d.settings;try{fT(O)}catch(M){throw console.error("invalid argument Error: ".concat(M)),console.error(`updateRemoteMediaPlayer arguments must be of the form:
  session_id: "participant session",
  { settings?: {state: "play"|"pause"} }`),M}return new Promise(function(M,B){w.sendMessageToCallMachine({action:"daily-method-update-remote-media-player",session_id:v,settings:O},function(K){K.error?B({error:K.error,errorMsg:K.errorMsg}):M({session_id:K.session_id,remoteMediaPlayerState:{state:K.state,settings:K.settings}})})})}),function(d){return _.apply(this,arguments)})},{key:"startTranscription",value:function(d){ze(this._callState,"startTranscription()"),this.sendMessageToCallMachine(ae({action:"daily-method-start-transcription"},d))}},{key:"updateTranscription",value:function(d){if(ze(this._callState,"updateTranscription()"),!d)throw new Error("updateTranscription Error: options is mandatory");if(Re(d)!=="object")throw new Error("updateTranscription Error: options must be object type");if(d.participants&&!Array.isArray(d.participants))throw new Error("updateTranscription Error: participants must be an array");this.sendMessageToCallMachine(ae({action:"daily-method-update-transcription"},d))}},{key:"stopTranscription",value:function(d){if(ze(this._callState,"stopTranscription()"),d&&Re(d)!=="object")throw new Error("stopTranscription Error: options must be object type");if(d&&!d.instanceId)throw new Error('"instanceId" not provided');this.sendMessageToCallMachine(ae({action:"daily-method-stop-transcription"},d))}},{key:"startDialOut",value:(k=me(function*(d){var w=this;ze(this._callState,"startDialOut()");var v=function(K){if(K){if(!Array.isArray(K))throw new Error("Error starting dial out: audio codec must be an array");if(K.length<=0)throw new Error("Error starting dial out: audio codec array specified but empty");K.forEach(function(J){if(typeof J!="string")throw new Error("Error starting dial out: audio codec must be a string");if(J!=="OPUS"&&J!=="PCMU"&&J!=="PCMA"&&J!=="G722")throw new Error("Error starting dial out: audio codec must be one of OPUS, PCMU, PCMA, G722")})}};if(!d.sipUri&&!d.phoneNumber)throw new Error("Error starting dial out: either a sip uri or phone number must be provided");if(d.sipUri&&d.phoneNumber)throw new Error("Error starting dial out: only one of sip uri or phone number must be provided");if(d.sipUri){if(typeof d.sipUri!="string")throw new Error("Error starting dial out: sipUri must be a string");if(!d.sipUri.startsWith("sip:"))throw new Error("Error starting dial out: Invalid SIP URI, must start with 'sip:'");if(d.video&&typeof d.video!="boolean")throw new Error("Error starting dial out: video must be a boolean value");(function(K){if(K&&(v(K.audio),K.video)){if(!Array.isArray(K.video))throw new Error("Error starting dial out: video codec must be an array");if(K.video.length<=0)throw new Error("Error starting dial out: video codec array specified but empty");K.video.forEach(function(J){if(typeof J!="string")throw new Error("Error starting dial out: video codec must be a string");if(J!=="H264"&&J!=="VP8")throw new Error("Error starting dial out: video codec must be H264 or VP8")})}})(d.codecs)}if(d.phoneNumber){if(typeof d.phoneNumber!="string")throw new Error("Error starting dial out: phoneNumber must be a string");if(!/^\+\d{1,}$/.test(d.phoneNumber))throw new Error("Error starting dial out: Invalid phone number, must be valid phone number as per E.164");d.codecs&&v(d.codecs.audio)}if(d.callerId){if(typeof d.callerId!="string")throw new Error("Error starting dial out: callerId must be a string");if(d.sipUri)throw new Error("Error starting dial out: callerId not allowed with sipUri")}if(d.displayName){if(typeof d.displayName!="string")throw new Error("Error starting dial out: displayName must be a string");if(d.displayName.length>=200)throw new Error("Error starting dial out: displayName length must be less than 200")}if(d.userId){if(typeof d.userId!="string")throw new Error("Error starting dial out: userId must be a string");if(d.userId.length>36)throw new Error("Error starting dial out: userId length must be less than or equal to 36")}if(uT(d),d.permissions&&d.permissions.canReceive){var O=Xt(G1.validateJSONObject(d.permissions.canReceive),2),M=O[0],B=O[1];if(!M)throw new Error(B)}if(d.provider){if(d.provider!=="daily")throw new Error("Error: provider can be set only to 'daily', got: ".concat(d.provider));if(d.phoneNumber)throw new Error("Error starting dial out: provider valid only for sipUri, not phoneNumber");console.warn("(pre-beta) provider=daily is currently in pre-beta, things might break!")}return new Promise(function(K,J){w.sendMessageToCallMachine(ae({action:"dialout-start"},d),function(Z){Z.error?J(Z.error):K(Z)})})}),function(d){return k.apply(this,arguments)})},{key:"stopDialOut",value:function(d){var w=this;return ze(this._callState,"stopDialOut()"),new Promise(function(v,O){w.sendMessageToCallMachine(ae({action:"dialout-stop"},d),function(M){M.error?O(M.error):v(M)})})}},{key:"sipCallTransfer",value:(E=me(function*(d){var w=this;if(ze(this._callState,"sipCallTransfer()"),!d)throw new Error("sipCallTransfer() requires a sessionId and toEndPoint");return d.useSipRefer=!1,hT(d,"sipCallTransfer"),uT(d),new Promise(function(v,O){w.sendMessageToCallMachine(ae({action:FS},d),function(M){M.error?O(M.error):v(M)})})}),function(d){return E.apply(this,arguments)})},{key:"sipRefer",value:(S=me(function*(d){var w=this;if(ze(this._callState,"sipRefer()"),!d)throw new Error("sessionId and toEndPoint are mandatory parameter");return d.useSipRefer=!0,hT(d,"sipRefer"),new Promise(function(v,O){w.sendMessageToCallMachine(ae({action:FS},d),function(M){M.error?O(M.error):v(M)})})}),function(d){return S.apply(this,arguments)})},{key:"sendDTMF",value:(T=me(function*(d){var w=this;return ze(this._callState,"sendDTMF()"),function(v){var O=v.sessionId,M=v.tones;if(!O||!M)throw new Error("sessionId and tones are mandatory parameter");if(typeof O!="string"||typeof M!="string")throw new Error("sessionId and tones should be of string type");if(M.length>20)throw new Error("tones string must be upto 20 characters");var B=/[^0-9A-D*#]/g,K=M.match(B);if(K&&K[0])throw new Error("".concat(K[0]," is not valid DTMF tone"))}(d),new Promise(function(v,O){w.sendMessageToCallMachine(ae({action:"send-dtmf"},d),function(M){M.error?O(M.error):v(M)})})}),function(d){return T.apply(this,arguments)})},{key:"getNetworkStats",value:function(){var d=this;return this._callState!==ts?Promise.resolve(ae({stats:{latest:{}}},this._network)):new Promise(function(w){d.sendMessageToCallMachine({action:"get-calc-stats"},function(v){w(ae(ae({},d._network),{},{stats:v.stats}))})})}},{key:"testWebsocketConnectivity",value:(g=me(function*(){var d=this;if(am(this._testCallInProgress,"testWebsocketConnectivity()"),this.needsLoad())try{yield this.load()}catch(w){return Promise.reject(w)}return new Promise(function(w,v){d.sendMessageToCallMachine({action:"test-websocket-connectivity"},function(O){O.error?v(O.error):w(O.results)})})}),function(){return g.apply(this,arguments)})},{key:"abortTestWebsocketConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-websocket-connectivity"})}},{key:"_validateVideoTrackForNetworkTests",value:function(d){return d?d instanceof MediaStreamTrack?!!J4(d)||(console.error("Video track is not playable. This test needs a live video track."),!1):(console.error("Video track needs to be of type `MediaStreamTrack`."),!1):(console.error("Missing video track. You must provide a video track in order to run this test."),!1)}},{key:"testCallQuality",value:(p=me(function*(){var d=this;Ie(),ur(this._callObjectMode,"testCallQuality()"),Sd(this._callMachineInitialized,"testCallQuality()",null,!0),om(this._callState,this._isPreparingToJoin,"testCallQuality()");var w=this._testCallAlreadyInProgress,v=function(M){w||(d._testCallInProgress=M)};if(v(!0),this.needsLoad())try{var O=this._callState;yield this.load(),this._callState=O}catch(M){return v(!1),Promise.reject(M)}return new Promise(function(M){d.sendMessageToCallMachine({action:"test-call-quality",dailyJsVersion:d.properties.dailyJsVersion},function(B){var K=B.results,J=K.result,Z=PE(K,X4);if(J==="failed"){var pe,we=ae({},Z);(pe=Z.error)!==null&&pe!==void 0&&pe.details?(Z.error.details=JSON.parse(Z.error.details),we.error=ae(ae({},we.error),{},{details:ae({},we.error.details)}),we.error.details.duringTest="testCallQuality"):(we.error=we.error?ae({},we.error):{},we.error.details={duringTest:"testCallQuality"}),d._maybeSendToSentry(we)}v(!1),M(ae({result:J},Z))})})}),function(){return p.apply(this,arguments)})},{key:"stopTestCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-call-quality"})}},{key:"testConnectionQuality",value:(h=me(function*(d){var w;Ae()?(console.warn("testConnectionQuality() is deprecated: use testPeerToPeerCallQuality() instead"),w=yield this.testPeerToPeerCallQuality(d)):(console.warn("testConnectionQuality() is deprecated: use testCallQuality() instead"),w=yield this.testCallQuality());var v={result:w.result,secondsElapsed:w.secondsElapsed};return w.data&&(v.data={maxRTT:w.data.maxRoundTripTime,packetLoss:w.data.avgRecvPacketLoss}),v}),function(d){return h.apply(this,arguments)})},{key:"testPeerToPeerCallQuality",value:(u=me(function*(d){var w=this;if(am(this._testCallInProgress,"testPeerToPeerCallQuality()"),this.needsLoad())try{yield this.load()}catch(M){return Promise.reject(M)}var v=d.videoTrack,O=d.duration;if(!this._validateVideoTrackForNetworkTests(v))throw new Error("Video track error");return this._sharedTracks.videoTrackForConnectionQualityTest=v,new Promise(function(M,B){w.sendMessageToCallMachine({action:"test-p2p-call-quality",duration:O},function(K){K.error?B(K.error):M(K.results)})})}),function(d){return u.apply(this,arguments)})},{key:"stopTestConnectionQuality",value:function(){Ae()?(console.warn("stopTestConnectionQuality() is deprecated: use testPeerToPeerCallQuality() and stopTestPeerToPeerCallQuality() instead"),this.stopTestPeerToPeerCallQuality()):(console.warn("stopTestConnectionQuality() is deprecated: use testCallQuality() and stopTestCallQuality() instead"),this.stopTestCallQuality())}},{key:"stopTestPeerToPeerCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-p2p-call-quality"})}},{key:"testNetworkConnectivity",value:(l=me(function*(d){var w=this;if(am(this._testCallInProgress,"testNetworkConnectivity()"),this.needsLoad())try{yield this.load()}catch(v){return Promise.reject(v)}if(!this._validateVideoTrackForNetworkTests(d))throw new Error("Video track error");return this._sharedTracks.videoTrackForNetworkConnectivityTest=d,new Promise(function(v,O){w.sendMessageToCallMachine({action:"test-network-connectivity"},function(M){M.error?O(M.error):v(M.results)})})}),function(d){return l.apply(this,arguments)})},{key:"abortTestNetworkConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-network-connectivity"})}},{key:"getCpuLoadStats",value:function(){var d=this;return new Promise(function(w){d._callState===ts?d.sendMessageToCallMachine({action:"get-cpu-load-stats"},function(v){w(v.cpuStats)}):w({cpuLoadState:void 0,cpuLoadStateReason:void 0,stats:{}})})}},{key:"_validateEncodingLayerHasValidProperties",value:function(d){var w;if(!(((w=Object.keys(d))===null||w===void 0?void 0:w.length)>0))throw new Error("Empty encoding is not allowed. At least one of these valid keys should be specified:"+Object.values(sm))}},{key:"_validateVideoSendSettings",value:function(d,w){var v=d==="screenVideo"?["default-screen-video","detail-optimized","motion-optimized","motion-and-detail-balanced"]:["default-video","bandwidth-optimized","bandwidth-and-quality-balanced","quality-optimized","adaptive-2-layers","adaptive-3-layers"],O="Video send settings should be either an object or one of the supported presets: ".concat(v.join());if(typeof w=="string"){if(!v.includes(w))throw new Error(O)}else{if(Re(w)!=="object")throw new Error(O);if(!w.maxQuality&&!w.encodings&&w.allowAdaptiveLayers===void 0)throw new Error("Video send settings must contain at least maxQuality, allowAdaptiveLayers or encodings attribute");if(w.maxQuality&&["low","medium","high"].indexOf(w.maxQuality)===-1)throw new Error("maxQuality must be either low, medium or high");if(w.encodings){var M=!1;switch(Object.keys(w.encodings).length){case 1:M=!w.encodings.low;break;case 2:M=!w.encodings.low||!w.encodings.medium;break;case 3:M=!w.encodings.low||!w.encodings.medium||!w.encodings.high;break;default:M=!0}if(M)throw new Error("Encodings must be defined as: low, low and medium, or low, medium and high.");w.encodings.low&&this._validateEncodingLayerHasValidProperties(w.encodings.low),w.encodings.medium&&this._validateEncodingLayerHasValidProperties(w.encodings.medium),w.encodings.high&&this._validateEncodingLayerHasValidProperties(w.encodings.high)}}}},{key:"validateUpdateSendSettings",value:function(d){var w=this;if(!d||Object.keys(d).length===0)throw new Error("Send settings must contain at least information for one track!");Object.entries(d).forEach(function(v){var O=Xt(v,2),M=O[0],B=O[1];w._validateVideoSendSettings(M,B)})}},{key:"updateSendSettings",value:function(d){var w=this;return this.validateUpdateSendSettings(d),this.needsLoad()?(this._preloadCache.sendSettings=d,{sendSettings:this._preloadCache.sendSettings}):new Promise(function(v,O){w.sendMessageToCallMachine({action:"update-send-settings",sendSettings:d},function(M){M.error?O(M.error):v(M.sendSettings)})})}},{key:"getSendSettings",value:function(){return this._sendSettings||this._preloadCache.sendSettings}},{key:"getLocalAudioLevel",value:function(){return this._localAudioLevel}},{key:"getRemoteParticipantsAudioLevel",value:function(){return this._remoteParticipantsAudioLevel}},{key:"getActiveSpeaker",value:function(){return Ie(),this._activeSpeaker}},{key:"setActiveSpeakerMode",value:function(d){return Ie(),this.sendMessageToCallMachine({action:"set-active-speaker-mode",enabled:d}),this}},{key:"activeSpeakerMode",value:function(){return Ie(),this._activeSpeakerMode}},{key:"subscribeToTracksAutomatically",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:"setSubscribeToTracksAutomatically",value:function(d){return ze(this._callState,"setSubscribeToTracksAutomatically()","Use the subscribeToTracksAutomatically configuration property."),this._preloadCache.subscribeToTracksAutomatically=d,this.sendMessageToCallMachine({action:"daily-method-subscribe-to-tracks-automatically",enabled:d}),this}},{key:"enumerateDevices",value:(a=me(function*(){var d=this;if(this._callObjectMode){var w=yield navigator.mediaDevices.enumerateDevices();return Co()==="Firefox"&&Wh().major>115&&Wh().major<123&&(w=w.filter(function(v){return v.kind!=="audiooutput"})),{devices:w.map(function(v){var O=JSON.parse(JSON.stringify(v));if(!Ae()&&v.kind==="videoinput"&&v.getCapabilities){var M,B=v.getCapabilities();O.facing=(B==null||(M=B.facingMode)===null||M===void 0?void 0:M.length)>=1?B.facingMode[0]:void 0}return O})}}return new Promise(function(v){d.sendMessageToCallMachine({action:"enumerate-devices"},function(O){v({devices:O.devices})})})}),function(){return a.apply(this,arguments)})},{key:"sendAppMessage",value:function(d){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"*";if(ze(this._callState,"sendAppMessage()"),JSON.stringify(d).length>this._maxAppMessageSize)throw new Error("Message data too large. Max size is "+this._maxAppMessageSize);return this.sendMessageToCallMachine({action:"app-msg",data:d,to:w}),this}},{key:"addFakeParticipant",value:function(d){return Ie(),ze(this._callState,"addFakeParticipant()"),this.sendMessageToCallMachine(ae({action:"add-fake-participant"},d)),this}},{key:"setShowNamesMode",value:function(d){return In(this._callObjectMode,"setShowNamesMode()"),Ie(),d&&d!=="always"&&d!=="never"?(console.error('setShowNamesMode argument should be "always", "never", or false'),this):(this.sendMessageToCallMachine({action:"set-show-names",mode:d}),this)}},{key:"setShowLocalVideo",value:function(){var d=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return In(this._callObjectMode,"setShowLocalVideo()"),Ie(),ze(this._callState,"setShowLocalVideo()"),typeof d!="boolean"?(console.error("setShowLocalVideo only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-local-video",show:d}),this._showLocalVideo=d,this)}},{key:"showLocalVideo",value:function(){return In(this._callObjectMode,"showLocalVideo()"),Ie(),this._showLocalVideo}},{key:"setShowParticipantsBar",value:function(){var d=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return In(this._callObjectMode,"setShowParticipantsBar()"),Ie(),ze(this._callState,"setShowParticipantsBar()"),typeof d!="boolean"?(console.error("setShowParticipantsBar only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-participants-bar",show:d}),this._showParticipantsBar=d,this)}},{key:"showParticipantsBar",value:function(){return In(this._callObjectMode,"showParticipantsBar()"),Ie(),this._showParticipantsBar}},{key:"customIntegrations",value:function(){return Ie(),In(this._callObjectMode,"customIntegrations()"),this._customIntegrations}},{key:"setCustomIntegrations",value:function(d){return Ie(),In(this._callObjectMode,"setCustomIntegrations()"),ze(this._callState,"setCustomIntegrations()"),rP(d)?(this.sendMessageToCallMachine({action:"set-custom-integrations",integrations:d}),this._customIntegrations=d,this):this}},{key:"startCustomIntegrations",value:function(d){var w=this;if(Ie(),In(this._callObjectMode,"startCustomIntegrations()"),ze(this._callState,"startCustomIntegrations()"),Array.isArray(d)&&d.some(function(M){return typeof M!="string"})||!Array.isArray(d)&&typeof d!="string")return console.error("startCustomIntegrations() only accepts string | string[]"),this;var v=typeof d=="string"?[d]:d,O=v.filter(function(M){return!(M in w._customIntegrations)});return O.length?(console.error(`Can't find custom integration(s): "`.concat(O.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"start-custom-integrations",ids:v}),this)}},{key:"stopCustomIntegrations",value:function(d){var w=this;if(Ie(),In(this._callObjectMode,"stopCustomIntegrations()"),ze(this._callState,"stopCustomIntegrations()"),Array.isArray(d)&&d.some(function(M){return typeof M!="string"})||!Array.isArray(d)&&typeof d!="string")return console.error("stopCustomIntegrations() only accepts string | string[]"),this;var v=typeof d=="string"?[d]:d,O=v.filter(function(M){return!(M in w._customIntegrations)});return O.length?(console.error(`Can't find custom integration(s): "`.concat(O.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"stop-custom-integrations",ids:v}),this)}},{key:"customTrayButtons",value:function(){return In(this._callObjectMode,"customTrayButtons()"),Ie(),this._customTrayButtons}},{key:"updateCustomTrayButtons",value:function(d){return In(this._callObjectMode,"updateCustomTrayButtons()"),Ie(),ze(this._callState,"updateCustomTrayButtons()"),nP(d)?(this.sendMessageToCallMachine({action:"update-custom-tray-buttons",btns:d}),this._customTrayButtons=d,this):(console.error("updateCustomTrayButtons only accepts a dictionary of the type ".concat(JSON.stringify(Kh))),this)}},{key:"theme",value:function(){return In(this._callObjectMode,"theme()"),this.properties.theme}},{key:"setTheme",value:function(d){var w=this;return In(this._callObjectMode,"setTheme()"),new Promise(function(v,O){try{w.validateProperties({theme:d}),w.properties.theme=ae({},d),w.sendMessageToCallMachine({action:"set-theme",theme:w.properties.theme});try{w.emitDailyJSEvent({action:$C,theme:w.properties.theme})}catch(M){console.log("could not emit 'theme-updated'",M)}v(w.properties.theme)}catch(M){O(M)}})}},{key:"requestFullscreen",value:(o=me(function*(){if(Ie(),this._iframe&&!document.fullscreenElement&&US())try{(yield this._iframe.requestFullscreen)?this._iframe.requestFullscreen():this._iframe.webkitRequestFullscreen()}catch(d){console.log("could not make video call fullscreen",d)}}),function(){return o.apply(this,arguments)})},{key:"exitFullscreen",value:function(){Ie(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:"getSidebarView",value:(s=me(function*(){var d=this;return this._callObjectMode?(console.error("getSidebarView is not available in callObject mode"),Promise.resolve(null)):new Promise(function(w){d.sendMessageToCallMachine({action:"get-sidebar-view"},function(v){w(v.view)})})}),function(){return s.apply(this,arguments)})},{key:"setSidebarView",value:function(d){return this._callObjectMode?(console.error("setSidebarView is not available in callObject mode"),this):(this.sendMessageToCallMachine({action:"set-sidebar-view",view:d}),this)}},{key:"room",value:(i=me(function*(){var d=this,w=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).includeRoomConfigDefaults,v=w===void 0||w;return this._accessState.access===Wd||this.needsLoad()?this.properties.url?{roomUrlPendingJoin:this.properties.url}:null:new Promise(function(O){d.sendMessageToCallMachine({action:"lib-room-info",includeRoomConfigDefaults:v},function(M){delete M.action,delete M.callbackStamp,O(M)})})}),function(){return i.apply(this,arguments)})},{key:"geo",value:(r=me(function*(){try{var d=yield fetch("https://gs.daily.co/_ks_/x-swsl/:");return{current:(yield d.json()).geo}}catch(w){return console.error("geo lookup failed",w),{current:""}}}),function(){return r.apply(this,arguments)})},{key:"setNetworkTopology",value:(n=me(function*(d){var w=this;return Ie(),ze(this._callState,"setNetworkTopology()"),new Promise(function(v,O){w.sendMessageToCallMachine({action:"set-network-topology",opts:d},function(M){M.error?O({error:M.error}):v({workerId:M.workerId})})})}),function(d){return n.apply(this,arguments)})},{key:"getNetworkTopology",value:(e=me(function*(){var d=this;return new Promise(function(w,v){d.needsLoad()&&w({topology:"none"}),d.sendMessageToCallMachine({action:"get-network-topology"},function(O){O.error?v({error:O.error}):w({topology:O.topology})})})}),function(){return e.apply(this,arguments)})},{key:"setPlayNewParticipantSound",value:function(d){if(Ie(),typeof d!="number"&&d!==!0&&d!==!1)throw new Error("argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is ".concat(d));this.sendMessageToCallMachine({action:"daily-method-set-play-ding",arg:d})}},{key:"on",value:function(d,w){return dd.prototype.on.call(this,d,w)}},{key:"once",value:function(d,w){return dd.prototype.once.call(this,d,w)}},{key:"off",value:function(d,w){return dd.prototype.off.call(this,d,w)}},{key:"validateProperties",value:function(d){var w,v;if(d!=null&&(w=d.dailyConfig)!==null&&w!==void 0&&w.userMediaAudioConstraints){var O,M;Ae()||console.warn("userMediaAudioConstraints is deprecated. You can override constraints with inputSettings.audio.settings, found in DailyCallOptions.");var B=d.inputSettings||{};B.audio=((O=d.inputSettings)===null||O===void 0?void 0:O.audio)||{},B.audio.settings=((M=d.inputSettings)===null||M===void 0||(M=M.audio)===null||M===void 0?void 0:M.settings)||{},B.audio.settings=ae(ae({},B.audio.settings),d.dailyConfig.userMediaAudioConstraints),d.inputSettings=B,delete d.dailyConfig.userMediaAudioConstraints}if(d!=null&&(v=d.dailyConfig)!==null&&v!==void 0&&v.userMediaVideoConstraints){var K,J;Ae()||console.warn("userMediaVideoConstraints is deprecated. You can override constraints with inputSettings.video.settings, found in DailyCallOptions.");var Z=d.inputSettings||{};Z.video=((K=d.inputSettings)===null||K===void 0?void 0:K.video)||{},Z.video.settings=((J=d.inputSettings)===null||J===void 0||(J=J.video)===null||J===void 0?void 0:J.settings)||{},Z.video.settings=ae(ae({},Z.video.settings),d.dailyConfig.userMediaVideoConstraints),d.inputSettings=Z,delete d.dailyConfig.userMediaVideoConstraints}for(var pe in d)if(Xs[pe]){if(Xs[pe].validate&&!Xs[pe].validate(d[pe],this))throw new Error("property '".concat(pe,"': ").concat(Xs[pe].help))}else console.warn("Ignoring unrecognized property '".concat(pe,"'")),delete d[pe]}},{key:"assembleMeetingUrl",value:function(){var d,w,v=ae(ae({},this.properties),{},{emb:this.callClientId,embHref:encodeURIComponent(window.location.href),proxy:(d=this.properties.dailyConfig)!==null&&d!==void 0&&d.proxyUrl?encodeURIComponent((w=this.properties.dailyConfig)===null||w===void 0?void 0:w.proxyUrl):void 0}),O=v.url.match(/\?/)?"&":"?";return v.url+O+Object.keys(Xs).filter(function(M){return Xs[M].queryString&&v[M]!==void 0}).map(function(M){return"".concat(Xs[M].queryString,"=").concat(v[M])}).join("&")}},{key:"needsLoad",value:function(){return[Gg,NS,Wi,Zr].includes(this._callState)}},{key:"sendMessageToCallMachine",value:function(d,w){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");this._messageChannel.sendMessageToCallMachine(d,w,this.callClientId,this._iframe)}},{key:"forwardPackagedMessageToCallMachine",value:function(d){this._messageChannel.forwardPackagedMessageToCallMachine(d,this._iframe,this.callClientId)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(d){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(d,this.callClientId)}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(d){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(d)}},{key:"handleMessageFromCallMachine",value:function(d){switch(d.action){case FC:this.sendMessageToCallMachine(ae({action:UC},this.properties));break;case"call-machine-initialized":this._callMachineInitialized=!0;var w={action:_d,level:"log",code:1011,stats:{event:"bundle load",time:this._bundleLoadTime==="no-op"?0:this._bundleLoadTime,preLoaded:this._bundleLoadTime==="no-op",url:Fh(this.properties.dailyConfig)}};this.sendMessageToCallMachine(w),this._delayDuplicateInstanceLog&&this._logDuplicateInstanceAttempt();break;case Jg:this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null),this.emitDailyJSEvent(d);break;case GC:var v,O=ae({},d);delete O.internal,this._maxAppMessageSize=((v=d.internal)===null||v===void 0?void 0:v._maxAppMessageSize)||Zp,this._joinedCallback&&(this._joinedCallback(d.participants),this._joinedCallback=null),this.emitDailyJSEvent(O);break;case JC:case QC:if(this._callState===Wi)return;if(d.participant&&d.participant.session_id){var M=d.participant.local?"local":d.participant.session_id;if(this._callObjectMode){var B=this._callMachine().store;GS(d.participant,B),KS(d.participant,B),JS(d.participant,this._participants[M],B)}try{this.maybeParticipantTracksStopped(this._participants[M],d.participant),this.maybeParticipantTracksStarted(this._participants[M],d.participant),this.maybeEventRecordingStopped(this._participants[M],d.participant),this.maybeEventRecordingStarted(this._participants[M],d.participant)}catch(ft){console.error("track events error",ft)}this.compareEqualForParticipantUpdateEvent(d.participant,this._participants[M])||(this._participants[M]=ae({},d.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus(),this.emitDailyJSEvent(d))}break;case YC:if(d.participant&&d.participant.session_id){var K=this._participants[d.participant.session_id];K&&this.maybeParticipantTracksStopped(K,null),delete this._participants[d.participant.session_id],this.emitDailyJSEvent(d)}break;case XC:ln(this._participantCounts,d.participantCounts)||(this._participantCounts=d.participantCounts,this.emitDailyJSEvent(d));break;case ZC:var J={access:d.access};d.awaitingAccess&&(J.awaitingAccess=d.awaitingAccess),ln(this._accessState,J)||(this._accessState=J,this.emitDailyJSEvent(d));break;case e1:if(d.meetingSession){this._meetingSessionSummary=d.meetingSession,this.emitDailyJSEvent(d);var Z=ae(ae({},d),{},{action:"meeting-session-updated"});this.emitDailyJSEvent(Z)}break;case ey:var pe;this._iframe&&!d.preserveIframe&&(this._iframe.src=""),this._updateCallState(Zr),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(d.errorMsg),this._loadedCallback=null),d.preserveIframe;var we=PE(d,Z4);we!=null&&(pe=we.error)!==null&&pe!==void 0&&pe.details&&(we.error.details=JSON.parse(we.error.details)),this._maybeSendToSentry(d),this._joinedCallback&&(this._joinedCallback(null,we),this._joinedCallback=null),this.emitDailyJSEvent(we);break;case KC:this._callState!==Zr&&this._updateCallState(Wi),this.resetMeetingDependentVars(),this._resolveLeave&&(this._resolveLeave(),this._resolveLeave=null),this.emitDailyJSEvent(d);break;case"selected-devices-updated":d.devices&&this.emitDailyJSEvent(d);break;case b1:var ht=d.state,nn=d.threshold,nr=d.quality,Ue=ht.state,vt=ht.reasons;Ue===this._network.networkState&&ln(vt,this._network.networkStateReasons)&&nn===this._network.threshold&&nr===this._network.quality||(this._network.networkState=Ue,this._network.networkStateReasons=vt,this._network.quality=nr,this._network.threshold=nn,d.networkState=Ue,vt.length&&(d.networkStateReasons=vt),delete d.state,this.emitDailyJSEvent(d));break;case I1:d&&d.cpuLoadState&&this.emitDailyJSEvent(d);break;case A1:d&&d.faceCounts!==void 0&&this.emitDailyJSEvent(d);break;case S1:var at=d.activeSpeaker;this._activeSpeaker.peerId!==at.peerId&&(this._activeSpeaker.peerId=at.peerId,this.emitDailyJSEvent({action:d.action,activeSpeaker:this._activeSpeaker}));break;case"show-local-video-changed":if(this._callObjectMode)return;var Bt=d.show;this._showLocalVideo=Bt,this.emitDailyJSEvent({action:d.action,show:Bt});break;case T1:var Ir=d.enabled;this._activeSpeakerMode!==Ir&&(this._activeSpeakerMode=Ir,this.emitDailyJSEvent({action:d.action,enabled:this._activeSpeakerMode}));break;case n1:case r1:case i1:this._waitingParticipants=d.allWaitingParticipants,this.emitDailyJSEvent({action:d.action,participant:d.participant});break;case D1:ln(this._receiveSettings,d.receiveSettings)||(this._receiveSettings=d.receiveSettings,this.emitDailyJSEvent({action:d.action,receiveSettings:d.receiveSettings}));break;case Xg:this._maybeUpdateInputSettings(d.inputSettings);break;case"send-settings-updated":ln(this._sendSettings,d.sendSettings)||(this._sendSettings=d.sendSettings,this._preloadCache.sendSettings=null,this.emitDailyJSEvent({action:d.action,sendSettings:d.sendSettings}));break;case"local-audio-level":this._localAudioLevel=d.audioLevel,this._preloadCache.localAudioLevelObserver=null,this.emitDailyJSEvent(d);break;case"remote-participants-audio-level":this._remoteParticipantsAudioLevel=d.participantsAudioLevel,this._preloadCache.remoteParticipantsAudioLevelObserver=null,this.emitDailyJSEvent(d);break;case g1:var Xe=d.session_id;this._rmpPlayerState[Xe]=d.playerState,this.emitDailyJSEvent(d);break;case v1:delete this._rmpPlayerState[d.session_id],this.emitDailyJSEvent(d);break;case y1:var jn=d.session_id,Wr=this._rmpPlayerState[jn];Wr&&this.compareEqualForRMPUpdateEvent(Wr,d.remoteMediaPlayerState)||(this._rmpPlayerState[jn]=d.remoteMediaPlayerState,this.emitDailyJSEvent(d));break;case"custom-button-click":case"sidebar-view-changed":case"pip-started":case"pip-stopped":this.emitDailyJSEvent(d);break;case t1:var Gr=this._meetingSessionState.topology!==(d.meetingSessionState&&d.meetingSessionState.topology);this._meetingSessionState=lm(d.meetingSessionState,this._callObjectMode),(this._callObjectMode||Gr)&&this.emitDailyJSEvent(d);break;case _1:this._isScreenSharing=!0,this.emitDailyJSEvent(d);break;case w1:case E1:this._isScreenSharing=!1,this.emitDailyJSEvent(d);break;case Qg:case Yg:case u1:case d1:case h1:case a1:case l1:case c1:case zC:case HC:case p1:case m1:case"test-completed":case k1:case f1:case C1:case P1:case R1:case x1:case Zg:case O1:case"dialin-ready":case"dialin-connected":case"dialin-error":case"dialin-stopped":case"dialin-warning":case"dialout-connected":case"dialout-answered":case"dialout-error":case"dialout-stopped":case"dialout-warning":this.emitDailyJSEvent(d);break;case"request-fullscreen":this.requestFullscreen();break;case"request-exit-fullscreen":this.exitFullscreen()}}},{key:"maybeEventRecordingStopped",value:function(d,w){var v="record";d&&(w.local||w[v]!==!1||d[v]===w[v]||this.emitDailyJSEvent({action:Yg}))}},{key:"maybeEventRecordingStarted",value:function(d,w){var v="record";d&&(w.local||w[v]!==!0||d[v]===w[v]||this.emitDailyJSEvent({action:Qg}))}},{key:"_trackStatePlayable",value:function(d){return!(!d||d.state!==NC)}},{key:"_trackChanged",value:function(d,w){return(d==null?void 0:d.id)!==(w==null?void 0:w.id)}},{key:"maybeEventTrackStopped",value:function(d,w,v){var O,M,B=(O=w==null?void 0:w.tracks[d])!==null&&O!==void 0?O:null,K=(M=v==null?void 0:v.tracks[d])!==null&&M!==void 0?M:null,J=B==null?void 0:B.track;if(J){var Z=this._trackStatePlayable(B),pe=this._trackStatePlayable(K),we=this._trackChanged(J,K==null?void 0:K.track);Z&&(pe&&!we||this.emitDailyJSEvent({action:o1,track:J,participant:v??w,type:d}))}}},{key:"maybeEventTrackStarted",value:function(d,w,v){var O,M,B=(O=w==null?void 0:w.tracks[d])!==null&&O!==void 0?O:null,K=(M=v==null?void 0:v.tracks[d])!==null&&M!==void 0?M:null,J=K==null?void 0:K.track;if(J){var Z=this._trackStatePlayable(B),pe=this._trackStatePlayable(K),we=this._trackChanged(B==null?void 0:B.track,J);pe&&(Z&&!we||this.emitDailyJSEvent({action:s1,track:J,participant:v,type:d}))}}},{key:"maybeParticipantTracksStopped",value:function(d,w){if(d)for(var v in d.tracks)this.maybeEventTrackStopped(v,d,w)}},{key:"maybeParticipantTracksStarted",value:function(d,w){if(w)for(var v in w.tracks)this.maybeEventTrackStarted(v,d,w)}},{key:"compareEqualForRMPUpdateEvent",value:function(d,w){var v,O;return d.state===w.state&&((v=d.settings)===null||v===void 0?void 0:v.volume)===((O=w.settings)===null||O===void 0?void 0:O.volume)}},{key:"emitDailyJSEvent",value:function(d){try{d.callClientId=this.callClientId,this.emit(d.action,d)}catch(w){console.log("could not emit",d,w)}}},{key:"compareEqualForParticipantUpdateEvent",value:function(d,w){return!!ln(d,w)&&(!d.videoTrack||!w.videoTrack||d.videoTrack.id===w.videoTrack.id&&d.videoTrack.muted===w.videoTrack.muted&&d.videoTrack.enabled===w.videoTrack.enabled)&&(!d.audioTrack||!w.audioTrack||d.audioTrack.id===w.audioTrack.id&&d.audioTrack.muted===w.audioTrack.muted&&d.audioTrack.enabled===w.audioTrack.enabled)}},{key:"nativeUtils",value:function(){return Ae()?typeof DailyNativeUtils>"u"?(console.warn("in React Native, DailyNativeUtils is expected to be available"),null):DailyNativeUtils:null}},{key:"updateIsPreparingToJoin",value:function(d){this._updateCallState(this._callState,d)}},{key:"_updateCallState",value:function(d){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._isPreparingToJoin;if(d!==this._callState||w!==this._isPreparingToJoin){var v=this._callState,O=this._isPreparingToJoin;this._callState=d,this._isPreparingToJoin=w;var M=this._callState===ts;this.updateShowAndroidOngoingMeetingNotification(M);var B=Kd(v,O),K=Kd(this._callState,this._isPreparingToJoin);B!==K&&(this.updateKeepDeviceAwake(K),this.updateDeviceAudioMode(K),this.updateNoOpRecordingEnsuringBackgroundContinuity(K))}}},{key:"resetMeetingDependentVars",value:function(){this._participants={},this._participantCounts=aT,this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:Wd},this._finalSummaryOfPrevSession=this._meetingSessionSummary,this._meetingSessionSummary={},this._meetingSessionState=lm(oT,this._callObjectMode),this._isScreenSharing=!1,this._receiveSettings={},this._inputSettings=void 0,this._sendSettings={},this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this._maxAppMessageSize=Zp,this._callMachineInitialized=!1,this._bundleLoadTime=void 0,this._preloadCache}},{key:"updateKeepDeviceAwake",value:function(d){Ae()&&this.nativeUtils().setKeepDeviceAwake(d,this.callClientId)}},{key:"updateDeviceAudioMode",value:function(d){if(Ae()&&!this.disableReactNativeAutoDeviceManagement("audio")){var w=d?this._nativeInCallAudioMode:"idle";this.nativeUtils().setAudioMode(w)}}},{key:"updateShowAndroidOngoingMeetingNotification",value:function(d){if(Ae()&&this.nativeUtils().setShowOngoingMeetingNotification){var w,v,O,M;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var B=this.properties.reactNativeConfig.androidInCallNotification;w=B.title,v=B.subtitle,O=B.iconName,M=B.disableForCustomOverride}M&&(d=!1),this.nativeUtils().setShowOngoingMeetingNotification(d,w,v,O,this.callClientId)}}},{key:"updateNoOpRecordingEnsuringBackgroundContinuity",value:function(d){Ae()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(d)}},{key:"toggleParticipantAudioBasedOnNativeAudioFocus",value:function(){var d;if(Ae()){var w=(d=this._callMachine())===null||d===void 0||(d=d.store)===null||d===void 0?void 0:d.getState();for(var v in w==null?void 0:w.streams){var O=w.streams[v];O&&O.pendingTrack&&O.pendingTrack.kind==="audio"&&(O.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:"disableReactNativeAutoDeviceManagement",value:function(d){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[d]}},{key:"absoluteUrl",value:function(d){if(d!==void 0){var w=document.createElement("a");return w.href=d,w.href}}},{key:"sayHello",value:function(){var d="hello, world.";return console.log(d),d}},{key:"_logUseAfterDestroy",value:function(){var d=Object.values(Ys)[0];if(this.needsLoad())if(d&&!d.needsLoad()){var w={action:_d,level:"error",code:this.strictMode?9995:9997};d.sendMessageToCallMachine(w)}else this.strictMode||console.error("You are are attempting to use a call instance that was previously destroyed, which is unsupported. Please remove `strictMode: false` from your constructor properties to enable strict mode to track down and fix this unsupported usage.");else{var v={action:_d,level:"error",code:this.strictMode?9995:9997};this._messageChannel.sendMessageToCallMachine(v,null,this.callClientId,this._iframe)}}},{key:"_logDuplicateInstanceAttempt",value:function(){for(var d=0,w=Object.values(Ys);d<w.length;d++){var v=w[d];v._callMachineInitialized?(v.sendMessageToCallMachine({action:_d,level:"warn",code:this.allowMultipleCallInstances?9993:9992}),v._delayDuplicateInstanceLog=!1):v._delayDuplicateInstanceLog=!0}}},{key:"_maybeSendToSentry",value:function(d){var w,v,O,M;if(!((w=d.error)!==null&&w!==void 0&&w.type&&(![jC,VC,Kg].includes(d.error.type)||d.error.type===Kg&&d.error.msg.includes("deleted")))){var B=(v=this.properties)!==null&&v!==void 0&&v.url?new URL(this.properties.url):void 0,K="production";B&&B.host.includes(".staging.daily")&&(K="staging");var J,Z,pe,we,ht,nn=function(Xe){const jn=[SF(),wF(),KF(),WF(),ZF(),t4(),IF(),e4()];return Xe.autoSessionTracking!==!1&&jn.push(XF()),jn}({}).filter(function(Xe){return!["BrowserApiErrors","Breadcrumbs","GlobalHandlers"].includes(Xe.name)}),nr=new NF({dsn:"https://f10f1c81e5d44a4098416c0867a8b740@o77906.ingest.sentry.io/168844",transport:FF,stackParser:HF,integrations:nn,environment:K}),Ue=new Rs;if(Ue.setClient(nr),nr.init(),this.session_id&&Ue.setExtra("sessionId",this.session_id),this.properties){var vt=ae({},this.properties);vt.userName=vt.userName?"[Filtered]":void 0,vt.userData=vt.userData?"[Filtered]":void 0,vt.token=vt.token?"[Filtered]":void 0,Ue.setExtra("properties",vt)}if(B){var at=B.searchParams.get("domain");if(!at){var Bt=B.host.match(/(.*?)\./);at=Bt&&Bt[1]||""}at&&Ue.setTag("domain",at)}d.error&&(Ue.setTag("fatalErrorType",d.error.type),Ue.setExtra("errorDetails",d.error.details),!((J=d.error.details)===null||J===void 0)&&J.uri&&Ue.setTag("serverAddress",d.error.details.uri),!((Z=d.error.details)===null||Z===void 0)&&Z.workerGroup&&Ue.setTag("workerGroup",d.error.details.workerGroup),!((pe=d.error.details)===null||pe===void 0)&&pe.geoGroup&&Ue.setTag("geoGroup",d.error.details.geoGroup),!((we=d.error.details)===null||we===void 0)&&we.on&&Ue.setTag("connectionAttempt",d.error.details.on),(ht=d.error.details)!==null&&ht!==void 0&&ht.bundleUrl&&(Ue.setTag("bundleUrl",d.error.details.bundleUrl),Ue.setTag("bundleError",d.error.details.sourceError.type))),Ue.setTags({callMode:this._callObjectMode?Ae()?"reactNative":(O=this.properties)!==null&&O!==void 0&&(O=O.dailyConfig)!==null&&O!==void 0&&(O=O.callMode)!==null&&O!==void 0&&O.includes("prebuilt")?this.properties.dailyConfig.callMode:"custom":"prebuilt-frame",version:t.version()});var Ir=((M=d.error)===null||M===void 0?void 0:M.msg)||d.errorMsg;Ue.captureException(new Error(Ir))}}},{key:"_callMachine",value:function(){var d;return(d=window._daily)===null||d===void 0||(d=d.instances)===null||d===void 0||(d=d[this.callClientId])===null||d===void 0?void 0:d.callMachine}},{key:"_maybeUpdateInputSettings",value:function(d){if(!ln(this._inputSettings,d)){var w=this._getInputSettings();this._inputSettings=d;var v=this._getInputSettings();ln(w,v)||this.emitDailyJSEvent({action:Xg,inputSettings:v})}}}],[{key:"supportedBrowser",value:function(){if(Ae())return{supported:!0,mobile:!0,name:"React Native",version:null,supportsScreenShare:!0,supportsSfu:!0,supportsVideoProcessing:!1,supportsAudioProcessing:!1};var d=Bj.getParser(tr());return{supported:!!nm(),mobile:d.getPlatformType()==="mobile",name:d.getBrowserName(),version:d.getBrowserVersion(),supportsFullscreen:!!US(),supportsScreenShare:!!C4(),supportsSfu:!!nm(),supportsVideoProcessing:L1(),supportsAudioProcessing:V1()}}},{key:"version",value:function(){return"0.85.0"}},{key:"createCallObject",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return d.layout="none",new t(null,d)}},{key:"wrap",value:function(d){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ie(),!d||!d.contentWindow||typeof d.src!="string")throw new Error("DailyIframe::Wrap needs an iframe-like first argument");return w.layout||(w.customLayout?w.layout="custom-v1":w.layout="browser"),new t(d,w)}},{key:"createFrame",value:function(d,w){var v,O;Ie(),d&&w?(v=d,O=w):d&&d.append?(v=d,O={}):(v=document.body,O=d||{});var M=O.iframeStyle;M||(M=v===document.body?{position:"fixed",border:"1px solid black",backgroundColor:"white",width:"375px",height:"450px",right:"1em",bottom:"1em"}:{border:0,width:"100%",height:"100%"});var B=document.createElement("iframe");window.navigator&&window.navigator.userAgent.match(/Chrome\/61\./)?B.allow="microphone, camera":B.allow="microphone; camera; autoplay; display-capture; screen-wake-lock",B.style.visibility="hidden",v.appendChild(B),B.style.visibility=null,Object.keys(M).forEach(function(K){return B.style[K]=M[K]}),O.layout||(O.customLayout?O.layout="custom-v1":O.layout="browser");try{return new t(B,O)}catch(K){throw v.removeChild(B),K}}},{key:"createTransparentFrame",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ie();var w=document.createElement("iframe");return w.allow="microphone; camera; autoplay",w.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
      pointer-events: none;
    `,document.body.appendChild(w),d.layout||(d.layout="custom-v1"),t.wrap(w,d)}},{key:"getCallInstance",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;return d?Ys[d]:Object.values(Ys)[0]}}]);var e,n,r,i,s,o,a,l,u,h,p,g,T,S,E,k,_,y,C,L,$,q,P,I,R,x,b,V,N,Pe,tn,kr,Ye,X,ue,he,Le,Se}();function uT(t){if(t.extension){if(typeof t.extension!="string")throw new Error("Error starting dial out: extension must be a string");if(t.extension.length>20)throw new Error("Error starting dial out: extension length must be less than or equal to 20")}if(t.waitBeforeExtensionDialSec){if(typeof t.waitBeforeExtensionDialSec!="number")throw new Error("Error starting dial out: waitBeforeExtensionDialSec must be a number");if(t.waitBeforeExtensionDialSec>60)throw new Error("Error starting dial out: waitBeforeExtensionDialSec must be less than or equal to 60");if(!t.extension)throw new Error("Error starting dial out: waitBeforeExtensionDialSec requires a phoneNumber and extension")}}function Jo(t,e){var n={};for(var r in t)if(t[r]instanceof MediaStreamTrack)console.warn("MediaStreamTrack found in props or cache.",r),n[r]=ui;else if(r==="dailyConfig"){if(t[r].modifyLocalSdpHook){var i=window._daily.instances[e].customCallbacks||{};i.modifyLocalSdpHook=t[r].modifyLocalSdpHook,window._daily.instances[e].customCallbacks=i,delete t[r].modifyLocalSdpHook}if(t[r].modifyRemoteSdpHook){var s=window._daily.instances[e].customCallbacks||{};s.modifyRemoteSdpHook=t[r].modifyRemoteSdpHook,window._daily.instances[e].customCallbacks=s,delete t[r].modifyRemoteSdpHook}n[r]=t[r]}else n[r]=t[r];return n}function ze(t){var e=arguments.length>2?arguments[2]:void 0;if(t!==ts){var n="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," only supported after join.");throw e&&(n+=" ".concat(e)),console.error(n),new Error(n)}}function Kd(t,e){return[Hh,ts].includes(t)||e}function om(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"This daily-js method",r=arguments.length>3?arguments[3]:void 0;if(Kd(t,e)){var i="".concat(n," not supported after joining a meeting.");throw r&&(i+=" ".concat(r)),console.error(i),new Error(i)}}function Sd(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method",n=arguments.length>2?arguments[2]:void 0;if(!t){var r="".concat(e,arguments.length>3&&arguments[3]!==void 0&&arguments[3]?" requires preAuth() or startCamera() to initialize call state.":" requires preAuth(), startCamera(), or join() to initialize call state.");throw n&&(r+=" ".concat(n)),console.error(r),new Error(r)}}function am(t){if(t){var e="A pre-call quality test is in progress. Please try ".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," again once testing has completed. Use stopTestCallQuality() to end it early.");throw console.error(e),new Error(e)}}function ur(t){if(!t){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported on custom callObject instances");throw console.error(e),new Error(e)}}function In(t){if(t){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported as part of Daily's Prebuilt");throw console.error(e),new Error(e)}}function Ie(){if(Ae())throw new Error("This daily-js method is not currently supported in React Native")}function Rl(){if(!Ae())throw new Error("This daily-js method is only supported in React Native")}function Q1(t){if(t===void 0)return!0;var e;if(typeof t=="string")e=t;else try{e=JSON.stringify(t),ln(JSON.parse(e),t)||console.warn("The userData provided will be modified when serialized.")}catch(n){throw Error("userData must be serializable to JSON: ".concat(n))}if(e.length>4096)throw Error("userData is too large (".concat(e.length," characters). Maximum size suppported is ").concat(4096,"."));return!0}function Y1(t,e){for(var n=e.allowAllParticipantsKey,r=function(p){var g=["local"];return n||g.push("*"),p&&!g.includes(p)},i=function(p){return!!(p.layer===void 0||Number.isInteger(p.layer)&&p.layer>=0||p.layer==="inherit")},s=function(p){return!!p&&!(p.video&&!i(p.video))&&!(p.screenVideo&&!i(p.screenVideo))},o=0,a=Object.entries(t);o<a.length;o++){var l=Xt(a[o],2),u=l[0],h=l[1];if(!r(u)||!s(h))return!1}return!0}function X1(t){if(Re(t)!=="object")return!1;for(var e=0,n=Object.entries(t);e<n.length;e++){var r=Xt(n[e],2),i=r[0],s=r[1];switch(i){case"video":if(Re(s)!=="object")return!1;for(var o=0,a=Object.entries(s);o<a.length;o++){var l=Xt(a[o],2),u=l[0],h=l[1];switch(u){case"processor":if(!rU(h))return!1;break;case"settings":if(!dT(h))return!1;break;default:return!1}}break;case"audio":if(Re(s)!=="object")return!1;for(var p=0,g=Object.entries(s);p<g.length;p++){var T=Xt(g[p],2),S=T[0],E=T[1];switch(S){case"processor":if(!nU(E))return!1;break;case"settings":if(!dT(E))return!1;break;default:return!1}}break;default:return!1}}return!0}function Z1(t,e,n){var r,i=[];t.video&&t.video.processor&&(L1((r=e==null?void 0:e.useLegacyVideoProcessor)!==null&&r!==void 0&&r)||(t.video.settings?delete t.video.processor:delete t.video,i.push("video"))),t.audio&&t.audio.processor&&(V1()||(t.audio.settings?delete t.audio.processor:delete t.audio,i.push("audio"))),i.length>0&&console.error("Ignoring settings for browser- or platform-unsupported input processor(s): ".concat(i.join(", "))),t.audio&&t.audio.settings&&(t.audio.settings.customTrack?(n.audioTrack=t.audio.settings.customTrack,t.audio.settings={customTrack:ui}):delete n.audioTrack),t.video&&t.video.settings&&(t.video.settings.customTrack?(n.videoTrack=t.video.settings.customTrack,t.video.settings={customTrack:ui}):delete n.videoTrack)}function nU(t){if(Ae())return console.warn("Video processing is not yet supported in React Native"),!1;var e=["type"];return!!t&&Re(t)==="object"&&(Object.keys(t).filter(function(n){return!e.includes(n)}).forEach(function(n){console.warn("invalid key inputSettings -> audio -> processor : ".concat(n)),delete t[n]}),!!function(n){return typeof n!="string"?!1:Object.values(N1).includes(n)?!0:(console.error("inputSettings audio processor type invalid"),!1)}(t.type))}function rU(t){if(Ae())return console.warn("Video processing is not yet supported in React Native"),!1;var e=["type","config"];return!t||Re(t)!=="object"||!function(n){return typeof n!="string"?!1:Object.values(Gd).includes(n)?!0:(console.error("inputSettings video processor type invalid"),!1)}(t.type)||t.config&&(Re(t.config)!=="object"||!function(n,r){var i=Object.keys(r);if(i.length===0)return!0;var s="invalid object in inputSettings -> video -> processor -> config";switch(n){case Gd.BGBLUR:return i.length>1||i[0]!=="strength"?(console.error(s),!1):!(typeof r.strength!="number"||r.strength<=0||r.strength>1||isNaN(r.strength))||(console.error("".concat(s,"; expected: {0 < strength <= 1}, got: ").concat(r.strength)),!1);case Gd.BGIMAGE:return!(r.source!==void 0&&!function(o){if(o.source==="default")return o.type="default",!0;if(o.source instanceof ArrayBuffer)return!0;if(Uh(o.source))return o.type="url",!!function(u){var h=new URL(u),p=h.pathname;if(h.protocol==="data:")try{var g=p.substring(p.indexOf(":")+1,p.indexOf(";")).split("/")[1];return tm.includes(g)}catch(S){return console.error("failed to deduce blob content type",S),!1}var T=p.split(".").at(-1).toLowerCase().trim();return tm.includes(T)}(o.source)||(console.error("invalid image type; supported types: [".concat(tm.join(", "),"]")),!1);return a=o.source,l=Number(a),isNaN(l)||!Number.isInteger(l)||l<=0||l>10?(console.error("invalid image selection; must be an int, > 0, <= ".concat(10)),!1):(o.type="daily-preselect",!0);var a,l}(r));default:return!0}}(t.type,t.config))?!1:(Object.keys(t).filter(function(n){return!e.includes(n)}).forEach(function(n){console.warn("invalid key inputSettings -> video -> processor : ".concat(n)),delete t[n]}),!0)}function dT(t){return Re(t)==="object"&&(!t.customTrack||t.customTrack instanceof MediaStreamTrack)}function ay(){var t=Object.values(Gd).join(" | "),e=Object.values(N1).join(" | ");return"inputSettings must be of the form: { video?: { processor?: { type: [ ".concat(t," ], config?: {} } }, audio?: { processor: {type: [ ").concat(e," ] } } }")}function eP(t){var e=t.allowAllParticipantsKey;return"receiveSettings must be of the form { [<remote participant id> | ".concat(LC).concat(e?' | "'.concat("*",'"'):"","]: ")+'{ [video: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]], [screenVideo: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]] }}}'}function tP(){return"customIntegrations should be an object of type ".concat(JSON.stringify(oy),".")}function nP(t){if(t&&Re(t)!=="object"||Array.isArray(t))return console.error("customTrayButtons should be an Object of the type ".concat(JSON.stringify(Kh),".")),!1;if(t)for(var e=0,n=Object.entries(t);e<n.length;e++)for(var r=Xt(n[e],1)[0],i=0,s=Object.entries(t[r]);i<s.length;i++){var o=Xt(s[i],2),a=o[0],l=o[1],u=Kh.id[a];if(!u)return console.error("customTrayButton does not support key ".concat(a)),!1;switch(a){case"iconPath":case"iconPathDarkMode":if(!Uh(l))return console.error("customTrayButton ".concat(a," should be a url.")),!1;break;case"visualState":if(!["default","sidebar-open","active"].includes(l))return console.error("customTrayButton ".concat(a," should be ").concat(u,". Got: ").concat(l)),!1;break;default:if(Re(l)!==u)return console.error("customTrayButton ".concat(a," should be a ").concat(u,".")),!1}}return!0}function rP(t){if(!t||t&&Re(t)!=="object"||Array.isArray(t))return console.error(tP()),!1;for(var e=function(p){return"".concat(p," should be ").concat(oy.id[p])},n=function(p,g){return console.error("customIntegration ".concat(p,": ").concat(g))},r=0,i=Object.entries(t);r<i.length;r++){var s=Xt(i[r],1)[0];if(!("label"in t[s]))return n(s,"label is required"),!1;if(!("location"in t[s]))return n(s,"location is required"),!1;if(!("src"in t[s])&&!("srcdoc"in t[s]))return n(s,"src or srcdoc is required"),!1;for(var o=0,a=Object.entries(t[s]);o<a.length;o++){var l=Xt(a[o],2),u=l[0],h=l[1];switch(u){case"allow":case"csp":case"name":case"referrerPolicy":case"sandbox":if(typeof h!="string")return n(s,e(u)),!1;break;case"iconURL":if(!Uh(h))return n(s,"".concat(u," should be a url")),!1;break;case"src":if("srcdoc"in t[s])return n(s,"cannot have both src and srcdoc"),!1;if(!Uh(h))return n(s,'src "'.concat(h,'" is not a valid URL')),!1;break;case"srcdoc":if("src"in t[s])return n(s,"cannot have both src and srcdoc"),!1;if(typeof h!="string")return n(s,e(u)),!1;break;case"location":if(!["main","sidebar"].includes(h))return n(s,e(u)),!1;break;case"controlledBy":if(h!=="*"&&h!=="owners"&&(!Array.isArray(h)||h.some(function(p){return typeof p!="string"})))return n(s,e(u)),!1;break;case"shared":if((!Array.isArray(h)||h.some(function(p){return typeof p!="string"}))&&h!=="owners"&&typeof h!="boolean")return n(s,e(u)),!1;break;default:if(!oy.id[u])return console.error("customIntegration does not support key ".concat(u)),!1}}}return!0}function iP(t,e){if(e===void 0)return!1;switch(Re(e)){case"string":return Re(t)===e;case"object":if(Re(t)!=="object")return!1;for(var n in t)if(!iP(t[n],e[n]))return!1;return!0;default:return!1}}function hT(t,e){var n=t.sessionId,r=t.toEndPoint,i=t.callerId,s=t.useSipRefer;if(!n||!r)throw new Error("".concat(e,"() requires a sessionId and toEndPoint"));if(typeof n!="string"||typeof r!="string")throw new Error("Invalid paramater: sessionId and toEndPoint must be of type string");if(s&&!r.startsWith("sip:"))throw new Error('"toEndPoint" must be a "sip" address');if(!r.startsWith("sip:")&&!r.startsWith("+"))throw new Error("toEndPoint: ".concat(r,' must starts with either "sip:" or "+"'));if(i&&typeof i!="string")throw new Error("callerId must be of type string");if(i&&!r.startsWith("+"))throw new Error("callerId is only valid when transferring to a PSTN number")}function fT(t){if(Re(t)!=="object")throw new Error('RemoteMediaPlayerSettings: must be "object" type');if(t.state&&!Object.values(ty).includes(t.state))throw new Error("Invalid value for RemoteMediaPlayerSettings.state, valid values are: "+JSON.stringify(ty));if(t.volume){if(typeof t.volume!="number")throw new Error('RemoteMediaPlayerSettings.volume: must be "number" type');if(t.volume<0||t.volume>2)throw new Error("RemoteMediaPlayerSettings.volume: must be between 0.0 - 2.0")}}function pT(t,e,n){return!(typeof t!="number"||t<e||t>n)}function lm(t,e){return t&&!e&&delete t.data,t}const iU=Object.freeze(Object.defineProperty({__proto__:null,DAILY_ACCESS_LEVEL_FULL:MC,DAILY_ACCESS_LEVEL_LOBBY:a4,DAILY_ACCESS_LEVEL_NONE:l4,DAILY_ACCESS_UNKNOWN:Wd,DAILY_CAMERA_ERROR_CAM_AND_MIC_IN_USE:_4,DAILY_CAMERA_ERROR_CAM_IN_USE:y4,DAILY_CAMERA_ERROR_CONSTRAINTS:T4,DAILY_CAMERA_ERROR_MIC_IN_USE:v4,DAILY_CAMERA_ERROR_NOT_FOUND:S4,DAILY_CAMERA_ERROR_PERMISSIONS:w4,DAILY_CAMERA_ERROR_UNDEF_MEDIADEVICES:E4,DAILY_CAMERA_ERROR_UNKNOWN:b4,DAILY_EVENT_ACCESS_STATE_UPDATED:ZC,DAILY_EVENT_ACTIVE_SPEAKER_CHANGE:S1,DAILY_EVENT_ACTIVE_SPEAKER_MODE_CHANGE:T1,DAILY_EVENT_APP_MSG:p1,DAILY_EVENT_CAMERA_ERROR:HC,DAILY_EVENT_CPU_LOAD_CHANGE:I1,DAILY_EVENT_ERROR:ey,DAILY_EVENT_EXIT_FULLSCREEN:Bl,DAILY_EVENT_FACE_COUNTS_UPDATED:A1,DAILY_EVENT_FULLSCREEN:$l,DAILY_EVENT_IFRAME_LAUNCH_CONFIG:UC,DAILY_EVENT_IFRAME_READY_FOR_LAUNCH_CONFIG:FC,DAILY_EVENT_INPUT_SETTINGS_UPDATED:Xg,DAILY_EVENT_JOINED_MEETING:GC,DAILY_EVENT_JOINING_MEETING:WC,DAILY_EVENT_LANG_UPDATED:O1,DAILY_EVENT_LEFT_MEETING:KC,DAILY_EVENT_LIVE_STREAMING_ERROR:x1,DAILY_EVENT_LIVE_STREAMING_STARTED:C1,DAILY_EVENT_LIVE_STREAMING_STOPPED:R1,DAILY_EVENT_LIVE_STREAMING_UPDATED:P1,DAILY_EVENT_LOADED:Jg,DAILY_EVENT_LOADING:BC,DAILY_EVENT_LOAD_ATTEMPT_FAILED:qC,DAILY_EVENT_LOCAL_SCREEN_SHARE_CANCELED:E1,DAILY_EVENT_LOCAL_SCREEN_SHARE_STARTED:_1,DAILY_EVENT_LOCAL_SCREEN_SHARE_STOPPED:w1,DAILY_EVENT_MEETING_SESSION_DATA_ERROR:k4,DAILY_EVENT_MEETING_SESSION_STATE_UPDATED:t1,DAILY_EVENT_MEETING_SESSION_SUMMARY_UPDATED:e1,DAILY_EVENT_NETWORK_CONNECTION:k1,DAILY_EVENT_NETWORK_QUALITY_CHANGE:b1,DAILY_EVENT_NONFATAL_ERROR:Zg,DAILY_EVENT_PARTICIPANT_COUNTS_UPDATED:XC,DAILY_EVENT_PARTICIPANT_JOINED:JC,DAILY_EVENT_PARTICIPANT_LEFT:YC,DAILY_EVENT_PARTICIPANT_UPDATED:QC,DAILY_EVENT_RECEIVE_SETTINGS_UPDATED:D1,DAILY_EVENT_RECORDING_DATA:f1,DAILY_EVENT_RECORDING_ERROR:d1,DAILY_EVENT_RECORDING_STARTED:Qg,DAILY_EVENT_RECORDING_STATS:u1,DAILY_EVENT_RECORDING_STOPPED:Yg,DAILY_EVENT_RECORDING_UPLOAD_COMPLETED:h1,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STARTED:g1,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STOPPED:v1,DAILY_EVENT_REMOTE_MEDIA_PLAYER_UPDATED:y1,DAILY_EVENT_STARTED_CAMERA:zC,DAILY_EVENT_THEME_UPDATED:$C,DAILY_EVENT_TRACK_STARTED:s1,DAILY_EVENT_TRACK_STOPPED:o1,DAILY_EVENT_TRANSCRIPTION_ERROR:c1,DAILY_EVENT_TRANSCRIPTION_MSG:m1,DAILY_EVENT_TRANSCRIPTION_STARTED:a1,DAILY_EVENT_TRANSCRIPTION_STOPPED:l1,DAILY_EVENT_WAITING_PARTICIPANT_ADDED:n1,DAILY_EVENT_WAITING_PARTICIPANT_REMOVED:i1,DAILY_EVENT_WAITING_PARTICIPANT_UPDATED:r1,DAILY_FATAL_ERROR_CONNECTION:jC,DAILY_FATAL_ERROR_EJECTED:u4,DAILY_FATAL_ERROR_EOL:VC,DAILY_FATAL_ERROR_EXP_ROOM:f4,DAILY_FATAL_ERROR_EXP_TOKEN:p4,DAILY_FATAL_ERROR_MEETING_FULL:m4,DAILY_FATAL_ERROR_NBF_ROOM:d4,DAILY_FATAL_ERROR_NBF_TOKEN:h4,DAILY_FATAL_ERROR_NOT_ALLOWED:g4,DAILY_FATAL_ERROR_NO_ROOM:Kg,DAILY_RECEIVE_SETTINGS_ALL_PARTICIPANTS_KEY:c4,DAILY_RECEIVE_SETTINGS_BASE_KEY:LC,DAILY_STATE_ERROR:Zr,DAILY_STATE_JOINED:ts,DAILY_STATE_JOINING:Hh,DAILY_STATE_LEFT:Wi,DAILY_STATE_NEW:Gg,DAILY_TRACK_STATE_BLOCKED:n4,DAILY_TRACK_STATE_INTERRUPTED:o4,DAILY_TRACK_STATE_LOADING:s4,DAILY_TRACK_STATE_OFF:r4,DAILY_TRACK_STATE_PLAYABLE:NC,DAILY_TRACK_STATE_SENDABLE:i4,default:tU},Symbol.toStringTag,{value:"Module"})),sU=SP(iU);var p_={exports:{}},Aa=typeof Reflect=="object"?Reflect:null,mT=Aa&&typeof Aa.apply=="function"?Aa.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},Jd;Aa&&typeof Aa.ownKeys=="function"?Jd=Aa.ownKeys:Object.getOwnPropertySymbols?Jd=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Jd=function(e){return Object.getOwnPropertyNames(e)};function oU(t){console&&console.warn&&console.warn(t)}var sP=Number.isNaN||function(e){return e!==e};function Fe(){Fe.init.call(this)}p_.exports=Fe;p_.exports.once=uU;Fe.EventEmitter=Fe;Fe.prototype._events=void 0;Fe.prototype._eventsCount=0;Fe.prototype._maxListeners=void 0;var gT=10;function Gf(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Fe,"defaultMaxListeners",{enumerable:!0,get:function(){return gT},set:function(t){if(typeof t!="number"||t<0||sP(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");gT=t}});Fe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Fe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||sP(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function oP(t){return t._maxListeners===void 0?Fe.defaultMaxListeners:t._maxListeners}Fe.prototype.getMaxListeners=function(){return oP(this)};Fe.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")mT(l,this,n);else for(var u=l.length,h=dP(l,u),r=0;r<u;++r)mT(h[r],this,n);return!0};function aP(t,e,n,r){var i,s,o;if(Gf(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=oP(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,oU(a)}return t}Fe.prototype.addListener=function(e,n){return aP(this,e,n,!1)};Fe.prototype.on=Fe.prototype.addListener;Fe.prototype.prependListener=function(e,n){return aP(this,e,n,!0)};function aU(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function lP(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=aU.bind(r);return i.listener=n,r.wrapFn=i,i}Fe.prototype.once=function(e,n){return Gf(n),this.on(e,lP(this,e,n)),this};Fe.prototype.prependOnceListener=function(e,n){return Gf(n),this.prependListener(e,lP(this,e,n)),this};Fe.prototype.removeListener=function(e,n){var r,i,s,o,a;if(Gf(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():lU(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Fe.prototype.off=Fe.prototype.removeListener;Fe.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function cP(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?cU(i):dP(i,i.length)}Fe.prototype.listeners=function(e){return cP(this,e,!0)};Fe.prototype.rawListeners=function(e){return cP(this,e,!1)};Fe.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):uP.call(t,e)};Fe.prototype.listenerCount=uP;function uP(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Fe.prototype.eventNames=function(){return this._eventsCount>0?Jd(this._events):[]};function dP(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function lU(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function cU(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function uU(t,e){return new Promise(function(n,r){function i(o){t.removeListener(e,s),r(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}hP(t,e,s,{once:!0}),e!=="error"&&dU(t,i,{once:!0})})}function dU(t,e,n){typeof t.on=="function"&&hP(t,"error",e,n)}function hP(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){r.once&&t.removeEventListener(e,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var hU=p_.exports,Kf={},ws={};Object.defineProperty(ws,"__esModule",{value:!0});ws.Api=ws.HttpClient=ws.ContentType=void 0;var ne;(function(t){t.Json="application/json",t.JsonApi="application/vnd.api+json",t.FormData="multipart/form-data",t.UrlEncoded="application/x-www-form-urlencoded",t.Text="text/plain"})(ne||(ws.ContentType=ne={}));class fP{constructor(e={}){_e(this,"baseUrl","https://api.vapi.ai");_e(this,"securityData",null);_e(this,"securityWorker");_e(this,"abortControllers",new Map);_e(this,"customFetch",(...e)=>fetch(...e));_e(this,"baseApiParams",{credentials:"same-origin",headers:{},redirect:"follow",referrerPolicy:"no-referrer"});_e(this,"setSecurityData",e=>{this.securityData=e});_e(this,"contentFormatters",{[ne.Json]:e=>e!==null&&(typeof e=="object"||typeof e=="string")?JSON.stringify(e):e,[ne.JsonApi]:e=>e!==null&&(typeof e=="object"||typeof e=="string")?JSON.stringify(e):e,[ne.Text]:e=>e!==null&&typeof e!="string"?JSON.stringify(e):e,[ne.FormData]:e=>Object.keys(e||{}).reduce((n,r)=>{const i=e[r];return n.append(r,i instanceof Blob?i:typeof i=="object"&&i!==null?JSON.stringify(i):`${i}`),n},new FormData),[ne.UrlEncoded]:e=>this.toQueryString(e)});_e(this,"createAbortSignal",e=>{if(this.abortControllers.has(e)){const r=this.abortControllers.get(e);return r?r.signal:void 0}const n=new AbortController;return this.abortControllers.set(e,n),n.signal});_e(this,"abortRequest",e=>{const n=this.abortControllers.get(e);n&&(n.abort(),this.abortControllers.delete(e))});_e(this,"request",async({body:e,secure:n,path:r,type:i,query:s,format:o,baseUrl:a,cancelToken:l,...u})=>{const h=(typeof n=="boolean"?n:this.baseApiParams.secure)&&this.securityWorker&&await this.securityWorker(this.securityData)||{},p=this.mergeRequestParams(u,h),g=s&&this.toQueryString(s),T=this.contentFormatters[i||ne.Json],S=o||p.format;return this.customFetch(`${a||this.baseUrl||""}${r}${g?`?${g}`:""}`,{...p,headers:{...p.headers||{},...i&&i!==ne.FormData?{"Content-Type":i}:{}},signal:(l?this.createAbortSignal(l):p.signal)||null,body:typeof e>"u"||e===null?null:T(e)}).then(async E=>{const k=E.clone();k.data=null,k.error=null;const _=S?await E[S]().then(y=>(k.ok?k.data=y:k.error=y,k)).catch(y=>(k.error=y,k)):k;if(l&&this.abortControllers.delete(l),!E.ok)throw _;return _})});Object.assign(this,e)}encodeQueryParam(e,n){return`${encodeURIComponent(e)}=${encodeURIComponent(typeof n=="number"?n:`${n}`)}`}addQueryParam(e,n){return this.encodeQueryParam(n,e[n])}addArrayQueryParam(e,n){return e[n].map(i=>this.encodeQueryParam(n,i)).join("&")}toQueryString(e){const n=e||{};return Object.keys(n).filter(i=>typeof n[i]<"u").map(i=>Array.isArray(n[i])?this.addArrayQueryParam(n,i):this.addQueryParam(n,i)).join("&")}addQueryParams(e){const n=this.toQueryString(e);return n?`?${n}`:""}mergeRequestParams(e,n){return{...this.baseApiParams,...e,...n||{},headers:{...this.baseApiParams.headers||{},...e.headers||{},...n&&n.headers||{}}}}}ws.HttpClient=fP;class fU extends fP{constructor(){super(...arguments);_e(this,"assistant",{assistantControllerCreate:(n,r={})=>this.request({path:"/assistant",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),assistantControllerFindAll:(n,r={})=>this.request({path:"/assistant",method:"GET",query:n,secure:!0,format:"json",...r}),assistantControllerFindOne:(n,r={})=>this.request({path:`/assistant/${n}`,method:"GET",secure:!0,format:"json",...r}),assistantControllerUpdate:(n,r,i={})=>this.request({path:`/assistant/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),assistantControllerReplace:(n,r,i={})=>this.request({path:`/assistant/${n}`,method:"PUT",body:r,secure:!0,type:ne.Json,format:"json",...i}),assistantControllerRemove:(n,r={})=>this.request({path:`/assistant/${n}`,method:"DELETE",secure:!0,format:"json",...r}),assistantControllerFindVersions:(n,r,i={})=>this.request({path:`/assistant/${n}/version`,method:"GET",query:r,secure:!0,format:"json",...i})});_e(this,"v2",{assistantControllerFindAllPaginated:(n,r={})=>this.request({path:"/v2/assistant",method:"GET",query:n,secure:!0,format:"json",...r}),callControllerCallsExport:(n,r={})=>this.request({path:"/v2/call/export",method:"GET",query:n,secure:!0,...r}),callControllerFindAllPaginated:(n,r={})=>this.request({path:"/v2/call",method:"GET",query:n,secure:!0,format:"json",...r}),callControllerFindAllMetadataPaginated:(n,r={})=>this.request({path:"/v2/call/metadata",method:"GET",query:n,secure:!0,format:"json",...r}),phoneNumberControllerFindAllPaginated:(n,r={})=>this.request({path:"/v2/phone-number",method:"GET",query:n,secure:!0,format:"json",...r})});_e(this,"squad",{squadControllerCreate:(n,r={})=>this.request({path:"/squad",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),squadControllerFindAll:(n,r={})=>this.request({path:"/squad",method:"GET",query:n,secure:!0,format:"json",...r}),squadControllerFindOne:(n,r={})=>this.request({path:`/squad/${n}`,method:"GET",secure:!0,format:"json",...r}),squadControllerUpdate:(n,r,i={})=>this.request({path:`/squad/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),squadControllerRemove:(n,r={})=>this.request({path:`/squad/${n}`,method:"DELETE",secure:!0,format:"json",...r})});_e(this,"workflow",{workflowControllerFindAll:(n={})=>this.request({path:"/workflow",method:"GET",secure:!0,format:"json",...n}),workflowControllerCreate:(n,r={})=>this.request({path:"/workflow",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),workflowControllerFindOne:(n,r={})=>this.request({path:`/workflow/${n}`,method:"GET",secure:!0,format:"json",...r}),workflowControllerDelete:(n,r={})=>this.request({path:`/workflow/${n}`,method:"DELETE",secure:!0,format:"json",...r}),workflowControllerUpdate:(n,r,i={})=>this.request({path:`/workflow/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i})});_e(this,"call",{callControllerCreate:(n,r={})=>this.request({path:"/call",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),callControllerFindAll:(n,r={})=>this.request({path:"/call",method:"GET",query:n,secure:!0,format:"json",...r}),callControllerFindOne:(n,r={})=>this.request({path:`/call/${n}`,method:"GET",secure:!0,format:"json",...r}),callControllerUpdate:(n,r,i={})=>this.request({path:`/call/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),callControllerDeleteCallData:(n,r,i={})=>this.request({path:`/call/${n}`,method:"DELETE",body:r,secure:!0,type:ne.Json,format:"json",...i}),callControllerCreatePhoneCall:(n,r={})=>this.request({path:"/call/phone",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),callControllerCreateWebCall:(n,r={})=>this.request({path:"/call/web",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r})});_e(this,"chat",{chatControllerListChats:(n,r={})=>this.request({path:"/chat",method:"GET",query:n,secure:!0,format:"json",...r}),chatControllerCreateChat:(n,r={})=>this.request({path:"/chat",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),chatControllerGetChat:(n,r={})=>this.request({path:`/chat/${n}`,method:"GET",secure:!0,format:"json",...r}),chatControllerDeleteChat:(n,r={})=>this.request({path:`/chat/${n}`,method:"DELETE",secure:!0,format:"json",...r}),chatControllerCreateOpenAiChat:(n,r={})=>this.request({path:"/chat/responses",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),chatControllerCreateWebChat:(n,r={})=>this.request({path:"/chat/web",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),chatControllerCreateOpenAiWebChat:(n,r={})=>this.request({path:"/chat/web/responses",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r})});_e(this,"campaign",{campaignControllerCreate:(n,r={})=>this.request({path:"/campaign",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),campaignControllerFindAll:(n,r={})=>this.request({path:"/campaign",method:"GET",query:n,secure:!0,format:"json",...r}),campaignControllerFindOne:(n,r={})=>this.request({path:`/campaign/${n}`,method:"GET",secure:!0,format:"json",...r}),campaignControllerUpdate:(n,r,i={})=>this.request({path:`/campaign/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),campaignControllerRemove:(n,r={})=>this.request({path:`/campaign/${n}`,method:"DELETE",secure:!0,format:"json",...r})});_e(this,"session",{sessionControllerCreate:(n,r={})=>this.request({path:"/session",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),sessionControllerFindAllPaginated:(n,r={})=>this.request({path:"/session",method:"GET",query:n,secure:!0,format:"json",...r}),sessionControllerFindOne:(n,r={})=>this.request({path:`/session/${n}`,method:"GET",secure:!0,format:"json",...r}),sessionControllerUpdate:(n,r,i={})=>this.request({path:`/session/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),sessionControllerRemove:(n,r={})=>this.request({path:`/session/${n}`,method:"DELETE",secure:!0,format:"json",...r})});_e(this,"phoneNumber",{phoneNumberControllerImportTwilio:(n,r={})=>this.request({path:"/phone-number/import/twilio",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),phoneNumberControllerImportVonage:(n,r={})=>this.request({path:"/phone-number/import/vonage",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),phoneNumberControllerCreate:(n,r={})=>this.request({path:"/phone-number",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),phoneNumberControllerFindAll:(n,r={})=>this.request({path:"/phone-number",method:"GET",query:n,secure:!0,format:"json",...r}),phoneNumberControllerFindOne:(n,r={})=>this.request({path:`/phone-number/${n}`,method:"GET",secure:!0,format:"json",...r}),phoneNumberControllerUpdate:(n,r,i={})=>this.request({path:`/phone-number/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),phoneNumberControllerRemove:(n,r={})=>this.request({path:`/phone-number/${n}`,method:"DELETE",secure:!0,format:"json",...r})});_e(this,"tool",{toolControllerCreate:(n,r={})=>this.request({path:"/tool",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),toolControllerFindAll:(n,r={})=>this.request({path:"/tool",method:"GET",query:n,secure:!0,format:"json",...r}),toolControllerFindOne:(n,r={})=>this.request({path:`/tool/${n}`,method:"GET",secure:!0,format:"json",...r}),toolControllerUpdate:(n,r,i={})=>this.request({path:`/tool/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),toolControllerRemove:(n,r={})=>this.request({path:`/tool/${n}`,method:"DELETE",secure:!0,format:"json",...r})});_e(this,"file",{fileControllerCreateDeprecated:(n,r={})=>this.request({path:"/file/upload",method:"POST",body:n,secure:!0,type:ne.FormData,format:"json",...r}),fileControllerCreate:(n,r={})=>this.request({path:"/file",method:"POST",body:n,secure:!0,type:ne.FormData,format:"json",...r}),fileControllerFindAll:(n={})=>this.request({path:"/file",method:"GET",secure:!0,format:"json",...n}),fileControllerFindOne:(n,r={})=>this.request({path:`/file/${n}`,method:"GET",secure:!0,format:"json",...r}),fileControllerUpdate:(n,r,i={})=>this.request({path:`/file/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),fileControllerRemove:(n,r={})=>this.request({path:`/file/${n}`,method:"DELETE",secure:!0,format:"json",...r})});_e(this,"knowledgeBase",{knowledgeBaseControllerCreate:(n,r={})=>this.request({path:"/knowledge-base",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),knowledgeBaseControllerFindAll:(n,r={})=>this.request({path:"/knowledge-base",method:"GET",query:n,secure:!0,format:"json",...r}),knowledgeBaseControllerFindOne:(n,r={})=>this.request({path:`/knowledge-base/${n}`,method:"GET",secure:!0,format:"json",...r}),knowledgeBaseControllerUpdate:(n,r,i={})=>this.request({path:`/knowledge-base/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),knowledgeBaseControllerRemove:(n,r={})=>this.request({path:`/knowledge-base/${n}`,method:"DELETE",secure:!0,format:"json",...r})});_e(this,"structuredOutput",{structuredOutputControllerFindAll:(n,r={})=>this.request({path:"/structured-output",method:"GET",query:n,secure:!0,format:"json",...r}),structuredOutputControllerCreate:(n,r={})=>this.request({path:"/structured-output",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),structuredOutputControllerFindOne:(n,r={})=>this.request({path:`/structured-output/${n}`,method:"GET",secure:!0,format:"json",...r}),structuredOutputControllerUpdate:(n,r,i,s={})=>this.request({path:`/structured-output/${n}`,method:"PATCH",query:r,body:i,secure:!0,type:ne.Json,format:"json",...s}),structuredOutputControllerRemove:(n,r={})=>this.request({path:`/structured-output/${n}`,method:"DELETE",secure:!0,format:"json",...r}),structuredOutputControllerRun:(n,r={})=>this.request({path:"/structured-output/run",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),structuredOutputControllerSuggest:(n,r={})=>this.request({path:"/structured-output/suggest",method:"POST",body:n,secure:!0,type:ne.Json,...r})});_e(this,"testSuite",{testSuiteControllerFindAllPaginated:(n,r={})=>this.request({path:"/test-suite",method:"GET",query:n,secure:!0,format:"json",...r}),testSuiteControllerCreate:(n,r={})=>this.request({path:"/test-suite",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),testSuiteControllerFindOne:(n,r={})=>this.request({path:`/test-suite/${n}`,method:"GET",secure:!0,format:"json",...r}),testSuiteControllerUpdate:(n,r,i={})=>this.request({path:`/test-suite/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),testSuiteControllerRemove:(n,r={})=>this.request({path:`/test-suite/${n}`,method:"DELETE",secure:!0,format:"json",...r}),testSuiteTestControllerFindAllPaginated:(n,r,i={})=>this.request({path:`/test-suite/${n}/test`,method:"GET",query:r,secure:!0,format:"json",...i}),testSuiteTestControllerCreate:(n,r,i={})=>this.request({path:`/test-suite/${n}/test`,method:"POST",body:r,secure:!0,type:ne.Json,format:"json",...i}),testSuiteTestControllerFindOne:(n,r,i={})=>this.request({path:`/test-suite/${n}/test/${r}`,method:"GET",secure:!0,format:"json",...i}),testSuiteTestControllerUpdate:(n,r,i,s={})=>this.request({path:`/test-suite/${n}/test/${r}`,method:"PATCH",body:i,secure:!0,type:ne.Json,format:"json",...s}),testSuiteTestControllerRemove:(n,r,i={})=>this.request({path:`/test-suite/${n}/test/${r}`,method:"DELETE",secure:!0,format:"json",...i}),testSuiteRunControllerFindAllPaginated:(n,r,i={})=>this.request({path:`/test-suite/${n}/run`,method:"GET",query:r,secure:!0,format:"json",...i}),testSuiteRunControllerCreate:(n,r,i={})=>this.request({path:`/test-suite/${n}/run`,method:"POST",body:r,secure:!0,type:ne.Json,format:"json",...i}),testSuiteRunControllerFindOne:(n,r,i={})=>this.request({path:`/test-suite/${n}/run/${r}`,method:"GET",secure:!0,format:"json",...i}),testSuiteRunControllerUpdate:(n,r,i,s={})=>this.request({path:`/test-suite/${n}/run/${r}`,method:"PATCH",body:i,secure:!0,type:ne.Json,format:"json",...s}),testSuiteRunControllerRemove:(n,r,i={})=>this.request({path:`/test-suite/${n}/run/${r}`,method:"DELETE",secure:!0,format:"json",...i})});_e(this,"reporting",{insightControllerCreate:(n,r={})=>this.request({path:"/reporting/insight",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),insightControllerFindAll:(n,r={})=>this.request({path:"/reporting/insight",method:"GET",query:n,secure:!0,format:"json",...r}),insightControllerUpdate:(n,r,i={})=>this.request({path:`/reporting/insight/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),insightControllerFindOne:(n,r={})=>this.request({path:`/reporting/insight/${n}`,method:"GET",secure:!0,format:"json",...r}),insightControllerRemove:(n,r={})=>this.request({path:`/reporting/insight/${n}`,method:"DELETE",secure:!0,format:"json",...r}),insightControllerRun:(n,r,i={})=>this.request({path:`/reporting/insight/${n}/run`,method:"POST",body:r,secure:!0,type:ne.Json,format:"json",...i}),insightControllerPreview:(n,r={})=>this.request({path:"/reporting/insight/preview",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r})});_e(this,"eval",{evalControllerCreate:(n,r={})=>this.request({path:"/eval",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),evalControllerGetPaginated:(n,r={})=>this.request({path:"/eval",method:"GET",query:n,secure:!0,format:"json",...r}),evalControllerUpdate:(n,r,i={})=>this.request({path:`/eval/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),evalControllerRemove:(n,r={})=>this.request({path:`/eval/${n}`,method:"DELETE",secure:!0,format:"json",...r}),evalControllerGet:(n,r={})=>this.request({path:`/eval/${n}`,method:"GET",secure:!0,format:"json",...r}),evalControllerRemoveRun:(n,r={})=>this.request({path:`/eval/run/${n}`,method:"DELETE",secure:!0,format:"json",...r}),evalControllerGetRun:(n,r={})=>this.request({path:`/eval/run/${n}`,method:"GET",secure:!0,format:"json",...r}),evalControllerRun:(n,r={})=>this.request({path:"/eval/run",method:"POST",body:n,secure:!0,type:ne.Json,...r}),evalControllerGetRunsPaginated:(n,r={})=>this.request({path:"/eval/run",method:"GET",query:n,secure:!0,format:"json",...r})});_e(this,"observability",{scorecardControllerGet:(n,r={})=>this.request({path:`/observability/scorecard/${n}`,method:"GET",secure:!0,format:"json",...r}),scorecardControllerUpdate:(n,r,i={})=>this.request({path:`/observability/scorecard/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),scorecardControllerRemove:(n,r={})=>this.request({path:`/observability/scorecard/${n}`,method:"DELETE",secure:!0,format:"json",...r}),scorecardControllerGetPaginated:(n,r={})=>this.request({path:"/observability/scorecard",method:"GET",query:n,secure:!0,format:"json",...r}),scorecardControllerCreate:(n,r={})=>this.request({path:"/observability/scorecard",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r})});_e(this,"org",{orgControllerCreate:(n,r={})=>this.request({path:"/org",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),orgControllerFindAll:(n={})=>this.request({path:"/org",method:"GET",secure:!0,format:"json",...n}),orgControllerFeatureFlagEnabled:(n,r={})=>this.request({path:"/org/feature-flag",method:"GET",query:n,secure:!0,format:"json",...r}),orgControllerFindOne:(n,r={})=>this.request({path:`/org/${n}`,method:"GET",secure:!0,format:"json",...r}),orgControllerUpdate:(n,r,i={})=>this.request({path:`/org/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),orgControllerDeleteOrg:(n,r={})=>this.request({path:`/org/${n}`,method:"DELETE",secure:!0,...r}),orgControllerFindAllUsers:(n,r={})=>this.request({path:`/org/${n}/user`,method:"GET",secure:!0,format:"json",...r}),orgControllerOrgLeave:(n,r={})=>this.request({path:`/org/${n}/leave`,method:"DELETE",secure:!0,...r}),orgControllerOrgRemoveUser:(n,r,i={})=>this.request({path:`/org/${n}/member/${r}/leave`,method:"DELETE",secure:!0,...i}),orgControllerUsersInvite:(n,r,i={})=>this.request({path:`/org/${n}/invite`,method:"POST",body:r,secure:!0,type:ne.Json,...i}),orgControllerUserUpdate:(n,r,i={})=>this.request({path:`/org/${n}/role`,method:"PATCH",body:r,secure:!0,type:ne.Json,...i}),orgControllerOrgToken:(n,r={})=>this.request({path:`/org/${n}/auth`,method:"GET",secure:!0,format:"json",...r})});_e(this,"token",{tokenControllerCreate:(n,r={})=>this.request({path:"/token",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),tokenControllerFindAll:(n,r={})=>this.request({path:"/token",method:"GET",query:n,secure:!0,format:"json",...r}),tokenControllerFindOne:(n,r={})=>this.request({path:`/token/${n}`,method:"GET",secure:!0,format:"json",...r}),tokenControllerUpdate:(n,r,i={})=>this.request({path:`/token/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),tokenControllerRemove:(n,r={})=>this.request({path:`/token/${n}`,method:"DELETE",secure:!0,format:"json",...r})});_e(this,"credential",{credentialControllerCreate:(n,r={})=>this.request({path:"/credential",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),credentialControllerFindAll:(n,r={})=>this.request({path:"/credential",method:"GET",query:n,secure:!0,format:"json",...r}),credentialControllerFindOne:(n,r={})=>this.request({path:`/credential/${n}`,method:"GET",secure:!0,format:"json",...r}),credentialControllerUpdate:(n,r,i={})=>this.request({path:`/credential/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),credentialControllerRemove:(n,r={})=>this.request({path:`/credential/${n}`,method:"DELETE",secure:!0,format:"json",...r})});_e(this,"template",{templateControllerCreate:(n,r={})=>this.request({path:"/template",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),templateControllerFindAll:(n,r={})=>this.request({path:"/template",method:"GET",query:n,secure:!0,format:"json",...r}),templateControllerFindAllPinned:(n={})=>this.request({path:"/template/pinned",method:"GET",secure:!0,format:"json",...n}),templateControllerFindOne:(n,r={})=>this.request({path:`/template/${n}`,method:"GET",secure:!0,format:"json",...r}),templateControllerUpdate:(n,r,i={})=>this.request({path:`/template/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),templateControllerRemove:(n,r={})=>this.request({path:`/template/${n}`,method:"DELETE",secure:!0,format:"json",...r})});_e(this,"voiceLibrary",{voiceLibraryControllerVoiceGetByProvider:(n,r,i={})=>this.request({path:`/voice-library/${n}`,method:"GET",query:r,secure:!0,format:"json",...i}),voiceLibraryControllerVoiceGetAccentsByProvider:(n,r={})=>this.request({path:`/voice-library/${n}/accents`,method:"GET",secure:!0,format:"json",...r}),voiceLibraryControllerVoiceLibrarySyncByProvider:(n,r={})=>this.request({path:`/voice-library/sync/${n}`,method:"POST",secure:!0,format:"json",...r}),voiceLibraryControllerVoiceLibrarySyncDefaultVoices:(n,r={})=>this.request({path:"/voice-library/sync",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),voiceLibraryControllerVoiceLibraryCreateSesameVoice:(n,r={})=>this.request({path:"/voice-library/create-sesame-voice",method:"POST",body:n,secure:!0,type:ne.Json,...r})});_e(this,"provider",{providerResourceControllerCreateProviderResource:(n,r,i={})=>this.request({path:`/provider/${n}/${r}`,method:"POST",secure:!0,format:"json",...i}),providerResourceControllerGetProviderResourcesPaginated:(n,r,i,s={})=>this.request({path:`/provider/${n}/${r}`,method:"GET",query:i,secure:!0,format:"json",...s}),providerResourceControllerGetProviderResource:(n,r,i,s={})=>this.request({path:`/provider/${n}/${r}/${i}`,method:"GET",secure:!0,format:"json",...s}),providerResourceControllerDeleteProviderResource:(n,r,i,s={})=>this.request({path:`/provider/${n}/${r}/${i}`,method:"DELETE",secure:!0,format:"json",...s}),providerResourceControllerUpdateProviderResource:(n,r,i,s={})=>this.request({path:`/provider/${n}/${r}/${i}`,method:"PATCH",secure:!0,format:"json",...s}),providerControllerGetWorkflows:(n,r,i={})=>this.request({path:`/${n}/workflows`,method:"GET",query:r,secure:!0,format:"json",...i}),providerControllerGetWorkflowTriggerHook:(n,r,i={})=>this.request({path:`/${n}/workflows/${r}/hooks`,method:"GET",secure:!0,format:"json",...i}),providerControllerGetLocations:(n,r={})=>this.request({path:`/${n}/locations`,method:"GET",secure:!0,format:"json",...r}),voiceProviderControllerSearchVoices:(n,r,i={})=>this.request({path:`/${n}/voices/search`,method:"GET",query:r,secure:!0,format:"json",...i}),voiceProviderControllerSearchVoice:(n,r,i={})=>this.request({path:`/${n}/voice/search`,method:"GET",query:r,secure:!0,format:"json",...i}),voiceProviderControllerAddVoices:(n,r,i={})=>this.request({path:`/${n}/voices/add`,method:"POST",body:r,secure:!0,type:ne.Json,format:"json",...i}),voiceProviderControllerAddVoice:(n,r,i={})=>this.request({path:`/${n}/voice/add`,method:"POST",body:r,secure:!0,type:ne.Json,format:"json",...i})});_e(this,"v11Labs",{voiceProviderControllerCloneVoices:(n,r={})=>this.request({path:"/11labs/voice/clone",method:"POST",body:n,secure:!0,type:ne.FormData,...r})});_e(this,"analytics",{analyticsControllerQuery:(n,r={})=>this.request({path:"/analytics",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r})})}}ws.Api=fU;Object.defineProperty(Kf,"__esModule",{value:!0});Kf.client=void 0;const pU=ws,mU=new pU.Api({baseUrl:"https://api.vapi.ai",baseApiParams:{secure:!0},securityWorker:async t=>{if(t)return{headers:{Authorization:`Bearer ${t}`}}}});Kf.client=mU;var ol={};Object.defineProperty(ol,"__esModule",{value:!0});ol.createSafeDailyConfig=gU;ol.safeSetLocalAudio=yU;ol.safeSetInputDevicesAsync=vU;ol.createSafeDailyFactoryOptions=_U;function gU(t){if(!t)return{};const{alwaysIncludeMicInPermissionPrompt:e,...n}=t;return e===!1?(console.warn("[Vapi] alwaysIncludeMicInPermissionPrompt:false detected. This can cause Chrome 140+ issues. Removing the property."),n):t}function yU(t,e){if(!t)throw new Error("Call object is not available.");t.setLocalAudio(e)}async function vU(t,e){if(!t)throw new Error("Call object is not available.");if("audioSource"in e&&e.audioSource===!1){console.warn("[Vapi] setInputDevicesAsync with audioSource:false detected. This can cause Chrome 140+ issues. Using default device instead.");const{audioSource:n,...r}=e;await t.setInputDevicesAsync(r);return}await t.setInputDevicesAsync(e)}function _U(t){return t?t.audioSource===!1?(console.warn("[Vapi] audioSource:false detected in factory options. This can cause Chrome 140+ issues. Defaulting to true."),{...t,audioSource:!0}):t:{}}var pP=N_&&N_.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mC,"__esModule",{value:!0});const cm=pP(sU),wU=pP(hU),um=Kf,Zs=ol;async function EU(t,e){t.muted=!1,t.autoplay=!0,e!=null&&(t.srcObject=new MediaStream([e]),await t.play())}async function yT(t,e){const n=document.createElement("audio");return n.dataset.participantId=e,document.body.appendChild(n),await EU(n,t),n}function vT(t){const e=document.querySelector(`audio[data-participant-id="${t}"]`);e==null||e.remove()}function _T(t,e,n,r){t.participant.local||e.updateParticipant(t.participant.session_id,{setSubscribedTracks:{audio:!0,video:n||r}})}class SU extends wU.default{on(e,n){return super.on(e,n),this}once(e,n){return super.once(e,n),this}emit(e,...n){return super.emit(e,...n)}removeListener(e,n){return super.removeListener(e,n),this}removeAllListeners(e){return super.removeAllListeners(e),this}}class TU extends SU{constructor(n,r,i,s){super();_e(this,"started",!1);_e(this,"call",null);_e(this,"speakingTimeout",null);_e(this,"dailyCallConfig",{});_e(this,"dailyCallObject",{});_e(this,"hasEmittedCallEndedStatus",!1);um.client.baseUrl=r??"https://api.vapi.ai",um.client.setSecurityData(n),this.dailyCallConfig=(0,Zs.createSafeDailyConfig)(i),this.dailyCallObject=(0,Zs.createSafeDailyFactoryOptions)(s)}async cleanup(){this.started=!1,this.hasEmittedCallEndedStatus=!1,this.call&&(await this.call.destroy(),this.call=null),this.speakingTimeout=null}isMobileDevice(){if(typeof navigator>"u")return!1;const n=navigator.userAgent;return/android|iphone|ipad|ipod|iemobile|blackberry|bada/i.test(n.toLowerCase())}async sleep(n){return new Promise(r=>setTimeout(r,n))}async start(n,r,i,s,o,a){var u,h,p,g,T,S,E;const l=Date.now();if(!n&&!i&&!s){const k=new Error("Assistant or Squad or Workflow must be provided.");throw this.emit("error",{type:"validation-error",stage:"input-validation",message:k.message,timestamp:new Date().toISOString()}),k}if(this.started)return this.emit("call-start-progress",{stage:"validation",status:"failed",timestamp:new Date().toISOString(),metadata:{reason:"already-started"}}),null;this.emit("call-start-progress",{stage:"initialization",status:"started",timestamp:new Date().toISOString(),metadata:{hasAssistant:!!n,hasSquad:!!i,hasWorkflow:!!s}}),this.started=!0;try{this.emit("call-start-progress",{stage:"web-call-creation",status:"started",timestamp:new Date().toISOString()});const k=Date.now(),_=(await um.client.call.callControllerCreateWebCall({assistant:typeof n=="string"?void 0:n,assistantId:typeof n=="string"?n:void 0,assistantOverrides:r,squad:typeof i=="string"?void 0:i,squadId:typeof i=="string"?i:void 0,workflow:typeof s=="string"?void 0:s,workflowId:typeof s=="string"?s:void 0,workflowOverrides:o,roomDeleteOnUserLeaveEnabled:a==null?void 0:a.roomDeleteOnUserLeaveEnabled})).data,y=Date.now()-k;this.emit("call-start-progress",{stage:"web-call-creation",status:"completed",duration:y,timestamp:new Date().toISOString(),metadata:{callId:(_==null?void 0:_.id)||"unknown",videoRecordingEnabled:((u=_==null?void 0:_.artifactPlan)==null?void 0:u.videoRecordingEnabled)??!1,voiceProvider:((p=(h=_==null?void 0:_.assistant)==null?void 0:h.voice)==null?void 0:p.provider)||"unknown"}}),this.call&&(this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"started",timestamp:new Date().toISOString(),metadata:{action:"cleanup-existing"}}),await this.cleanup());const C=((g=_==null?void 0:_.artifactPlan)==null?void 0:g.videoRecordingEnabled)??!1,L=((S=(T=_==null?void 0:_.assistant)==null?void 0:T.voice)==null?void 0:S.provider)==="tavus";this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"started",timestamp:new Date().toISOString(),metadata:{audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??C,isVideoRecordingEnabled:C,isVideoEnabled:L}});const $=Date.now();try{this.call=cm.default.createCallObject({audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??C,dailyConfig:this.dailyCallConfig});const b=Date.now()-$;this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"completed",duration:b,timestamp:new Date().toISOString()})}catch(b){const V=Date.now()-$;throw this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"failed",duration:V,timestamp:new Date().toISOString(),metadata:{error:b==null?void 0:b.toString()}}),this.emit("error",{type:"daily-call-object-creation-error",stage:"daily-call-object-creation",error:b,timestamp:new Date().toISOString()}),b}(E=this.call.iframe())==null||E.style.setProperty("display","none"),this.call.on("left-meeting",()=>{var b;this.emit("call-end"),this.hasEmittedCallEndedStatus||(this.emit("message",{type:"status-update",status:"ended",endedReason:"customer-ended-call"}),this.hasEmittedCallEndedStatus=!0),C&&((b=this.call)==null||b.stopRecording()),this.cleanup().catch(console.error)}),this.call.on("error",b=>{var V;this.emit("error",b),C&&((V=this.call)==null||V.stopRecording())}),this.call.on("camera-error",b=>{this.emit("camera-error",b)}),this.call.on("network-quality-change",b=>{this.emit("network-quality-change",b)}),this.call.on("network-connection",b=>{this.emit("network-connection",b)}),this.call.on("track-started",async b=>{var V,N,Pe;!b||!b.participant||(V=b.participant)!=null&&V.local||((N=b.participant)==null?void 0:N.user_name)==="Vapi Speaker"&&(b.track.kind==="video"&&this.emit("video",b.track),b.track.kind==="audio"&&await yT(b.track,b.participant.session_id),(Pe=this.call)==null||Pe.sendAppMessage("playable"))}),this.call.on("participant-joined",b=>{!b||!this.call||_T(b,this.call,C,L)}),this.call.on("participant-updated",b=>{b&&this.emit("daily-participant-updated",b.participant)}),this.call.on("participant-left",b=>{b&&vT(b.participant.session_id)});const q=this.isMobileDevice();if(this.emit("call-start-progress",{stage:"mobile-permissions",status:"started",timestamp:new Date().toISOString(),metadata:{isMobile:q}}),q){const b=Date.now();await this.sleep(1e3);const V=Date.now()-b;this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",duration:V,timestamp:new Date().toISOString(),metadata:{action:"permissions-wait"}})}else this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-mobile"}});this.emit("call-start-progress",{stage:"daily-call-join",status:"started",timestamp:new Date().toISOString()});const P=Date.now();try{await this.call.join({url:_.webCallUrl,subscribeToTracksAutomatically:!1});const b=Date.now()-P;this.emit("call-start-progress",{stage:"daily-call-join",status:"completed",duration:b,timestamp:new Date().toISOString()})}catch(b){const V=Date.now()-P;throw this.emit("call-start-progress",{stage:"daily-call-join",status:"failed",duration:V,timestamp:new Date().toISOString(),metadata:{error:b==null?void 0:b.toString()}}),this.emit("error",{type:"daily-call-join-error",stage:"daily-call-join",error:b,duration:V,timestamp:new Date().toISOString()}),b}if(C){this.emit("call-start-progress",{stage:"video-recording-setup",status:"started",timestamp:new Date().toISOString()});const b=new Date().getTime(),V=Date.now();try{this.call.startRecording({width:1280,height:720,backgroundColor:"#FF1F2D3D",layout:{preset:"default"}});const N=Date.now()-V;this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",duration:N,timestamp:new Date().toISOString()}),this.call.on("recording-started",()=>{const Pe=(new Date().getTime()-b)/1e3;this.emit("call-start-progress",{stage:"video-recording-started",status:"completed",timestamp:new Date().toISOString(),metadata:{delaySeconds:Pe}}),this.send({type:"control",control:"say-first-message",videoRecordingStartDelaySeconds:Pe})})}catch(N){const Pe=Date.now()-V;this.emit("call-start-progress",{stage:"video-recording-setup",status:"failed",duration:Pe,timestamp:new Date().toISOString(),metadata:{error:N==null?void 0:N.toString()}}),this.emit("error",{type:"video-recording-setup-error",stage:"video-recording-setup",error:N,timestamp:new Date().toISOString()})}}else this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-enabled"}});this.emit("call-start-progress",{stage:"audio-observer-setup",status:"started",timestamp:new Date().toISOString()});const I=Date.now();try{this.call.startRemoteParticipantsAudioLevelObserver(100);const b=Date.now()-I;this.emit("call-start-progress",{stage:"audio-observer-setup",status:"completed",duration:b,timestamp:new Date().toISOString()})}catch(b){const V=Date.now()-I;this.emit("call-start-progress",{stage:"audio-observer-setup",status:"failed",duration:V,timestamp:new Date().toISOString(),metadata:{error:b==null?void 0:b.toString()}}),this.emit("error",{type:"audio-observer-setup-error",stage:"audio-observer-setup",error:b,timestamp:new Date().toISOString()})}this.call.on("remote-participants-audio-level",b=>{b&&this.handleRemoteParticipantsAudioLevel(b)}),this.call.on("app-message",b=>this.onAppMessage(b)),this.call.on("nonfatal-error",b=>{var V;(b==null?void 0:b.type)==="audio-processor-error"&&((V=this.call)==null||V.updateInputSettings({audio:{processor:{type:"none"}}}).then(()=>{(0,Zs.safeSetLocalAudio)(this.call,!0)}))}),this.emit("call-start-progress",{stage:"audio-processing-setup",status:"started",timestamp:new Date().toISOString()});const R=Date.now();try{this.call.updateInputSettings({audio:{processor:{type:"noise-cancellation"}}});const b=Date.now()-R;this.emit("call-start-progress",{stage:"audio-processing-setup",status:"completed",duration:b,timestamp:new Date().toISOString()})}catch(b){const V=Date.now()-R;this.emit("call-start-progress",{stage:"audio-processing-setup",status:"failed",duration:V,timestamp:new Date().toISOString(),metadata:{error:b==null?void 0:b.toString()}}),this.emit("error",{type:"audio-processing-setup-error",stage:"audio-processing-setup",error:b,timestamp:new Date().toISOString()})}const x=Date.now()-l;return this.emit("call-start-success",{totalDuration:x,callId:(_==null?void 0:_.id)||"unknown",timestamp:new Date().toISOString()}),_}catch(k){const _=Date.now()-l;return this.emit("call-start-failed",{stage:"unknown",totalDuration:_,error:(k==null?void 0:k.toString())||"Unknown error occurred",errorStack:k instanceof Error?k.stack:"No stack trace available",timestamp:new Date().toISOString(),context:{hasAssistant:!!n,hasSquad:!!i,hasWorkflow:!!s,isMobile:this.isMobileDevice()}}),this.emit("error",{type:"start-method-error",stage:"unknown",error:k,totalDuration:_,timestamp:new Date().toISOString(),context:{hasAssistant:!!n,hasSquad:!!i,hasWorkflow:!!s,isMobile:this.isMobileDevice()}}),await this.cleanup(),null}}onAppMessage(n){if(n)try{if(n.data==="listening")return this.emit("call-start");try{const r=JSON.parse(n.data);this.emit("message",r),r&&"type"in r&&"status"in r&&r.type==="status-update"&&r.status==="ended"&&(this.hasEmittedCallEndedStatus=!0)}catch(r){console.log("Error parsing message data: ",r)}}catch(r){console.error(r)}}handleRemoteParticipantsAudioLevel(n){const r=Object.values(n.participantsAudioLevel).reduce((s,o)=>s+o,0);this.emit("volume-level",Math.min(1,r/.15)),r>.01&&(this.speakingTimeout?(clearTimeout(this.speakingTimeout),this.speakingTimeout=null):this.emit("speech-start"),this.speakingTimeout=setTimeout(()=>{this.emit("speech-end"),this.speakingTimeout=null},1e3))}async stop(){this.started=!1,this.call&&(await this.call.destroy(),this.call=null),this.speakingTimeout=null}send(n){var r;(r=this.call)==null||r.sendAppMessage(JSON.stringify(n))}setMuted(n){(0,Zs.safeSetLocalAudio)(this.call,!n)}isMuted(){return this.call?this.call.localAudio()===!1:!1}say(n,r,i,s){this.send({type:"say",message:n,endCallAfterSpoken:r,interruptionsEnabled:i??!1,interruptAssistantEnabled:s??!1})}end(){this.send({type:"end-call"}),this.stop()}setInputDevicesAsync(n){return(0,Zs.safeSetInputDevicesAsync)(this.call,n)}async increaseMicLevel(n){if(!this.call)throw new Error("Call object is not available.");try{const r=await navigator.mediaDevices.getUserMedia({audio:!0}),i=new AudioContext,s=i.createMediaStreamSource(r),o=i.createGain();o.gain.value=n,s.connect(o);const a=i.createMediaStreamDestination();o.connect(a);const[l]=a.stream.getAudioTracks();await(0,Zs.safeSetInputDevicesAsync)(this.call,{audioSource:l})}catch(r){console.error("Error adjusting microphone level:",r)}}setOutputDeviceAsync(n){var r;(r=this.call)==null||r.setOutputDeviceAsync(n)}getDailyCallObject(){return this.call}startScreenSharing(n,r){var i;(i=this.call)==null||i.startScreenShare({displayMediaOptions:n,screenVideoSendSettings:r})}stopScreenSharing(){var n;(n=this.call)==null||n.stopScreenShare()}async reconnect(n){var i,s,o,a,l,u,h,p,g,T,S,E,k;const r=Date.now();if(this.started)throw new Error("Cannot reconnect while a call is already in progress. Call stop() first.");if(!n.webCallUrl)throw new Error("webCallUrl is required for reconnection.");this.emit("call-start-progress",{stage:"reconnect-initialization",status:"started",timestamp:new Date().toISOString(),metadata:{callId:n.id||"unknown",hasVideoRecording:!!((i=n==null?void 0:n.artifactPlan)!=null&&i.videoRecordingEnabled),voiceProvider:((o=(s=n==null?void 0:n.assistant)==null?void 0:s.voice)==null?void 0:o.provider)||"unknown"}}),this.started=!0;try{this.call&&(this.emit("call-start-progress",{stage:"cleanup-existing-call",status:"started",timestamp:new Date().toISOString()}),await this.cleanup(),this.emit("call-start-progress",{stage:"cleanup-existing-call",status:"completed",timestamp:new Date().toISOString()}));const _=((a=n==null?void 0:n.artifactPlan)==null?void 0:a.videoRecordingEnabled)??!1,y=((u=(l=n==null?void 0:n.assistant)==null?void 0:l.voice)==null?void 0:u.provider)==="tavus";this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"started",timestamp:new Date().toISOString(),metadata:{audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??_,isVideoRecordingEnabled:_,isVideoEnabled:y}});const C=Date.now();this.call=cm.default.createCallObject({audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??_,dailyConfig:this.dailyCallConfig});const L=Date.now()-C;this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"completed",duration:L,timestamp:new Date().toISOString()}),(h=this.call.iframe())==null||h.style.setProperty("display","none"),this.call.on("left-meeting",()=>{var b;this.emit("call-end"),this.hasEmittedCallEndedStatus||(this.emit("message",{type:"status-update",status:"ended",endedReason:"customer-ended-call"}),this.hasEmittedCallEndedStatus=!0),_&&((b=this.call)==null||b.stopRecording()),this.cleanup().catch(console.error)}),this.call.on("error",b=>{var V;this.emit("error",b),_&&((V=this.call)==null||V.stopRecording())}),this.call.on("camera-error",b=>{this.emit("camera-error",b)}),this.call.on("network-quality-change",b=>{this.emit("network-quality-change",b)}),this.call.on("network-connection",b=>{this.emit("network-connection",b)}),this.call.on("track-started",async b=>{var V,N,Pe;!b||!b.participant||(V=b.participant)!=null&&V.local||((N=b.participant)==null?void 0:N.user_name)==="Vapi Speaker"&&(b.track.kind==="video"&&this.emit("video",b.track),b.track.kind==="audio"&&await yT(b.track,b.participant.session_id),(Pe=this.call)==null||Pe.sendAppMessage("playable"))}),this.call.on("participant-joined",b=>{!b||!this.call||_T(b,this.call,_,y)}),this.call.on("participant-updated",b=>{b&&this.emit("daily-participant-updated",b.participant)}),this.call.on("participant-left",b=>{b&&vT(b.participant.session_id)}),this.call.on("remote-participants-audio-level",b=>{b&&this.handleRemoteParticipantsAudioLevel(b)}),this.call.on("app-message",b=>this.onAppMessage(b)),this.call.on("nonfatal-error",b=>{var V;(b==null?void 0:b.type)==="audio-processor-error"&&((V=this.call)==null||V.updateInputSettings({audio:{processor:{type:"none"}}}).then(()=>{(0,Zs.safeSetLocalAudio)(this.call,!0)}))});const $=this.isMobileDevice();if(this.emit("call-start-progress",{stage:"mobile-permissions",status:"started",timestamp:new Date().toISOString(),metadata:{isMobile:$}}),$){const b=Date.now();await this.sleep(1e3);const V=Date.now()-b;this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",duration:V,timestamp:new Date().toISOString(),metadata:{action:"permissions-wait"}})}else this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-mobile"}});this.emit("call-start-progress",{stage:"daily-call-join",status:"started",timestamp:new Date().toISOString()});const q=Date.now();await this.call.join({url:n.webCallUrl,subscribeToTracksAutomatically:!1});const P=Date.now()-q;if(this.emit("call-start-progress",{stage:"daily-call-join",status:"completed",duration:P,timestamp:new Date().toISOString()}),_){this.emit("call-start-progress",{stage:"video-recording-setup",status:"started",timestamp:new Date().toISOString()});const b=Date.now(),V=new Date().getTime();try{this.call.startRecording({width:1280,height:720,backgroundColor:"#FF1F2D3D",layout:{preset:"default"}});const N=Date.now()-b;this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",duration:N,timestamp:new Date().toISOString()}),this.call.on("recording-started",()=>{const Pe=(new Date().getTime()-V)/1e3;this.emit("call-start-progress",{stage:"video-recording-started",status:"completed",timestamp:new Date().toISOString(),metadata:{delaySeconds:Pe}}),this.send({type:"control",control:"say-first-message",videoRecordingStartDelaySeconds:Pe})})}catch(N){const Pe=Date.now()-b;this.emit("call-start-progress",{stage:"video-recording-setup",status:"failed",duration:Pe,timestamp:new Date().toISOString(),metadata:{error:N==null?void 0:N.toString()}})}}else this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-enabled"}});this.emit("call-start-progress",{stage:"audio-observer-setup",status:"started",timestamp:new Date().toISOString()});const I=Date.now();try{this.call.startRemoteParticipantsAudioLevelObserver(100);const b=Date.now()-I;this.emit("call-start-progress",{stage:"audio-observer-setup",status:"completed",duration:b,timestamp:new Date().toISOString()})}catch(b){const V=Date.now()-I;this.emit("call-start-progress",{stage:"audio-observer-setup",status:"failed",duration:V,timestamp:new Date().toISOString(),metadata:{error:b==null?void 0:b.toString()}})}this.emit("call-start-progress",{stage:"audio-processing-setup",status:"started",timestamp:new Date().toISOString()});const R=Date.now();try{this.call.updateInputSettings({audio:{processor:{type:"noise-cancellation"}}});const b=Date.now()-R;this.emit("call-start-progress",{stage:"audio-processing-setup",status:"completed",duration:b,timestamp:new Date().toISOString()})}catch(b){const V=Date.now()-R;this.emit("call-start-progress",{stage:"audio-processing-setup",status:"failed",duration:V,timestamp:new Date().toISOString(),metadata:{error:b==null?void 0:b.toString()}})}const x=Date.now()-r;this.emit("call-start-success",{totalDuration:x,callId:(n==null?void 0:n.id)||"unknown",timestamp:new Date().toISOString()}),this.emit("call-start")}catch(_){const y=Date.now()-r;throw this.emit("call-start-failed",{stage:"reconnect",totalDuration:y,error:(_==null?void 0:_.toString())||"Unknown error occurred",errorStack:_ instanceof Error?_.stack:"No stack trace available",timestamp:new Date().toISOString(),context:{isReconnect:!0,callId:(n==null?void 0:n.id)||"unknown",hasVideoRecording:!!((p=n==null?void 0:n.artifactPlan)!=null&&p.videoRecordingEnabled),voiceProvider:((T=(g=n==null?void 0:n.assistant)==null?void 0:g.voice)==null?void 0:T.provider)||"unknown",isMobile:this.isMobileDevice()}}),this.emit("error",{type:"reconnect-error",error:_,totalDuration:y,timestamp:new Date().toISOString(),context:{isReconnect:!0,callId:(n==null?void 0:n.id)||"unknown",hasVideoRecording:!!((S=n==null?void 0:n.artifactPlan)!=null&&S.videoRecordingEnabled),voiceProvider:((k=(E=n==null?void 0:n.assistant)==null?void 0:E.voice)==null?void 0:k.provider)||"unknown",isMobile:this.isMobileDevice()}}),await this.cleanup(),_}}static async runNetworkTestsStandalone(){console.log("Starting standalone network connectivity tests...");const n={};let r=null;try{console.log("Creating temporary call object for testing..."),r=cm.default.createCallObject({audioSource:!0,videoSource:!0}),console.log(`
1. Testing network connectivity (TURN server)...`);let i=null;try{i=(await navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0];const o=await r.testNetworkConnectivity(i);n.networkConnectivity=o,console.log("Network connectivity test result:",o)}catch(s){n.networkConnectivity={result:"error",error:s==null?void 0:s.toString()},console.error("Network connectivity test error:",s)}finally{i&&i.stop()}console.log(`
2. Testing websocket connectivity...`);try{const s=await r.testWebsocketConnectivity();n.websocketConnectivity=s,console.log("Websocket connectivity test result:",s)}catch(s){n.websocketConnectivity={result:"error",error:s==null?void 0:s.toString()},console.error("Websocket connectivity test error:",s)}console.log(`
3. Testing call quality...`);try{if(typeof r.testCallQuality=="function")try{console.log("Initializing call state with startCamera..."),await r.startCamera();const s=await r.testCallQuality();n.callQuality=s,console.log("Call quality test result:",s)}catch(s){console.error("Failed to start camera for call quality test:",s),n.callQuality={result:"error",error:s==null?void 0:s.toString(),message:"Failed to initialize camera for call quality test. Check camera permissions."}}else n.callQuality={result:"not-available",message:"testCallQuality method not available"},console.log("Call quality test not available in current Daily.co version")}catch(s){n.callQuality={result:"error",error:s==null?void 0:s.toString()},console.error("Call quality test error:",s)}}catch(i){console.error("Failed to create temporary call object:",i),n.error=i==null?void 0:i.toString()}finally{if(r)try{console.log("Cleaning up temporary call object..."),await r.destroy()}catch(i){console.error("Error destroying temporary call object:",i)}}return console.log(`
=== Network Test Summary ===`),console.log("Results:",JSON.stringify(n,null,2)),n}}var bU=mC.default=TU;class kU{constructor({onEvent:e,onError:n,onReconnect:r,apiKey:i,assistantId:s}){var o;if(this.onEvent=e,this.onError=n||(()=>{}),this.onReconnect=r||(()=>{}),this.apiKey=i||void 0,this.assistantId=s||void 0,console.log("Using Vapi public key:",(o=this.apiKey)==null?void 0:o.slice(0,6)),console.log("Using Vapi assistant ID:",this.assistantId),!this.apiKey){this.onError({type:"missing_api_key",message:"VITE_VAPI_API_KEY (PUBLIC key) is required. Add it to Vercel environment variables."});return}if(!this.assistantId){this.onError({type:"missing_assistant_id",message:"VITE_VAPI_ASSISTANT_ID is required. Get it from your Vapi assistant settings."});return}this.vapi=new bU(this.apiKey),this.isStopped=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.callId=null,this.setupEventListeners(),this.testProcessTranscript=async a=>{if(!this.callId){console.error("[VapiClient] No callId available for test");return}console.log("[VapiClient] Manual test: Processing transcript:",a),await this.processTranscript(a,"user")}}setupEventListeners(){this.vapi.on("call-start",r=>{var a,l,u,h;console.log("[VapiClient]  call-start event received:",r);let i=null;r&&(i=((a=r.call)==null?void 0:a.id)||r.id||r.callId,console.log("[VapiClient]  callId from event:",i)),!i&&this.vapi.call&&(i=this.vapi.call.id,console.log("[VapiClient]  callId from this.vapi.call.id:",i)),i?(this.callId=i,console.log("[VapiClient]  this.callId set in call-start handler:",this.callId)):(u=(l=this.vapi)==null?void 0:l.call)!=null&&u.id?(this.callId=this.vapi.call.id,i=this.callId,console.log("[VapiClient]  Got callId from this.vapi.call.id in call-start:",this.callId)):this.callId||(console.warn("[VapiClient]  call-start event has no callId, and this.callId is not set"),console.warn("[VapiClient]  Event details:",JSON.stringify(r,null,2)),console.warn("[VapiClient]  this.vapi.call:",(h=this.vapi)==null?void 0:h.call)),this.reconnectAttempts=0;const s={type:"status",status:"connected",...r||{}},o=this.callId||i;o?(s.callId=o,console.log("[VapiClient]  Emitting status event with callId:",o)):console.warn("[VapiClient]  Emitting status event WITHOUT callId - frontend won't be able to listen to suggestions"),this.onEvent(s)}),this.vapi.on("call-end",r=>{console.log("Vapi call ended:",r),this.onEvent({type:"status",status:"ended",...r||{}})});const e=(r,i="transcript")=>{var g,T,S,E,k,_;if(console.log(`[Vapi ${i} event]:`,r),!r)return;const s=r.transcript||r.text||r.message||r.content,o=r.role||r.speaker||r.type,a=r.transcriptType||r.type;if(!s){console.log(`[Vapi ${i}]: No transcript text found in event`);return}if(o==="assistant"||o==="system"||o==="assistant-message"){console.log("Ghost: Filtering out assistant speech (silent mode):",s);return}if((y=>{const C=y.toLowerCase().trim();return["ask:","acknowledge concern","reframe around","highlight","pivot to","emphasize","probe deeper","what's driving","what specific","how will this impact","what would make this","offer expedited","request case studies","reveal key performance","explore specific metrics","focus on quantifiable","what's the deadline","what's the cost of inaction"].some($=>C.startsWith($)||C.includes($+" ")||C.includes(" "+$))})(s)){console.log("Ghost: Filtering out coaching cue picked up by microphone:",s);return}const u=a==="final"||i==="final"||!a,h=u&&o==="user";console.log(`[Vapi transcript captured]: "${s}" (role: ${o}, type: ${a||"unknown"}, final: ${u})`),console.log("[VapiClient]  DEBUG - this.callId at handleTranscript:",this.callId),console.log("[VapiClient]  DEBUG - this.vapi?.call?.id:",(T=(g=this.vapi)==null?void 0:g.call)==null?void 0:T.id),console.log("[VapiClient]  DEBUG - event?.callId:",r==null?void 0:r.callId),console.log("[VapiClient]  DEBUG - event?.call?.id:",(S=r==null?void 0:r.call)==null?void 0:S.id),this.onEvent({type:"transcript",text:s,speaker:o==="user"?"Them":"You",timestamp:r.timestamp||new Date().toISOString()});let p=this.callId;console.log("[VapiClient]  DEBUG - Initial callIdToUse from this.callId:",p),!p&&((k=(E=this.vapi)==null?void 0:E.call)!=null&&k.id)&&(p=this.vapi.call.id,this.callId=p,console.log("[VapiClient]  DEBUG - Got callId from this.vapi.call.id:",p)),!p&&(r!=null&&r.callId)&&(p=r.callId,this.callId=p,console.log("[VapiClient]  DEBUG - Got callId from event.callId:",p)),!p&&((_=r==null?void 0:r.call)!=null&&_.id)&&(p=r.call.id,this.callId=p,console.log("[VapiClient]  DEBUG - Got callId from event.call.id:",p)),console.log(`[VapiClient] Checking if should process: role=${o}, callId=${p}, isFinal=${u}, transcript="${s.substring(0,30)}"`),h&&p?(console.log("[VapiClient]  Calling processTranscript with callId:",p),this.processTranscript(s,o,p)):console.log(u?`[VapiClient]  Skipping processTranscript: role=${o}, callId=${p}, isFinal=${u}`:"[VapiClient]  Skipping partial transcript (will process when final)")};this.vapi.on("transcript",r=>e(r,"transcript")),this.vapi.on("message",r=>{var i,s,o,a,l;try{const u=JSON.stringify(r,null,2);console.log("[Vapi message event] Full event:",u),console.log("[Vapi message event] Event type:",r==null?void 0:r.type),console.log("[Vapi message event] Event keys:",Object.keys(r||{}));const h=r.transcript||r.text||r.content||((i=r.message)==null?void 0:i.transcript)||((s=r.message)==null?void 0:s.text)||((o=r.data)==null?void 0:o.transcript)||((a=r.data)==null?void 0:a.text);h?(console.log("[Vapi message event]  Found transcript:",h),e({transcript:h,text:h,role:r.role||((l=r.message)==null?void 0:l.role)||"user",...r},"message")):console.log("[Vapi message event]  No transcript found in event")}catch(u){console.error("[Vapi message event] Error processing:",u)}}),this.vapi.on("user-transcript",r=>{console.log("[Vapi user-transcript event]:",JSON.stringify(r,null,2)),e(r,"user-transcript")}),this.vapi.on("assistant-transcript",r=>{console.log("Ghost: Ignoring assistant transcript:",r)}),["status-update","function-call","hang","speech-update","metadata","conversation-item"].forEach(r=>{this.vapi.on(r,i=>{var s;console.log(`[Vapi ${r} event]:`,JSON.stringify(i,null,2)),(i.transcript||i.text||i.content||(s=i.message)!=null&&s.transcript)&&(console.log(`[Vapi ${r}] Contains transcript data!`),e(i,r))})}),this.vapi.on("speech-start",r=>{if(r.role==="assistant"||r.role==="bot"){console.log(" CRITICAL: Assistant speech-start blocked:",r);return}this.onEvent({type:"speech-start",...r})}),this.vapi.on("speech-end",r=>{if(r.role==="assistant"||r.role==="bot"){console.log(" CRITICAL: Assistant speech-end blocked:",r);return}this.onEvent({type:"speech-end",...r})}),this.vapi.on("speech-update",r=>{const i=r.role||r.speaker,s=r.status;if(i==="assistant"||i==="bot"){console.log(" CRITICAL: Assistant speech-update blocked:",{role:i,status:s,event:r});return}}),this.vapi.on("error",async r=>{var o,a;console.error("Vapi SDK error:",r);const i=(r==null?void 0:r.errorMsg)||(r==null?void 0:r.message)||((o=r==null?void 0:r.error)==null?void 0:o.message);if(i&&i.toLowerCase().includes("meeting has ended")){this.callId=null,this.onEvent({type:"status",status:"ended"});return}let s="Vapi SDK error";(a=r==null?void 0:r.error)!=null&&a.message?s=r.error.message:r!=null&&r.message?s=r.message:typeof r=="string"?s=r:r!=null&&r.data&&(s=JSON.stringify(r.data)),this.onError({type:"sdk_error",message:s,error:r,hint:"Check: 1) Public API key has web call permissions, 2) Assistant is configured for WebRTC, 3) Domain restrictions allow this origin"})}),this.vapi.on("function-call",r=>{this.onEvent({type:"function-call",...r})})}async startSession(e=null){var n,r,i,s,o,a;if(!this.apiKey||!this.assistantId)return!1;this.isStopped&&(this.isStopped=!1,this.reconnectAttempts=0);try{console.log("Starting Vapi session with assistant:",this.assistantId);const l=await this.vapi.start(this.assistantId);console.log("Vapi WebRTC session started:",l);let u=null;return l!=null&&l.id?(u=l.id,console.log("[VapiClient]  Got callId from result.id:",u)):(n=l==null?void 0:l.call)!=null&&n.id?(u=l.call.id,console.log("[VapiClient]  Got callId from result.call.id:",u)):(i=(r=this.vapi)==null?void 0:r.call)!=null&&i.id&&(u=this.vapi.call.id,console.log("[VapiClient]  Got callId from this.vapi.call.id:",u)),u?(this.callId=u,console.log("[VapiClient]  Vapi callId captured:",this.callId),this.onEvent({type:"status",status:"connected",callId:this.callId})):(console.warn("[VapiClient]  No callId in start result, waiting for call-start event..."),this.onEvent({type:"status",status:"connecting"}),setTimeout(()=>{var h,p;!this.callId&&((p=(h=this.vapi)==null?void 0:h.call)!=null&&p.id)&&(this.callId=this.vapi.call.id,console.log("[VapiClient]  Got callId from delayed check (this.vapi.call.id):",this.callId),this.onEvent({type:"status",status:"connected",callId:this.callId}))},1e3)),!0}catch(l){console.error("Vapi session start error:",l);let u="Failed to start Vapi session",h=null;return(s=l==null?void 0:l.error)!=null&&s.message?(u=l.error.message,h=l.error):l!=null&&l.message?u=l.message:l!=null&&l.data&&(h=l.data,u=((o=l.data)==null?void 0:o.message)||u),((l==null?void 0:l.status)===403||((a=l==null?void 0:l.error)==null?void 0:a.statusCode)===403)&&(u="403 Forbidden: Check that: 1) Public API key is correct and has web call permissions, 2) Assistant ID is valid, 3) Domain restrictions allow this origin. WebRTC is enabled by default - no dashboard configuration needed."),this.onError({type:"call_creation_error",message:u,error:h||l,hint:"Verify: 1) Public key allows web calls, 2) Assistant supports WebRTC, 3) No domain restrictions blocking this origin"}),!1}}async handleReconnect(){if(this.isStopped||this.reconnectAttempts>=this.maxReconnectAttempts){this.reconnectAttempts>=this.maxReconnectAttempts&&this.onError({type:"max_reconnect",message:"Max reconnection attempts reached. Please restart the session."});return}this.reconnectAttempts++;const e=Math.min(1e3*Math.pow(2,this.reconnectAttempts-1),3e4);this.onReconnect({attempt:this.reconnectAttempts,maxAttempts:this.maxReconnectAttempts,nextAttemptIn:e}),await new Promise(n=>setTimeout(n,e)),this.isStopped||await this.startSession()}async processTranscript(e,n,r=null){var s,o;const i=r||this.callId;if(console.log("[VapiClient]  processTranscript called:",{text:e.substring(0,50),role:n,callIdParam:r,thisCallId:this.callId,callIdToUse:i}),!i){console.log("[VapiClient]  No callId available, skipping transcript processing"),console.log("[VapiClient]  DEBUG - this.callId:",this.callId),console.log("[VapiClient]  DEBUG - this.vapi?.call?.id:",(o=(s=this.vapi)==null?void 0:s.call)==null?void 0:o.id);return}try{console.log("[VapiClient]  Sending transcript to /api/process-transcript with callId:",i);const a=await fetch("/api/process-transcript",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,callId:i,role:n,speaker:n==="user"?"Them":"You"})});if(!a.ok){console.error("[VapiClient] Failed to process transcript:",a.statusText);return}const l=await a.json();console.log("[VapiClient] Transcript processed:",l)}catch(a){console.error("[VapiClient] Error processing transcript:",a)}}stopSession(){this.isStopped=!0;try{this.vapi&&this.vapi.stop()}catch(e){console.error("Error stopping Vapi session:",e)}this.reconnectAttempts=0,this.callId=null}getStatus(){return{isStopped:this.isStopped,reconnectAttempts:this.reconnectAttempts,callId:this.callId,connected:this.callId!==null&&!this.isStopped}}}class IU{constructor({onEvent:e,onError:n,onReconnect:r,useVapi:i=!1}){this.onEvent=e,this.onError=n||(()=>{}),this.onReconnect=r||(()=>{}),this.useVapi=i||!1,this.mode=null,this.useVapi?this.vapiClient=new kU({onEvent:this.onEvent,onError:this.onError,onReconnect:this.onReconnect}):(this.abortController=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3),this.isStopped=!1}async startSession(e,n=null){return this.isStopped=!1,this.mode=e,this.useVapi&&this.vapiClient?await this.vapiClient.startSession(n):(this.reconnectAttempts=0,this.reconnectDelay=1e3,await this.connect(),!0)}async connect(){if(!this.isStopped&&!(this.useVapi&&this.vapiClient)){this.abortController=new AbortController;try{const e=await fetch(`/api/ghost-sim?mode=${this.mode}`,{signal:this.abortController.signal});if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);if(!e.body)throw new Error("Response body is null");this.reconnectAttempts=0,this.reconnectDelay=1e3;const n=e.body.getReader(),r=new TextDecoder;let i="";for(;!this.isStopped;){const{done:s,value:o}=await n.read();if(s){this.isStopped||await this.handleReconnect();break}i+=r.decode(o,{stream:!0});const a=i.split(`
`);i=a.pop()??"",a.forEach(l=>{if(l.trim())try{const u=JSON.parse(l);this.onEvent(u)}catch(u){console.error("Failed to parse event",u,l),this.onError({type:"parse_error",message:"Failed to parse event from stream",error:u})}})}}catch(e){if(this.isStopped||e.name==="AbortError")return;console.error("Ghost session error",e),this.onError({type:"connection_error",message:e.message||"Connection failed",error:e}),this.isStopped||await this.handleReconnect()}}}async handleReconnect(){if(this.isStopped||this.reconnectAttempts>=this.maxReconnectAttempts){this.reconnectAttempts>=this.maxReconnectAttempts&&this.onError({type:"max_reconnect",message:"Max reconnection attempts reached. Please restart the session."});return}this.reconnectAttempts++;const e=Math.min(this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1),3e4);this.onReconnect({attempt:this.reconnectAttempts,maxAttempts:this.maxReconnectAttempts,nextAttemptIn:e}),await new Promise(n=>setTimeout(n,e)),this.isStopped||await this.connect()}stopSession(){this.isStopped=!0,this.useVapi&&this.vapiClient?this.vapiClient.stopSession():(this.abortController&&(this.abortController.abort(),this.abortController=null),this.reconnectAttempts=0)}get callId(){return this.useVapi&&this.vapiClient?this.vapiClient.callId:null}getStatus(){return this.useVapi&&this.vapiClient?{...this.vapiClient.getStatus(),mode:this.mode,provider:"vapi"}:{isStopped:this.isStopped,reconnectAttempts:this.reconnectAttempts,mode:this.mode,provider:"mock"}}}class wT{constructor({onTranscript:e,onError:n}){this.onTranscript=e,this.onError=n||(()=>{}),this.recognition=null,this.isListening=!1}start(){if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window))return this.onError({type:"not_supported",message:"Speech recognition not supported in this browser. Using mock mode."}),!1;const e=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new e,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang="en-US",this.recognition.onresult=n=>{let r="",i="";for(let s=n.resultIndex;s<n.results.length;s++){const o=n.results[s][0].transcript;n.results[s].isFinal?i+=o+" ":r+=o}i?this.onTranscript({text:i.trim(),isFinal:!0,interim:!1}):r&&this.onTranscript({text:r,isFinal:!1,interim:!0})},this.recognition.onerror=n=>{console.error("Speech recognition error:",n.error),this.onError({type:"recognition_error",message:n.error,error:n})},this.recognition.onend=()=>{this.isListening=!1,this.isStopped||setTimeout(()=>{this.isStopped||this.start()},100)};try{return this.recognition.start(),this.isListening=!0,!0}catch(n){return console.error("Failed to start speech recognition:",n),this.onError({type:"start_error",message:"Failed to start speech recognition",error:n}),!1}}stop(){this.isStopped=!0,this.recognition&&this.isListening&&(this.recognition.stop(),this.isListening=!1)}isSupported(){return"webkitSpeechRecognition"in window||"SpeechRecognition"in window}}const mP=async({userId:t,sessionId:e,mode:n="sales"})=>{if(!t||!e)return;const r=Ft();if(r)try{const i=er(r,"users",t,"sessions",e);await au(i,{mode:n,startedAt:hn(),updatedAt:hn()},{merge:!0}),console.log("[SessionStore]  Session document created:",e)}catch(i){console.error("[SessionStore] Failed to create session document:",i)}},AU=async({userId:t,sessionId:e,updates:n})=>{if(!t||!e)return;const r=Ft();if(r)try{const i=er(r,"users",t,"sessions",e);await au(i,{...n,endedAt:hn(),updatedAt:hn()},{merge:!0}),console.log("[SessionStore]  Session updated:",e)}catch(i){console.error("[SessionStore] Failed to update session:",i)}},zU=async({userId:t,sessionId:e})=>{if(!t||!e)return;const n=Ft();if(!n)throw new Error("Firestore not available");try{const r=Zn(n,"users",t,"sessions",e,"transcript"),i=await Rg(r),s=i.docs.map(h=>ba(h.ref));await Promise.all(s),console.log("[SessionStore]  Deleted",i.size,"transcript entries");const o=Zn(n,"users",t,"sessions",e,"suggestions"),a=await Rg(o),l=a.docs.map(h=>ba(h.ref));await Promise.all(l),console.log("[SessionStore]  Deleted",a.size,"suggestion entries");const u=er(n,"users",t,"sessions",e);return await ba(u),console.log("[SessionStore]  Session deleted:",e),!0}catch(r){throw console.error("[SessionStore] Failed to delete session:",r),r}},ET=async({userId:t,sessionId:e,type:n,payload:r})=>{if(!t||!e)return;const i=Ft();if(i)try{await mP({userId:t,sessionId:e});const s=Zn(i,"users",t,"sessions",e,n);await lu(s,{...r,createdAt:hn()})}catch(s){console.error("Failed to persist session event",s)}},CU=F.lazy(()=>Yn(()=>import("./ParametersModal-CHV2ve17.js"),__vite__mapDeps([0,1])).then(t=>({default:t.ParametersModal}))),PU=F.lazy(()=>Yn(()=>import("./KnowledgeBaseModal-C2z1wsJ9.js"),__vite__mapDeps([2,1,3,4])).then(t=>({default:t.KnowledgeBaseModal}))),RU=F.lazy(()=>Yn(()=>import("./UpgradeAccountModal-FJQKdmfR.js"),__vite__mapDeps([5,1,6])).then(t=>({default:t.UpgradeAccountModal}))),xU=F.lazy(()=>Yn(()=>import("./SessionReplayModal-CKvvBomH.js"),__vite__mapDeps([7,3,4])).then(t=>({default:t.SessionReplayModal}))),OU=F.lazy(()=>Yn(()=>import("./AnalyticsDashboard-BD8pGWN8.js"),__vite__mapDeps([8,6])).then(t=>({default:t.AnalyticsDashboard}))),DU=F.lazy(()=>Yn(()=>import("./PaymentModal-DGPnCfop.js"),__vite__mapDeps([9,1,10])).then(t=>({default:t.PaymentModal}))),NU=F.lazy(()=>Yn(()=>import("./PricingModal-BlsprqDP.js"),__vite__mapDeps([11,1,10])).then(t=>({default:t.PricingModal}))),MU=F.lazy(()=>Yn(()=>import("./PlaybooksModal-C9SiF-Mr.js"),__vite__mapDeps([12,4])).then(t=>({default:t.PlaybooksModal}))),LU=["sales","interview","dating"],VU={connected:"Low Latency",connecting:"Handshaking",disconnected:"Offline"},jU=8e3,FU=[{value:"top-left",label:"Top Left"},{value:"top-right",label:"Top Right"},{value:"bottom-left",label:"Bottom Left"},{value:"bottom-right",label:"Bottom Right"}];function UU(){var yl,Yr,Au,Cu,Pu,ar,Ru;const[t,e]=F.useState(null),n=F.useRef(null),[r,i]=F.useState(null),s=F.useRef(null),o=F.useRef(null),[a,l]=F.useState("disconnected"),u=F.useRef(null),{isActive:h,audioLevel:p,start:g,stop:T}=Tj(),S=F.useRef(null),E=F.useRef(null),[k,_]=F.useState(!1),{user:y,isLoading:C,upgradeWithGoogle:L,upgradeWithEmail:$,signOutUser:q,authError:P,isActionInFlight:I}=Sj(),{profile:R,planDetails:x}=Cj(y==null?void 0:y.uid),{canUseTTSWhispers:b,canAccessSessionReplay:V,canExportSessions:N,canAccessAnalytics:Pe}=xj(x),{track:tn,trackSession:kr,trackFeature:Ye}=Nj(y==null?void 0:y.uid),[X,ue]=F.useState(()=>typeof window>"u"?!1:window.localStorage.getItem("ghost-whispers-muted")==="true"),{whisper:he,stop:Le}=Rj({enabled:h&&!X&&b,volume:.4,rate:1.2,pitch:1}),Se=F.useRef(new Set),[d,w]=F.useState([]),[v,O]=F.useState([]),{transcript:M,suggestions:B,isLoading:K}=Ij({userId:y==null?void 0:y.uid,sessionId:n.current,enabled:!!n.current&&!!(y!=null&&y.uid)&&!r}),{transcript:J,suggestions:Z}=Aj({callId:r,enabled:!!r&&!!(y!=null&&y.uid)}),[pe,we]=F.useState(null),[ht,nn]=F.useState(!1),nr=F.useRef(0),Ue=F.useCallback(j=>{we(j)},[]),[vt,at]=F.useState(!1),[Bt,Ir]=F.useState(!1),Xe=F.useRef(null),jn=F.useRef(0),Wr=F.useRef(null),[Gr,ft]=F.useState(()=>{if(typeof window>"u")return .85;const j=window.localStorage.getItem("ghost-hud-opacity"),Q=j?parseFloat(j):NaN;return Number.isFinite(Q)?Q:.85}),[_t,Ri]=F.useState(0),[kt,Ar]=F.useState(()=>typeof window>"u"?!1:window.localStorage.getItem("ghost-focus-mode")==="true"),[xi,Oi]=F.useState(()=>typeof window>"u"?"bottom-right":window.localStorage.getItem("ghost-hud-position")||"bottom-right"),[Di,Lo]=F.useState(null),[Ni,fu]=F.useState(!1),Vo=F.useRef(null),Vs=F.useRef(null),[al,js]=F.useState(!1),Fs=F.useCallback(j=>{switch(j){case"top-left":return{top:80,left:16};case"top-right":return{top:80,right:16};case"bottom-left":return{bottom:16,left:16};case"bottom-right":default:return{bottom:16,right:16}}},[]),[jo,Mi]=F.useState(!1),bn=F.useMemo(()=>J.length>0?J.map(j=>{var Q;return{speaker:j.speaker||"Them",text:j.text,time:(Q=j.timestamp)!=null&&Q.toDate?j.timestamp.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}}):M.length>0?M:d,[J,M,d]),et=F.useMemo(()=>{console.log("[App] Computing suggestions:",{vapiSuggestionsCount:Z.length,firestoreSuggestionsCount:B.length,localSuggestionsCount:v.length});let j=[];Z.length>0?j=Z.map(oe=>{var le,De;return{id:oe.id,text:oe.text,type:oe.type||"suggestion",ragUsed:oe.ragUsed||!1,receivedAt:(le=oe.timestamp)!=null&&le.toDate?oe.timestamp.toDate().toISOString():(De=oe.createdAt)!=null&&De.toDate?oe.createdAt.toDate().toISOString():new Date().toISOString()}}):B.length>0?j=B:j=v;const Q=new Set,te=j.filter(oe=>{const le=(oe.text||oe.content||"").trim().toLowerCase();if(!le)return!1;const De=le.replace(/\s+/g," ").replace(/[.,!?;:]/g,"").trim();return Q.has(De)?(console.log("[App]  Filtering duplicate suggestion:",le.substring(0,50)),!1):(Q.add(De),!0)});return console.log("[App]  Deduplicated suggestions:",te.length,"items (from",j.length,"total)"),te},[Z,B,v]),Us=F.useRef(0);F.useEffect(()=>{const j=et.length,Q=Us.current;if(j>Q&&n.current){const te=j-Q;tn("cue_generated",{sessionId:n.current,callId:s.current,totalCues:j,newCues:te})}Us.current=j,(Z.length>0||B.length>0)&&!ht&&nn(!0)},[et.length,tn]),F.useEffect(()=>{nn(!1)},[r]),F.useEffect(()=>{typeof navigator<"u"&&(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||Ue("This browser cannot access a live microphone. Ghost will run in read-only mode."))},[Ue]);const Fo=Bi(!1),Kr=Bi(!1),rn=Bi(!1),wt=Bi(!1),Uo=Bi(!1),Dt=Bi(!1),Fn=Bi(!1),ll=Bi(!1);F.useEffect(()=>{typeof window<"u"&&window.localStorage.setItem("ghost-hud-opacity",String(Gr))},[Gr]),F.useEffect(()=>{typeof window<"u"&&window.localStorage.setItem("ghost-focus-mode",String(kt))},[kt]),F.useEffect(()=>{typeof window<"u"&&window.localStorage.setItem("ghost-whispers-muted",String(X)),X&&Le()},[X,Le]);const pu=F.useRef(h);F.useEffect(()=>{pu.current!==h&&(Ar(!!h),pu.current=h)},[h]),F.useEffect(()=>{typeof window<"u"&&window.localStorage.setItem("ghost-hud-position",xi)},[xi]),F.useEffect(()=>{Bt&&(at(!0),Xe.current&&clearTimeout(Xe.current))},[Bt]);const rr=F.useCallback(j=>{const Q=(j==null?void 0:j.trigger)||{};return!!(Q.objection||Q.competitor||Q.timeline)},[]);F.useEffect(()=>{const j=et[0];if(!j||j.id===Wr.current||(Wr.current=j.id,Bt)||kt&&!rr(j))return;const Q=Date.now();Q-jn.current<jU||(jn.current=Q,at(!0),Xe.current&&clearTimeout(Xe.current),Xe.current=setTimeout(()=>{at(!1)},6e3))},[et,Bt,kt,rr]),F.useEffect(()=>()=>{Xe.current&&clearTimeout(Xe.current)},[]);const mu=F.useMemo(()=>h&&!ht?{title:"Listening for signals",body:"Mention price, budget, competition, or timing to trigger real-time intel."}:ht?{title:"Waiting for the next cue",body:"We'll surface another recommendation as soon as we detect a new trigger."}:{title:"No Signals Yet",body:"AI is calibrated and waiting for conversation triggers."},[h,ht]),cl=F.useCallback(()=>{if(typeof document<"u"){const j=document.getElementById("live-intel-panel");j==null||j.scrollIntoView({behavior:"smooth",block:"start"})}},[]),$o=et[0],Bo=F.useMemo(()=>{if(!kt)return et;const j=et.filter(rr);return j.length>0?j:et},[et,kt,rr]),qo=Bo[0]||$o,$s=qo?qo.text:ht?"Awaiting next cue":h?"Ghost is listening silently":"Tap START to unlock intel",It=F.useMemo(()=>Bo.slice(0,3),[Bo]),Bs=F.useMemo(()=>et.slice(0,8),[et]),ul=((yl=It[_t])==null?void 0:yl.id)||null;F.useEffect(()=>{(It.length===0||_t>=It.length)&&Ri(0)},[_t,It.length]);const Li=F.useCallback(()=>{at(j=>{const Q=!j;return Q||(Ir(!1),Mi(!1)),Ye("hud",Q?"expanded":"collapsed"),Q}),Xe.current&&(clearTimeout(Xe.current),Xe.current=null)},[Ye]),qs=F.useCallback(()=>{Ir(j=>{const Q=!j;return Ye("hud",Q?"pinned":"unpinned"),Q}),Xe.current&&(clearTimeout(Xe.current),Xe.current=null)},[Ye]),dl=F.useCallback(()=>{It.length!==0&&(at(!0),Ri(j=>(j+1)%It.length),Xe.current&&(clearTimeout(Xe.current),Xe.current=null))},[It.length]),[Vi,gu]=F.useState(()=>typeof window>"u"?!0:localStorage.getItem("ghostHudTourComplete")!=="1"),[Un,zs]=F.useState(0),ir=[{title:"Move & dock",body:"Press and hold the HUD header to drag it anywhere, or use the map pin icon to snap to a corner."},{title:"Stay stealthy",body:"Turn on Focus to only see high-priority cues. Use Pin to keep the HUD open during intense moments."},{title:"Keyboard superpowers",body:"Ctrl+Shift+G/H/I/L/M will toggle, pin, jump, and mute whispers without touching the mouse."}],Jr=ir[Math.min(Un,ir.length-1)]||ir[0];F.useEffect(()=>{Vi&&at(!0)},[Vi]);const Cr=F.useCallback((j,Q)=>{const te=Q<window.innerHeight/2,oe=j<window.innerWidth/2;return te&&oe?"top-left":te&&!oe?"top-right":!te&&oe?"bottom-left":"bottom-right"},[]),hl=F.useCallback(j=>{if(j.button!==0||j.target instanceof HTMLElement&&j.target.closest("button")||!Vs.current)return;j.preventDefault();const Q=Vs.current.getBoundingClientRect();Vo.current={offsetX:j.clientX-Q.left,offsetY:j.clientY-Q.top,width:Q.width,height:Q.height},at(!0),fu(!0),Mi(!1),js(!1)},[]);F.useEffect(()=>{if(!Ni)return;const j=te=>{if(!Vo.current)return;const{offsetX:oe,offsetY:le,width:De,height:sn}=Vo.current,Ui=window.innerWidth-De-12,Ve=topSpacing,Zf=window.innerHeight-sn-12;Lo({top:Math.min(Math.max(te.clientY-le,Ve),Zf),left:Math.min(Math.max(te.clientX-oe,12),Ui)})},Q=te=>{fu(!1),Lo(null),Oi(Cr(te.clientX,te.clientY)),Vo.current=null};return window.addEventListener("pointermove",j),window.addEventListener("pointerup",Q),()=>{window.removeEventListener("pointermove",j),window.removeEventListener("pointerup",Q)}},[Ni,Cr]);const fl=F.useCallback(j=>{var te;if(!j.ctrlKey||!j.shiftKey)return;const Q=typeof document<"u"?(te=document.activeElement)==null?void 0:te.tagName:null;if(!(Q&&["INPUT","TEXTAREA"].includes(Q)))switch(j.code){case"KeyG":j.preventDefault(),Li();break;case"KeyH":j.preventDefault(),qs();break;case"KeyI":j.preventDefault(),dl();break;case"KeyL":j.preventDefault(),cl();break;case"KeyF":j.preventDefault(),Ar(oe=>{const le=!oe;return Ye("focus_mode",le?"enabled":"disabled",{source:"hotkey"}),le});break;case"KeyM":j.preventDefault(),b?ue(oe=>{const le=!oe;return Ye("tts_whispers",le?"muted":"unmuted",{source:"hotkey"}),le}):rn.open();break}},[Li,qs,dl,cl,b,rn,Ye,Ar]);F.useEffect(()=>(window.addEventListener("keydown",fl),()=>window.removeEventListener("keydown",fl)),[fl]);const yu={...Di?{top:Di.top,left:Di.left}:Fs(xi),opacity:Gr,transition:Ni?"none":"opacity 0.2s ease, transform 0.2s ease"};F.useEffect(()=>{Vi&&at(!0)},[Vi]);const vu=Di?Di.top<=(typeof window<"u"?window.innerHeight/2:!0):xi.startsWith("top"),Hs=F.useCallback(()=>{gu(!1),typeof window<"u"&&window.localStorage.setItem("ghostHudTourComplete","1"),zs(0)},[]),pl=F.useCallback(()=>{Un<ir.length-1?zs(j=>j+1):Hs()},[Un,ir.length,Hs]),ml=F.useCallback(()=>{zs(0),gu(!0),at(!0),typeof window<"u"&&window.localStorage.removeItem("ghostHudTourComplete")},[]);F.useEffect(()=>{var Q;if(!h||!he)return;const j=Z.length>0?Z:B;if(j.length>0){const te=j[0],oe=(Q=te.text)==null?void 0:Q.trim();if(oe){const le=`${r||"local"}-${te.id||"no-id"}-${oe.substring(0,30).replace(/\s+/g,"-")}`;if(Se.current.has(le))console.log("[App]  Skipping duplicate coaching cue (already whispered):",oe.substring(0,50));else{if(Se.current.add(le),Se.current.size>50){const De=Se.current.values().next().value;Se.current.delete(De)}he(oe),console.log("[App]  Whispered new coaching cue from Firestore:",oe)}}}},[Z,B,h,he,r]);const{settings:gl,updateSettings:_u}=Pj(y==null?void 0:y.uid),{playbooks:Qf,createPlaybook:wu,updatePlaybook:Eu,deletePlaybook:Yf}=Mj(y==null?void 0:y.uid),[Nt,sr]=F.useState(()=>typeof window<"u"&&window.localStorage.getItem("ghost-selected-playbook-id")||null);F.useEffect(()=>{typeof window<"u"&&(Nt?window.localStorage.setItem("ghost-selected-playbook-id",Nt):window.localStorage.removeItem("ghost-selected-playbook-id"))},[Nt]);const or=gl.mode||"sales",zo=((Yr=x==null?void 0:x.entitlements)==null?void 0:Yr.kbLimit)??0,{documents:Su,uploadDocument:$e,removeDocument:Ho,limitReached:Ws,maxDocuments:Gs}=kj(y==null?void 0:y.uid,{maxDocuments:zo}),Xf=F.useMemo(()=>Array.from({length:40}).map((j,Q)=>D.jsx("div",{className:"w-2 bg-blue-500 rounded-full transition-all duration-75",style:{height:`${Math.max(10,Math.random()*p*2)}%`,opacity:Math.max(.3,p/255)}},`bar-${Q}`)),[p]),ji=F.useRef(null);F.useEffect(()=>(ji.current&&clearTimeout(ji.current),ji.current=setTimeout(()=>{var j;(j=u.current)==null||j.scrollIntoView({behavior:"smooth"})},100),()=>{ji.current&&clearTimeout(ji.current)}),[bn.length]),F.useEffect(()=>{const j=new wT({onTranscript:()=>{},onError:()=>{}});_(j.isSupported())},[]);const Ks=F.useCallback(j=>{w(Q=>[...Q,j]),ET({userId:y==null?void 0:y.uid,sessionId:n.current,type:"transcript",payload:j}).catch(Q=>{console.error("Failed to persist transcript:",Q)})},[y==null?void 0:y.uid]),Qr=F.useCallback(j=>{Ks({speaker:"System",text:j,isSystem:!0,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})},[Ks]),Tu=F.useCallback(j=>{O(Q=>[j,...Q]),ET({userId:y==null?void 0:y.uid,sessionId:n.current,type:"suggestions",payload:j}).catch(Q=>{console.error("Failed to persist suggestion:",Q)})},[y==null?void 0:y.uid]),bu=F.useCallback(async(j,Q)=>{const te=s.current||r;if(!te||!j||!j.trim()){console.log("[App] processTranscriptForCoaching: Missing callId or text",{callId:te,hasText:!!j});return}try{console.log("[App] Processing transcript for coaching:",{text:j,speaker:Q,callId:te});const oe=await fetch("/api/process-transcript",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:j.trim(),callId:te,role:"user",speaker:"Them",skipTranscriptSave:!0,playbookId:Nt})});if(!oe.ok){const De=await oe.text();console.error("[App] Failed to process transcript:",oe.status,De);return}const le=await oe.json();if(console.log("[App] Transcript processed - Full result:",JSON.stringify(le,null,2)),console.log("[App] Coaching cue:",le.coachingCue),console.log("[App] Triggers detected:",le.triggers),le.coachingCue&&le.coachingCue.trim()){const De=le.coachingCue.trim(),sn=`${te}-${De.substring(0,20)}`;Se.current.has(sn)||(Se.current.add(sn),he(De),console.log("[App]  Whispered coaching cue to user:",De))}}catch(oe){console.error("[App] Error processing transcript:",oe)}},[r]),Fi=F.useCallback((j,Q)=>{if(!j||!j.trim())return!1;const te=j.toLowerCase().trim();if(Q&&Q.length>0)for(const oe of Q.slice(0,10)){const le=(oe.text||oe.content||"").toLowerCase().trim();if(!le)continue;const De=le.replace(/^ask:\s*/i,"").replace(/[.,!?;:]/g,"").trim(),sn=te.replace(/[.,!?;:]/g,"").trim();if(sn===De||sn.includes(De)||De.includes(sn))return console.log("[App]  Filtered coaching cue from transcript:",j,"matches:",le),!0;if(["ask:","ask,","acknowledge concern","reframe around","highlight","pivot to","emphasize","probe deeper","what's driving","what specific","how will this impact","what would make this","offer expedited","request case studies","reveal key performance","explore specific metrics","focus on quantifiable","what's the deadline","what's the cost of inaction","what's the budget","what's the value","what's the ideal investment"].some(Ve=>te.startsWith(Ve)||te.includes(Ve+" ")))return console.log("[App]  Filtered coaching cue pattern from transcript:",j),!0}return!1},[]),Pr=F.useCallback(j=>{var Q;if(j.type==="status"&&(j.status==="connected"&&j.callId?(i(j.callId),s.current=j.callId,console.log("[App]  Vapi callId captured from status event:",j.callId),Nt&&(y!=null&&y.uid)&&Yn(async()=>{const{getFirestoreDb:te}=await Promise.resolve().then(()=>Ej);return{getFirestoreDb:te}},void 0).then(({getFirestoreDb:te})=>{const oe=te();oe&&Yn(async()=>{const{doc:le,updateDoc:De,serverTimestamp:sn}=await Promise.resolve().then(()=>wj);return{doc:le,updateDoc:De,serverTimestamp:sn}},void 0).then(({doc:le,updateDoc:De,serverTimestamp:sn})=>{const Ui=le(oe,"calls",j.callId);De(Ui,{playbookId:Nt,userId:y.uid,updatedAt:sn()}).catch(Ve=>{console.warn("[App] Could not update call with playbookId:",Ve)})})}),tn("vapi_call_start",{callId:j.callId,sessionId:n.current})):j.status==="connecting"&&console.log("[App]  Vapi connecting... waiting for callId")),j.type==="transcript"){const te=s.current||r;console.log("[App] Transcript event received:",{text:j.text,speaker:j.speaker,callId:te});const oe=Z.length>0?Z:B;if(Fi(j.text,oe)){console.log("[App]  Blocked coaching cue from appearing in transcript:",j.text);return}Ks({speaker:j.speaker||"Them",text:j.text,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})});let le=te;!le&&((Q=S.current)!=null&&Q.callId)&&(le=S.current.callId,console.log("[App]  Found callId from VapiClient, updating state:",le),i(le),s.current=le),le&&j.text?(console.log("[App]  Calling processTranscriptForCoaching with callId:",le),bu(j.text,j.speaker||"Them")):console.log(`[App]  Skipping processTranscriptForCoaching: callId=${le}, hasText=${!!j.text}, speaker=${j.speaker}`);return}if(j.type==="status"){j.status==="connected"?l("connected"):(j.status==="ended"||j.status==="disconnected")&&(l("disconnected"),i(null),s.current=null);return}Tu({...j,receivedAt:new Date().toISOString()})},[Tu,Ks,r,bu,Fi,Z,B]),ku=async()=>{var j;l("connecting");try{await g(),w([]),O([]),nn(!1);const Q=crypto.randomUUID();n.current=Q,e(Q),o.current=Date.now(),y!=null&&y.uid&&(await mP({userId:y.uid,sessionId:Q,mode:or}),tn("session_start",{sessionId:Q,mode:or,callId:null})),(j=S.current)==null||j.stopSession(),S.current=new IU({onEvent:te=>{console.log("Ghost event received:",te),Pr(te)},onError:te=>{console.error("Ghost client error:",te);const oe=(te==null?void 0:te.message)||"Connection issue detected";Qr(`Error: ${oe}`),te!=null&&te.hint?Ue(te.hint):Ue(oe),te.type==="max_reconnect"||te.type==="sdk_error"?l("disconnected"):te.type==="connection_error"&&l("connecting")},onReconnect:te=>{Qr(`Reconnecting... (Attempt ${te.attempt}/${te.maxAttempts})`),l("connecting")}}),console.log("Starting Ghost session with mode:",or),S.current.startSession(or),k&&(E.current=new wT({onTranscript:te=>{te.isFinal&&te.text.trim()&&Ks({speaker:"You",text:te.text.trim(),time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})},onError:te=>{console.warn("Speech-to-text error:",te);const oe={"no-speech":"We could not hear any audio. Make sure your microphone is unmuted.","audio-capture":"Microphone is unavailable. Allow mic access in your browser settings.","not-allowed":"Microphone permission denied. Please allow access and restart Ghost.",network:"Network issue interrupted speech recognition."};if(te.type==="not_supported"){Qr("Mic: Browser does not support speech recognition. Using passive mode."),Ue("This browser does not support live speech recognition. Ghost will rely on Vapi transcripts.");return}const le=Date.now();if(le-nr.current>4e3){const De=oe[te.message]||te.message||"Microphone issue detected.";Qr(`Mic: ${De}`),nr.current=le}oe[te.message]&&Ue(`${oe[te.message]} We'll keep trying in the background.`)}}),E.current.start()),Qr("Audio stream initialized. Connecting to Neural Engine..."),setTimeout(()=>Qr("Model v4-Turbo Connected. Latency: 42ms"),1e3),l("connected")}catch{Qr("Microphone access denied. Ghost needs ears to help you."),l("disconnected")}},Iu=async()=>{var oe,le;T(),(oe=S.current)==null||oe.stopSession(),(le=E.current)==null||le.stop();const j=o.current?Math.round((Date.now()-o.current)/1e3):0,Q=et.length,te=bn.length;y!=null&&y.uid&&n.current&&(await AU({userId:y.uid,sessionId:n.current,updates:{}}),kr(n.current,{duration:j,cuesGenerated:Q,transcriptLines:te,mode:or,callId:s.current,hasVapiCall:!!s.current})),n.current=null,e(null),o.current=null,i(null),s.current=null,l("disconnected")};return F.useEffect(()=>{var j;if(!r&&h&&((j=S.current)!=null&&j.callId)){const Q=S.current.callId;console.log("[App]  Found callId from periodic check, updating state:",Q),i(Q),s.current=Q}},[r,h]),F.useEffect(()=>{if(!h||r)return;const j=setInterval(()=>{var Q;if((Q=S.current)!=null&&Q.callId&&!r){const te=S.current.callId;console.log("[App]  Found callId from interval check, updating state:",te),i(te),s.current=te}},2e3);return()=>clearInterval(j)},[h,r]),F.useEffect(()=>()=>{var j,Q;(j=S.current)==null||j.stopSession(),(Q=E.current)==null||Q.stop()},[]),D.jsxs("div",{className:"min-h-screen bg-black text-gray-100 font-sans selection:bg-blue-500/30",children:[D.jsx("header",{className:"border-b border-gray-800 bg-gray-950/50 backdrop-blur-sm sticky top-0 z-50",children:D.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 h-14 sm:h-16 flex items-center justify-between gap-2",children:[D.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[D.jsx("div",{className:`w-2 h-2 sm:w-3 sm:h-3 rounded-full shrink-0 ${a==="connected"?"bg-green-500 animate-pulse":"bg-red-500"}`}),D.jsxs("h1",{className:"text-base sm:text-xl font-bold tracking-tight flex items-center gap-1 sm:gap-2 min-w-0",children:[D.jsx(Hw,{className:"w-4 h-4 sm:w-6 sm:h-6 text-blue-500 shrink-0"}),D.jsxs("span",{className:"hidden xs:inline",children:["GHOST ",D.jsx("span",{className:"text-gray-600 font-light",children:"PROTOCOL"})]}),D.jsx("span",{className:"xs:hidden",children:"GHOST"})]})]}),D.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 shrink-0",children:[D.jsx("div",{className:"hidden md:flex items-center gap-1 bg-gray-900 rounded-lg p-1 border border-gray-800",children:LU.map(j=>D.jsx("button",{type:"button",onClick:()=>!h&&_u({mode:j}),className:`px-2 sm:px-3 py-1 sm:py-1.5 rounded-md text-xs sm:text-sm font-medium capitalize transition-all ${or===j?"bg-blue-600 text-white shadow-lg":"text-gray-400 hover:text-white"} ${h?"opacity-50 cursor-not-allowed":""}`,children:j},j))}),D.jsx("div",{className:"hidden sm:block h-6 w-px bg-gray-800"}),D.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[D.jsxs("div",{className:"hidden sm:flex items-center gap-3 text-sm text-gray-400",children:[D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx(dO,{className:`w-4 h-4 ${a==="connected"?"text-green-500":"text-gray-600"}`}),D.jsx("span",{className:"hidden lg:inline",children:VU[a]})]}),C?D.jsx("span",{className:"text-xs text-yellow-400 font-mono",children:"Syncing..."}):y&&D.jsxs("span",{className:"text-xs text-gray-500 font-mono hidden lg:inline",children:["uid:",y.uid.slice(0,6)]})]}),D.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[x&&D.jsx(mn,{color:x.badgeColor??"yellow",className:"text-xs hidden sm:inline-flex",children:(Au=x.label)==null?void 0:Au.toUpperCase()}),D.jsxs(nd,{variant:"secondary",className:"text-xs px-2 sm:px-3 py-1",onClick:Fn.open,disabled:C,title:"View plans and pricing",children:[D.jsx(iO,{className:"w-3 h-3 sm:w-4 sm:h-4"}),D.jsx("span",{className:"hidden sm:inline ml-1",children:"Pricing"})]}),y&&V&&D.jsxs(nd,{variant:"secondary",className:"text-xs px-2 sm:px-3 py-1",onClick:Uo.open,disabled:C,title:"View past sessions",children:[D.jsx(rO,{className:"w-3 h-3 sm:w-4 sm:h-4"}),D.jsx("span",{className:"hidden sm:inline ml-1",children:"Replay"})]}),D.jsxs(nd,{variant:"secondary",className:"text-xs px-2 sm:px-3 py-1 flex items-center gap-1",onClick:rn.open,disabled:C,title:y!=null&&y.isAnonymous?"Save session & link account":"Account settings & analytics",children:[D.jsx(uO,{className:"w-3 h-3 sm:w-4 sm:h-4"}),D.jsx("span",{className:"hidden sm:inline",children:y!=null&&y.isAnonymous?"Save session":"Account"}),D.jsx("span",{className:"sm:hidden",children:y!=null&&y.isAnonymous?"Save":"Account"})]})]})]})]})]})}),pe&&D.jsx("div",{className:"bg-amber-500/10 border-b border-amber-400/20 text-amber-200 text-xs sm:text-sm",children:D.jsxs("div",{className:"max-w-7xl mx-auto px-3 py-2 flex items-center gap-2",children:[D.jsx(Lk,{className:"w-4 h-4 shrink-0"}),D.jsx("span",{className:"flex-1",children:pe}),D.jsx("button",{type:"button",className:"text-amber-200/70 hover:text-amber-200 transition-colors",onClick:()=>we(null),"aria-label":"Dismiss warning",children:D.jsx(hO,{className:"w-4 h-4"})})]})}),D.jsxs("main",{className:"max-w-7xl mx-auto p-2 sm:p-4 lg:px-6 lg:py-4 grid grid-cols-1 lg:grid-cols-12 gap-4 lg:gap-6 min-h-[calc(100vh-4rem)] lg:h-[calc(100vh-4rem)] lg:overflow-hidden",children:[D.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-4 lg:gap-6 h-full min-h-0 lg:pb-4",children:[D.jsxs(fO,{className:"flex items-center justify-between bg-gradient-to-r from-gray-900 to-gray-900 border-gray-800 relative overflow-hidden h-24 sm:h-32 shrink-0 lg:sticky lg:top-0 lg:z-10",children:[D.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-20 pointer-events-none gap-1",children:h?Xf:D.jsx("div",{className:"text-gray-700 font-mono text-sm",children:"WAITING FOR AUDIO STREAM..."})}),D.jsxs("div",{className:"z-10 flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-6 px-3 sm:px-4 w-full justify-between",children:[D.jsxs("div",{className:"flex-1 min-w-0",children:[D.jsx("h2",{className:"text-lg sm:text-2xl font-bold text-white mb-1 truncate",children:h?"Listening...":"Ready to engage"}),D.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:h?"Analyzing vocal patterns & sentiment":"Select a mode and start the engine"})]}),D.jsx(nd,{onClick:h?Iu:ku,variant:h?"danger":"primary",className:"w-full sm:w-32 h-12 sm:h-12 text-base sm:text-lg shrink-0 touch-manipulation min-h-[48px] sm:min-h-0",disabled:!h&&C,children:h?D.jsxs(D.Fragment,{children:[D.jsx(aO,{className:"w-5 h-5"})," STOP"]}):D.jsxs(D.Fragment,{children:[D.jsx(lO,{className:"w-5 h-5"}),C?"SYNCING":"START"]})})]})]}),D.jsxs("div",{className:"flex-1 bg-gray-900/50 border border-gray-800 rounded-xl overflow-hidden flex flex-col backdrop-blur-sm min-h-0",children:[D.jsxs("div",{className:"p-2 sm:p-3 border-b border-gray-800 bg-gray-900/85 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 shrink-0 sticky top-0 z-10",children:[D.jsx("span",{className:"text-xs font-mono text-gray-400 uppercase tracking-wider",children:"Live Transcript"}),D.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[K&&D.jsx(mn,{color:"yellow",className:"text-xs",children:"SYNCING"}),h&&D.jsx(mn,{color:"green",className:"text-xs",children:"RECORDING"}),h&&!k&&D.jsx(mn,{color:"gray",className:"text-xs",children:"MOCK MODE"}),h&&k&&D.jsx(mn,{color:"blue",className:"text-xs",children:"LIVE STT"})]})]}),D.jsxs("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 space-y-3 sm:space-y-4 font-mono text-xs sm:text-sm scrollbar-thin scrollbar-thumb-gray-700 touch-pan-y",children:[bn.length===0&&D.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-600 opacity-50",children:[D.jsx(eO,{className:"w-12 h-12 mb-4"}),D.jsx("p",{children:"Awaiting conversation input..."})]}),bn.map((j,Q)=>{var le;const te=j.time||((le=j.createdAt)!=null&&le.toDate?j.createdAt.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"--:--:--"),oe=Q===bn.length-1;return D.jsxs("div",{className:`flex flex-col sm:flex-row gap-1 sm:gap-3 ${j.isSystem?"text-yellow-500/80":"text-gray-300"}`,ref:oe?u:void 0,children:[D.jsx("span",{className:"text-gray-600 shrink-0 select-none text-xs sm:w-20 sm:text-right",children:te}),D.jsxs("div",{className:"flex-1 min-w-0",children:[!j.isSystem&&D.jsxs("span",{className:`font-bold mr-2 ${j.speaker==="Them"?"text-red-400":"text-blue-400"}`,children:[j.speaker,":"]}),D.jsx("span",{className:"break-words",children:j.text})]})]},j.id||`line-${Q}`)})]})]})]}),D.jsxs("div",{id:"live-intel-panel",className:"lg:col-span-4 flex flex-col bg-gray-900 border border-gray-800 rounded-xl overflow-hidden shadow-2xl order-first lg:order-last lg:sticky lg:top-0 lg:self-start lg:h-[calc(100vh-4rem-1rem)]",children:[D.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-800 bg-gray-950 flex items-center justify-between shrink-0 sticky top-0 z-10",children:[D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx(Gw,{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-500"}),D.jsx("span",{className:"font-bold text-gray-100 text-sm sm:text-base",children:"Live Intel"}),kt&&D.jsx(mn,{color:"blue",className:"text-[10px] sm:text-xs",children:"Focus"}),!b&&D.jsxs(mn,{color:"yellow",className:"text-[10px] sm:text-xs flex flex-col items-center justify-center gap-0 leading-tight px-2 py-1",title:"Upgrade to enable TTS whispers",children:[D.jsxs("span",{className:"flex items-center gap-1",children:[D.jsx("span",{children:""}),D.jsx("span",{children:"Whispers"})]}),D.jsx("span",{children:"Locked"})]}),b&&X&&D.jsxs(mn,{color:"red",className:"text-[10px] sm:text-xs flex items-center gap-1",children:[D.jsx(td,{className:"w-3 h-3"})," Muted"]})]}),D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx(mn,{color:"blue",className:"text-xs hidden sm:inline-flex",children:"v4.0"}),D.jsx("button",{type:"button",onClick:()=>{Ar(j=>{const Q=!j;return Ye("focus_mode",Q?"enabled":"disabled"),Q})},className:`text-[11px] sm:text-xs px-3 py-2 sm:px-2 sm:py-1 rounded-full border transition-colors touch-manipulation min-h-[44px] sm:min-h-0 ${kt?"border-blue-500 text-blue-300 bg-blue-500/10":"border-gray-700 text-gray-400 active:bg-gray-800 hover:bg-gray-800"}`,"aria-label":kt?"Disable Focus Mode":"Enable Focus Mode",children:kt?"Focus ON":"Focus OFF"})]})]}),D.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 space-y-3 sm:space-y-4 bg-gray-950/50 touch-pan-y",children:et.length===0?D.jsxs("div",{className:"text-center mt-10 sm:mt-20",children:[D.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-900 mb-4",children:D.jsx(Gw,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-700"})}),D.jsx("h3",{className:"text-gray-400 font-medium text-sm sm:text-base",children:mu.title}),D.jsx("p",{className:"text-gray-600 text-xs sm:text-sm mt-2 max-w-[240px] mx-auto",children:mu.body})]}):D.jsxs(D.Fragment,{children:[Bs.map(j=>D.jsxs("div",{className:`animate-in slide-in-from-right fade-in duration-300 transform transition-all hover:scale-[1.02] cursor-pointer
                      ${j.type==="alert"?"border-l-4 border-red-500 bg-red-950/10":"border-l-4 border-blue-500 bg-blue-950/10"}
                      rounded-r-lg border-y border-r border-gray-800 p-3 sm:p-4 shadow-lg`,children:[D.jsxs("div",{className:"flex items-center justify-between mb-2",children:[j.type==="alert"?D.jsxs("span",{className:"text-xs font-bold text-red-500 tracking-wider flex items-center gap-1",children:[D.jsx(Hw,{className:"w-3 h-3"})," ALERT"]}):D.jsx("div",{className:"flex items-center gap-2",children:j.ragUsed&&D.jsxs(mn,{color:"green",className:"text-[10px] px-1.5 py-0.5 flex items-center gap-1",children:[D.jsx(ed,{className:"w-2.5 h-2.5"}),"KB"]})}),D.jsx("span",{className:"text-xs text-gray-500",children:"Just now"})]}),j.title&&D.jsx("h4",{className:"text-lg font-bold text-gray-100 mb-1",children:j.title}),D.jsx("p",{className:`text-xs sm:text-sm ${j.type==="alert"?"text-gray-300":"text-blue-100 font-medium sm:text-lg leading-relaxed"}`,children:j.text||j.content}),j.action&&D.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-800/50 flex items-center justify-between group",children:[D.jsx("span",{className:"text-xs text-gray-500 uppercase font-mono",children:"Recommended Action"}),D.jsxs("span",{className:"text-sm text-blue-400 font-bold flex items-center group-hover:translate-x-1 transition-transform",children:[j.action," ",D.jsx(tO,{className:"w-4 h-4"})]})]})]},j.id||`card-${j.title??j.text}`)),et.length>Bs.length&&D.jsx("div",{className:"text-center pt-2 pb-1",children:D.jsxs(mn,{color:"gray",className:"text-xs",children:["+",et.length-Bs.length," more (showing latest ",Bs.length,")"]})})]})}),D.jsxs("div",{className:"p-3 sm:p-4 bg-gray-900 border-t border-gray-800 grid grid-cols-3 gap-2 sm:gap-3",children:[D.jsxs("button",{type:"button",onClick:Fo.open,className:"flex flex-col items-center justify-center p-3 sm:p-2 rounded-lg active:bg-gray-800 hover:bg-gray-800 transition-colors text-gray-400 hover:text-white touch-manipulation min-h-[44px] sm:min-h-0","aria-label":"Parameters",children:[D.jsx(cO,{className:"w-5 h-5 sm:w-5 sm:h-5 mb-1"}),D.jsx("span",{className:"text-xs",children:"Parameters"})]}),D.jsxs("button",{type:"button",onClick:Kr.open,className:"flex flex-col items-center justify-center p-3 sm:p-2 rounded-lg active:bg-gray-800 hover:bg-gray-800 transition-colors text-gray-400 hover:text-white touch-manipulation min-h-[44px] sm:min-h-0","aria-label":"Knowledge Base",children:[D.jsx(sO,{className:"w-5 h-5 sm:w-5 sm:h-5 mb-1"}),D.jsx("span",{className:"text-xs",children:"Knowledge Base"})]}),D.jsxs("button",{type:"button",onClick:ll.open,className:`flex flex-col items-center justify-center p-3 sm:p-2 rounded-lg active:bg-gray-800 hover:bg-gray-800 transition-colors touch-manipulation min-h-[44px] sm:min-h-0 ${Nt?"text-blue-400 hover:text-blue-300":"text-gray-400 hover:text-white"}`,"aria-label":"Playbooks",children:[D.jsx(ed,{className:"w-5 h-5 sm:w-5 sm:h-5 mb-1"}),D.jsx("span",{className:"text-xs",children:"Playbooks"}),Nt&&D.jsx(mn,{color:"blue",className:"text-[8px] px-1 py-0 mt-0.5",children:"Active"})]})]})]})]}),h&&D.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 z-40 bg-gray-950/95 backdrop-blur-md border-t border-gray-800 shadow-2xl",children:D.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:D.jsxs("div",{className:"flex flex-col gap-3",children:[et.length>0&&D.jsxs("div",{className:"flex-1 w-full",children:[D.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[D.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Latest Cue"}),((Cu=et[0])==null?void 0:Cu.ragUsed)&&D.jsxs(mn,{color:"green",className:"text-[10px] px-1.5 py-0.5 flex items-center gap-1",children:[D.jsx(ed,{className:"w-2.5 h-2.5"}),"KB"]})]}),D.jsx("p",{className:"text-sm text-blue-100 font-medium break-words leading-relaxed",children:((Pu=et[0])==null?void 0:Pu.text)||((ar=et[0])==null?void 0:ar.content)||"Awaiting cues..."})]}),et.length===0&&D.jsx("div",{className:"flex-1 w-full",children:D.jsx("p",{className:"text-xs text-gray-500",children:"Ghost is listening silently"})}),D.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[D.jsx("button",{type:"button",onClick:()=>{Ar(j=>{const Q=!j;return Ye("focus_mode",Q?"enabled":"disabled",{source:"mobile_bottom_sheet"}),Q})},className:`px-3 py-2 rounded-lg border transition-colors touch-manipulation min-h-[44px] ${kt?"border-blue-500 text-blue-300 bg-blue-500/10":"border-gray-700 text-gray-400 active:bg-gray-800"}`,"aria-label":kt?"Disable Focus Mode":"Enable Focus Mode",children:D.jsx("span",{className:"text-xs",children:kt?"Focus":"All"})}),b&&D.jsx("button",{type:"button",onClick:()=>{ue(j=>{const Q=!j;return Ye("tts_whispers",Q?"muted":"unmuted"),Q})},className:`px-3 py-2 rounded-lg border transition-colors touch-manipulation min-h-[44px] ${X?"border-red-500 text-red-300 bg-red-500/10":"border-gray-700 text-gray-400 active:bg-gray-800"}`,"aria-label":X?"Unmute whispers":"Mute whispers",children:X?D.jsx(td,{className:"w-5 h-5"}):D.jsx(Ww,{className:"w-5 h-5"})})]})]})})}),D.jsx("div",{ref:Vs,className:"hidden md:block fixed z-40 select-none transition-opacity",style:yu,children:D.jsxs("div",{className:"relative",children:[D.jsxs("div",{className:`rounded-2xl border border-gray-800/70 bg-gray-950/90 shadow-2xl backdrop-blur-md text-gray-200 ${vt?"w-96 p-4":"w-96 p-3"} transition-all`,children:[D.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 uppercase font-mono",onPointerDown:hl,style:{cursor:Ni?"grabbing":"grab"},children:[D.jsx("span",{children:"Ghost HUD"}),D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsxs("button",{type:"button",onClick:()=>Ar(j=>!j),className:`px-2 py-0.5 rounded-full border border-gray-700 hover:border-gray-500 transition-colors text-[11px] ${kt?"bg-blue-500/20 text-blue-200 border-blue-500/50":""}`,title:"Toggle focus mode (Ctrl+Shift+F)",children:["Focus ",kt?"ON":"OFF"]}),b?D.jsx("button",{type:"button",onClick:()=>{ue(j=>{const Q=!j;return Ye("tts_whispers",Q?"muted":"unmuted"),Q})},className:`px-2 py-0.5 rounded-full border border-gray-700 hover:border-gray-500 transition-colors text-[11px] ${X?"bg-red-500/20 text-red-200 border-red-500/50":""}`,title:`${X?"Unmute":"Mute"} whispers (Ctrl+Shift+M)`,children:X?D.jsx(td,{className:"w-3.5 h-3.5"}):D.jsx(Ww,{className:"w-3.5 h-3.5"})}):D.jsx("button",{type:"button",onClick:rn.open,className:"px-2 py-0.5 rounded-full border border-yellow-700/50 hover:border-yellow-600 bg-yellow-900/20 hover:bg-yellow-900/30 transition-colors text-[11px] text-yellow-300",title:"Upgrade to enable TTS whispers",children:D.jsx(td,{className:"w-3.5 h-3.5"})}),D.jsx("button",{type:"button",onClick:()=>{at(!0),js(j=>!j),Mi(!1)},className:`px-2 py-0.5 rounded-full border border-gray-700 hover:border-gray-500 transition-colors ${al?"bg-gray-800 text-white":""}`,title:"Dock position",children:D.jsx(oO,{className:"w-4 h-4"})}),D.jsx("button",{type:"button",onClick:()=>{at(!0),Mi(j=>!j),js(!1)},className:`px-2 py-0.5 rounded-full border border-gray-700 hover:border-gray-500 transition-colors ${jo?"bg-gray-800 text-white":""}`,title:"Keyboard shortcuts",children:D.jsx(nO,{className:"w-4 h-4"})}),D.jsx("button",{type:"button",onClick:qs,className:`px-2 py-0.5 rounded-full border border-gray-700 transition-colors ${Bt?"bg-blue-600 text-white border-blue-500":"hover:border-gray-500"}`,children:Bt?"Pinned":"Pin"}),D.jsx("button",{type:"button",onClick:Li,className:"px-2 py-0.5 rounded-full border border-gray-700 hover:border-gray-500 transition-colors",children:vt?"Hide":"Expand"})]})]}),!vt&&D.jsx("div",{className:"mt-2 text-sm font-semibold text-gray-100 line-clamp-2 cursor-pointer",onClick:Li,children:$s}),vt&&D.jsxs(D.Fragment,{children:[D.jsx("div",{className:"mt-3 text-sm font-semibold text-gray-100 line-clamp-3",children:$s}),D.jsx("div",{className:"mt-3 space-y-2 max-h-48 overflow-y-auto pr-1 scrollbar-thin scrollbar-thumb-gray-800",children:It.length===0?D.jsx("p",{className:"text-xs text-gray-500",children:"Intel cues will appear here the moment conversations heat up."}):It.map(j=>{const Q=ul&&j.id===ul;return D.jsxs("div",{className:`rounded-lg p-2 border ${Q?"border-blue-500/70 bg-blue-900/30 shadow-lg":"border-gray-800 bg-gray-900/60"}`,children:[D.jsxs("div",{className:"flex items-center justify-between mb-1",children:[D.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Cue"}),j.ragUsed&&D.jsxs(mn,{color:"green",className:"text-[9px] px-1 py-0 flex items-center gap-0.5",children:[D.jsx(ed,{className:"w-2 h-2"}),"KB"]})]}),D.jsx("p",{className:"text-sm text-gray-100",children:j.text})]},j.id)})}),jo&&D.jsxs("div",{className:"mt-3 border border-gray-800/60 rounded-lg p-3 bg-gray-900/60 text-xs text-gray-300 space-y-2",children:[D.jsx("div",{className:"text-gray-400 uppercase tracking-wide mb-1",children:"Shortcuts"}),D.jsxs("div",{className:"flex items-center justify-between",children:[D.jsx("span",{children:"Toggle HUD"}),D.jsx("code",{className:"text-gray-100",children:"Ctrl+Shift+G"})]}),D.jsxs("div",{className:"flex items-center justify-between",children:[D.jsx("span",{children:"Pin/Unpin HUD"}),D.jsx("code",{className:"text-gray-100",children:"Ctrl+Shift+H"})]}),D.jsxs("div",{className:"flex items-center justify-between",children:[D.jsx("span",{children:"Next cue"}),D.jsx("code",{className:"text-gray-100",children:"Ctrl+Shift+I"})]}),D.jsxs("div",{className:"flex items-center justify-between",children:[D.jsx("span",{children:"Open intel board"}),D.jsx("code",{className:"text-gray-100",children:"Ctrl+Shift+L"})]}),D.jsxs("div",{className:"flex items-center justify-between",children:[D.jsx("span",{children:"Mute/Unmute whispers"}),D.jsx("code",{className:"text-gray-100",children:"Ctrl+Shift+M"})]}),D.jsx("button",{type:"button",className:"text-left text-blue-300 hover:text-white underline",onClick:ml,children:"Show quick tips"})]}),al&&D.jsxs("div",{className:"mt-3 border border-gray-800/60 rounded-lg p-3 bg-gray-900/60 text-xs text-gray-300 space-y-2",children:[D.jsx("div",{className:"text-gray-400 uppercase tracking-wide",children:"Dock position"}),FU.map(j=>D.jsxs("button",{type:"button",onClick:()=>{Oi(j.value),js(!1),Lo(null)},className:`w-full text-left px-2 py-1 rounded border ${xi===j.value?"border-blue-500/50 text-blue-200 bg-blue-500/10":"border-gray-800 hover:border-gray-600 hover:text-white"}`,children:[j.label,xi===j.value&&D.jsx("span",{className:"ml-2 text-blue-400",children:""})]},j.value)),D.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Tip: Drag the HUD to snap it to corners instantly."}),D.jsx("button",{type:"button",className:"text-left text-blue-300 hover:text-white underline",onClick:ml,children:"Re-run HUD tour"})]}),D.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-gray-500",children:[D.jsxs("label",{className:"flex items-center gap-2",children:["Opacity",D.jsx("input",{type:"range",min:"0.3",max:"1",step:"0.05",value:Gr,onChange:j=>ft(parseFloat(j.target.value)),className:"accent-blue-500"})]}),D.jsx("button",{type:"button",onClick:cl,className:"text-blue-400 hover:text-blue-300 font-semibold",children:"Open board"})]})]})]}),Vi&&Jr&&D.jsx("div",{className:`absolute w-96 pointer-events-auto ${vu?"top-full mt-3":"bottom-full mb-3"}`,children:D.jsxs("div",{className:"rounded-2xl border border-blue-500/40 bg-gray-900/95 shadow-xl p-4 text-gray-200 space-y-3",children:[D.jsxs("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-wide text-gray-400",children:[D.jsx("span",{children:"HUD quick tour"}),D.jsxs("span",{children:["Step ",Un+1," / ",ir.length]})]}),D.jsxs("div",{children:[D.jsx("p",{className:"text-sm font-semibold text-white",children:Jr.title}),D.jsx("p",{className:"text-xs text-gray-400 mt-1 leading-relaxed",children:Jr.body})]}),D.jsxs("div",{className:"flex items-center justify-between gap-3",children:[D.jsx("button",{type:"button",className:"text-xs text-gray-400 hover:text-gray-200",onClick:Hs,children:"Skip"}),D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx("button",{type:"button",className:`text-xs ${Un===0?"text-gray-600 cursor-not-allowed":"text-gray-400 hover:text-gray-200"}`,onClick:()=>zs(j=>Math.max(0,j-1)),disabled:Un===0,children:"Back"}),D.jsx("button",{type:"button",className:"px-3 py-1 rounded-full bg-blue-600 text-white text-xs font-semibold hover:bg-blue-500",onClick:pl,children:Un===ir.length-1?"Done":"Next"})]})]})]})})]})}),D.jsx(F.Suspense,{fallback:null,children:D.jsx(CU,{isOpen:Fo.isOpen,onClose:Fo.close,settings:gl,onChange:_u})}),D.jsx(F.Suspense,{fallback:null,children:D.jsx(PU,{isOpen:Kr.isOpen,onClose:Kr.close,documents:Su,onUpload:$e,onRemove:Ho,limitReached:Ws,maxDocuments:Gs,planDetails:x,onUpgradeClick:rn.open})}),D.jsx(F.Suspense,{fallback:null,children:D.jsx(MU,{isOpen:ll.isOpen,onClose:ll.close,userId:y==null?void 0:y.uid,playbooks:Qf,onCreate:wu,onUpdate:Eu,onDelete:Yf,selectedPlaybookId:Nt,onSelect:sr})}),D.jsx(F.Suspense,{fallback:null,children:D.jsx(RU,{isOpen:rn.isOpen,onClose:rn.close,user:y,profile:R,planDetails:x,onGoogleUpgrade:L,onEmailUpgrade:$,onSignOut:q,authError:P,isProcessing:I,canAccessAnalytics:Pe,onOpenAnalytics:()=>{rn.close(),wt.open()},onUpgradeToFounders:()=>{rn.close(),Dt.targetPlan="founders",Dt.open()},onUpgradeToStarter:()=>{rn.close(),Dt.targetPlan="starter",Dt.open()},onViewPricing:()=>{rn.close(),Fn.open()}})}),D.jsx(F.Suspense,{fallback:null,children:D.jsx(OU,{userId:y==null?void 0:y.uid,isOpen:wt.isOpen,onClose:wt.close})}),D.jsx(F.Suspense,{fallback:null,children:D.jsx(DU,{isOpen:Dt.isOpen,onClose:Dt.close,user:y,planDetails:x,targetPlan:Dt.targetPlan||"founders",onPaymentSuccess:()=>{window.location.reload()}})}),D.jsx(F.Suspense,{fallback:null,children:D.jsx(NU,{isOpen:Fn.isOpen,onClose:Fn.close,user:y,currentPlan:(Ru=x==null?void 0:x.label)==null?void 0:Ru.toLowerCase(),onUpgradeToFounders:()=>{Fn.close(),Dt.targetPlan="founders",Dt.open()},onUpgradeToStarter:()=>{Fn.close(),Dt.targetPlan="starter",Dt.open()}})}),D.jsx(F.Suspense,{fallback:null,children:D.jsx(xU,{isOpen:Uo.isOpen,onClose:Uo.close,userId:y==null?void 0:y.uid,planDetails:x,canExportSessions:N,onUpgradeClick:rn.open})})]})}class $U extends OT.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n)}render(){return this.state.hasError?D.jsx("div",{className:"min-h-screen bg-black text-gray-100 flex items-center justify-center p-4",children:D.jsx("div",{className:"max-w-2xl w-full bg-gray-900 border border-red-800 rounded-xl p-6",children:D.jsxs("div",{className:"flex items-start gap-4",children:[D.jsx(Lk,{className:"w-8 h-8 text-red-400 shrink-0"}),D.jsxs("div",{className:"flex-1",children:[D.jsx("h1",{className:"text-2xl font-bold text-red-400 mb-2",children:"Something went wrong"}),D.jsx("p",{className:"text-gray-300 mb-4",children:"The app encountered an error. Please refresh the page or check the console for details."}),this.state.error&&D.jsxs("details",{className:"mt-4",children:[D.jsx("summary",{className:"text-sm text-gray-400 cursor-pointer mb-2",children:"Error details"}),D.jsxs("pre",{className:"text-xs text-gray-500 bg-gray-950 p-3 rounded overflow-auto max-h-48",children:[this.state.error.toString(),this.state.error.stack&&`

${this.state.error.stack}`]})]}),D.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:"Reload Page"})]})]})})}):this.props.children}}dm.createRoot(document.getElementById("root")).render(D.jsx(OT.StrictMode,{children:D.jsx($U,{children:D.jsx(UU,{})})}));export{eO as A,mn as B,iO as C,lO as M,CE as P,Ge as T,hO as X,Gw as Z,nd as a,ed as b,bt as c,Zn as d,Rg as e,fO as f,Ft as g,rO as h,Ij as i,D as j,Lk as k,Vc as l,zU as m,qa as o,uo as q,F as r,xj as u,vj as w};

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ParametersModal-DWm7F9F4.js","assets/Modal-pcImM4mU.js","assets/KnowledgeBaseModal-DSELrNNL.js","assets/file-text-BX-Lw-t1.js","assets/trash-2-D6oIrGYN.js","assets/UpgradeAccountModal-D68t9cbr.js","assets/chart-column-Bw2vaWZo.js","assets/SessionReplayModal-tRZ3Vo5e.js","assets/AnalyticsDashboard-HO2oHruq.js","assets/PaymentModal-mfC9R7fp.js","assets/sparkles-Bv1p3v1e.js","assets/PricingModal-Bk-4kJH0.js","assets/PlaybooksModal-BegDpozi.js"])))=>i.map(i=>d[i]);
var Lx=Object.defineProperty;var jx=(t,e,n)=>e in t?Lx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var we=(t,e,n)=>jx(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var vw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Fx(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var fb={exports:{}},vf={},pb={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var du=Symbol.for("react.element"),Ux=Symbol.for("react.portal"),$x=Symbol.for("react.fragment"),Bx=Symbol.for("react.strict_mode"),zx=Symbol.for("react.profiler"),qx=Symbol.for("react.provider"),Hx=Symbol.for("react.context"),Wx=Symbol.for("react.forward_ref"),Gx=Symbol.for("react.suspense"),Kx=Symbol.for("react.memo"),Jx=Symbol.for("react.lazy"),_w=Symbol.iterator;function Qx(t){return t===null||typeof t!="object"?null:(t=_w&&t[_w]||t["@@iterator"],typeof t=="function"?t:null)}var mb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gb=Object.assign,yb={};function vl(t,e,n){this.props=t,this.context=e,this.refs=yb,this.updater=n||mb}vl.prototype.isReactComponent={};vl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vb(){}vb.prototype=vl.prototype;function Wy(t,e,n){this.props=t,this.context=e,this.refs=yb,this.updater=n||mb}var Gy=Wy.prototype=new vb;Gy.constructor=Wy;gb(Gy,vl.prototype);Gy.isPureReactComponent=!0;var ww=Array.isArray,_b=Object.prototype.hasOwnProperty,Ky={current:null},wb={key:!0,ref:!0,__self:!0,__source:!0};function Eb(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)_b.call(e,r)&&!wb.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:du,type:t,key:s,ref:o,props:i,_owner:Ky.current}}function Yx(t,e){return{$$typeof:du,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jy(t){return typeof t=="object"&&t!==null&&t.$$typeof===du}function Xx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ew=/\/+/g;function Np(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Xx(""+t.key):e.toString(36)}function $d(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case du:case Ux:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Np(o,0):r,ww(i)?(n="",t!=null&&(n=t.replace(Ew,"$&/")+"/"),$d(i,e,n,"",function(u){return u})):i!=null&&(Jy(i)&&(i=Yx(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Ew,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",ww(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Np(s,a);o+=$d(s,e,n,l,i)}else if(l=Qx(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Np(s,a++),o+=$d(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function nd(t,e,n){if(t==null)return t;var r=[],i=0;return $d(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Zx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pn={current:null},Bd={transition:null},eR={ReactCurrentDispatcher:pn,ReactCurrentBatchConfig:Bd,ReactCurrentOwner:Ky};function Sb(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:nd,forEach:function(t,e,n){nd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return nd(t,function(){e++}),e},toArray:function(t){return nd(t,function(e){return e})||[]},only:function(t){if(!Jy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=vl;Te.Fragment=$x;Te.Profiler=zx;Te.PureComponent=Wy;Te.StrictMode=Bx;Te.Suspense=Gx;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eR;Te.act=Sb;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=gb({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ky.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)_b.call(e,l)&&!wb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:du,type:t.type,key:i,ref:s,props:r,_owner:o}};Te.createContext=function(t){return t={$$typeof:Hx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qx,_context:t},t.Consumer=t};Te.createElement=Eb;Te.createFactory=function(t){var e=Eb.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:Wx,render:t}};Te.isValidElement=Jy;Te.lazy=function(t){return{$$typeof:Jx,_payload:{_status:-1,_result:t},_init:Zx}};Te.memo=function(t,e){return{$$typeof:Kx,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=Bd.transition;Bd.transition={};try{t()}finally{Bd.transition=e}};Te.unstable_act=Sb;Te.useCallback=function(t,e){return pn.current.useCallback(t,e)};Te.useContext=function(t){return pn.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return pn.current.useDeferredValue(t)};Te.useEffect=function(t,e){return pn.current.useEffect(t,e)};Te.useId=function(){return pn.current.useId()};Te.useImperativeHandle=function(t,e,n){return pn.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return pn.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return pn.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return pn.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return pn.current.useReducer(t,e,n)};Te.useRef=function(t){return pn.current.useRef(t)};Te.useState=function(t){return pn.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return pn.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return pn.current.useTransition()};Te.version="18.3.1";pb.exports=Te;var A=pb.exports;const Tb=Vx(A);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tR=A,nR=Symbol.for("react.element"),rR=Symbol.for("react.fragment"),iR=Object.prototype.hasOwnProperty,sR=tR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oR={key:!0,ref:!0,__self:!0,__source:!0};function bb(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)iR.call(e,r)&&!oR.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:nR,type:t,key:s,ref:o,props:i,_owner:sR.current}}vf.Fragment=rR;vf.jsx=bb;vf.jsxs=bb;fb.exports=vf;var I=fb.exports,Hm={},kb={exports:{}},Bn={},Ib={exports:{}},Cb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,he){var ce=Z.length;Z.push(he);e:for(;0<ce;){var Ne=ce-1>>>1,Ee=Z[Ne];if(0<i(Ee,he))Z[Ne]=he,Z[ce]=Ee,ce=Ne;else break e}}function n(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var he=Z[0],ce=Z.pop();if(ce!==he){Z[0]=ce;e:for(var Ne=0,Ee=Z.length,h=Ee>>>1;Ne<h;){var S=2*(Ne+1)-1,w=Z[S],M=S+1,O=Z[M];if(0>i(w,ce))M<Ee&&0>i(O,w)?(Z[Ne]=O,Z[M]=ce,Ne=M):(Z[Ne]=w,Z[S]=ce,Ne=S);else if(M<Ee&&0>i(O,ce))Z[Ne]=O,Z[M]=ce,Ne=M;else break e}}return he}function i(Z,he){var ce=Z.sortIndex-he.sortIndex;return ce!==0?ce:Z.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,f=null,m=3,E=!1,T=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(Z){for(var he=n(u);he!==null;){if(he.callback===null)r(u);else if(he.startTime<=Z)r(u),he.sortIndex=he.expirationTime,e(l,he);else break;he=n(u)}}function j(Z){if(_=!1,k(Z),!T)if(n(l)!==null)T=!0,gn(U);else{var he=n(u);he!==null&&Fe(j,he.startTime-Z)}}function U(Z,he){T=!1,_&&(_=!1,v(P),P=-1),E=!0;var ce=m;try{for(k(he),f=n(l);f!==null&&(!(f.expirationTime>he)||Z&&!C());){var Ne=f.callback;if(typeof Ne=="function"){f.callback=null,m=f.priorityLevel;var Ee=Ne(f.expirationTime<=he);he=t.unstable_now(),typeof Ee=="function"?f.callback=Ee:f===n(l)&&r(l),k(he)}else r(l);f=n(l)}if(f!==null)var h=!0;else{var S=n(u);S!==null&&Fe(j,S.startTime-he),h=!1}return h}finally{f=null,m=ce,E=!1}}var z=!1,R=null,P=-1,N=5,D=-1;function C(){return!(t.unstable_now()-D<N)}function F(){if(R!==null){var Z=t.unstable_now();D=Z;var he=!0;try{he=R(!0,Z)}finally{he?L():(z=!1,R=null)}}else z=!1}var L;if(typeof g=="function")L=function(){g(F)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,Pt=be.port2;be.port1.onmessage=F,L=function(){Pt.postMessage(null)}}else L=function(){b(F,0)};function gn(Z){R=Z,z||(z=!0,L())}function Fe(Z,he){P=b(function(){Z(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){T||E||(T=!0,gn(U))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Z){switch(m){case 1:case 2:case 3:var he=3;break;default:he=m}var ce=m;m=he;try{return Z()}finally{m=ce}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,he){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ce=m;m=Z;try{return he()}finally{m=ce}},t.unstable_scheduleCallback=function(Z,he,ce){var Ne=t.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Ne+ce:Ne):ce=Ne,Z){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=ce+Ee,Z={id:d++,callback:he,priorityLevel:Z,startTime:ce,expirationTime:Ee,sortIndex:-1},ce>Ne?(Z.sortIndex=ce,e(u,Z),n(l)===null&&Z===n(u)&&(_?(v(P),P=-1):_=!0,Fe(j,ce-Ne))):(Z.sortIndex=Ee,e(l,Z),T||E||(T=!0,gn(U))),Z},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(Z){var he=m;return function(){var ce=m;m=he;try{return Z.apply(this,arguments)}finally{m=ce}}}})(Cb);Ib.exports=Cb;var aR=Ib.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lR=A,$n=aR;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ab=new Set,Mc={};function Go(t,e){Xa(t,e),Xa(t+"Capture",e)}function Xa(t,e){for(Mc[t]=e,t=0;t<e.length;t++)Ab.add(e[t])}var Ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wm=Object.prototype.hasOwnProperty,cR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sw={},Tw={};function uR(t){return Wm.call(Tw,t)?!0:Wm.call(Sw,t)?!1:cR.test(t)?Tw[t]=!0:(Sw[t]=!0,!1)}function dR(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function hR(t,e,n,r){if(e===null||typeof e>"u"||dR(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ht[t]=new mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ht[e]=new mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ht[t]=new mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ht[t]=new mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ht[t]=new mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ht[t]=new mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ht[t]=new mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ht[t]=new mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ht[t]=new mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qy=/[\-:]([a-z])/g;function Yy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qy,Yy);Ht[e]=new mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qy,Yy);Ht[e]=new mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qy,Yy);Ht[e]=new mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ht[t]=new mn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ht.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ht[t]=new mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xy(t,e,n,r){var i=Ht.hasOwnProperty(e)?Ht[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(hR(e,n,i,r)&&(n=null),r||i===null?uR(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Vi=lR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rd=Symbol.for("react.element"),Ta=Symbol.for("react.portal"),ba=Symbol.for("react.fragment"),Zy=Symbol.for("react.strict_mode"),Gm=Symbol.for("react.profiler"),Pb=Symbol.for("react.provider"),xb=Symbol.for("react.context"),ev=Symbol.for("react.forward_ref"),Km=Symbol.for("react.suspense"),Jm=Symbol.for("react.suspense_list"),tv=Symbol.for("react.memo"),is=Symbol.for("react.lazy"),Rb=Symbol.for("react.offscreen"),bw=Symbol.iterator;function Bl(t){return t===null||typeof t!="object"?null:(t=bw&&t[bw]||t["@@iterator"],typeof t=="function"?t:null)}var at=Object.assign,Dp;function tc(t){if(Dp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Dp=e&&e[1]||""}return`
`+Dp+t}var Mp=!1;function Lp(t,e){if(!t||Mp)return"";Mp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Mp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?tc(t):""}function fR(t){switch(t.tag){case 5:return tc(t.type);case 16:return tc("Lazy");case 13:return tc("Suspense");case 19:return tc("SuspenseList");case 0:case 2:case 15:return t=Lp(t.type,!1),t;case 11:return t=Lp(t.type.render,!1),t;case 1:return t=Lp(t.type,!0),t;default:return""}}function Qm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ba:return"Fragment";case Ta:return"Portal";case Gm:return"Profiler";case Zy:return"StrictMode";case Km:return"Suspense";case Jm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xb:return(t.displayName||"Context")+".Consumer";case Pb:return(t._context.displayName||"Context")+".Provider";case ev:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tv:return e=t.displayName||null,e!==null?e:Qm(t.type)||"Memo";case is:e=t._payload,t=t._init;try{return Qm(t(e))}catch{}}return null}function pR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qm(e);case 8:return e===Zy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Os(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ob(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function mR(t){var e=Ob(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function id(t){t._valueTracker||(t._valueTracker=mR(t))}function Nb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ob(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function yh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ym(t,e){var n=e.checked;return at({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function kw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Os(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Db(t,e){e=e.checked,e!=null&&Xy(t,"checked",e,!1)}function Xm(t,e){Db(t,e);var n=Os(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Zm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Zm(t,e.type,Os(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Iw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Zm(t,e,n){(e!=="number"||yh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var nc=Array.isArray;function Va(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Os(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function eg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return at({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Cw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(nc(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Os(n)}}function Mb(t,e){var n=Os(e.value),r=Os(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Aw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Lb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Lb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sd,jb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sd=sd||document.createElement("div"),sd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Lc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var mc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gR=["Webkit","ms","Moz","O"];Object.keys(mc).forEach(function(t){gR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),mc[e]=mc[t]})});function Vb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||mc.hasOwnProperty(t)&&mc[t]?(""+e).trim():e+"px"}function Fb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Vb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var yR=at({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ng(t,e){if(e){if(yR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function rg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ig=null;function nv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sg=null,Fa=null,Ua=null;function Pw(t){if(t=pu(t)){if(typeof sg!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=Tf(e),sg(t.stateNode,t.type,e))}}function Ub(t){Fa?Ua?Ua.push(t):Ua=[t]:Fa=t}function $b(){if(Fa){var t=Fa,e=Ua;if(Ua=Fa=null,Pw(t),e)for(t=0;t<e.length;t++)Pw(e[t])}}function Bb(t,e){return t(e)}function zb(){}var jp=!1;function qb(t,e,n){if(jp)return t(e,n);jp=!0;try{return Bb(t,e,n)}finally{jp=!1,(Fa!==null||Ua!==null)&&(zb(),$b())}}function jc(t,e){var n=t.stateNode;if(n===null)return null;var r=Tf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var og=!1;if(Ci)try{var zl={};Object.defineProperty(zl,"passive",{get:function(){og=!0}}),window.addEventListener("test",zl,zl),window.removeEventListener("test",zl,zl)}catch{og=!1}function vR(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var gc=!1,vh=null,_h=!1,ag=null,_R={onError:function(t){gc=!0,vh=t}};function wR(t,e,n,r,i,s,o,a,l){gc=!1,vh=null,vR.apply(_R,arguments)}function ER(t,e,n,r,i,s,o,a,l){if(wR.apply(this,arguments),gc){if(gc){var u=vh;gc=!1,vh=null}else throw Error(Y(198));_h||(_h=!0,ag=u)}}function Ko(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Hb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xw(t){if(Ko(t)!==t)throw Error(Y(188))}function SR(t){var e=t.alternate;if(!e){if(e=Ko(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return xw(i),t;if(s===r)return xw(i),e;s=s.sibling}throw Error(Y(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function Wb(t){return t=SR(t),t!==null?Gb(t):null}function Gb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Gb(t);if(e!==null)return e;t=t.sibling}return null}var Kb=$n.unstable_scheduleCallback,Rw=$n.unstable_cancelCallback,TR=$n.unstable_shouldYield,bR=$n.unstable_requestPaint,pt=$n.unstable_now,kR=$n.unstable_getCurrentPriorityLevel,rv=$n.unstable_ImmediatePriority,Jb=$n.unstable_UserBlockingPriority,wh=$n.unstable_NormalPriority,IR=$n.unstable_LowPriority,Qb=$n.unstable_IdlePriority,_f=null,Gr=null;function CR(t){if(Gr&&typeof Gr.onCommitFiberRoot=="function")try{Gr.onCommitFiberRoot(_f,t,void 0,(t.current.flags&128)===128)}catch{}}var Tr=Math.clz32?Math.clz32:xR,AR=Math.log,PR=Math.LN2;function xR(t){return t>>>=0,t===0?32:31-(AR(t)/PR|0)|0}var od=64,ad=4194304;function rc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Eh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=rc(a):(s&=o,s!==0&&(r=rc(s)))}else o=n&~i,o!==0?r=rc(o):s!==0&&(r=rc(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Tr(e),i=1<<n,r|=t[n],e&=~i;return r}function RR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OR(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Tr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=RR(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function lg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Yb(){var t=od;return od<<=1,!(od&4194240)&&(od=64),t}function Vp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Tr(e),t[e]=n}function NR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Tr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function iv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Tr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ve=0;function Xb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Zb,sv,ek,tk,nk,cg=!1,ld=[],ys=null,vs=null,_s=null,Vc=new Map,Fc=new Map,as=[],DR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ow(t,e){switch(t){case"focusin":case"focusout":ys=null;break;case"dragenter":case"dragleave":vs=null;break;case"mouseover":case"mouseout":_s=null;break;case"pointerover":case"pointerout":Vc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete(e.pointerId)}}function ql(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=pu(e),e!==null&&sv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function MR(t,e,n,r,i){switch(e){case"focusin":return ys=ql(ys,t,e,n,r,i),!0;case"dragenter":return vs=ql(vs,t,e,n,r,i),!0;case"mouseover":return _s=ql(_s,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Vc.set(s,ql(Vc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Fc.set(s,ql(Fc.get(s)||null,t,e,n,r,i)),!0}return!1}function rk(t){var e=So(t.target);if(e!==null){var n=Ko(e);if(n!==null){if(e=n.tag,e===13){if(e=Hb(n),e!==null){t.blockedOn=e,nk(t.priority,function(){ek(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ug(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ig=r,n.target.dispatchEvent(r),ig=null}else return e=pu(n),e!==null&&sv(e),t.blockedOn=n,!1;e.shift()}return!0}function Nw(t,e,n){zd(t)&&n.delete(e)}function LR(){cg=!1,ys!==null&&zd(ys)&&(ys=null),vs!==null&&zd(vs)&&(vs=null),_s!==null&&zd(_s)&&(_s=null),Vc.forEach(Nw),Fc.forEach(Nw)}function Hl(t,e){t.blockedOn===e&&(t.blockedOn=null,cg||(cg=!0,$n.unstable_scheduleCallback($n.unstable_NormalPriority,LR)))}function Uc(t){function e(i){return Hl(i,t)}if(0<ld.length){Hl(ld[0],t);for(var n=1;n<ld.length;n++){var r=ld[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ys!==null&&Hl(ys,t),vs!==null&&Hl(vs,t),_s!==null&&Hl(_s,t),Vc.forEach(e),Fc.forEach(e),n=0;n<as.length;n++)r=as[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<as.length&&(n=as[0],n.blockedOn===null);)rk(n),n.blockedOn===null&&as.shift()}var $a=Vi.ReactCurrentBatchConfig,Sh=!0;function jR(t,e,n,r){var i=Ve,s=$a.transition;$a.transition=null;try{Ve=1,ov(t,e,n,r)}finally{Ve=i,$a.transition=s}}function VR(t,e,n,r){var i=Ve,s=$a.transition;$a.transition=null;try{Ve=4,ov(t,e,n,r)}finally{Ve=i,$a.transition=s}}function ov(t,e,n,r){if(Sh){var i=ug(t,e,n,r);if(i===null)Kp(t,e,r,Th,n),Ow(t,r);else if(MR(i,t,e,n,r))r.stopPropagation();else if(Ow(t,r),e&4&&-1<DR.indexOf(t)){for(;i!==null;){var s=pu(i);if(s!==null&&Zb(s),s=ug(t,e,n,r),s===null&&Kp(t,e,r,Th,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Kp(t,e,r,null,n)}}var Th=null;function ug(t,e,n,r){if(Th=null,t=nv(r),t=So(t),t!==null)if(e=Ko(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Hb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Th=t,null}function ik(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kR()){case rv:return 1;case Jb:return 4;case wh:case IR:return 16;case Qb:return 536870912;default:return 16}default:return 16}}var fs=null,av=null,qd=null;function sk(){if(qd)return qd;var t,e=av,n=e.length,r,i="value"in fs?fs.value:fs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return qd=i.slice(t,1<r?1-r:void 0)}function Hd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cd(){return!0}function Dw(){return!1}function zn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?cd:Dw,this.isPropagationStopped=Dw,this}return at(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cd)},persist:function(){},isPersistent:cd}),e}var _l={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lv=zn(_l),fu=at({},_l,{view:0,detail:0}),FR=zn(fu),Fp,Up,Wl,wf=at({},fu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wl&&(Wl&&t.type==="mousemove"?(Fp=t.screenX-Wl.screenX,Up=t.screenY-Wl.screenY):Up=Fp=0,Wl=t),Fp)},movementY:function(t){return"movementY"in t?t.movementY:Up}}),Mw=zn(wf),UR=at({},wf,{dataTransfer:0}),$R=zn(UR),BR=at({},fu,{relatedTarget:0}),$p=zn(BR),zR=at({},_l,{animationName:0,elapsedTime:0,pseudoElement:0}),qR=zn(zR),HR=at({},_l,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),WR=zn(HR),GR=at({},_l,{data:0}),Lw=zn(GR),KR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=QR[t])?!!e[t]:!1}function cv(){return YR}var XR=at({},fu,{key:function(t){if(t.key){var e=KR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Hd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cv,charCode:function(t){return t.type==="keypress"?Hd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ZR=zn(XR),eO=at({},wf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jw=zn(eO),tO=at({},fu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cv}),nO=zn(tO),rO=at({},_l,{propertyName:0,elapsedTime:0,pseudoElement:0}),iO=zn(rO),sO=at({},wf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),oO=zn(sO),aO=[9,13,27,32],uv=Ci&&"CompositionEvent"in window,yc=null;Ci&&"documentMode"in document&&(yc=document.documentMode);var lO=Ci&&"TextEvent"in window&&!yc,ok=Ci&&(!uv||yc&&8<yc&&11>=yc),Vw=" ",Fw=!1;function ak(t,e){switch(t){case"keyup":return aO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ka=!1;function cO(t,e){switch(t){case"compositionend":return lk(e);case"keypress":return e.which!==32?null:(Fw=!0,Vw);case"textInput":return t=e.data,t===Vw&&Fw?null:t;default:return null}}function uO(t,e){if(ka)return t==="compositionend"||!uv&&ak(t,e)?(t=sk(),qd=av=fs=null,ka=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ok&&e.locale!=="ko"?null:e.data;default:return null}}var dO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dO[t.type]:e==="textarea"}function ck(t,e,n,r){Ub(r),e=bh(e,"onChange"),0<e.length&&(n=new lv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var vc=null,$c=null;function hO(t){wk(t,0)}function Ef(t){var e=Aa(t);if(Nb(e))return t}function fO(t,e){if(t==="change")return e}var uk=!1;if(Ci){var Bp;if(Ci){var zp="oninput"in document;if(!zp){var $w=document.createElement("div");$w.setAttribute("oninput","return;"),zp=typeof $w.oninput=="function"}Bp=zp}else Bp=!1;uk=Bp&&(!document.documentMode||9<document.documentMode)}function Bw(){vc&&(vc.detachEvent("onpropertychange",dk),$c=vc=null)}function dk(t){if(t.propertyName==="value"&&Ef($c)){var e=[];ck(e,$c,t,nv(t)),qb(hO,e)}}function pO(t,e,n){t==="focusin"?(Bw(),vc=e,$c=n,vc.attachEvent("onpropertychange",dk)):t==="focusout"&&Bw()}function mO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ef($c)}function gO(t,e){if(t==="click")return Ef(e)}function yO(t,e){if(t==="input"||t==="change")return Ef(e)}function vO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xr=typeof Object.is=="function"?Object.is:vO;function Bc(t,e){if(xr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Wm.call(e,i)||!xr(t[i],e[i]))return!1}return!0}function zw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qw(t,e){var n=zw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zw(n)}}function hk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fk(){for(var t=window,e=yh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yh(t.document)}return e}function dv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _O(t){var e=fk(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hk(n.ownerDocument.documentElement,n)){if(r!==null&&dv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=qw(n,s);var o=qw(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var wO=Ci&&"documentMode"in document&&11>=document.documentMode,Ia=null,dg=null,_c=null,hg=!1;function Hw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hg||Ia==null||Ia!==yh(r)||(r=Ia,"selectionStart"in r&&dv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_c&&Bc(_c,r)||(_c=r,r=bh(dg,"onSelect"),0<r.length&&(e=new lv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ia)))}function ud(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ca={animationend:ud("Animation","AnimationEnd"),animationiteration:ud("Animation","AnimationIteration"),animationstart:ud("Animation","AnimationStart"),transitionend:ud("Transition","TransitionEnd")},qp={},pk={};Ci&&(pk=document.createElement("div").style,"AnimationEvent"in window||(delete Ca.animationend.animation,delete Ca.animationiteration.animation,delete Ca.animationstart.animation),"TransitionEvent"in window||delete Ca.transitionend.transition);function Sf(t){if(qp[t])return qp[t];if(!Ca[t])return t;var e=Ca[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in pk)return qp[t]=e[n];return t}var mk=Sf("animationend"),gk=Sf("animationiteration"),yk=Sf("animationstart"),vk=Sf("transitionend"),_k=new Map,Ww="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zs(t,e){_k.set(t,e),Go(e,[t])}for(var Hp=0;Hp<Ww.length;Hp++){var Wp=Ww[Hp],EO=Wp.toLowerCase(),SO=Wp[0].toUpperCase()+Wp.slice(1);zs(EO,"on"+SO)}zs(mk,"onAnimationEnd");zs(gk,"onAnimationIteration");zs(yk,"onAnimationStart");zs("dblclick","onDoubleClick");zs("focusin","onFocus");zs("focusout","onBlur");zs(vk,"onTransitionEnd");Xa("onMouseEnter",["mouseout","mouseover"]);Xa("onMouseLeave",["mouseout","mouseover"]);Xa("onPointerEnter",["pointerout","pointerover"]);Xa("onPointerLeave",["pointerout","pointerover"]);Go("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Go("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Go("onBeforeInput",["compositionend","keypress","textInput","paste"]);Go("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Go("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Go("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TO=new Set("cancel close invalid load scroll toggle".split(" ").concat(ic));function Gw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ER(r,e,void 0,t),t.currentTarget=null}function wk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Gw(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Gw(i,a,u),s=l}}}if(_h)throw t=ag,_h=!1,ag=null,t}function Qe(t,e){var n=e[yg];n===void 0&&(n=e[yg]=new Set);var r=t+"__bubble";n.has(r)||(Ek(e,t,2,!1),n.add(r))}function Gp(t,e,n){var r=0;e&&(r|=4),Ek(n,t,r,e)}var dd="_reactListening"+Math.random().toString(36).slice(2);function zc(t){if(!t[dd]){t[dd]=!0,Ab.forEach(function(n){n!=="selectionchange"&&(TO.has(n)||Gp(n,!1,t),Gp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[dd]||(e[dd]=!0,Gp("selectionchange",!1,e))}}function Ek(t,e,n,r){switch(ik(e)){case 1:var i=jR;break;case 4:i=VR;break;default:i=ov}n=i.bind(null,e,n,t),i=void 0,!og||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Kp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=So(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}qb(function(){var u=s,d=nv(n),f=[];e:{var m=_k.get(t);if(m!==void 0){var E=lv,T=t;switch(t){case"keypress":if(Hd(n)===0)break e;case"keydown":case"keyup":E=ZR;break;case"focusin":T="focus",E=$p;break;case"focusout":T="blur",E=$p;break;case"beforeblur":case"afterblur":E=$p;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Mw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=$R;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=nO;break;case mk:case gk:case yk:E=qR;break;case vk:E=iO;break;case"scroll":E=FR;break;case"wheel":E=oO;break;case"copy":case"cut":case"paste":E=WR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=jw}var _=(e&4)!==0,b=!_&&t==="scroll",v=_?m!==null?m+"Capture":null:m;_=[];for(var g=u,k;g!==null;){k=g;var j=k.stateNode;if(k.tag===5&&j!==null&&(k=j,v!==null&&(j=jc(g,v),j!=null&&_.push(qc(g,j,k)))),b)break;g=g.return}0<_.length&&(m=new E(m,T,null,n,d),f.push({event:m,listeners:_}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",m&&n!==ig&&(T=n.relatedTarget||n.fromElement)&&(So(T)||T[Ai]))break e;if((E||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,E?(T=n.relatedTarget||n.toElement,E=u,T=T?So(T):null,T!==null&&(b=Ko(T),T!==b||T.tag!==5&&T.tag!==6)&&(T=null)):(E=null,T=u),E!==T)){if(_=Mw,j="onMouseLeave",v="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(_=jw,j="onPointerLeave",v="onPointerEnter",g="pointer"),b=E==null?m:Aa(E),k=T==null?m:Aa(T),m=new _(j,g+"leave",E,n,d),m.target=b,m.relatedTarget=k,j=null,So(d)===u&&(_=new _(v,g+"enter",T,n,d),_.target=k,_.relatedTarget=b,j=_),b=j,E&&T)t:{for(_=E,v=T,g=0,k=_;k;k=ya(k))g++;for(k=0,j=v;j;j=ya(j))k++;for(;0<g-k;)_=ya(_),g--;for(;0<k-g;)v=ya(v),k--;for(;g--;){if(_===v||v!==null&&_===v.alternate)break t;_=ya(_),v=ya(v)}_=null}else _=null;E!==null&&Kw(f,m,E,_,!1),T!==null&&b!==null&&Kw(f,b,T,_,!0)}}e:{if(m=u?Aa(u):window,E=m.nodeName&&m.nodeName.toLowerCase(),E==="select"||E==="input"&&m.type==="file")var U=fO;else if(Uw(m))if(uk)U=yO;else{U=mO;var z=pO}else(E=m.nodeName)&&E.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(U=gO);if(U&&(U=U(t,u))){ck(f,U,n,d);break e}z&&z(t,m,u),t==="focusout"&&(z=m._wrapperState)&&z.controlled&&m.type==="number"&&Zm(m,"number",m.value)}switch(z=u?Aa(u):window,t){case"focusin":(Uw(z)||z.contentEditable==="true")&&(Ia=z,dg=u,_c=null);break;case"focusout":_c=dg=Ia=null;break;case"mousedown":hg=!0;break;case"contextmenu":case"mouseup":case"dragend":hg=!1,Hw(f,n,d);break;case"selectionchange":if(wO)break;case"keydown":case"keyup":Hw(f,n,d)}var R;if(uv)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else ka?ak(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(ok&&n.locale!=="ko"&&(ka||P!=="onCompositionStart"?P==="onCompositionEnd"&&ka&&(R=sk()):(fs=d,av="value"in fs?fs.value:fs.textContent,ka=!0)),z=bh(u,P),0<z.length&&(P=new Lw(P,t,null,n,d),f.push({event:P,listeners:z}),R?P.data=R:(R=lk(n),R!==null&&(P.data=R)))),(R=lO?cO(t,n):uO(t,n))&&(u=bh(u,"onBeforeInput"),0<u.length&&(d=new Lw("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=R))}wk(f,e)})}function qc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=jc(t,n),s!=null&&r.unshift(qc(t,s,i)),s=jc(t,e),s!=null&&r.push(qc(t,s,i))),t=t.return}return r}function ya(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Kw(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=jc(n,s),l!=null&&o.unshift(qc(n,l,a))):i||(l=jc(n,s),l!=null&&o.push(qc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var bO=/\r\n?/g,kO=/\u0000|\uFFFD/g;function Jw(t){return(typeof t=="string"?t:""+t).replace(bO,`
`).replace(kO,"")}function hd(t,e,n){if(e=Jw(e),Jw(t)!==e&&n)throw Error(Y(425))}function kh(){}var fg=null,pg=null;function mg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gg=typeof setTimeout=="function"?setTimeout:void 0,IO=typeof clearTimeout=="function"?clearTimeout:void 0,Qw=typeof Promise=="function"?Promise:void 0,CO=typeof queueMicrotask=="function"?queueMicrotask:typeof Qw<"u"?function(t){return Qw.resolve(null).then(t).catch(AO)}:gg;function AO(t){setTimeout(function(){throw t})}function Jp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Uc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Uc(e)}function ws(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Yw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wl=Math.random().toString(36).slice(2),Wr="__reactFiber$"+wl,Hc="__reactProps$"+wl,Ai="__reactContainer$"+wl,yg="__reactEvents$"+wl,PO="__reactListeners$"+wl,xO="__reactHandles$"+wl;function So(t){var e=t[Wr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ai]||n[Wr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Yw(t);t!==null;){if(n=t[Wr])return n;t=Yw(t)}return e}t=n,n=t.parentNode}return null}function pu(t){return t=t[Wr]||t[Ai],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Aa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function Tf(t){return t[Hc]||null}var vg=[],Pa=-1;function qs(t){return{current:t}}function Ye(t){0>Pa||(t.current=vg[Pa],vg[Pa]=null,Pa--)}function Je(t,e){Pa++,vg[Pa]=t.current,t.current=e}var Ns={},rn=qs(Ns),bn=qs(!1),Oo=Ns;function Za(t,e){var n=t.type.contextTypes;if(!n)return Ns;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function kn(t){return t=t.childContextTypes,t!=null}function Ih(){Ye(bn),Ye(rn)}function Xw(t,e,n){if(rn.current!==Ns)throw Error(Y(168));Je(rn,e),Je(bn,n)}function Sk(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Y(108,pR(t)||"Unknown",i));return at({},n,r)}function Ch(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ns,Oo=rn.current,Je(rn,t),Je(bn,bn.current),!0}function Zw(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=Sk(t,e,Oo),r.__reactInternalMemoizedMergedChildContext=t,Ye(bn),Ye(rn),Je(rn,t)):Ye(bn),Je(bn,n)}var fi=null,bf=!1,Qp=!1;function Tk(t){fi===null?fi=[t]:fi.push(t)}function RO(t){bf=!0,Tk(t)}function Hs(){if(!Qp&&fi!==null){Qp=!0;var t=0,e=Ve;try{var n=fi;for(Ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}fi=null,bf=!1}catch(i){throw fi!==null&&(fi=fi.slice(t+1)),Kb(rv,Hs),i}finally{Ve=e,Qp=!1}}return null}var xa=[],Ra=0,Ah=null,Ph=0,Zn=[],er=0,No=null,mi=1,gi="";function _o(t,e){xa[Ra++]=Ph,xa[Ra++]=Ah,Ah=t,Ph=e}function bk(t,e,n){Zn[er++]=mi,Zn[er++]=gi,Zn[er++]=No,No=t;var r=mi;t=gi;var i=32-Tr(r)-1;r&=~(1<<i),n+=1;var s=32-Tr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,mi=1<<32-Tr(e)+i|n<<i|r,gi=s+t}else mi=1<<s|n<<i|r,gi=t}function hv(t){t.return!==null&&(_o(t,1),bk(t,1,0))}function fv(t){for(;t===Ah;)Ah=xa[--Ra],xa[Ra]=null,Ph=xa[--Ra],xa[Ra]=null;for(;t===No;)No=Zn[--er],Zn[er]=null,gi=Zn[--er],Zn[er]=null,mi=Zn[--er],Zn[er]=null}var Un=null,jn=null,et=!1,Er=null;function kk(t,e){var n=nr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function e0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Un=t,jn=ws(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Un=t,jn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=No!==null?{id:mi,overflow:gi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=nr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Un=t,jn=null,!0):!1;default:return!1}}function _g(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wg(t){if(et){var e=jn;if(e){var n=e;if(!e0(t,e)){if(_g(t))throw Error(Y(418));e=ws(n.nextSibling);var r=Un;e&&e0(t,e)?kk(r,n):(t.flags=t.flags&-4097|2,et=!1,Un=t)}}else{if(_g(t))throw Error(Y(418));t.flags=t.flags&-4097|2,et=!1,Un=t}}}function t0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Un=t}function fd(t){if(t!==Un)return!1;if(!et)return t0(t),et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!mg(t.type,t.memoizedProps)),e&&(e=jn)){if(_g(t))throw Ik(),Error(Y(418));for(;e;)kk(t,e),e=ws(e.nextSibling)}if(t0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jn=ws(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jn=null}}else jn=Un?ws(t.stateNode.nextSibling):null;return!0}function Ik(){for(var t=jn;t;)t=ws(t.nextSibling)}function el(){jn=Un=null,et=!1}function pv(t){Er===null?Er=[t]:Er.push(t)}var OO=Vi.ReactCurrentBatchConfig;function Gl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function pd(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function n0(t){var e=t._init;return e(t._payload)}function Ck(t){function e(v,g){if(t){var k=v.deletions;k===null?(v.deletions=[g],v.flags|=16):k.push(g)}}function n(v,g){if(!t)return null;for(;g!==null;)e(v,g),g=g.sibling;return null}function r(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function i(v,g){return v=bs(v,g),v.index=0,v.sibling=null,v}function s(v,g,k){return v.index=k,t?(k=v.alternate,k!==null?(k=k.index,k<g?(v.flags|=2,g):k):(v.flags|=2,g)):(v.flags|=1048576,g)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,g,k,j){return g===null||g.tag!==6?(g=rm(k,v.mode,j),g.return=v,g):(g=i(g,k),g.return=v,g)}function l(v,g,k,j){var U=k.type;return U===ba?d(v,g,k.props.children,j,k.key):g!==null&&(g.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===is&&n0(U)===g.type)?(j=i(g,k.props),j.ref=Gl(v,g,k),j.return=v,j):(j=Xd(k.type,k.key,k.props,null,v.mode,j),j.ref=Gl(v,g,k),j.return=v,j)}function u(v,g,k,j){return g===null||g.tag!==4||g.stateNode.containerInfo!==k.containerInfo||g.stateNode.implementation!==k.implementation?(g=im(k,v.mode,j),g.return=v,g):(g=i(g,k.children||[]),g.return=v,g)}function d(v,g,k,j,U){return g===null||g.tag!==7?(g=Ao(k,v.mode,j,U),g.return=v,g):(g=i(g,k),g.return=v,g)}function f(v,g,k){if(typeof g=="string"&&g!==""||typeof g=="number")return g=rm(""+g,v.mode,k),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case rd:return k=Xd(g.type,g.key,g.props,null,v.mode,k),k.ref=Gl(v,null,g),k.return=v,k;case Ta:return g=im(g,v.mode,k),g.return=v,g;case is:var j=g._init;return f(v,j(g._payload),k)}if(nc(g)||Bl(g))return g=Ao(g,v.mode,k,null),g.return=v,g;pd(v,g)}return null}function m(v,g,k,j){var U=g!==null?g.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return U!==null?null:a(v,g,""+k,j);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case rd:return k.key===U?l(v,g,k,j):null;case Ta:return k.key===U?u(v,g,k,j):null;case is:return U=k._init,m(v,g,U(k._payload),j)}if(nc(k)||Bl(k))return U!==null?null:d(v,g,k,j,null);pd(v,k)}return null}function E(v,g,k,j,U){if(typeof j=="string"&&j!==""||typeof j=="number")return v=v.get(k)||null,a(g,v,""+j,U);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case rd:return v=v.get(j.key===null?k:j.key)||null,l(g,v,j,U);case Ta:return v=v.get(j.key===null?k:j.key)||null,u(g,v,j,U);case is:var z=j._init;return E(v,g,k,z(j._payload),U)}if(nc(j)||Bl(j))return v=v.get(k)||null,d(g,v,j,U,null);pd(g,j)}return null}function T(v,g,k,j){for(var U=null,z=null,R=g,P=g=0,N=null;R!==null&&P<k.length;P++){R.index>P?(N=R,R=null):N=R.sibling;var D=m(v,R,k[P],j);if(D===null){R===null&&(R=N);break}t&&R&&D.alternate===null&&e(v,R),g=s(D,g,P),z===null?U=D:z.sibling=D,z=D,R=N}if(P===k.length)return n(v,R),et&&_o(v,P),U;if(R===null){for(;P<k.length;P++)R=f(v,k[P],j),R!==null&&(g=s(R,g,P),z===null?U=R:z.sibling=R,z=R);return et&&_o(v,P),U}for(R=r(v,R);P<k.length;P++)N=E(R,v,P,k[P],j),N!==null&&(t&&N.alternate!==null&&R.delete(N.key===null?P:N.key),g=s(N,g,P),z===null?U=N:z.sibling=N,z=N);return t&&R.forEach(function(C){return e(v,C)}),et&&_o(v,P),U}function _(v,g,k,j){var U=Bl(k);if(typeof U!="function")throw Error(Y(150));if(k=U.call(k),k==null)throw Error(Y(151));for(var z=U=null,R=g,P=g=0,N=null,D=k.next();R!==null&&!D.done;P++,D=k.next()){R.index>P?(N=R,R=null):N=R.sibling;var C=m(v,R,D.value,j);if(C===null){R===null&&(R=N);break}t&&R&&C.alternate===null&&e(v,R),g=s(C,g,P),z===null?U=C:z.sibling=C,z=C,R=N}if(D.done)return n(v,R),et&&_o(v,P),U;if(R===null){for(;!D.done;P++,D=k.next())D=f(v,D.value,j),D!==null&&(g=s(D,g,P),z===null?U=D:z.sibling=D,z=D);return et&&_o(v,P),U}for(R=r(v,R);!D.done;P++,D=k.next())D=E(R,v,P,D.value,j),D!==null&&(t&&D.alternate!==null&&R.delete(D.key===null?P:D.key),g=s(D,g,P),z===null?U=D:z.sibling=D,z=D);return t&&R.forEach(function(F){return e(v,F)}),et&&_o(v,P),U}function b(v,g,k,j){if(typeof k=="object"&&k!==null&&k.type===ba&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case rd:e:{for(var U=k.key,z=g;z!==null;){if(z.key===U){if(U=k.type,U===ba){if(z.tag===7){n(v,z.sibling),g=i(z,k.props.children),g.return=v,v=g;break e}}else if(z.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===is&&n0(U)===z.type){n(v,z.sibling),g=i(z,k.props),g.ref=Gl(v,z,k),g.return=v,v=g;break e}n(v,z);break}else e(v,z);z=z.sibling}k.type===ba?(g=Ao(k.props.children,v.mode,j,k.key),g.return=v,v=g):(j=Xd(k.type,k.key,k.props,null,v.mode,j),j.ref=Gl(v,g,k),j.return=v,v=j)}return o(v);case Ta:e:{for(z=k.key;g!==null;){if(g.key===z)if(g.tag===4&&g.stateNode.containerInfo===k.containerInfo&&g.stateNode.implementation===k.implementation){n(v,g.sibling),g=i(g,k.children||[]),g.return=v,v=g;break e}else{n(v,g);break}else e(v,g);g=g.sibling}g=im(k,v.mode,j),g.return=v,v=g}return o(v);case is:return z=k._init,b(v,g,z(k._payload),j)}if(nc(k))return T(v,g,k,j);if(Bl(k))return _(v,g,k,j);pd(v,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,g!==null&&g.tag===6?(n(v,g.sibling),g=i(g,k),g.return=v,v=g):(n(v,g),g=rm(k,v.mode,j),g.return=v,v=g),o(v)):n(v,g)}return b}var tl=Ck(!0),Ak=Ck(!1),xh=qs(null),Rh=null,Oa=null,mv=null;function gv(){mv=Oa=Rh=null}function yv(t){var e=xh.current;Ye(xh),t._currentValue=e}function Eg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ba(t,e){Rh=t,mv=Oa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tn=!0),t.firstContext=null)}function ar(t){var e=t._currentValue;if(mv!==t)if(t={context:t,memoizedValue:e,next:null},Oa===null){if(Rh===null)throw Error(Y(308));Oa=t,Rh.dependencies={lanes:0,firstContext:t}}else Oa=Oa.next=t;return e}var To=null;function vv(t){To===null?To=[t]:To.push(t)}function Pk(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,vv(e)):(n.next=i.next,i.next=n),e.interleaved=n,Pi(t,r)}function Pi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ss=!1;function _v(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ei(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Es(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Oe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Pi(t,n)}return i=r.interleaved,i===null?(e.next=e,vv(r)):(e.next=i.next,i.next=e),r.interleaved=e,Pi(t,n)}function Wd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,iv(t,n)}}function r0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Oh(t,e,n,r){var i=t.updateQueue;ss=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,d=u=l=null,a=s;do{var m=a.lane,E=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:E,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=t,_=a;switch(m=e,E=n,_.tag){case 1:if(T=_.payload,typeof T=="function"){f=T.call(E,f,m);break e}f=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=_.payload,m=typeof T=="function"?T.call(E,f,m):T,m==null)break e;f=at({},f,m);break e;case 2:ss=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else E={eventTime:E,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=E,l=f):d=d.next=E,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Mo|=o,t.lanes=o,t.memoizedState=f}}function i0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Y(191,i));i.call(r)}}}var mu={},Kr=qs(mu),Wc=qs(mu),Gc=qs(mu);function bo(t){if(t===mu)throw Error(Y(174));return t}function wv(t,e){switch(Je(Gc,e),Je(Wc,t),Je(Kr,mu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=tg(e,t)}Ye(Kr),Je(Kr,e)}function nl(){Ye(Kr),Ye(Wc),Ye(Gc)}function Rk(t){bo(Gc.current);var e=bo(Kr.current),n=tg(e,t.type);e!==n&&(Je(Wc,t),Je(Kr,n))}function Ev(t){Wc.current===t&&(Ye(Kr),Ye(Wc))}var rt=qs(0);function Nh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yp=[];function Sv(){for(var t=0;t<Yp.length;t++)Yp[t]._workInProgressVersionPrimary=null;Yp.length=0}var Gd=Vi.ReactCurrentDispatcher,Xp=Vi.ReactCurrentBatchConfig,Do=0,st=null,kt=null,Dt=null,Dh=!1,wc=!1,Kc=0,NO=0;function Kt(){throw Error(Y(321))}function Tv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!xr(t[n],e[n]))return!1;return!0}function bv(t,e,n,r,i,s){if(Do=s,st=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Gd.current=t===null||t.memoizedState===null?jO:VO,t=n(r,i),wc){s=0;do{if(wc=!1,Kc=0,25<=s)throw Error(Y(301));s+=1,Dt=kt=null,e.updateQueue=null,Gd.current=FO,t=n(r,i)}while(wc)}if(Gd.current=Mh,e=kt!==null&&kt.next!==null,Do=0,Dt=kt=st=null,Dh=!1,e)throw Error(Y(300));return t}function kv(){var t=Kc!==0;return Kc=0,t}function $r(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?st.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function lr(){if(kt===null){var t=st.alternate;t=t!==null?t.memoizedState:null}else t=kt.next;var e=Dt===null?st.memoizedState:Dt.next;if(e!==null)Dt=e,kt=t;else{if(t===null)throw Error(Y(310));kt=t,t={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Dt===null?st.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function Jc(t,e){return typeof e=="function"?e(t):e}function Zp(t){var e=lr(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=kt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((Do&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,st.lanes|=d,Mo|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,xr(r,e.memoizedState)||(Tn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,st.lanes|=s,Mo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function em(t){var e=lr(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);xr(s,e.memoizedState)||(Tn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Ok(){}function Nk(t,e){var n=st,r=lr(),i=e(),s=!xr(r.memoizedState,i);if(s&&(r.memoizedState=i,Tn=!0),r=r.queue,Iv(Lk.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Dt!==null&&Dt.memoizedState.tag&1){if(n.flags|=2048,Qc(9,Mk.bind(null,n,r,i,e),void 0,null),jt===null)throw Error(Y(349));Do&30||Dk(n,e,i)}return i}function Dk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Mk(t,e,n,r){e.value=n,e.getSnapshot=r,jk(e)&&Vk(t)}function Lk(t,e,n){return n(function(){jk(e)&&Vk(t)})}function jk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xr(t,n)}catch{return!0}}function Vk(t){var e=Pi(t,1);e!==null&&br(e,t,1,-1)}function s0(t){var e=$r();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jc,lastRenderedState:t},e.queue=t,t=t.dispatch=LO.bind(null,st,t),[e.memoizedState,t]}function Qc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Fk(){return lr().memoizedState}function Kd(t,e,n,r){var i=$r();st.flags|=t,i.memoizedState=Qc(1|e,n,void 0,r===void 0?null:r)}function kf(t,e,n,r){var i=lr();r=r===void 0?null:r;var s=void 0;if(kt!==null){var o=kt.memoizedState;if(s=o.destroy,r!==null&&Tv(r,o.deps)){i.memoizedState=Qc(e,n,s,r);return}}st.flags|=t,i.memoizedState=Qc(1|e,n,s,r)}function o0(t,e){return Kd(8390656,8,t,e)}function Iv(t,e){return kf(2048,8,t,e)}function Uk(t,e){return kf(4,2,t,e)}function $k(t,e){return kf(4,4,t,e)}function Bk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zk(t,e,n){return n=n!=null?n.concat([t]):null,kf(4,4,Bk.bind(null,e,t),n)}function Cv(){}function qk(t,e){var n=lr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Hk(t,e){var n=lr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Wk(t,e,n){return Do&21?(xr(n,e)||(n=Yb(),st.lanes|=n,Mo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tn=!0),t.memoizedState=n)}function DO(t,e){var n=Ve;Ve=n!==0&&4>n?n:4,t(!0);var r=Xp.transition;Xp.transition={};try{t(!1),e()}finally{Ve=n,Xp.transition=r}}function Gk(){return lr().memoizedState}function MO(t,e,n){var r=Ts(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Kk(t))Jk(e,n);else if(n=Pk(t,e,n,r),n!==null){var i=dn();br(n,t,r,i),Qk(n,e,r)}}function LO(t,e,n){var r=Ts(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Kk(t))Jk(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,xr(a,o)){var l=e.interleaved;l===null?(i.next=i,vv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Pk(t,e,i,r),n!==null&&(i=dn(),br(n,t,r,i),Qk(n,e,r))}}function Kk(t){var e=t.alternate;return t===st||e!==null&&e===st}function Jk(t,e){wc=Dh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Qk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,iv(t,n)}}var Mh={readContext:ar,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},jO={readContext:ar,useCallback:function(t,e){return $r().memoizedState=[t,e===void 0?null:e],t},useContext:ar,useEffect:o0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Kd(4194308,4,Bk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Kd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Kd(4,2,t,e)},useMemo:function(t,e){var n=$r();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=$r();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=MO.bind(null,st,t),[r.memoizedState,t]},useRef:function(t){var e=$r();return t={current:t},e.memoizedState=t},useState:s0,useDebugValue:Cv,useDeferredValue:function(t){return $r().memoizedState=t},useTransition:function(){var t=s0(!1),e=t[0];return t=DO.bind(null,t[1]),$r().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=st,i=$r();if(et){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),jt===null)throw Error(Y(349));Do&30||Dk(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,o0(Lk.bind(null,r,s,t),[t]),r.flags|=2048,Qc(9,Mk.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=$r(),e=jt.identifierPrefix;if(et){var n=gi,r=mi;n=(r&~(1<<32-Tr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Kc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=NO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},VO={readContext:ar,useCallback:qk,useContext:ar,useEffect:Iv,useImperativeHandle:zk,useInsertionEffect:Uk,useLayoutEffect:$k,useMemo:Hk,useReducer:Zp,useRef:Fk,useState:function(){return Zp(Jc)},useDebugValue:Cv,useDeferredValue:function(t){var e=lr();return Wk(e,kt.memoizedState,t)},useTransition:function(){var t=Zp(Jc)[0],e=lr().memoizedState;return[t,e]},useMutableSource:Ok,useSyncExternalStore:Nk,useId:Gk,unstable_isNewReconciler:!1},FO={readContext:ar,useCallback:qk,useContext:ar,useEffect:Iv,useImperativeHandle:zk,useInsertionEffect:Uk,useLayoutEffect:$k,useMemo:Hk,useReducer:em,useRef:Fk,useState:function(){return em(Jc)},useDebugValue:Cv,useDeferredValue:function(t){var e=lr();return kt===null?e.memoizedState=t:Wk(e,kt.memoizedState,t)},useTransition:function(){var t=em(Jc)[0],e=lr().memoizedState;return[t,e]},useMutableSource:Ok,useSyncExternalStore:Nk,useId:Gk,unstable_isNewReconciler:!1};function _r(t,e){if(t&&t.defaultProps){e=at({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Sg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:at({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var If={isMounted:function(t){return(t=t._reactInternals)?Ko(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=dn(),i=Ts(t),s=Ei(r,i);s.payload=e,n!=null&&(s.callback=n),e=Es(t,s,i),e!==null&&(br(e,t,i,r),Wd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=dn(),i=Ts(t),s=Ei(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Es(t,s,i),e!==null&&(br(e,t,i,r),Wd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dn(),r=Ts(t),i=Ei(n,r);i.tag=2,e!=null&&(i.callback=e),e=Es(t,i,r),e!==null&&(br(e,t,r,n),Wd(e,t,r))}};function a0(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Bc(n,r)||!Bc(i,s):!0}function Yk(t,e,n){var r=!1,i=Ns,s=e.contextType;return typeof s=="object"&&s!==null?s=ar(s):(i=kn(e)?Oo:rn.current,r=e.contextTypes,s=(r=r!=null)?Za(t,i):Ns),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=If,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function l0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&If.enqueueReplaceState(e,e.state,null)}function Tg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},_v(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ar(s):(s=kn(e)?Oo:rn.current,i.context=Za(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Sg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&If.enqueueReplaceState(i,i.state,null),Oh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function rl(t,e){try{var n="",r=e;do n+=fR(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function tm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var UO=typeof WeakMap=="function"?WeakMap:Map;function Xk(t,e,n){n=Ei(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jh||(jh=!0,Dg=r),bg(t,e)},n}function Zk(t,e,n){n=Ei(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){bg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){bg(t,e),typeof r!="function"&&(Ss===null?Ss=new Set([this]):Ss.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function c0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new UO;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=eN.bind(null,t,e,n),e.then(t,t))}function u0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function d0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ei(-1,1),e.tag=2,Es(n,e,1))),n.lanes|=1),t)}var $O=Vi.ReactCurrentOwner,Tn=!1;function ln(t,e,n,r){e.child=t===null?Ak(e,null,n,r):tl(e,t.child,n,r)}function h0(t,e,n,r,i){n=n.render;var s=e.ref;return Ba(e,i),r=bv(t,e,n,r,s,i),n=kv(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,xi(t,e,i)):(et&&n&&hv(e),e.flags|=1,ln(t,e,r,i),e.child)}function f0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Mv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,eI(t,e,s,r,i)):(t=Xd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Bc,n(o,r)&&t.ref===e.ref)return xi(t,e,i)}return e.flags|=1,t=bs(s,r),t.ref=e.ref,t.return=e,e.child=t}function eI(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Bc(s,r)&&t.ref===e.ref)if(Tn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Tn=!0);else return e.lanes=t.lanes,xi(t,e,i)}return kg(t,e,n,r,i)}function tI(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(Da,Mn),Mn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Je(Da,Mn),Mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Je(Da,Mn),Mn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Je(Da,Mn),Mn|=r;return ln(t,e,i,n),e.child}function nI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function kg(t,e,n,r,i){var s=kn(n)?Oo:rn.current;return s=Za(e,s),Ba(e,i),n=bv(t,e,n,r,s,i),r=kv(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,xi(t,e,i)):(et&&r&&hv(e),e.flags|=1,ln(t,e,n,i),e.child)}function p0(t,e,n,r,i){if(kn(n)){var s=!0;Ch(e)}else s=!1;if(Ba(e,i),e.stateNode===null)Jd(t,e),Yk(e,n,r),Tg(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ar(u):(u=kn(n)?Oo:rn.current,u=Za(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&l0(e,o,r,u),ss=!1;var m=e.memoizedState;o.state=m,Oh(e,r,o,i),l=e.memoizedState,a!==r||m!==l||bn.current||ss?(typeof d=="function"&&(Sg(e,n,d,r),l=e.memoizedState),(a=ss||a0(e,n,a,r,m,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,xk(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:_r(e.type,a),o.props=u,f=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ar(l):(l=kn(n)?Oo:rn.current,l=Za(e,l));var E=n.getDerivedStateFromProps;(d=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&l0(e,o,r,l),ss=!1,m=e.memoizedState,o.state=m,Oh(e,r,o,i);var T=e.memoizedState;a!==f||m!==T||bn.current||ss?(typeof E=="function"&&(Sg(e,n,E,r),T=e.memoizedState),(u=ss||a0(e,n,u,r,m,T,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Ig(t,e,n,r,s,i)}function Ig(t,e,n,r,i,s){nI(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Zw(e,n,!1),xi(t,e,s);r=e.stateNode,$O.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=tl(e,t.child,null,s),e.child=tl(e,null,a,s)):ln(t,e,a,s),e.memoizedState=r.state,i&&Zw(e,n,!0),e.child}function rI(t){var e=t.stateNode;e.pendingContext?Xw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Xw(t,e.context,!1),wv(t,e.containerInfo)}function m0(t,e,n,r,i){return el(),pv(i),e.flags|=256,ln(t,e,n,r),e.child}var Cg={dehydrated:null,treeContext:null,retryLane:0};function Ag(t){return{baseLanes:t,cachePool:null,transitions:null}}function iI(t,e,n){var r=e.pendingProps,i=rt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Je(rt,i&1),t===null)return wg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Pf(o,r,0,null),t=Ao(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ag(n),e.memoizedState=Cg,t):Av(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return BO(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=bs(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=bs(a,s):(s=Ao(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Ag(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Cg,r}return s=t.child,t=s.sibling,r=bs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Av(t,e){return e=Pf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function md(t,e,n,r){return r!==null&&pv(r),tl(e,t.child,null,n),t=Av(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function BO(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=tm(Error(Y(422))),md(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Pf({mode:"visible",children:r.children},i,0,null),s=Ao(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&tl(e,t.child,null,o),e.child.memoizedState=Ag(o),e.memoizedState=Cg,s);if(!(e.mode&1))return md(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Y(419)),r=tm(s,r,void 0),md(t,e,o,r)}if(a=(o&t.childLanes)!==0,Tn||a){if(r=jt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Pi(t,i),br(r,t,i,-1))}return Dv(),r=tm(Error(Y(421))),md(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=tN.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,jn=ws(i.nextSibling),Un=e,et=!0,Er=null,t!==null&&(Zn[er++]=mi,Zn[er++]=gi,Zn[er++]=No,mi=t.id,gi=t.overflow,No=e),e=Av(e,r.children),e.flags|=4096,e)}function g0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Eg(t.return,e,n)}function nm(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function sI(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ln(t,e,r.children,n),r=rt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&g0(t,n,e);else if(t.tag===19)g0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Je(rt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Nh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),nm(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Nh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}nm(e,!0,n,null,s);break;case"together":nm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Jd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function xi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Mo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=bs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=bs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function zO(t,e,n){switch(e.tag){case 3:rI(e),el();break;case 5:Rk(e);break;case 1:kn(e.type)&&Ch(e);break;case 4:wv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Je(xh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Je(rt,rt.current&1),e.flags|=128,null):n&e.child.childLanes?iI(t,e,n):(Je(rt,rt.current&1),t=xi(t,e,n),t!==null?t.sibling:null);Je(rt,rt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return sI(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Je(rt,rt.current),r)break;return null;case 22:case 23:return e.lanes=0,tI(t,e,n)}return xi(t,e,n)}var oI,Pg,aI,lI;oI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pg=function(){};aI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,bo(Kr.current);var s=null;switch(n){case"input":i=Ym(t,i),r=Ym(t,r),s=[];break;case"select":i=at({},i,{value:void 0}),r=at({},r,{value:void 0}),s=[];break;case"textarea":i=eg(t,i),r=eg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=kh)}ng(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Mc.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Mc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Qe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};lI=function(t,e,n,r){n!==r&&(e.flags|=4)};function Kl(t,e){if(!et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function qO(t,e,n){var r=e.pendingProps;switch(fv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(e),null;case 1:return kn(e.type)&&Ih(),Jt(e),null;case 3:return r=e.stateNode,nl(),Ye(bn),Ye(rn),Sv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(fd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Er!==null&&(jg(Er),Er=null))),Pg(t,e),Jt(e),null;case 5:Ev(e);var i=bo(Gc.current);if(n=e.type,t!==null&&e.stateNode!=null)aI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return Jt(e),null}if(t=bo(Kr.current),fd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Wr]=e,r[Hc]=s,t=(e.mode&1)!==0,n){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(i=0;i<ic.length;i++)Qe(ic[i],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":kw(r,s),Qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Qe("invalid",r);break;case"textarea":Cw(r,s),Qe("invalid",r)}ng(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&hd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&hd(r.textContent,a,t),i=["children",""+a]):Mc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Qe("scroll",r)}switch(n){case"input":id(r),Iw(r,s,!0);break;case"textarea":id(r),Aw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=kh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Lb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Wr]=e,t[Hc]=r,oI(t,e,!1,!1),e.stateNode=t;e:{switch(o=rg(n,r),n){case"dialog":Qe("cancel",t),Qe("close",t),i=r;break;case"iframe":case"object":case"embed":Qe("load",t),i=r;break;case"video":case"audio":for(i=0;i<ic.length;i++)Qe(ic[i],t);i=r;break;case"source":Qe("error",t),i=r;break;case"img":case"image":case"link":Qe("error",t),Qe("load",t),i=r;break;case"details":Qe("toggle",t),i=r;break;case"input":kw(t,r),i=Ym(t,r),Qe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=at({},r,{value:void 0}),Qe("invalid",t);break;case"textarea":Cw(t,r),i=eg(t,r),Qe("invalid",t);break;default:i=r}ng(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Fb(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&jb(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Lc(t,l):typeof l=="number"&&Lc(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Mc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Qe("scroll",t):l!=null&&Xy(t,s,l,o))}switch(n){case"input":id(t),Iw(t,r,!1);break;case"textarea":id(t),Aw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Os(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Va(t,!!r.multiple,s,!1):r.defaultValue!=null&&Va(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=kh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Jt(e),null;case 6:if(t&&e.stateNode!=null)lI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=bo(Gc.current),bo(Kr.current),fd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Wr]=e,(s=r.nodeValue!==n)&&(t=Un,t!==null))switch(t.tag){case 3:hd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wr]=e,e.stateNode=r}return Jt(e),null;case 13:if(Ye(rt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(et&&jn!==null&&e.mode&1&&!(e.flags&128))Ik(),el(),e.flags|=98560,s=!1;else if(s=fd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Y(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Y(317));s[Wr]=e}else el(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Jt(e),s=!1}else Er!==null&&(jg(Er),Er=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||rt.current&1?It===0&&(It=3):Dv())),e.updateQueue!==null&&(e.flags|=4),Jt(e),null);case 4:return nl(),Pg(t,e),t===null&&zc(e.stateNode.containerInfo),Jt(e),null;case 10:return yv(e.type._context),Jt(e),null;case 17:return kn(e.type)&&Ih(),Jt(e),null;case 19:if(Ye(rt),s=e.memoizedState,s===null)return Jt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Kl(s,!1);else{if(It!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Nh(t),o!==null){for(e.flags|=128,Kl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Je(rt,rt.current&1|2),e.child}t=t.sibling}s.tail!==null&&pt()>il&&(e.flags|=128,r=!0,Kl(s,!1),e.lanes=4194304)}else{if(!r)if(t=Nh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Kl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!et)return Jt(e),null}else 2*pt()-s.renderingStartTime>il&&n!==1073741824&&(e.flags|=128,r=!0,Kl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=pt(),e.sibling=null,n=rt.current,Je(rt,r?n&1|2:n&1),e):(Jt(e),null);case 22:case 23:return Nv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mn&1073741824&&(Jt(e),e.subtreeFlags&6&&(e.flags|=8192)):Jt(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function HO(t,e){switch(fv(e),e.tag){case 1:return kn(e.type)&&Ih(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return nl(),Ye(bn),Ye(rn),Sv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ev(e),null;case 13:if(Ye(rt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));el()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ye(rt),null;case 4:return nl(),null;case 10:return yv(e.type._context),null;case 22:case 23:return Nv(),null;case 24:return null;default:return null}}var gd=!1,Zt=!1,WO=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Na(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){dt(t,e,r)}else n.current=null}function xg(t,e,n){try{n()}catch(r){dt(t,e,r)}}var y0=!1;function GO(t,e){if(fg=Sh,t=fk(),dv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,f=t,m=null;t:for(;;){for(var E;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(E=f.firstChild)!==null;)m=f,f=E;for(;;){if(f===t)break t;if(m===n&&++u===i&&(a=o),m===s&&++d===r&&(l=o),(E=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=E}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(pg={focusedElem:t,selectionRange:n},Sh=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var _=T.memoizedProps,b=T.memoizedState,v=e.stateNode,g=v.getSnapshotBeforeUpdate(e.elementType===e.type?_:_r(e.type,_),b);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(j){dt(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return T=y0,y0=!1,T}function Ec(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&xg(e,n,s)}i=i.next}while(i!==r)}}function Cf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Rg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cI(t){var e=t.alternate;e!==null&&(t.alternate=null,cI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wr],delete e[Hc],delete e[yg],delete e[PO],delete e[xO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function uI(t){return t.tag===5||t.tag===3||t.tag===4}function v0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||uI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Og(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=kh));else if(r!==4&&(t=t.child,t!==null))for(Og(t,e,n),t=t.sibling;t!==null;)Og(t,e,n),t=t.sibling}function Ng(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ng(t,e,n),t=t.sibling;t!==null;)Ng(t,e,n),t=t.sibling}var Bt=null,wr=!1;function Xi(t,e,n){for(n=n.child;n!==null;)dI(t,e,n),n=n.sibling}function dI(t,e,n){if(Gr&&typeof Gr.onCommitFiberUnmount=="function")try{Gr.onCommitFiberUnmount(_f,n)}catch{}switch(n.tag){case 5:Zt||Na(n,e);case 6:var r=Bt,i=wr;Bt=null,Xi(t,e,n),Bt=r,wr=i,Bt!==null&&(wr?(t=Bt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Bt.removeChild(n.stateNode));break;case 18:Bt!==null&&(wr?(t=Bt,n=n.stateNode,t.nodeType===8?Jp(t.parentNode,n):t.nodeType===1&&Jp(t,n),Uc(t)):Jp(Bt,n.stateNode));break;case 4:r=Bt,i=wr,Bt=n.stateNode.containerInfo,wr=!0,Xi(t,e,n),Bt=r,wr=i;break;case 0:case 11:case 14:case 15:if(!Zt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&xg(n,e,o),i=i.next}while(i!==r)}Xi(t,e,n);break;case 1:if(!Zt&&(Na(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){dt(n,e,a)}Xi(t,e,n);break;case 21:Xi(t,e,n);break;case 22:n.mode&1?(Zt=(r=Zt)||n.memoizedState!==null,Xi(t,e,n),Zt=r):Xi(t,e,n);break;default:Xi(t,e,n)}}function _0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new WO),e.forEach(function(r){var i=nN.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function gr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Bt=a.stateNode,wr=!1;break e;case 3:Bt=a.stateNode.containerInfo,wr=!0;break e;case 4:Bt=a.stateNode.containerInfo,wr=!0;break e}a=a.return}if(Bt===null)throw Error(Y(160));dI(s,o,i),Bt=null,wr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){dt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hI(e,t),e=e.sibling}function hI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gr(e,t),Ur(t),r&4){try{Ec(3,t,t.return),Cf(3,t)}catch(_){dt(t,t.return,_)}try{Ec(5,t,t.return)}catch(_){dt(t,t.return,_)}}break;case 1:gr(e,t),Ur(t),r&512&&n!==null&&Na(n,n.return);break;case 5:if(gr(e,t),Ur(t),r&512&&n!==null&&Na(n,n.return),t.flags&32){var i=t.stateNode;try{Lc(i,"")}catch(_){dt(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Db(i,s),rg(a,o);var u=rg(a,s);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?Fb(i,f):d==="dangerouslySetInnerHTML"?jb(i,f):d==="children"?Lc(i,f):Xy(i,d,f,u)}switch(a){case"input":Xm(i,s);break;case"textarea":Mb(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var E=s.value;E!=null?Va(i,!!s.multiple,E,!1):m!==!!s.multiple&&(s.defaultValue!=null?Va(i,!!s.multiple,s.defaultValue,!0):Va(i,!!s.multiple,s.multiple?[]:"",!1))}i[Hc]=s}catch(_){dt(t,t.return,_)}}break;case 6:if(gr(e,t),Ur(t),r&4){if(t.stateNode===null)throw Error(Y(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){dt(t,t.return,_)}}break;case 3:if(gr(e,t),Ur(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Uc(e.containerInfo)}catch(_){dt(t,t.return,_)}break;case 4:gr(e,t),Ur(t);break;case 13:gr(e,t),Ur(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Rv=pt())),r&4&&_0(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Zt=(u=Zt)||d,gr(e,t),Zt=u):gr(e,t),Ur(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(oe=t,d=t.child;d!==null;){for(f=oe=d;oe!==null;){switch(m=oe,E=m.child,m.tag){case 0:case 11:case 14:case 15:Ec(4,m,m.return);break;case 1:Na(m,m.return);var T=m.stateNode;if(typeof T.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(_){dt(r,n,_)}}break;case 5:Na(m,m.return);break;case 22:if(m.memoizedState!==null){E0(f);continue}}E!==null?(E.return=m,oe=E):E0(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Vb("display",o))}catch(_){dt(t,t.return,_)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(_){dt(t,t.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:gr(e,t),Ur(t),r&4&&_0(t);break;case 21:break;default:gr(e,t),Ur(t)}}function Ur(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(uI(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Lc(i,""),r.flags&=-33);var s=v0(t);Ng(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=v0(t);Og(t,a,o);break;default:throw Error(Y(161))}}catch(l){dt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function KO(t,e,n){oe=t,fI(t)}function fI(t,e,n){for(var r=(t.mode&1)!==0;oe!==null;){var i=oe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||gd;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Zt;a=gd;var u=Zt;if(gd=o,(Zt=l)&&!u)for(oe=i;oe!==null;)o=oe,l=o.child,o.tag===22&&o.memoizedState!==null?S0(i):l!==null?(l.return=o,oe=l):S0(i);for(;s!==null;)oe=s,fI(s),s=s.sibling;oe=i,gd=a,Zt=u}w0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,oe=s):w0(t)}}function w0(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Zt||Cf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Zt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:_r(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&i0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}i0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Uc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Zt||e.flags&512&&Rg(e)}catch(m){dt(e,e.return,m)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function E0(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function S0(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cf(4,e)}catch(l){dt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){dt(e,i,l)}}var s=e.return;try{Rg(e)}catch(l){dt(e,s,l)}break;case 5:var o=e.return;try{Rg(e)}catch(l){dt(e,o,l)}}}catch(l){dt(e,e.return,l)}if(e===t){oe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,oe=a;break}oe=e.return}}var JO=Math.ceil,Lh=Vi.ReactCurrentDispatcher,Pv=Vi.ReactCurrentOwner,ir=Vi.ReactCurrentBatchConfig,Oe=0,jt=null,wt=null,qt=0,Mn=0,Da=qs(0),It=0,Yc=null,Mo=0,Af=0,xv=0,Sc=null,wn=null,Rv=0,il=1/0,ui=null,jh=!1,Dg=null,Ss=null,yd=!1,ps=null,Vh=0,Tc=0,Mg=null,Qd=-1,Yd=0;function dn(){return Oe&6?pt():Qd!==-1?Qd:Qd=pt()}function Ts(t){return t.mode&1?Oe&2&&qt!==0?qt&-qt:OO.transition!==null?(Yd===0&&(Yd=Yb()),Yd):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:ik(t.type)),t):1}function br(t,e,n,r){if(50<Tc)throw Tc=0,Mg=null,Error(Y(185));hu(t,n,r),(!(Oe&2)||t!==jt)&&(t===jt&&(!(Oe&2)&&(Af|=n),It===4&&ls(t,qt)),In(t,r),n===1&&Oe===0&&!(e.mode&1)&&(il=pt()+500,bf&&Hs()))}function In(t,e){var n=t.callbackNode;OR(t,e);var r=Eh(t,t===jt?qt:0);if(r===0)n!==null&&Rw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Rw(n),e===1)t.tag===0?RO(T0.bind(null,t)):Tk(T0.bind(null,t)),CO(function(){!(Oe&6)&&Hs()}),n=null;else{switch(Xb(r)){case 1:n=rv;break;case 4:n=Jb;break;case 16:n=wh;break;case 536870912:n=Qb;break;default:n=wh}n=EI(n,pI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function pI(t,e){if(Qd=-1,Yd=0,Oe&6)throw Error(Y(327));var n=t.callbackNode;if(za()&&t.callbackNode!==n)return null;var r=Eh(t,t===jt?qt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Fh(t,r);else{e=r;var i=Oe;Oe|=2;var s=gI();(jt!==t||qt!==e)&&(ui=null,il=pt()+500,Co(t,e));do try{XO();break}catch(a){mI(t,a)}while(!0);gv(),Lh.current=s,Oe=i,wt!==null?e=0:(jt=null,qt=0,e=It)}if(e!==0){if(e===2&&(i=lg(t),i!==0&&(r=i,e=Lg(t,i))),e===1)throw n=Yc,Co(t,0),ls(t,r),In(t,pt()),n;if(e===6)ls(t,r);else{if(i=t.current.alternate,!(r&30)&&!QO(i)&&(e=Fh(t,r),e===2&&(s=lg(t),s!==0&&(r=s,e=Lg(t,s))),e===1))throw n=Yc,Co(t,0),ls(t,r),In(t,pt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:wo(t,wn,ui);break;case 3:if(ls(t,r),(r&130023424)===r&&(e=Rv+500-pt(),10<e)){if(Eh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){dn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=gg(wo.bind(null,t,wn,ui),e);break}wo(t,wn,ui);break;case 4:if(ls(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Tr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*JO(r/1960))-r,10<r){t.timeoutHandle=gg(wo.bind(null,t,wn,ui),r);break}wo(t,wn,ui);break;case 5:wo(t,wn,ui);break;default:throw Error(Y(329))}}}return In(t,pt()),t.callbackNode===n?pI.bind(null,t):null}function Lg(t,e){var n=Sc;return t.current.memoizedState.isDehydrated&&(Co(t,e).flags|=256),t=Fh(t,e),t!==2&&(e=wn,wn=n,e!==null&&jg(e)),t}function jg(t){wn===null?wn=t:wn.push.apply(wn,t)}function QO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!xr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ls(t,e){for(e&=~xv,e&=~Af,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Tr(e),r=1<<n;t[n]=-1,e&=~r}}function T0(t){if(Oe&6)throw Error(Y(327));za();var e=Eh(t,0);if(!(e&1))return In(t,pt()),null;var n=Fh(t,e);if(t.tag!==0&&n===2){var r=lg(t);r!==0&&(e=r,n=Lg(t,r))}if(n===1)throw n=Yc,Co(t,0),ls(t,e),In(t,pt()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wo(t,wn,ui),In(t,pt()),null}function Ov(t,e){var n=Oe;Oe|=1;try{return t(e)}finally{Oe=n,Oe===0&&(il=pt()+500,bf&&Hs())}}function Lo(t){ps!==null&&ps.tag===0&&!(Oe&6)&&za();var e=Oe;Oe|=1;var n=ir.transition,r=Ve;try{if(ir.transition=null,Ve=1,t)return t()}finally{Ve=r,ir.transition=n,Oe=e,!(Oe&6)&&Hs()}}function Nv(){Mn=Da.current,Ye(Da)}function Co(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,IO(n)),wt!==null)for(n=wt.return;n!==null;){var r=n;switch(fv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ih();break;case 3:nl(),Ye(bn),Ye(rn),Sv();break;case 5:Ev(r);break;case 4:nl();break;case 13:Ye(rt);break;case 19:Ye(rt);break;case 10:yv(r.type._context);break;case 22:case 23:Nv()}n=n.return}if(jt=t,wt=t=bs(t.current,null),qt=Mn=e,It=0,Yc=null,xv=Af=Mo=0,wn=Sc=null,To!==null){for(e=0;e<To.length;e++)if(n=To[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}To=null}return t}function mI(t,e){do{var n=wt;try{if(gv(),Gd.current=Mh,Dh){for(var r=st.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Dh=!1}if(Do=0,Dt=kt=st=null,wc=!1,Kc=0,Pv.current=null,n===null||n.return===null){It=1,Yc=e,wt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=qt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var E=u0(o);if(E!==null){E.flags&=-257,d0(E,o,a,s,e),E.mode&1&&c0(s,u,e),e=E,l=u;var T=e.updateQueue;if(T===null){var _=new Set;_.add(l),e.updateQueue=_}else T.add(l);break e}else{if(!(e&1)){c0(s,u,e),Dv();break e}l=Error(Y(426))}}else if(et&&a.mode&1){var b=u0(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),d0(b,o,a,s,e),pv(rl(l,a));break e}}s=l=rl(l,a),It!==4&&(It=2),Sc===null?Sc=[s]:Sc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=Xk(s,l,e);r0(s,v);break e;case 1:a=l;var g=s.type,k=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Ss===null||!Ss.has(k)))){s.flags|=65536,e&=-e,s.lanes|=e;var j=Zk(s,a,e);r0(s,j);break e}}s=s.return}while(s!==null)}vI(n)}catch(U){e=U,wt===n&&n!==null&&(wt=n=n.return);continue}break}while(!0)}function gI(){var t=Lh.current;return Lh.current=Mh,t===null?Mh:t}function Dv(){(It===0||It===3||It===2)&&(It=4),jt===null||!(Mo&268435455)&&!(Af&268435455)||ls(jt,qt)}function Fh(t,e){var n=Oe;Oe|=2;var r=gI();(jt!==t||qt!==e)&&(ui=null,Co(t,e));do try{YO();break}catch(i){mI(t,i)}while(!0);if(gv(),Oe=n,Lh.current=r,wt!==null)throw Error(Y(261));return jt=null,qt=0,It}function YO(){for(;wt!==null;)yI(wt)}function XO(){for(;wt!==null&&!TR();)yI(wt)}function yI(t){var e=wI(t.alternate,t,Mn);t.memoizedProps=t.pendingProps,e===null?vI(t):wt=e,Pv.current=null}function vI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=HO(n,e),n!==null){n.flags&=32767,wt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{It=6,wt=null;return}}else if(n=qO(n,e,Mn),n!==null){wt=n;return}if(e=e.sibling,e!==null){wt=e;return}wt=e=t}while(e!==null);It===0&&(It=5)}function wo(t,e,n){var r=Ve,i=ir.transition;try{ir.transition=null,Ve=1,ZO(t,e,n,r)}finally{ir.transition=i,Ve=r}return null}function ZO(t,e,n,r){do za();while(ps!==null);if(Oe&6)throw Error(Y(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(NR(t,s),t===jt&&(wt=jt=null,qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yd||(yd=!0,EI(wh,function(){return za(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ir.transition,ir.transition=null;var o=Ve;Ve=1;var a=Oe;Oe|=4,Pv.current=null,GO(t,n),hI(n,t),_O(pg),Sh=!!fg,pg=fg=null,t.current=n,KO(n),bR(),Oe=a,Ve=o,ir.transition=s}else t.current=n;if(yd&&(yd=!1,ps=t,Vh=i),s=t.pendingLanes,s===0&&(Ss=null),CR(n.stateNode),In(t,pt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(jh)throw jh=!1,t=Dg,Dg=null,t;return Vh&1&&t.tag!==0&&za(),s=t.pendingLanes,s&1?t===Mg?Tc++:(Tc=0,Mg=t):Tc=0,Hs(),null}function za(){if(ps!==null){var t=Xb(Vh),e=ir.transition,n=Ve;try{if(ir.transition=null,Ve=16>t?16:t,ps===null)var r=!1;else{if(t=ps,ps=null,Vh=0,Oe&6)throw Error(Y(331));var i=Oe;for(Oe|=4,oe=t.current;oe!==null;){var s=oe,o=s.child;if(oe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(oe=u;oe!==null;){var d=oe;switch(d.tag){case 0:case 11:case 15:Ec(8,d,s)}var f=d.child;if(f!==null)f.return=d,oe=f;else for(;oe!==null;){d=oe;var m=d.sibling,E=d.return;if(cI(d),d===u){oe=null;break}if(m!==null){m.return=E,oe=m;break}oe=E}}}var T=s.alternate;if(T!==null){var _=T.child;if(_!==null){T.child=null;do{var b=_.sibling;_.sibling=null,_=b}while(_!==null)}}oe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,oe=o;else e:for(;oe!==null;){if(s=oe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ec(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,oe=v;break e}oe=s.return}}var g=t.current;for(oe=g;oe!==null;){o=oe;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,oe=k;else e:for(o=g;oe!==null;){if(a=oe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Cf(9,a)}}catch(U){dt(a,a.return,U)}if(a===o){oe=null;break e}var j=a.sibling;if(j!==null){j.return=a.return,oe=j;break e}oe=a.return}}if(Oe=i,Hs(),Gr&&typeof Gr.onPostCommitFiberRoot=="function")try{Gr.onPostCommitFiberRoot(_f,t)}catch{}r=!0}return r}finally{Ve=n,ir.transition=e}}return!1}function b0(t,e,n){e=rl(n,e),e=Xk(t,e,1),t=Es(t,e,1),e=dn(),t!==null&&(hu(t,1,e),In(t,e))}function dt(t,e,n){if(t.tag===3)b0(t,t,n);else for(;e!==null;){if(e.tag===3){b0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ss===null||!Ss.has(r))){t=rl(n,t),t=Zk(e,t,1),e=Es(e,t,1),t=dn(),e!==null&&(hu(e,1,t),In(e,t));break}}e=e.return}}function eN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=dn(),t.pingedLanes|=t.suspendedLanes&n,jt===t&&(qt&n)===n&&(It===4||It===3&&(qt&130023424)===qt&&500>pt()-Rv?Co(t,0):xv|=n),In(t,e)}function _I(t,e){e===0&&(t.mode&1?(e=ad,ad<<=1,!(ad&130023424)&&(ad=4194304)):e=1);var n=dn();t=Pi(t,e),t!==null&&(hu(t,e,n),In(t,n))}function tN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_I(t,n)}function nN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),_I(t,n)}var wI;wI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||bn.current)Tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tn=!1,zO(t,e,n);Tn=!!(t.flags&131072)}else Tn=!1,et&&e.flags&1048576&&bk(e,Ph,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Jd(t,e),t=e.pendingProps;var i=Za(e,rn.current);Ba(e,n),i=bv(null,e,r,t,i,n);var s=kv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kn(r)?(s=!0,Ch(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_v(e),i.updater=If,e.stateNode=i,i._reactInternals=e,Tg(e,r,t,n),e=Ig(null,e,r,!0,s,n)):(e.tag=0,et&&s&&hv(e),ln(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Jd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=iN(r),t=_r(r,t),i){case 0:e=kg(null,e,r,t,n);break e;case 1:e=p0(null,e,r,t,n);break e;case 11:e=h0(null,e,r,t,n);break e;case 14:e=f0(null,e,r,_r(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_r(r,i),kg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_r(r,i),p0(t,e,r,i,n);case 3:e:{if(rI(e),t===null)throw Error(Y(387));r=e.pendingProps,s=e.memoizedState,i=s.element,xk(t,e),Oh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=rl(Error(Y(423)),e),e=m0(t,e,r,n,i);break e}else if(r!==i){i=rl(Error(Y(424)),e),e=m0(t,e,r,n,i);break e}else for(jn=ws(e.stateNode.containerInfo.firstChild),Un=e,et=!0,Er=null,n=Ak(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(el(),r===i){e=xi(t,e,n);break e}ln(t,e,r,n)}e=e.child}return e;case 5:return Rk(e),t===null&&wg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,mg(r,i)?o=null:s!==null&&mg(r,s)&&(e.flags|=32),nI(t,e),ln(t,e,o,n),e.child;case 6:return t===null&&wg(e),null;case 13:return iI(t,e,n);case 4:return wv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=tl(e,null,r,n):ln(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_r(r,i),h0(t,e,r,i,n);case 7:return ln(t,e,e.pendingProps,n),e.child;case 8:return ln(t,e,e.pendingProps.children,n),e.child;case 12:return ln(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Je(xh,r._currentValue),r._currentValue=o,s!==null)if(xr(s.value,o)){if(s.children===i.children&&!bn.current){e=xi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ei(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Eg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Y(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Eg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ln(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ba(e,n),i=ar(i),r=r(i),e.flags|=1,ln(t,e,r,n),e.child;case 14:return r=e.type,i=_r(r,e.pendingProps),i=_r(r.type,i),f0(t,e,r,i,n);case 15:return eI(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_r(r,i),Jd(t,e),e.tag=1,kn(r)?(t=!0,Ch(e)):t=!1,Ba(e,n),Yk(e,r,i),Tg(e,r,i,n),Ig(null,e,r,!0,t,n);case 19:return sI(t,e,n);case 22:return tI(t,e,n)}throw Error(Y(156,e.tag))};function EI(t,e){return Kb(t,e)}function rN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(t,e,n,r){return new rN(t,e,n,r)}function Mv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function iN(t){if(typeof t=="function")return Mv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ev)return 11;if(t===tv)return 14}return 2}function bs(t,e){var n=t.alternate;return n===null?(n=nr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Xd(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Mv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ba:return Ao(n.children,i,s,e);case Zy:o=8,i|=8;break;case Gm:return t=nr(12,n,e,i|2),t.elementType=Gm,t.lanes=s,t;case Km:return t=nr(13,n,e,i),t.elementType=Km,t.lanes=s,t;case Jm:return t=nr(19,n,e,i),t.elementType=Jm,t.lanes=s,t;case Rb:return Pf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Pb:o=10;break e;case xb:o=9;break e;case ev:o=11;break e;case tv:o=14;break e;case is:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=nr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ao(t,e,n,r){return t=nr(7,t,r,e),t.lanes=n,t}function Pf(t,e,n,r){return t=nr(22,t,r,e),t.elementType=Rb,t.lanes=n,t.stateNode={isHidden:!1},t}function rm(t,e,n){return t=nr(6,t,null,e),t.lanes=n,t}function im(t,e,n){return e=nr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sN(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vp(0),this.expirationTimes=Vp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Lv(t,e,n,r,i,s,o,a,l){return t=new sN(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=nr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_v(s),t}function oN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ta,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function SI(t){if(!t)return Ns;t=t._reactInternals;e:{if(Ko(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(kn(n))return Sk(t,n,e)}return e}function TI(t,e,n,r,i,s,o,a,l){return t=Lv(n,r,!0,t,i,s,o,a,l),t.context=SI(null),n=t.current,r=dn(),i=Ts(n),s=Ei(r,i),s.callback=e??null,Es(n,s,i),t.current.lanes=i,hu(t,i,r),In(t,r),t}function xf(t,e,n,r){var i=e.current,s=dn(),o=Ts(i);return n=SI(n),e.context===null?e.context=n:e.pendingContext=n,e=Ei(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Es(i,e,o),t!==null&&(br(t,i,o,s),Wd(t,i,o)),o}function Uh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function k0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function jv(t,e){k0(t,e),(t=t.alternate)&&k0(t,e)}function aN(){return null}var bI=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vv(t){this._internalRoot=t}Rf.prototype.render=Vv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));xf(t,e,null,null)};Rf.prototype.unmount=Vv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Lo(function(){xf(null,t,null,null)}),e[Ai]=null}};function Rf(t){this._internalRoot=t}Rf.prototype.unstable_scheduleHydration=function(t){if(t){var e=tk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<as.length&&e!==0&&e<as[n].priority;n++);as.splice(n,0,t),n===0&&rk(t)}};function Fv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Of(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function I0(){}function lN(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Uh(o);s.call(u)}}var o=TI(e,r,t,0,null,!1,!1,"",I0);return t._reactRootContainer=o,t[Ai]=o.current,zc(t.nodeType===8?t.parentNode:t),Lo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Uh(l);a.call(u)}}var l=Lv(t,0,!1,null,null,!1,!1,"",I0);return t._reactRootContainer=l,t[Ai]=l.current,zc(t.nodeType===8?t.parentNode:t),Lo(function(){xf(e,l,n,r)}),l}function Nf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Uh(o);a.call(l)}}xf(e,o,t,i)}else o=lN(n,e,t,i,r);return Uh(o)}Zb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=rc(e.pendingLanes);n!==0&&(iv(e,n|1),In(e,pt()),!(Oe&6)&&(il=pt()+500,Hs()))}break;case 13:Lo(function(){var r=Pi(t,1);if(r!==null){var i=dn();br(r,t,1,i)}}),jv(t,1)}};sv=function(t){if(t.tag===13){var e=Pi(t,134217728);if(e!==null){var n=dn();br(e,t,134217728,n)}jv(t,134217728)}};ek=function(t){if(t.tag===13){var e=Ts(t),n=Pi(t,e);if(n!==null){var r=dn();br(n,t,e,r)}jv(t,e)}};tk=function(){return Ve};nk=function(t,e){var n=Ve;try{return Ve=t,e()}finally{Ve=n}};sg=function(t,e,n){switch(e){case"input":if(Xm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Tf(r);if(!i)throw Error(Y(90));Nb(r),Xm(r,i)}}}break;case"textarea":Mb(t,n);break;case"select":e=n.value,e!=null&&Va(t,!!n.multiple,e,!1)}};Bb=Ov;zb=Lo;var cN={usingClientEntryPoint:!1,Events:[pu,Aa,Tf,Ub,$b,Ov]},Jl={findFiberByHostInstance:So,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uN={bundleType:Jl.bundleType,version:Jl.version,rendererPackageName:Jl.rendererPackageName,rendererConfig:Jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Wb(t),t===null?null:t.stateNode},findFiberByHostInstance:Jl.findFiberByHostInstance||aN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vd.isDisabled&&vd.supportsFiber)try{_f=vd.inject(uN),Gr=vd}catch{}}Bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cN;Bn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fv(e))throw Error(Y(200));return oN(t,e,null,n)};Bn.createRoot=function(t,e){if(!Fv(t))throw Error(Y(299));var n=!1,r="",i=bI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Lv(t,1,!1,null,null,n,!1,r,i),t[Ai]=e.current,zc(t.nodeType===8?t.parentNode:t),new Vv(e)};Bn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=Wb(e),t=t===null?null:t.stateNode,t};Bn.flushSync=function(t){return Lo(t)};Bn.hydrate=function(t,e,n){if(!Of(e))throw Error(Y(200));return Nf(null,t,e,!0,n)};Bn.hydrateRoot=function(t,e,n){if(!Fv(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=bI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=TI(e,null,t,1,n??null,i,!1,s,o),t[Ai]=e.current,zc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Rf(e)};Bn.render=function(t,e,n){if(!Of(e))throw Error(Y(200));return Nf(null,t,e,!1,n)};Bn.unmountComponentAtNode=function(t){if(!Of(t))throw Error(Y(40));return t._reactRootContainer?(Lo(function(){Nf(null,null,t,!1,function(){t._reactRootContainer=null,t[Ai]=null})}),!0):!1};Bn.unstable_batchedUpdates=Ov;Bn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Of(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return Nf(t,e,n,!1,r)};Bn.version="18.3.1-next-f1338f8080-20240426";function kI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kI)}catch(t){console.error(t)}}kI(),kb.exports=Bn;var dN=kb.exports,C0=dN;Hm.createRoot=C0.createRoot,Hm.hydrateRoot=C0.hydrateRoot;/**
 * react-router v7.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var A0="popstate";function hN(t={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Vg("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Xc(i)}return pN(e,n,null,t)}function ot(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Rr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fN(){return Math.random().toString(36).substring(2,10)}function P0(t,e){return{usr:t.state,key:t.key,idx:e}}function Vg(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?El(e):e,state:n,key:e&&e.key||r||fN()}}function Xc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function El(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function pN(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function f(){a="POP";let b=d(),v=b==null?null:b-u;u=b,l&&l({action:a,location:_.location,delta:v})}function m(b,v){a="PUSH";let g=Vg(_.location,b,v);u=d()+1;let k=P0(g,u),j=_.createHref(g);try{o.pushState(k,"",j)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;i.location.assign(j)}s&&l&&l({action:a,location:_.location,delta:1})}function E(b,v){a="REPLACE";let g=Vg(_.location,b,v);u=d();let k=P0(g,u),j=_.createHref(g);o.replaceState(k,"",j),s&&l&&l({action:a,location:_.location,delta:0})}function T(b){return mN(b)}let _={get action(){return a},get location(){return t(i,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(A0,f),l=b,()=>{i.removeEventListener(A0,f),l=null}},createHref(b){return e(i,b)},createURL:T,encodeLocation(b){let v=T(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:E,go(b){return o.go(b)}};return _}function mN(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ot(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Xc(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function II(t,e,n="/"){return gN(t,e,n,!1)}function gN(t,e,n,r){let i=typeof e=="string"?El(e):e,s=Ri(i.pathname||"/",n);if(s==null)return null;let o=CI(t);yN(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=AN(s);a=IN(o[l],u,r)}return a}function CI(t,e=[],n=[],r="",i=!1){let s=(o,a,l=i,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&l)return;ot(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let f=Si([r,d.relativePath]),m=n.concat(d);o.children&&o.children.length>0&&(ot(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),CI(o.children,e,m,f,l)),!(o.path==null&&!o.index)&&e.push({path:f,score:bN(f,o.index),routesMeta:m})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let u of AI(o.path))s(o,a,!0,u)}),e}function AI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=AI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function yN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:kN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var vN=/^:[\w-]+$/,_N=3,wN=2,EN=1,SN=10,TN=-2,x0=t=>t==="*";function bN(t,e){let n=t.split("/"),r=n.length;return n.some(x0)&&(r+=TN),e&&(r+=wN),n.filter(i=>!x0(i)).reduce((i,s)=>i+(vN.test(s)?_N:s===""?EN:SN),r)}function kN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function IN(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=$h({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),m=l.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=$h({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Si([s,f.pathname]),pathnameBase:NN(Si([s,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(s=Si([s,f.pathnameBase]))}return o}function $h(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=CN(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:d,isOptional:f},m)=>{if(d==="*"){let T=a[m]||"";o=s.slice(0,s.length-T.length).replace(/(.)\/+$/,"$1")}const E=a[m];return f&&!E?u[d]=void 0:u[d]=(E||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function CN(t,e=!1,n=!0){Rr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function AN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ri(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var PN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xN=t=>PN.test(t);function RN(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?El(t):t,s;if(n)if(xN(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Rr(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?s=R0(n.substring(1),"/"):s=R0(n,e)}else s=e;return{pathname:s,search:DN(r),hash:MN(i)}}function R0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function sm(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ON(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function PI(t){let e=ON(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function xI(t,e,n,r=!1){let i;typeof t=="string"?i=El(t):(i={...t},ot(!i.pathname||!i.pathname.includes("?"),sm("?","pathname","search",i)),ot(!i.pathname||!i.pathname.includes("#"),sm("#","pathname","hash",i)),ot(!i.search||!i.search.includes("#"),sm("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}a=f>=0?e[f]:"/"}let l=RN(i,a),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}var Si=t=>t.join("/").replace(/\/\/+/g,"/"),NN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),DN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,MN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function LN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function jN(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var RI=["POST","PUT","PATCH","DELETE"];new Set(RI);var VN=["GET",...RI];new Set(VN);var Sl=A.createContext(null);Sl.displayName="DataRouter";var Df=A.createContext(null);Df.displayName="DataRouterState";A.createContext(!1);var OI=A.createContext({isTransitioning:!1});OI.displayName="ViewTransition";var FN=A.createContext(new Map);FN.displayName="Fetchers";var UN=A.createContext(null);UN.displayName="Await";var Dr=A.createContext(null);Dr.displayName="Navigation";var gu=A.createContext(null);gu.displayName="Location";var Fi=A.createContext({outlet:null,matches:[],isDataRoute:!1});Fi.displayName="Route";var Uv=A.createContext(null);Uv.displayName="RouteError";function $N(t,{relative:e}={}){ot(yu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(Dr),{hash:i,pathname:s,search:o}=vu(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:Si([n,s])),r.createHref({pathname:a,search:o,hash:i})}function yu(){return A.useContext(gu)!=null}function Ws(){return ot(yu(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(gu).location}var NI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function DI(t){A.useContext(Dr).static||A.useLayoutEffect(t)}function BN(){let{isDataRoute:t}=A.useContext(Fi);return t?tD():zN()}function zN(){ot(yu(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(Sl),{basename:e,navigator:n}=A.useContext(Dr),{matches:r}=A.useContext(Fi),{pathname:i}=Ws(),s=JSON.stringify(PI(r)),o=A.useRef(!1);return DI(()=>{o.current=!0}),A.useCallback((l,u={})=>{if(Rr(o.current,NI),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=xI(l,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Si([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,s,i,t])}A.createContext(null);function vu(t,{relative:e}={}){let{matches:n}=A.useContext(Fi),{pathname:r}=Ws(),i=JSON.stringify(PI(n));return A.useMemo(()=>xI(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function qN(t,e){return MI(t,e)}function MI(t,e,n,r,i){var g;ot(yu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=A.useContext(Dr),{matches:o}=A.useContext(Fi),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",d=a?a.pathnameBase:"/",f=a&&a.route;{let k=f&&f.path||"";LI(u,!f||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let m=Ws(),E;if(e){let k=typeof e=="string"?El(e):e;ot(d==="/"||((g=k.pathname)==null?void 0:g.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${k.pathname}" was given in the \`location\` prop.`),E=k}else E=m;let T=E.pathname||"/",_=T;if(d!=="/"){let k=d.replace(/^\//,"").split("/");_="/"+T.replace(/^\//,"").split("/").slice(k.length).join("/")}let b=II(t,{pathname:_});Rr(f||b!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Rr(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=JN(b&&b.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:Si([d,s.encodeLocation?s.encodeLocation(k.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?d:Si([d,s.encodeLocation?s.encodeLocation(k.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathnameBase])})),o,n,r,i);return e&&v?A.createElement(gu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},v):v}function HN(){let t=eD(),e=LN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:s},"ErrorBoundary")," or"," ",A.createElement("code",{style:s},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:i},n):null,o)}var WN=A.createElement(HN,null),GN=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?A.createElement(Fi.Provider,{value:this.props.routeContext},A.createElement(Uv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function KN({routeContext:t,match:e,children:n}){let r=A.useContext(Sl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(Fi.Provider,{value:t},n)}function JN(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n==null?void 0:n.errors;if(o!=null){let d=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);ot(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let a=!1,l=-1;if(n)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=d),f.route.id){let{loaderData:m,errors:E}=n,T=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!E||E[f.route.id]===void 0);if(f.route.lazy||T){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let u=n&&r?(d,f)=>{var m,E;r(d,{location:n.location,params:((E=(m=n.matches)==null?void 0:m[0])==null?void 0:E.params)??{},unstable_pattern:jN(n.matches),errorInfo:f})}:void 0;return s.reduceRight((d,f,m)=>{let E,T=!1,_=null,b=null;n&&(E=o&&f.route.id?o[f.route.id]:void 0,_=f.route.errorElement||WN,a&&(l<0&&m===0?(LI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,b=null):l===m&&(T=!0,b=f.route.hydrateFallbackElement||null)));let v=e.concat(s.slice(0,m+1)),g=()=>{let k;return E?k=_:T?k=b:f.route.Component?k=A.createElement(f.route.Component,null):f.route.element?k=f.route.element:k=d,A.createElement(KN,{match:f,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:k})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?A.createElement(GN,{location:n.location,revalidation:n.revalidation,component:_,error:E,children:g(),routeContext:{outlet:null,matches:v,isDataRoute:!0},onError:u}):g()},null)}function $v(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QN(t){let e=A.useContext(Sl);return ot(e,$v(t)),e}function YN(t){let e=A.useContext(Df);return ot(e,$v(t)),e}function XN(t){let e=A.useContext(Fi);return ot(e,$v(t)),e}function Bv(t){let e=XN(t),n=e.matches[e.matches.length-1];return ot(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function ZN(){return Bv("useRouteId")}function eD(){var r;let t=A.useContext(Uv),e=YN("useRouteError"),n=Bv("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function tD(){let{router:t}=QN("useNavigate"),e=Bv("useNavigate"),n=A.useRef(!1);return DI(()=>{n.current=!0}),A.useCallback(async(i,s={})=>{Rr(n.current,NI),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var O0={};function LI(t,e,n){!e&&!O0[t]&&(O0[t]=!0,Rr(!1,n))}A.memo(nD);function nD({routes:t,future:e,state:n,unstable_onError:r}){return MI(t,void 0,n,r,e)}function Zd(t){ot(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function rD({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1,unstable_useTransitions:o}){ot(!yu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),l=A.useMemo(()=>({basename:a,navigator:i,static:s,unstable_useTransitions:o,future:{}}),[a,i,s,o]);typeof n=="string"&&(n=El(n));let{pathname:u="/",search:d="",hash:f="",state:m=null,key:E="default"}=n,T=A.useMemo(()=>{let _=Ri(u,a);return _==null?null:{location:{pathname:_,search:d,hash:f,state:m,key:E},navigationType:r}},[a,u,d,f,m,E,r]);return Rr(T!=null,`<Router basename="${a}"> is not able to match the URL "${u}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:A.createElement(Dr.Provider,{value:l},A.createElement(gu.Provider,{children:e,value:T}))}function iD({children:t,location:e}){return qN(Fg(t),e)}function Fg(t,e=[]){let n=[];return A.Children.forEach(t,(r,i)=>{if(!A.isValidElement(r))return;let s=[...e,i];if(r.type===A.Fragment){n.push.apply(n,Fg(r.props.children,s));return}ot(r.type===Zd,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ot(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Fg(r.props.children,s)),n.push(o)}),n}var eh="get",th="application/x-www-form-urlencoded";function Mf(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function sD(t){return Mf(t)&&t.tagName.toLowerCase()==="button"}function oD(t){return Mf(t)&&t.tagName.toLowerCase()==="form"}function aD(t){return Mf(t)&&t.tagName.toLowerCase()==="input"}function lD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function cD(t,e){return t.button===0&&(!e||e==="_self")&&!lD(t)}var _d=null;function uD(){if(_d===null)try{new FormData(document.createElement("form"),0),_d=!1}catch{_d=!0}return _d}var dD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function om(t){return t!=null&&!dD.has(t)?(Rr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${th}"`),null):t}function hD(t,e){let n,r,i,s,o;if(oD(t)){let a=t.getAttribute("action");r=a?Ri(a,e):null,n=t.getAttribute("method")||eh,i=om(t.getAttribute("enctype"))||th,s=new FormData(t)}else if(sD(t)||aD(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Ri(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||eh,i=om(t.getAttribute("formenctype"))||om(a.getAttribute("enctype"))||th,s=new FormData(a,t),!uD()){let{name:u,type:d,value:f}=t;if(d==="image"){let m=u?`${u}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else u&&s.append(u,f)}}else{if(Mf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=eh,r=null,i=th,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function zv(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fD(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Ri(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function pD(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function mD(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function gD(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await pD(s,n);return o.links?o.links():[]}return[]}));return wD(r.flat(1).filter(mD).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function N0(t,e,n,r,i,s){let o=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var d;return n[u].pathname!==l.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,u)=>o(l,u)||a(l,u)):s==="data"?e.filter((l,u)=>{var f;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let m=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function yD(t,e,{includeHydrateFallback:n}={}){return vD(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function vD(t){return[...new Set(t)]}function _D(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function wD(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(_D(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function jI(){let t=A.useContext(Sl);return zv(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function ED(){let t=A.useContext(Df);return zv(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var qv=A.createContext(void 0);qv.displayName="FrameworkContext";function VI(){let t=A.useContext(qv);return zv(t,"You must render this element inside a <HydratedRouter> element"),t}function SD(t,e){let n=A.useContext(qv),[r,i]=A.useState(!1),[s,o]=A.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=e,m=A.useRef(null);A.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let _=v=>{v.forEach(g=>{o(g.isIntersecting)})},b=new IntersectionObserver(_,{threshold:.5});return m.current&&b.observe(m.current),()=>{b.disconnect()}}},[t]),A.useEffect(()=>{if(r){let _=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(_)}}},[r]);let E=()=>{i(!0)},T=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,m,{}]:[s,m,{onFocus:Ql(a,E),onBlur:Ql(l,T),onMouseEnter:Ql(u,E),onMouseLeave:Ql(d,T),onTouchStart:Ql(f,E)}]:[!1,m,{}]}function Ql(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function TD({page:t,...e}){let{router:n}=jI(),r=A.useMemo(()=>II(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement(kD,{page:t,matches:r,...e}):null}function bD(t){let{manifest:e,routeModules:n}=VI(),[r,i]=A.useState([]);return A.useEffect(()=>{let s=!1;return gD(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function kD({page:t,matches:e,...n}){let r=Ws(),{manifest:i,routeModules:s}=VI(),{basename:o}=jI(),{loaderData:a,matches:l}=ED(),u=A.useMemo(()=>N0(t,e,l,i,r,"data"),[t,e,l,i,r]),d=A.useMemo(()=>N0(t,e,l,i,r,"assets"),[t,e,l,i,r]),f=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let T=new Set,_=!1;if(e.forEach(v=>{var k;let g=i.routes[v.route.id];!g||!g.hasLoader||(!u.some(j=>j.route.id===v.route.id)&&v.route.id in a&&((k=s[v.route.id])!=null&&k.shouldRevalidate)||g.hasClientLoader?_=!0:T.add(v.route.id))}),T.size===0)return[];let b=fD(t,o,"data");return _&&T.size>0&&b.searchParams.set("_routes",e.filter(v=>T.has(v.route.id)).map(v=>v.route.id).join(",")),[b.pathname+b.search]},[o,a,r,i,u,e,t,s]),m=A.useMemo(()=>yD(d,i),[d,i]),E=bD(d);return A.createElement(A.Fragment,null,f.map(T=>A.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...n})),m.map(T=>A.createElement("link",{key:T,rel:"modulepreload",href:T,...n})),E.map(({key:T,link:_})=>A.createElement("link",{key:T,nonce:n.nonce,..._})))}function ID(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var FI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{FI&&(window.__reactRouterVersion="7.10.0")}catch{}function CD({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=A.useRef();i.current==null&&(i.current=hN({window:r,v5Compat:!0}));let s=i.current,[o,a]=A.useState({action:s.action,location:s.location}),l=A.useCallback(u=>{n===!1?a(u):A.startTransition(()=>a(u))},[n]);return A.useLayoutEffect(()=>s.listen(l),[s,l]),A.createElement(rD,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s,unstable_useTransitions:n===!0})}var UI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$I=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:d,viewTransition:f,...m},E){let{basename:T,unstable_useTransitions:_}=A.useContext(Dr),b=typeof u=="string"&&UI.test(u),v,g=!1;if(typeof u=="string"&&b&&(v=u,FI))try{let D=new URL(window.location.href),C=u.startsWith("//")?new URL(D.protocol+u):new URL(u),F=Ri(C.pathname,T);C.origin===D.origin&&F!=null?u=F+C.search+C.hash:g=!0}catch{Rr(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=$N(u,{relative:i}),[j,U,z]=SD(r,m),R=RD(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:f,unstable_useTransitions:_});function P(D){e&&e(D),D.defaultPrevented||R(D)}let N=A.createElement("a",{...m,...z,href:v||k,onClick:g||s?e:P,ref:ID(E,U),target:l,"data-discover":!b&&n==="render"?"true":void 0});return j&&!b?A.createElement(A.Fragment,null,N,A.createElement(TD,{page:k})):N});$I.displayName="Link";var AD=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...u},d){let f=vu(o,{relative:u.relative}),m=Ws(),E=A.useContext(Df),{navigator:T,basename:_}=A.useContext(Dr),b=E!=null&&LD(f)&&a===!0,v=T.encodeLocation?T.encodeLocation(f).pathname:f.pathname,g=m.pathname,k=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;n||(g=g.toLowerCase(),k=k?k.toLowerCase():null,v=v.toLowerCase()),k&&_&&(k=Ri(k,_)||k);const j=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let U=g===v||!i&&g.startsWith(v)&&g.charAt(j)==="/",z=k!=null&&(k===v||!i&&k.startsWith(v)&&k.charAt(v.length)==="/"),R={isActive:U,isPending:z,isTransitioning:b},P=U?e:void 0,N;typeof r=="function"?N=r(R):N=[r,U?"active":null,z?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let D=typeof s=="function"?s(R):s;return A.createElement($I,{...u,"aria-current":P,className:N,ref:d,style:D,to:o,viewTransition:a},typeof l=="function"?l(R):l)});AD.displayName="NavLink";var PD=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=eh,action:a,onSubmit:l,relative:u,preventScrollReset:d,viewTransition:f,...m},E)=>{let{unstable_useTransitions:T}=A.useContext(Dr),_=DD(),b=MD(a,{relative:u}),v=o.toLowerCase()==="get"?"get":"post",g=typeof a=="string"&&UI.test(a),k=j=>{if(l&&l(j),j.defaultPrevented)return;j.preventDefault();let U=j.nativeEvent.submitter,z=(U==null?void 0:U.getAttribute("formmethod"))||o,R=()=>_(U||j.currentTarget,{fetcherKey:e,method:z,navigate:n,replace:i,state:s,relative:u,preventScrollReset:d,viewTransition:f});T&&n!==!1?A.startTransition(()=>R()):R()};return A.createElement("form",{ref:E,method:v,action:b,onSubmit:r?l:k,...m,"data-discover":!g&&t==="render"?"true":void 0})});PD.displayName="Form";function xD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BI(t){let e=A.useContext(Sl);return ot(e,xD(t)),e}function RD(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o,unstable_useTransitions:a}={}){let l=BN(),u=Ws(),d=vu(t,{relative:s});return A.useCallback(f=>{if(cD(f,e)){f.preventDefault();let m=n!==void 0?n:Xc(u)===Xc(d),E=()=>l(t,{replace:m,state:r,preventScrollReset:i,relative:s,viewTransition:o});a?A.startTransition(()=>E()):E()}},[u,l,d,n,r,e,t,i,s,o,a])}var OD=0,ND=()=>`__${String(++OD)}__`;function DD(){let{router:t}=BI("useSubmit"),{basename:e}=A.useContext(Dr),n=ZN(),r=t.fetch,i=t.navigate;return A.useCallback(async(s,o={})=>{let{action:a,method:l,encType:u,formData:d,body:f}=hD(s,e);if(o.navigate===!1){let m=o.fetcherKey||ND();await r(m,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:d,body:f,formMethod:o.method||l,formEncType:o.encType||u,flushSync:o.flushSync})}else await i(o.action||a,{preventScrollReset:o.preventScrollReset,formData:d,body:f,formMethod:o.method||l,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,i,e,n])}function MD(t,{relative:e}={}){let{basename:n}=A.useContext(Dr),r=A.useContext(Fi);ot(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...vu(t||".",{relative:e})},o=Ws();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let d=a.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Si([n,s.pathname])),Xc(s)}function LD(t,{relative:e}={}){let n=A.useContext(OI);ot(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=BI("useViewTransitionState"),i=vu(t,{relative:e});if(!n.isTransitioning)return!1;let s=Ri(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Ri(n.nextLocation.pathname,r)||n.nextLocation.pathname;return $h(i.pathname,o)!=null||$h(i.pathname,s)!=null}const jD="modulepreload",VD=function(t){return"/app/"+t},D0={},cr=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=VD(l),l in D0)return;D0[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":jD,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((m,E)=>{f.addEventListener("load",m),f.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zI=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var UD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>A.createElement("svg",{ref:l,...UD,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:zI("lucide",i),...a},[...o.map(([u,d])=>A.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=(t,e)=>{const n=A.forwardRef(({className:r,...i},s)=>A.createElement($D,{ref:s,iconNode:e,className:zI(`lucide-${FD(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=mt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=mt("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=mt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=mt("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=mt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=mt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=mt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=mt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=mt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=mt("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=mt("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=mt("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=mt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=mt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=mt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=mt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=mt("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=mt("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=mt("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=mt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=mt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function GI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=GI(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Hv(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=GI(t))&&(r&&(r+=" "),r+=e);return r}const YD=({children:t,className:e})=>I.jsx("div",{className:Hv("bg-gray-900/90 border border-gray-800 rounded-xl p-4 shadow-lg backdrop-blur-md",e),children:t}),Yl=({children:t,onClick:e,variant:n="primary",className:r,disabled:i=!1,type:s="button"})=>{const o="px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2",a={primary:"bg-blue-600 hover:bg-blue-500 text-white shadow-[0_0_15px_rgba(37,99,235,0.5)]",danger:"bg-red-600 hover:bg-red-500 text-white shadow-[0_0_15px_rgba(220,38,38,0.5)]",secondary:"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700",ghost:"bg-transparent hover:bg-gray-800 text-gray-400"};return I.jsx("button",{type:s,onClick:e,disabled:i,className:Hv(o,a[n],r,i&&"opacity-50 cursor-not-allowed"),children:t})},Yt=({children:t,color:e="blue"})=>{const n={blue:"bg-blue-900/30 text-blue-400 border-blue-800",red:"bg-red-900/30 text-red-400 border-red-800",green:"bg-green-900/30 text-green-400 border-green-800",yellow:"bg-yellow-900/30 text-yellow-400 border-yellow-800"};return I.jsx("span",{className:Hv("px-2 py-0.5 rounded text-xs font-mono border uppercase tracking-wide",n[e]),children:t})},Zi=(t=!1)=>{const[e,n]=A.useState(t),r=A.useCallback(()=>n(!0),[]),i=A.useCallback(()=>n(!1),[]),s=A.useCallback(()=>n(o=>!o),[]);return{isOpen:e,open:r,close:i,toggle:s}},XD=()=>{};var V0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ZD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},JI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4;let m=(a&15)<<2|u>>6,E=u&63;l||(E=64,o||(m=64)),r.push(n[d],n[f],n[m],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(KI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ZD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new eM;const m=s<<2|a>>4;if(r.push(m),u!==64){const E=a<<4&240|u>>2;if(r.push(E),f!==64){const T=u<<6&192|f;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class eM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tM=function(t){const e=KI(t);return JI.encodeByteArray(e,!0)},Bh=function(t){return tM(t).replace(/\./g,"")},QI=function(t){try{return JI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM=()=>nM().__FIREBASE_DEFAULTS__,iM=()=>{if(typeof process>"u"||typeof V0>"u")return;const t=V0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&QI(t[1]);return e&&JSON.parse(e)},Lf=()=>{try{return XD()||rM()||iM()||sM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},YI=t=>{var e,n;return(n=(e=Lf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},oM=t=>{const e=YI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},XI=()=>{var t;return(t=Lf())===null||t===void 0?void 0:t.config},ZI=t=>{var e;return(e=Lf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eC(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Bh(JSON.stringify(n)),Bh(JSON.stringify(o)),""].join(".")}const bc={};function cM(){const t={prod:[],emulator:[]};for(const e of Object.keys(bc))bc[e]?t.emulator.push(e):t.prod.push(e);return t}function uM(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let F0=!1;function tC(t,e){if(typeof window>"u"||typeof document>"u"||!Tl(window.location.host)||bc[t]===e||bc[t]||F0)return;bc[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=cM().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,E){m.setAttribute("width","24"),m.setAttribute("id",E),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{F0=!0,o()},m}function d(m,E){m.setAttribute("id",E),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=uM(r),E=n("text"),T=document.getElementById(E)||document.createElement("span"),_=n("learnmore"),b=document.getElementById(_)||document.createElement("a"),v=n("preprendIcon"),g=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const k=m.element;a(k),d(b,_);const j=u();l(g,v),k.append(g,T,b,j),document.body.appendChild(k)}s?(T.innerText="Preview backend disconnected.",g.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(g.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function hM(){var t;const e=(t=Lf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function mM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gM(){const t=sn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function yM(){return!hM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vM(){try{return typeof indexedDB=="object"}catch{return!1}}function _M(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM="FirebaseError";class Ui extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=wM,Object.setPrototypeOf(this,Ui.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_u.prototype.create)}}class _u{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?EM(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ui(i,a,r)}}function EM(t,e){return t.replace(SM,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const SM=/\{\$([^}]+)}/g;function TM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function jo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(U0(s)&&U0(o)){if(!jo(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function U0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function oc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ac(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function bM(t,e){const n=new kM(t,e);return n.subscribe.bind(n)}class kM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");IM(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=cm),i.error===void 0&&(i.error=cm),i.complete===void 0&&(i.complete=cm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function IM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function cm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t){return t&&t._delegate?t._delegate:t}class Vo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new aM;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PM(e))try{this.getOrInitializeService({instanceIdentifier:Eo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Eo){return this.instances.has(e)}getOptions(e=Eo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Eo){return this.component?this.component.multipleInstances?e:Eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AM(t){return t===Eo?void 0:t}function PM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const RM={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},OM=ke.INFO,NM={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},DM=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=NM[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wv{constructor(e){this.name=e,this._logLevel=OM,this._logHandler=DM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const MM=(t,e)=>e.some(n=>t instanceof n);let $0,B0;function LM(){return $0||($0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jM(){return B0||(B0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nC=new WeakMap,Bg=new WeakMap,rC=new WeakMap,um=new WeakMap,Gv=new WeakMap;function VM(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ks(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&nC.set(n,t)}).catch(()=>{}),Gv.set(e,t),e}function FM(t){if(Bg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Bg.set(t,e)}let zg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ks(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function UM(t){zg=t(zg)}function $M(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(dm(this),e,...n);return rC.set(r,e.sort?e.sort():[e]),ks(r)}:jM().includes(t)?function(...e){return t.apply(dm(this),e),ks(nC.get(this))}:function(...e){return ks(t.apply(dm(this),e))}}function BM(t){return typeof t=="function"?$M(t):(t instanceof IDBTransaction&&FM(t),MM(t,LM())?new Proxy(t,zg):t)}function ks(t){if(t instanceof IDBRequest)return VM(t);if(um.has(t))return um.get(t);const e=BM(t);return e!==t&&(um.set(t,e),Gv.set(e,t)),e}const dm=t=>Gv.get(t);function zM(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ks(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ks(o.result),l.oldVersion,l.newVersion,ks(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const qM=["get","getKey","getAll","getAllKeys","count"],HM=["put","add","delete","clear"],hm=new Map;function z0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hm.get(e))return hm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=HM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||qM.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return hm.set(e,s),s}UM(t=>({...t,get:(e,n,r)=>z0(e,n)||t.get(e,n,r),has:(e,n)=>!!z0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GM(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qg="@firebase/app",q0="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new Wv("@firebase/app"),KM="@firebase/app-compat",JM="@firebase/analytics-compat",QM="@firebase/analytics",YM="@firebase/app-check-compat",XM="@firebase/app-check",ZM="@firebase/auth",eL="@firebase/auth-compat",tL="@firebase/database",nL="@firebase/data-connect",rL="@firebase/database-compat",iL="@firebase/functions",sL="@firebase/functions-compat",oL="@firebase/installations",aL="@firebase/installations-compat",lL="@firebase/messaging",cL="@firebase/messaging-compat",uL="@firebase/performance",dL="@firebase/performance-compat",hL="@firebase/remote-config",fL="@firebase/remote-config-compat",pL="@firebase/storage",mL="@firebase/storage-compat",gL="@firebase/firestore",yL="@firebase/ai",vL="@firebase/firestore-compat",_L="firebase",wL="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg="[DEFAULT]",EL={[qg]:"fire-core",[KM]:"fire-core-compat",[QM]:"fire-analytics",[JM]:"fire-analytics-compat",[XM]:"fire-app-check",[YM]:"fire-app-check-compat",[ZM]:"fire-auth",[eL]:"fire-auth-compat",[tL]:"fire-rtdb",[nL]:"fire-data-connect",[rL]:"fire-rtdb-compat",[iL]:"fire-fn",[sL]:"fire-fn-compat",[oL]:"fire-iid",[aL]:"fire-iid-compat",[lL]:"fire-fcm",[cL]:"fire-fcm-compat",[uL]:"fire-perf",[dL]:"fire-perf-compat",[hL]:"fire-rc",[fL]:"fire-rc-compat",[pL]:"fire-gcs",[mL]:"fire-gcs-compat",[gL]:"fire-fst",[vL]:"fire-fst-compat",[yL]:"fire-vertex","fire-js":"fire-js",[_L]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh=new Map,SL=new Map,Wg=new Map;function H0(t,e){try{t.container.addComponent(e)}catch(n){Oi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function sl(t){const e=t.name;if(Wg.has(e))return Oi.debug(`There were multiple attempts to register component ${e}.`),!1;Wg.set(e,t);for(const n of zh.values())H0(n,t);for(const n of SL.values())H0(n,t);return!0}function Kv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function En(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Is=new _u("app","Firebase",TL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=wL;function iC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hg,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Is.create("bad-app-name",{appName:String(i)});if(n||(n=XI()),!n)throw Is.create("no-options");const s=zh.get(i);if(s){if(jo(n,s.options)&&jo(r,s.config))return s;throw Is.create("duplicate-app",{appName:i})}const o=new xM(i);for(const l of Wg.values())o.addComponent(l);const a=new bL(n,r,o);return zh.set(i,a),a}function sC(t=Hg){const e=zh.get(t);if(!e&&t===Hg&&XI())return iC();if(!e)throw Is.create("no-app",{appName:t});return e}function Cs(t,e,n){var r;let i=(r=EL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oi.warn(a.join(" "));return}sl(new Vo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL="firebase-heartbeat-database",IL=1,Zc="firebase-heartbeat-store";let fm=null;function oC(){return fm||(fm=zM(kL,IL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Is.create("idb-open",{originalErrorMessage:t.message})})),fm}async function CL(t){try{const n=(await oC()).transaction(Zc),r=await n.objectStore(Zc).get(aC(t));return await n.done,r}catch(e){if(e instanceof Ui)Oi.warn(e.message);else{const n=Is.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Oi.warn(n.message)}}}async function W0(t,e){try{const r=(await oC()).transaction(Zc,"readwrite");await r.objectStore(Zc).put(e,aC(t)),await r.done}catch(n){if(n instanceof Ui)Oi.warn(n.message);else{const r=Is.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Oi.warn(r.message)}}}function aC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=1024,PL=30;class xL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new OL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=G0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>PL){const o=NL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Oi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=G0(),{heartbeatsToSend:r,unsentEntries:i}=RL(this._heartbeatsCache.heartbeats),s=Bh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Oi.warn(n),""}}}function G0(){return new Date().toISOString().substring(0,10)}function RL(t,e=AL){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),K0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),K0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class OL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vM()?_M().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await CL(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return W0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return W0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function K0(t){return Bh(JSON.stringify({version:2,heartbeats:t})).length}function NL(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(t){sl(new Vo("platform-logger",e=>new WM(e),"PRIVATE")),sl(new Vo("heartbeat",e=>new xL(e),"PRIVATE")),Cs(qg,q0,t),Cs(qg,q0,"esm2017"),Cs("fire-js","")}DL("");function Jv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function lC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ML=lC,cC=new _u("auth","Firebase",lC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=new Wv("@firebase/auth");function LL(t,...e){qh.logLevel<=ke.WARN&&qh.warn(`Auth (${bl}): ${t}`,...e)}function nh(t,...e){qh.logLevel<=ke.ERROR&&qh.error(`Auth (${bl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(t,...e){throw Yv(t,...e)}function kr(t,...e){return Yv(t,...e)}function Qv(t,e,n){const r=Object.assign(Object.assign({},ML()),{[e]:n});return new _u("auth","Firebase",r).create(e,{appName:t.name})}function Jr(t){return Qv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uC(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ur(t,"argument-error"),Qv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Yv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return cC.create(t,...e)}function fe(t,e,...n){if(!t)throw Yv(e,...n)}function yi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw nh(e),new Error(e)}function Ni(t,e){t||yi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function jL(){return J0()==="http:"||J0()==="https:"}function J0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jL()||pM()||"connection"in navigator)?navigator.onLine:!0}function FL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ni(n>e,"Short delay should be less than long delay!"),this.isMobile=dM()||mM()}get(){return VL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(t,e){Ni(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],BL=new Eu(3e4,6e4);function Gs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function $i(t,e,n,r,i={}){return hC(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=wu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return fM()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Tl(t.emulatorConfig.host)&&(u.credentials="include"),dC.fetch()(await fC(t,t.config.apiHost,n,a),u)})}async function hC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},UL),e);try{const i=new qL(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw wd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw wd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw wd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw wd(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Qv(t,d,u);ur(t,d)}}catch(i){if(i instanceof Ui)throw i;ur(t,"network-request-failed",{message:String(i)})}}async function Su(t,e,n,r,i={}){const s=await $i(t,e,n,r,i);return"mfaPendingCredential"in s&&ur(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function fC(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Xv(t.config,i):`${t.config.apiScheme}://${i}`;return $L.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function zL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(kr(this.auth,"network-request-failed")),BL.get())})}}function wd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=kr(t,e,r);return i.customData._tokenResponse=n,i}function Q0(t){return t!==void 0&&t.enterprise!==void 0}class HL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return zL(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function WL(t,e){return $i(t,"GET","/v2/recaptchaConfig",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GL(t,e){return $i(t,"POST","/v1/accounts:delete",e)}async function Hh(t,e){return $i(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function KL(t,e=!1){const n=lt(t),r=await n.getIdToken(e),i=Zv(r);fe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:kc(pm(i.auth_time)),issuedAtTime:kc(pm(i.iat)),expirationTime:kc(pm(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function pm(t){return Number(t)*1e3}function Zv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return nh("JWT malformed, contained fewer than 3 sections"),null;try{const i=QI(n);return i?JSON.parse(i):(nh("Failed to decode base64 JWT payload"),null)}catch(i){return nh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Y0(t){const e=Zv(t);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ol(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ui&&JL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function JL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=kc(this.lastLoginAt),this.creationTime=kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ol(t,Hh(n,{idToken:r}));fe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?pC(s.providerUserInfo):[],a=XL(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Kg(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function YL(t){const e=lt(t);await eu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function pC(t){return t.map(e=>{var{providerId:n}=e,r=Jv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZL(t,e){const n=await hC(t,{},async()=>{const r=wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await fC(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Tl(t.emulatorConfig.host)&&(l.credentials="include"),dC.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function e2(t,e){return $i(t,"POST","/v2/accounts:revokeToken",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Y0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){fe(e.length!==0,"internal-error");const n=Y0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await ZL(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new qa;return r&&(fe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(fe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(fe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qa,this.toJSON())}_performRefresh(){return yi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(t,e){fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Sr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Jv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new QL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Kg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ol(this,this.stsTokenManager.getToken(this.auth,e));return fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return KL(this,e)}reload(){return YL(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Sr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await eu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(En(this.auth.app))return Promise.reject(Jr(this.auth));const e=await this.getIdToken();return await ol(this,GL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,E=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,b=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(u=n.createdAt)!==null&&u!==void 0?u:void 0,g=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:k,emailVerified:j,isAnonymous:U,providerData:z,stsTokenManager:R}=n;fe(k&&R,e,"internal-error");const P=qa.fromJSON(this.name,R);fe(typeof k=="string",e,"internal-error"),es(f,e.name),es(m,e.name),fe(typeof j=="boolean",e,"internal-error"),fe(typeof U=="boolean",e,"internal-error"),es(E,e.name),es(T,e.name),es(_,e.name),es(b,e.name),es(v,e.name),es(g,e.name);const N=new Sr({uid:k,auth:e,email:m,emailVerified:j,displayName:f,isAnonymous:U,photoURL:T,phoneNumber:E,tenantId:_,stsTokenManager:P,createdAt:v,lastLoginAt:g});return z&&Array.isArray(z)&&(N.providerData=z.map(D=>Object.assign({},D))),b&&(N._redirectEventId=b),N}static async _fromIdTokenResponse(e,n,r=!1){const i=new qa;i.updateFromServerResponse(n);const s=new Sr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await eu(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];fe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?pC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new qa;a.updateFromIdToken(r);const l=new Sr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Kg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0=new Map;function vi(t){Ni(t instanceof Function,"Expected a class definition");let e=X0.get(t);return e?(Ni(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,X0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}mC.type="NONE";const Z0=mC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(t,e,n){return`firebase:${t}:${e}:${n}`}class Ha{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=rh(this.userKey,i.apiKey,s),this.fullPersistenceKey=rh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Hh(this.auth,{idToken:e}).catch(()=>{});return n?Sr._fromGetAccountInfoResponse(this.auth,n,e):null}return Sr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ha(vi(Z0),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||vi(Z0);const o=rh(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){let f;if(typeof d=="string"){const m=await Hh(e,{idToken:d}).catch(()=>{});if(!m)break;f=await Sr._fromGetAccountInfoResponse(e,m,d)}else f=Sr._fromJSON(e,d);u!==s&&(a=f),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ha(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Ha(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_C(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(EC(e))return"Blackberry";if(SC(e))return"Webos";if(yC(e))return"Safari";if((e.includes("chrome/")||vC(e))&&!e.includes("edge/"))return"Chrome";if(wC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function gC(t=sn()){return/firefox\//i.test(t)}function yC(t=sn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vC(t=sn()){return/crios\//i.test(t)}function _C(t=sn()){return/iemobile/i.test(t)}function wC(t=sn()){return/android/i.test(t)}function EC(t=sn()){return/blackberry/i.test(t)}function SC(t=sn()){return/webos/i.test(t)}function e_(t=sn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function t2(t=sn()){var e;return e_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function n2(){return gM()&&document.documentMode===10}function TC(t=sn()){return e_(t)||wC(t)||SC(t)||EC(t)||/windows phone/i.test(t)||_C(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t,e=[]){let n;switch(t){case"Browser":n=eE(sn());break;case"Worker":n=`${eE(sn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i2(t,e={}){return $i(t,"GET","/v2/passwordPolicy",Gs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=6;class o2{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:s2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tE(this),this.idTokenSubscription=new tE(this),this.beforeStateQueue=new r2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vi(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Ha.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Hh(this,{idToken:e}),r=await Sr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(En(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await eu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(En(this.app))return Promise.reject(Jr(this));const n=e?lt(e):null;return n&&fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return En(this.app)?Promise.reject(Jr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return En(this.app)?Promise.reject(Jr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await i2(this),n=new o2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _u("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await e2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vi(e)||this._popupRedirectResolver;fe(n,this,"argument-error"),this.redirectPersistenceManager=await Ha.create(this,[vi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(En(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&LL(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Bi(t){return lt(t)}class tE{constructor(e){this.auth=e,this.observer=null,this.addObserver=bM(n=>this.observer=n)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function l2(t){jf=t}function kC(t){return jf.loadJS(t)}function c2(){return jf.recaptchaEnterpriseScript}function u2(){return jf.gapiScript}function d2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class h2{constructor(){this.enterprise=new f2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class f2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const p2="recaptcha-enterprise",IC="NO_RECAPTCHA";class m2{constructor(e){this.type=p2,this.auth=Bi(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{WL(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new HL(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Q0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(IC)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new h2().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Q0(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=c2();l.length!==0&&(l+=a),kC(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function nE(t,e,n,r=!1,i=!1){const s=new m2(t);let o;if(i)o=IC;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Jg(t,e,n,r,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await nE(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await nE(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(t,e){const n=Kv(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(jo(s,e??{}))return i;ur(i,"already-initialized")}return n.initialize({options:e})}function y2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function v2(t,e,n){const r=Bi(t);fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=CC(e),{host:o,port:a}=_2(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){fe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),fe(jo(u,r.config.emulator)&&jo(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Tl(o)?(eC(`${s}//${o}${l}`),tC("Auth",!0)):w2()}function CC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _2(t){const e=CC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:rE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:rE(o)}}}function rE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function w2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return yi("not implemented")}_getIdTokenResponse(e){return yi("not implemented")}_linkToIdToken(e,n){return yi("not implemented")}_getReauthenticationResolver(e){return yi("not implemented")}}async function E2(t,e){return $i(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S2(t,e){return Su(t,"POST","/v1/accounts:signInWithPassword",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T2(t,e){return Su(t,"POST","/v1/accounts:signInWithEmailLink",Gs(t,e))}async function b2(t,e){return Su(t,"POST","/v1/accounts:signInWithEmailLink",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends t_{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new tu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new tu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jg(e,n,"signInWithPassword",S2);case"emailLink":return T2(e,{email:this._email,oobCode:this._password});default:ur(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jg(e,r,"signUpPassword",E2);case"emailLink":return b2(e,{idToken:n,email:this._email,oobCode:this._password});default:ur(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wa(t,e){return Su(t,"POST","/v1/accounts:signInWithIdp",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="http://localhost";class Fo extends t_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Fo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ur("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Jv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Fo(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Wa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Wa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Wa(e,n)}buildRequest(){const e={requestUri:k2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function C2(t){const e=oc(ac(t)).link,n=e?oc(ac(e)).deep_link_id:null,r=oc(ac(t)).deep_link_id;return(r?oc(ac(r)).link:null)||r||n||e||t}class n_{constructor(e){var n,r,i,s,o,a;const l=oc(ac(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,f=I2((i=l.mode)!==null&&i!==void 0?i:null);fe(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=C2(e);try{return new n_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this.providerId=Jo.PROVIDER_ID}static credential(e,n){return tu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=n_.parseLink(n);return fe(r,"argument-error"),tu._fromEmailAndCode(e,r.code,r.tenantId)}}Jo.PROVIDER_ID="password";Jo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Jo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends Vf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends Tu{constructor(){super("facebook.com")}static credential(e){return Fo._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";cs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends Tu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fo._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return pi.credential(n,r)}catch{return null}}}pi.GOOGLE_SIGN_IN_METHOD="google.com";pi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends Tu{constructor(){super("github.com")}static credential(e){return Fo._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.GITHUB_SIGN_IN_METHOD="github.com";us.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends Tu{constructor(){super("twitter.com")}static credential(e,n){return Fo._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ds.credential(n,r)}catch{return null}}}ds.TWITTER_SIGN_IN_METHOD="twitter.com";ds.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AC(t,e){return Su(t,"POST","/v1/accounts:signUp",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Sr._fromIdTokenResponse(e,r,i),o=iE(r);return new Di({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=iE(r);return new Di({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function iE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sE(t){var e;if(En(t.app))return Promise.reject(Jr(t));const n=Bi(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Di({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await AC(n,{returnSecureToken:!0}),i=await Di._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh extends Ui{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Wh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Wh(e,n,r,i)}}function PC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Wh._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}async function xC(t,e,n=!1){const r=await ol(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Di._forOperation(t,"link",r)}async function P2(t,e,n){await eu(e);const r=A2(e.providerData);fe(r.has(n)===t,e.auth,"provider-already-linked")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(t,e,n=!1){const{auth:r}=t;if(En(r.app))return Promise.reject(Jr(r));const i="reauthenticate";try{const s=await ol(t,PC(r,i,e,t),n);fe(s.idToken,r,"internal-error");const o=Zv(s.idToken);fe(o,r,"internal-error");const{sub:a}=o;return fe(t.uid===a,r,"user-mismatch"),Di._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ur(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RC(t,e,n=!1){if(En(t.app))return Promise.reject(Jr(t));const r="signIn",i=await PC(t,r,e),s=await Di._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function R2(t,e){return RC(Bi(t),e)}async function O2(t,e){const n=lt(t);return await P2(!1,n,e.providerId),xC(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OC(t){const e=Bi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function N2(t,e,n){if(En(t.app))return Promise.reject(Jr(t));const r=Bi(t),o=await Jg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",AC).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&OC(t),l}),a=await Di._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function oE(t,e,n){return En(t.app)?Promise.reject(Jr(t)):R2(lt(t),Jo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&OC(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D2(t,e){return $i(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M2(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=lt(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ol(r,D2(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(t,e){return lt(t).setPersistence(e)}function j2(t,e,n,r){return lt(t).onIdTokenChanged(e,n,r)}function V2(t,e,n){return lt(t).beforeAuthStateChanged(e,n)}function F2(t,e,n,r){return lt(t).onAuthStateChanged(e,n,r)}function mm(t){return lt(t).signOut()}const Gh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gh,"1"),this.storage.removeItem(Gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=1e3,$2=10;class DC extends NC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);n2()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,$2):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},U2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}DC.type="LOCAL";const MC=DC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC extends NC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}LC.type="SESSION";const jC=LC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Ff(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await B2(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ff.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=r_("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(){return window}function q2(t){Qr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(){return typeof Qr().WorkerGlobalScope<"u"&&typeof Qr().importScripts=="function"}async function H2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function W2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function G2(){return VC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="firebaseLocalStorageDb",K2=1,Kh="firebaseLocalStorage",UC="fbase_key";class bu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Uf(t,e){return t.transaction([Kh],e?"readwrite":"readonly").objectStore(Kh)}function J2(){const t=indexedDB.deleteDatabase(FC);return new bu(t).toPromise()}function Qg(){const t=indexedDB.open(FC,K2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Kh,{keyPath:UC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Kh)?e(r):(r.close(),await J2(),e(await Qg()))})})}async function aE(t,e,n){const r=Uf(t,!0).put({[UC]:e,value:n});return new bu(r).toPromise()}async function Q2(t,e){const n=Uf(t,!1).get(e),r=await new bu(n).toPromise();return r===void 0?null:r.value}function lE(t,e){const n=Uf(t,!0).delete(e);return new bu(n).toPromise()}const Y2=800,X2=3;class $C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>X2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return VC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ff._getInstance(G2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await H2(),!this.activeServiceWorker)return;this.sender=new z2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||W2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qg();return await aE(e,Gh,"1"),await lE(e,Gh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>aE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Q2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>lE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Uf(i,!1).getAll();return new bu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Y2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$C.type="LOCAL";const Z2=$C;new Eu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(t,e){return e?vi(e):(fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_ extends t_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Wa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Wa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ej(t){return RC(t.auth,new s_(t),t.bypassAuthState)}function tj(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),x2(n,new s_(t),t.bypassAuthState)}async function nj(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),xC(n,new s_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ej;case"linkViaPopup":case"linkViaRedirect":return nj;case"reauthViaPopup":case"reauthViaRedirect":return tj;default:ur(this.auth,"internal-error")}}resolve(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj=new Eu(2e3,1e4);async function cE(t,e,n){if(En(t.app))return Promise.reject(kr(t,"operation-not-supported-in-this-environment"));const r=Bi(t);uC(t,e,Vf);const i=i_(r,n);return new ms(r,"signInViaPopup",e,i).executeNotNull()}async function ij(t,e,n){const r=lt(t);uC(r.auth,e,Vf);const i=i_(r.auth,n);return new ms(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class ms extends BC{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ms.currentPopupAction&&ms.currentPopupAction.cancel(),ms.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){Ni(this.filter.length===1,"Popup operations only handle one event");const e=r_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(kr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(kr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ms.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rj.get())};e()}}ms.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj="pendingRedirect",ih=new Map;class oj extends BC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ih.get(this.auth._key());if(!e){try{const r=await aj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ih.set(this.auth._key(),e)}return this.bypassAuthState||ih.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aj(t,e){const n=uj(e),r=cj(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function lj(t,e){ih.set(t._key(),e)}function cj(t){return vi(t._redirectPersistence)}function uj(t){return rh(sj,t.config.apiKey,t.name)}async function dj(t,e,n=!1){if(En(t.app))return Promise.reject(Jr(t));const r=Bi(t),i=i_(r,e),o=await new oj(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=10*60*1e3;class fj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!zC(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(kr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hj&&this.cachedEventUids.clear(),this.cachedEventUids.has(uE(e))}saveEventToCache(e){this.cachedEventUids.add(uE(e)),this.lastProcessedEventTime=Date.now()}}function uE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function zC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mj(t,e={}){return $i(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yj=/^https?/;async function vj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await mj(t);for(const n of e)try{if(_j(n))return}catch{}ur(t,"unauthorized-domain")}function _j(t){const e=Gg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!yj.test(n))return!1;if(gj.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=new Eu(3e4,6e4);function dE(){const t=Qr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Ej(t){return new Promise((e,n)=>{var r,i,s;function o(){dE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dE(),n(kr(t,"network-request-failed"))},timeout:wj.get()})}if(!((i=(r=Qr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Qr().gapi)===null||s===void 0)&&s.load)o();else{const a=d2("iframefcb");return Qr()[a]=()=>{gapi.load?o():n(kr(t,"network-request-failed"))},kC(`${u2()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw sh=null,e})}let sh=null;function Sj(t){return sh=sh||Ej(t),sh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=new Eu(5e3,15e3),bj="__/auth/iframe",kj="emulator/auth/iframe",Ij={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Aj(t){const e=t.config;fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Xv(e,kj):`https://${t.config.authDomain}/${bj}`,r={apiKey:e.apiKey,appName:t.name,v:bl},i=Cj.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${wu(r).slice(1)}`}async function Pj(t){const e=await Sj(t),n=Qr().gapi;return fe(n,t,"internal-error"),e.open({where:document.body,url:Aj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ij,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=kr(t,"network-request-failed"),a=Qr().setTimeout(()=>{s(o)},Tj.get());function l(){Qr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Rj=500,Oj=600,Nj="_blank",Dj="http://localhost";class hE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Mj(t,e,n,r=Rj,i=Oj){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},xj),{width:r.toString(),height:i.toString(),top:s,left:o}),u=sn().toLowerCase();n&&(a=vC(u)?Nj:n),gC(u)&&(e=e||Dj,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[E,T])=>`${m}${E}=${T},`,"");if(t2(u)&&a!=="_self")return Lj(e||"",a),new hE(null);const f=window.open(e||"",a,d);fe(f,t,"popup-blocked");try{f.focus()}catch{}return new hE(f)}function Lj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj="__/auth/handler",Vj="emulator/auth/handler",Fj=encodeURIComponent("fac");async function fE(t,e,n,r,i,s){fe(t.config.authDomain,t,"auth-domain-config-required"),fe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:bl,eventId:i};if(e instanceof Vf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",TM(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof Tu){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${Fj}=${encodeURIComponent(l)}`:"";return`${Uj(t)}?${wu(a).slice(1)}${u}`}function Uj({config:t}){return t.emulator?Xv(t,Vj):`https://${t.authDomain}/${jj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm="webStorageSupport";class $j{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jC,this._completeRedirectFn=dj,this._overrideRedirectResult=lj}async _openPopup(e,n,r,i){var s;Ni((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await fE(e,n,r,Gg(),i);return Mj(e,o,r_())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await fE(e,n,r,Gg(),i);return q2(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ni(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Pj(e),r=new fj(e);return n.register("authEvent",i=>(fe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gm,{type:gm},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[gm];o!==void 0&&n(!!o),ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=vj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return TC()||yC()||e_()}}const Bj=$j;var pE="@firebase/auth",mE="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Hj(t){sl(new Vo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;fe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bC(t)},u=new a2(r,i,s,l);return y2(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),sl(new Vo("auth-internal",e=>{const n=Bi(e.getProvider("auth").getImmediate());return(r=>new zj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cs(pE,mE,qj(t)),Cs(pE,mE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj=5*60,Gj=ZI("authIdTokenMaxAge")||Wj;let gE=null;const Kj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Gj)return;const i=n==null?void 0:n.token;gE!==i&&(gE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Jj(t=sC()){const e=Kv(t,"auth");if(e.isInitialized())return e.getImmediate();const n=g2(t,{popupRedirectResolver:Bj,persistence:[Z2,MC,jC]}),r=ZI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Kj(s.toString());V2(n,o,()=>o(n.currentUser)),j2(n,a=>o(a))}}const i=YI("auth");return i&&v2(n,`http://${i}`),n}function Qj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}l2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=kr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Qj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Hj("Browser");var Yj="firebase",Xj="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cs(Yj,Xj,"app");var yE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var As,qC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,P){function N(){}N.prototype=P.prototype,R.D=P.prototype,R.prototype=new N,R.prototype.constructor=R,R.C=function(D,C,F){for(var L=Array(arguments.length-2),be=2;be<arguments.length;be++)L[be-2]=arguments[be];return P.prototype[C].apply(D,L)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,P,N){N||(N=0);var D=Array(16);if(typeof P=="string")for(var C=0;16>C;++C)D[C]=P.charCodeAt(N++)|P.charCodeAt(N++)<<8|P.charCodeAt(N++)<<16|P.charCodeAt(N++)<<24;else for(C=0;16>C;++C)D[C]=P[N++]|P[N++]<<8|P[N++]<<16|P[N++]<<24;P=R.g[0],N=R.g[1],C=R.g[2];var F=R.g[3],L=P+(F^N&(C^F))+D[0]+3614090360&4294967295;P=N+(L<<7&4294967295|L>>>25),L=F+(C^P&(N^C))+D[1]+3905402710&4294967295,F=P+(L<<12&4294967295|L>>>20),L=C+(N^F&(P^N))+D[2]+606105819&4294967295,C=F+(L<<17&4294967295|L>>>15),L=N+(P^C&(F^P))+D[3]+3250441966&4294967295,N=C+(L<<22&4294967295|L>>>10),L=P+(F^N&(C^F))+D[4]+4118548399&4294967295,P=N+(L<<7&4294967295|L>>>25),L=F+(C^P&(N^C))+D[5]+1200080426&4294967295,F=P+(L<<12&4294967295|L>>>20),L=C+(N^F&(P^N))+D[6]+2821735955&4294967295,C=F+(L<<17&4294967295|L>>>15),L=N+(P^C&(F^P))+D[7]+4249261313&4294967295,N=C+(L<<22&4294967295|L>>>10),L=P+(F^N&(C^F))+D[8]+1770035416&4294967295,P=N+(L<<7&4294967295|L>>>25),L=F+(C^P&(N^C))+D[9]+2336552879&4294967295,F=P+(L<<12&4294967295|L>>>20),L=C+(N^F&(P^N))+D[10]+4294925233&4294967295,C=F+(L<<17&4294967295|L>>>15),L=N+(P^C&(F^P))+D[11]+2304563134&4294967295,N=C+(L<<22&4294967295|L>>>10),L=P+(F^N&(C^F))+D[12]+1804603682&4294967295,P=N+(L<<7&4294967295|L>>>25),L=F+(C^P&(N^C))+D[13]+4254626195&4294967295,F=P+(L<<12&4294967295|L>>>20),L=C+(N^F&(P^N))+D[14]+2792965006&4294967295,C=F+(L<<17&4294967295|L>>>15),L=N+(P^C&(F^P))+D[15]+1236535329&4294967295,N=C+(L<<22&4294967295|L>>>10),L=P+(C^F&(N^C))+D[1]+4129170786&4294967295,P=N+(L<<5&4294967295|L>>>27),L=F+(N^C&(P^N))+D[6]+3225465664&4294967295,F=P+(L<<9&4294967295|L>>>23),L=C+(P^N&(F^P))+D[11]+643717713&4294967295,C=F+(L<<14&4294967295|L>>>18),L=N+(F^P&(C^F))+D[0]+3921069994&4294967295,N=C+(L<<20&4294967295|L>>>12),L=P+(C^F&(N^C))+D[5]+3593408605&4294967295,P=N+(L<<5&4294967295|L>>>27),L=F+(N^C&(P^N))+D[10]+38016083&4294967295,F=P+(L<<9&4294967295|L>>>23),L=C+(P^N&(F^P))+D[15]+3634488961&4294967295,C=F+(L<<14&4294967295|L>>>18),L=N+(F^P&(C^F))+D[4]+3889429448&4294967295,N=C+(L<<20&4294967295|L>>>12),L=P+(C^F&(N^C))+D[9]+568446438&4294967295,P=N+(L<<5&4294967295|L>>>27),L=F+(N^C&(P^N))+D[14]+3275163606&4294967295,F=P+(L<<9&4294967295|L>>>23),L=C+(P^N&(F^P))+D[3]+4107603335&4294967295,C=F+(L<<14&4294967295|L>>>18),L=N+(F^P&(C^F))+D[8]+1163531501&4294967295,N=C+(L<<20&4294967295|L>>>12),L=P+(C^F&(N^C))+D[13]+2850285829&4294967295,P=N+(L<<5&4294967295|L>>>27),L=F+(N^C&(P^N))+D[2]+4243563512&4294967295,F=P+(L<<9&4294967295|L>>>23),L=C+(P^N&(F^P))+D[7]+1735328473&4294967295,C=F+(L<<14&4294967295|L>>>18),L=N+(F^P&(C^F))+D[12]+2368359562&4294967295,N=C+(L<<20&4294967295|L>>>12),L=P+(N^C^F)+D[5]+4294588738&4294967295,P=N+(L<<4&4294967295|L>>>28),L=F+(P^N^C)+D[8]+2272392833&4294967295,F=P+(L<<11&4294967295|L>>>21),L=C+(F^P^N)+D[11]+1839030562&4294967295,C=F+(L<<16&4294967295|L>>>16),L=N+(C^F^P)+D[14]+4259657740&4294967295,N=C+(L<<23&4294967295|L>>>9),L=P+(N^C^F)+D[1]+2763975236&4294967295,P=N+(L<<4&4294967295|L>>>28),L=F+(P^N^C)+D[4]+1272893353&4294967295,F=P+(L<<11&4294967295|L>>>21),L=C+(F^P^N)+D[7]+4139469664&4294967295,C=F+(L<<16&4294967295|L>>>16),L=N+(C^F^P)+D[10]+3200236656&4294967295,N=C+(L<<23&4294967295|L>>>9),L=P+(N^C^F)+D[13]+681279174&4294967295,P=N+(L<<4&4294967295|L>>>28),L=F+(P^N^C)+D[0]+3936430074&4294967295,F=P+(L<<11&4294967295|L>>>21),L=C+(F^P^N)+D[3]+3572445317&4294967295,C=F+(L<<16&4294967295|L>>>16),L=N+(C^F^P)+D[6]+76029189&4294967295,N=C+(L<<23&4294967295|L>>>9),L=P+(N^C^F)+D[9]+3654602809&4294967295,P=N+(L<<4&4294967295|L>>>28),L=F+(P^N^C)+D[12]+3873151461&4294967295,F=P+(L<<11&4294967295|L>>>21),L=C+(F^P^N)+D[15]+530742520&4294967295,C=F+(L<<16&4294967295|L>>>16),L=N+(C^F^P)+D[2]+3299628645&4294967295,N=C+(L<<23&4294967295|L>>>9),L=P+(C^(N|~F))+D[0]+4096336452&4294967295,P=N+(L<<6&4294967295|L>>>26),L=F+(N^(P|~C))+D[7]+1126891415&4294967295,F=P+(L<<10&4294967295|L>>>22),L=C+(P^(F|~N))+D[14]+2878612391&4294967295,C=F+(L<<15&4294967295|L>>>17),L=N+(F^(C|~P))+D[5]+4237533241&4294967295,N=C+(L<<21&4294967295|L>>>11),L=P+(C^(N|~F))+D[12]+1700485571&4294967295,P=N+(L<<6&4294967295|L>>>26),L=F+(N^(P|~C))+D[3]+2399980690&4294967295,F=P+(L<<10&4294967295|L>>>22),L=C+(P^(F|~N))+D[10]+4293915773&4294967295,C=F+(L<<15&4294967295|L>>>17),L=N+(F^(C|~P))+D[1]+2240044497&4294967295,N=C+(L<<21&4294967295|L>>>11),L=P+(C^(N|~F))+D[8]+1873313359&4294967295,P=N+(L<<6&4294967295|L>>>26),L=F+(N^(P|~C))+D[15]+4264355552&4294967295,F=P+(L<<10&4294967295|L>>>22),L=C+(P^(F|~N))+D[6]+2734768916&4294967295,C=F+(L<<15&4294967295|L>>>17),L=N+(F^(C|~P))+D[13]+1309151649&4294967295,N=C+(L<<21&4294967295|L>>>11),L=P+(C^(N|~F))+D[4]+4149444226&4294967295,P=N+(L<<6&4294967295|L>>>26),L=F+(N^(P|~C))+D[11]+3174756917&4294967295,F=P+(L<<10&4294967295|L>>>22),L=C+(P^(F|~N))+D[2]+718787259&4294967295,C=F+(L<<15&4294967295|L>>>17),L=N+(F^(C|~P))+D[9]+3951481745&4294967295,R.g[0]=R.g[0]+P&4294967295,R.g[1]=R.g[1]+(C+(L<<21&4294967295|L>>>11))&4294967295,R.g[2]=R.g[2]+C&4294967295,R.g[3]=R.g[3]+F&4294967295}r.prototype.u=function(R,P){P===void 0&&(P=R.length);for(var N=P-this.blockSize,D=this.B,C=this.h,F=0;F<P;){if(C==0)for(;F<=N;)i(this,R,F),F+=this.blockSize;if(typeof R=="string"){for(;F<P;)if(D[C++]=R.charCodeAt(F++),C==this.blockSize){i(this,D),C=0;break}}else for(;F<P;)if(D[C++]=R[F++],C==this.blockSize){i(this,D),C=0;break}}this.h=C,this.o+=P},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var P=1;P<R.length-8;++P)R[P]=0;var N=8*this.o;for(P=R.length-8;P<R.length;++P)R[P]=N&255,N/=256;for(this.u(R),R=Array(16),P=N=0;4>P;++P)for(var D=0;32>D;D+=8)R[N++]=this.g[P]>>>D&255;return R};function s(R,P){var N=a;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=P(R)}function o(R,P){this.h=P;for(var N=[],D=!0,C=R.length-1;0<=C;C--){var F=R[C]|0;D&&F==P||(N[C]=F,D=!1)}this.g=N}var a={};function l(R){return-128<=R&&128>R?s(R,function(P){return new o([P|0],0>P?-1:0)}):new o([R|0],0>R?-1:0)}function u(R){if(isNaN(R)||!isFinite(R))return f;if(0>R)return b(u(-R));for(var P=[],N=1,D=0;R>=N;D++)P[D]=R/N|0,N*=4294967296;return new o(P,0)}function d(R,P){if(R.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(R.charAt(0)=="-")return b(d(R.substring(1),P));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=u(Math.pow(P,8)),D=f,C=0;C<R.length;C+=8){var F=Math.min(8,R.length-C),L=parseInt(R.substring(C,C+F),P);8>F?(F=u(Math.pow(P,F)),D=D.j(F).add(u(L))):(D=D.j(N),D=D.add(u(L)))}return D}var f=l(0),m=l(1),E=l(16777216);t=o.prototype,t.m=function(){if(_(this))return-b(this).m();for(var R=0,P=1,N=0;N<this.g.length;N++){var D=this.i(N);R+=(0<=D?D:4294967296+D)*P,P*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(T(this))return"0";if(_(this))return"-"+b(this).toString(R);for(var P=u(Math.pow(R,6)),N=this,D="";;){var C=j(N,P).g;N=v(N,C.j(P));var F=((0<N.g.length?N.g[0]:N.h)>>>0).toString(R);if(N=C,T(N))return F+D;for(;6>F.length;)F="0"+F;D=F+D}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function T(R){if(R.h!=0)return!1;for(var P=0;P<R.g.length;P++)if(R.g[P]!=0)return!1;return!0}function _(R){return R.h==-1}t.l=function(R){return R=v(this,R),_(R)?-1:T(R)?0:1};function b(R){for(var P=R.g.length,N=[],D=0;D<P;D++)N[D]=~R.g[D];return new o(N,~R.h).add(m)}t.abs=function(){return _(this)?b(this):this},t.add=function(R){for(var P=Math.max(this.g.length,R.g.length),N=[],D=0,C=0;C<=P;C++){var F=D+(this.i(C)&65535)+(R.i(C)&65535),L=(F>>>16)+(this.i(C)>>>16)+(R.i(C)>>>16);D=L>>>16,F&=65535,L&=65535,N[C]=L<<16|F}return new o(N,N[N.length-1]&-2147483648?-1:0)};function v(R,P){return R.add(b(P))}t.j=function(R){if(T(this)||T(R))return f;if(_(this))return _(R)?b(this).j(b(R)):b(b(this).j(R));if(_(R))return b(this.j(b(R)));if(0>this.l(E)&&0>R.l(E))return u(this.m()*R.m());for(var P=this.g.length+R.g.length,N=[],D=0;D<2*P;D++)N[D]=0;for(D=0;D<this.g.length;D++)for(var C=0;C<R.g.length;C++){var F=this.i(D)>>>16,L=this.i(D)&65535,be=R.i(C)>>>16,Pt=R.i(C)&65535;N[2*D+2*C]+=L*Pt,g(N,2*D+2*C),N[2*D+2*C+1]+=F*Pt,g(N,2*D+2*C+1),N[2*D+2*C+1]+=L*be,g(N,2*D+2*C+1),N[2*D+2*C+2]+=F*be,g(N,2*D+2*C+2)}for(D=0;D<P;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=P;D<2*P;D++)N[D]=0;return new o(N,0)};function g(R,P){for(;(R[P]&65535)!=R[P];)R[P+1]+=R[P]>>>16,R[P]&=65535,P++}function k(R,P){this.g=R,this.h=P}function j(R,P){if(T(P))throw Error("division by zero");if(T(R))return new k(f,f);if(_(R))return P=j(b(R),P),new k(b(P.g),b(P.h));if(_(P))return P=j(R,b(P)),new k(b(P.g),P.h);if(30<R.g.length){if(_(R)||_(P))throw Error("slowDivide_ only works with positive integers.");for(var N=m,D=P;0>=D.l(R);)N=U(N),D=U(D);var C=z(N,1),F=z(D,1);for(D=z(D,2),N=z(N,2);!T(D);){var L=F.add(D);0>=L.l(R)&&(C=C.add(N),F=L),D=z(D,1),N=z(N,1)}return P=v(R,C.j(P)),new k(C,P)}for(C=f;0<=R.l(P);){for(N=Math.max(1,Math.floor(R.m()/P.m())),D=Math.ceil(Math.log(N)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),F=u(N),L=F.j(P);_(L)||0<L.l(R);)N-=D,F=u(N),L=F.j(P);T(F)&&(F=m),C=C.add(F),R=v(R,L)}return new k(C,R)}t.A=function(R){return j(this,R).h},t.and=function(R){for(var P=Math.max(this.g.length,R.g.length),N=[],D=0;D<P;D++)N[D]=this.i(D)&R.i(D);return new o(N,this.h&R.h)},t.or=function(R){for(var P=Math.max(this.g.length,R.g.length),N=[],D=0;D<P;D++)N[D]=this.i(D)|R.i(D);return new o(N,this.h|R.h)},t.xor=function(R){for(var P=Math.max(this.g.length,R.g.length),N=[],D=0;D<P;D++)N[D]=this.i(D)^R.i(D);return new o(N,this.h^R.h)};function U(R){for(var P=R.g.length+1,N=[],D=0;D<P;D++)N[D]=R.i(D)<<1|R.i(D-1)>>>31;return new o(N,R.h)}function z(R,P){var N=P>>5;P%=32;for(var D=R.g.length-N,C=[],F=0;F<D;F++)C[F]=0<P?R.i(F+N)>>>P|R.i(F+N+1)<<32-P:R.i(F+N);return new o(C,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,qC=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,As=o}).apply(typeof yE<"u"?yE:typeof self<"u"?self:typeof window<"u"?window:{});var Ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HC,lc,WC,oh,Yg,GC,KC,JC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,y){return c==Array.prototype||c==Object.prototype||(c[p]=y.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ed=="object"&&Ed];for(var p=0;p<c.length;++p){var y=c[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(c,p){if(p)e:{var y=r;c=c.split(".");for(var x=0;x<c.length-1;x++){var B=c[x];if(!(B in y))break e;y=y[B]}c=c[c.length-1],x=y[c],p=p(x),p!=x&&p!=null&&e(y,c,{configurable:!0,writable:!0,value:p})}}function s(c,p){c instanceof String&&(c+="");var y=0,x=!1,B={next:function(){if(!x&&y<c.length){var H=y++;return{value:p(H,c[H]),done:!1}}return x=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}i("Array.prototype.values",function(c){return c||function(){return s(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function u(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function d(c,p,y){return c.call.apply(c.bind,arguments)}function f(c,p,y){if(!c)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,x),c.apply(p,B)}}return function(){return c.apply(p,arguments)}}function m(c,p,y){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function E(c,p){var y=Array.prototype.slice.call(arguments,1);return function(){var x=y.slice();return x.push.apply(x,arguments),c.apply(this,x)}}function T(c,p){function y(){}y.prototype=p.prototype,c.aa=p.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(x,B,H){for(var te=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)te[ze-2]=arguments[ze];return p.prototype[B].apply(x,te)}}function _(c){const p=c.length;if(0<p){const y=Array(p);for(let x=0;x<p;x++)y[x]=c[x];return y}return[]}function b(c,p){for(let y=1;y<arguments.length;y++){const x=arguments[y];if(l(x)){const B=c.length||0,H=x.length||0;c.length=B+H;for(let te=0;te<H;te++)c[B+te]=x[te]}else c.push(x)}}class v{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function g(c){return/^[\s\xa0]*$/.test(c)}function k(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function j(c){return j[" "](c),c}j[" "]=function(){};var U=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function z(c,p,y){for(const x in c)p.call(y,c[x],x,c)}function R(c,p){for(const y in c)p.call(void 0,c[y],y,c)}function P(c){const p={};for(const y in c)p[y]=c[y];return p}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,p){let y,x;for(let B=1;B<arguments.length;B++){x=arguments[B];for(y in x)c[y]=x[y];for(let H=0;H<N.length;H++)y=N[H],Object.prototype.hasOwnProperty.call(x,y)&&(c[y]=x[y])}}function C(c){var p=1;c=c.split(":");const y=[];for(;0<p&&c.length;)y.push(c.shift()),p--;return c.length&&y.push(c.join(":")),y}function F(c){a.setTimeout(()=>{throw c},0)}function L(){var c=he;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class be{constructor(){this.h=this.g=null}add(p,y){const x=Pt.get();x.set(p,y),this.h?this.h.next=x:this.g=x,this.h=x}}var Pt=new v(()=>new gn,c=>c.reset());class gn{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Fe,Z=!1,he=new be,ce=()=>{const c=a.Promise.resolve(void 0);Fe=()=>{c.then(Ne)}};var Ne=()=>{for(var c;c=L();){try{c.h.call(c.g)}catch(y){F(y)}var p=Pt;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}Z=!1};function Ee(){this.s=this.s,this.C=this.C}Ee.prototype.s=!1,Ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function h(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}h.prototype.h=function(){this.defaultPrevented=!0};var S=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};a.addEventListener("test",y,p),a.removeEventListener("test",y,p)}catch{}return c}();function w(c,p){if(h.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,x=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(U){e:{try{j(p.nodeName);var B=!0;break e}catch{}B=!1}B||(p=null)}}else y=="mouseover"?p=c.fromElement:y=="mouseout"&&(p=c.toElement);this.relatedTarget=p,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:M[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&w.aa.h.call(this)}}T(w,h);var M={2:"touch",3:"pen",4:"mouse"};w.prototype.h=function(){w.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var O="closure_listenable_"+(1e6*Math.random()|0),$=0;function K(c,p,y,x,B){this.listener=c,this.proxy=null,this.src=p,this.type=y,this.capture=!!x,this.ha=B,this.key=++$,this.da=this.fa=!1}function W(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function X(c){this.src=c,this.g={},this.h=0}X.prototype.add=function(c,p,y,x,B){var H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);var te=pe(c,p,x,B);return-1<te?(p=c[te],y||(p.fa=!1)):(p=new K(p,this.src,H,!!x,B),p.fa=y,c.push(p)),p};function le(c,p){var y=p.type;if(y in c.g){var x=c.g[y],B=Array.prototype.indexOf.call(x,p,void 0),H;(H=0<=B)&&Array.prototype.splice.call(x,B,1),H&&(W(p),c.g[y].length==0&&(delete c.g[y],c.h--))}}function pe(c,p,y,x){for(var B=0;B<c.length;++B){var H=c[B];if(!H.da&&H.listener==p&&H.capture==!!y&&H.ha==x)return B}return-1}var Xe="closure_lm_"+(1e6*Math.random()|0),Ft={};function An(c,p,y,x,B){if(Array.isArray(p)){for(var H=0;H<p.length;H++)An(c,p[H],y,x,B);return null}return y=ri(y),c&&c[O]?c.K(p,y,u(x)?!!x.capture:!1,B):Le(c,p,y,!1,x,B)}function Le(c,p,y,x,B,H){if(!p)throw Error("Invalid event type");var te=u(B)?!!B.capture:!!B,ze=Gn(c);if(ze||(c[Xe]=ze=new X(c)),y=ze.add(p,y,x,te,H),y.proxy)return y;if(x=ut(),y.proxy=x,x.src=c,x.listener=y,c.addEventListener)S||(B=te),B===void 0&&(B=!1),c.addEventListener(p.toString(),x,B);else if(c.attachEvent)c.attachEvent(Wn(p.toString()),x);else if(c.addListener&&c.removeListener)c.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return y}function ut(){function c(y){return p.call(c.src,c.listener,y)}const p=$e;return c}function Ze(c,p,y,x,B){if(Array.isArray(p))for(var H=0;H<p.length;H++)Ze(c,p[H],y,x,B);else x=u(x)?!!x.capture:!!x,y=ri(y),c&&c[O]?(c=c.i,p=String(p).toString(),p in c.g&&(H=c.g[p],y=pe(H,y,x,B),-1<y&&(W(H[y]),Array.prototype.splice.call(H,y,1),H.length==0&&(delete c.g[p],c.h--)))):c&&(c=Gn(c))&&(p=c.g[p.toString()],c=-1,p&&(c=pe(p,y,x,B)),(y=-1<c?p[c]:null)&&tt(y))}function tt(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[O])le(p.i,c);else{var y=c.type,x=c.proxy;p.removeEventListener?p.removeEventListener(y,x,c.capture):p.detachEvent?p.detachEvent(Wn(y),x):p.addListener&&p.removeListener&&p.removeListener(x),(y=Gn(p))?(le(y,c),y.h==0&&(y.src=null,p[Xe]=null)):W(c)}}}function Wn(c){return c in Ft?Ft[c]:Ft[c]="on"+c}function $e(c,p){if(c.da)c=!0;else{p=new w(p,this);var y=c.listener,x=c.ha||c.src;c.fa&&tt(c),c=y.call(x,p)}return c}function Gn(c){return c=c[Xe],c instanceof X?c:null}var ni="__closure_events_fn_"+(1e9*Math.random()>>>0);function ri(c){return typeof c=="function"?c:(c[ni]||(c[ni]=function(p){return c.handleEvent(p)}),c[ni])}function gt(){Ee.call(this),this.i=new X(this),this.M=this,this.F=null}T(gt,Ee),gt.prototype[O]=!0,gt.prototype.removeEventListener=function(c,p,y,x){Ze(this,c,p,y,x)};function Tt(c,p){var y,x=c.F;if(x)for(y=[];x;x=x.F)y.push(x);if(c=c.M,x=p.type||p,typeof p=="string")p=new h(p,c);else if(p instanceof h)p.target=p.target||c;else{var B=p;p=new h(x,c),D(p,B)}if(B=!0,y)for(var H=y.length-1;0<=H;H--){var te=p.g=y[H];B=zi(te,x,!0,p)&&B}if(te=p.g=c,B=zi(te,x,!0,p)&&B,B=zi(te,x,!1,p)&&B,y)for(H=0;H<y.length;H++)te=p.g=y[H],B=zi(te,x,!1,p)&&B}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var y=c.g[p],x=0;x<y.length;x++)W(y[x]);delete c.g[p],c.h--}}this.F=null},gt.prototype.K=function(c,p,y,x){return this.i.add(String(c),p,!1,y,x)},gt.prototype.L=function(c,p,y,x){return this.i.add(String(c),p,!0,y,x)};function zi(c,p,y,x){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var B=!0,H=0;H<p.length;++H){var te=p[H];if(te&&!te.da&&te.capture==y){var ze=te.listener,Ut=te.ha||te.src;te.fa&&le(c.i,te),B=ze.call(Ut,x)!==!1&&B}}return B&&!x.defaultPrevented}function xt(c,p,y){if(typeof c=="function")y&&(c=m(c,y));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(c,p||0)}function Mr(c){c.g=xt(()=>{c.g=null,c.i&&(c.i=!1,Mr(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class Pn extends Ee{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Mr(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qi(c){Ee.call(this),this.h=c,this.g={}}T(qi,Ee);var yn=[];function Qs(c){z(c.g,function(p,y){this.g.hasOwnProperty(y)&&tt(p)},c),c.g={}}qi.prototype.N=function(){qi.aa.N.call(this),Qs(this)},qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xn=a.JSON.stringify,$u=a.JSON.parse,Ys=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Xs(){}Xs.prototype.h=null;function Zs(c){return c.h||(c.h=c.i())}function Ol(){}var Kn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function eo(){h.call(this,"d")}T(eo,h);function ea(){h.call(this,"c")}T(ea,h);var Jn={},Bu=null;function to(){return Bu=Bu||new gt}Jn.La="serverreachability";function no(c){h.call(this,Jn.La,c)}T(no,h);function fr(c){const p=to();Tt(p,new no(p))}Jn.STAT_EVENT="statevent";function nt(c,p){h.call(this,Jn.STAT_EVENT,c),this.stat=p}T(nt,h);function Rt(c){const p=to();Tt(p,new nt(p,c))}Jn.Ma="timingevent";function ta(c,p){h.call(this,Jn.Ma,c),this.size=p}T(ta,h);function ii(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},p)}function Ot(){this.g=!0}Ot.prototype.xa=function(){this.g=!1};function Nl(c,p,y,x,B,H){c.info(function(){if(c.g)if(H)for(var te="",ze=H.split("&"),Ut=0;Ut<ze.length;Ut++){var De=ze[Ut].split("=");if(1<De.length){var Wt=De[0];De=De[1];var Gt=Wt.split("_");te=2<=Gt.length&&Gt[1]=="type"?te+(Wt+"="+De+"&"):te+(Wt+"=redacted&")}}else te=null;else te=H;return"XMLHTTP REQ ("+x+") [attempt "+B+"]: "+p+`
`+y+`
`+te})}function Dl(c,p,y,x,B,H,te){c.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+B+"]: "+p+`
`+y+`
`+H+" "+te})}function on(c,p,y,x){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+Ml(c,y)+(x?" "+x:"")})}function Hi(c,p){c.info(function(){return"TIMEOUT: "+p})}Ot.prototype.info=function(){};function Ml(c,p){if(!c.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var x=y[c];if(!(2>x.length)){var B=x[1];if(Array.isArray(B)&&!(1>B.length)){var H=B[0];if(H!="noop"&&H!="stop"&&H!="close")for(var te=1;te<B.length;te++)B[te]=""}}}}return xn(y)}catch{return p}}var na={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ra;function si(){}T(si,Xs),si.prototype.g=function(){return new XMLHttpRequest},si.prototype.i=function(){return{}},ra=new si;function pr(c,p,y,x){this.j=c,this.i=p,this.l=y,this.R=x||1,this.U=new qi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ia}function ia(){this.i=null,this.g="",this.h=!1}var zu={},ro={};function sa(c,p,y){c.L=1,c.v=vn(Yn(p)),c.m=y,c.P=!0,Ll(c,null)}function Ll(c,p){c.F=Date.now(),io(c),c.A=Yn(c.v);var y=c.A,x=c.R;Array.isArray(x)||(x=[String(x)]),ai(y.i,"t",x),c.C=0,y=c.j.J,c.h=new ia,c.g=pw(c.j,y?p:null,!c.m),0<c.O&&(c.M=new Pn(m(c.Y,c,c.g),c.O)),p=c.U,y=c.g,x=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(yn[0]=B.toString()),B=yn);for(var H=0;H<B.length;H++){var te=An(y,B[H],x||p.handleEvent,!1,p.h||p);if(!te)break;p.g[te.key]=te}p=c.H?P(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),fr(),Nl(c.i,c.u,c.A,c.l,c.R,c.m)}pr.prototype.ca=function(c){c=c.target;const p=this.M;p&&vt(c)==3?p.j():this.Y(c)},pr.prototype.Y=function(c){try{if(c==this.g)e:{const Gt=vt(this.g);var p=this.g.Ba();const ga=this.g.Z();if(!(3>Gt)&&(Gt!=3||this.g&&(this.h.h||this.g.oa()||pa(this.g)))){this.J||Gt!=4||p==7||(p==8||0>=ga?fr(3):fr(2)),oo(this);var y=this.g.Z();this.X=y;t:if(Qn(this)){var x=pa(this.g);c="";var B=x.length,H=vt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rn(this),Gi(this);var te="";break t}this.h.i=new a.TextDecoder}for(p=0;p<B;p++)this.h.h=!0,c+=this.h.i.decode(x[p],{stream:!(H&&p==B-1)});x.length=0,this.h.g+=c,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=y==200,Dl(this.i,this.u,this.A,this.l,this.R,Gt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,Ut=this.g;if((ze=Ut.g?Ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!g(ze)){var De=ze;break t}}De=null}if(y=De)on(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,aa(this,y);else{this.o=!1,this.s=3,Rt(12),Rn(this),Gi(this);break e}}if(this.P){y=!0;let mr;for(;!this.J&&this.C<te.length;)if(mr=oa(this,te),mr==ro){Gt==4&&(this.s=4,Rt(14),y=!1),on(this.i,this.l,null,"[Incomplete Response]");break}else if(mr==zu){this.s=4,Rt(15),on(this.i,this.l,te,"[Invalid Chunk]"),y=!1;break}else on(this.i,this.l,mr,null),aa(this,mr);if(Qn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||te.length!=0||this.h.h||(this.s=1,Rt(16),y=!1),this.o=this.o&&y,!y)on(this.i,this.l,te,"[Invalid Chunked Response]"),Rn(this),Gi(this);else if(0<te.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),Rp(Wt),Wt.M=!0,Rt(11))}}else on(this.i,this.l,te,null),aa(this,te);Gt==4&&Rn(this),this.o&&!this.J&&(Gt==4?uw(this.j,this):(this.o=!1,io(this)))}else Ap(this.g),y==400&&0<te.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),Rn(this),Gi(this)}}}catch{}finally{}};function Qn(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function oa(c,p){var y=c.C,x=p.indexOf(`
`,y);return x==-1?ro:(y=Number(p.substring(y,x)),isNaN(y)?zu:(x+=1,x+y>p.length?ro:(p=p.slice(x,x+y),c.C=x+y,p)))}pr.prototype.cancel=function(){this.J=!0,Rn(this)};function io(c){c.S=Date.now()+c.I,so(c,c.I)}function so(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ii(m(c.ba,c),p)}function oo(c){c.B&&(a.clearTimeout(c.B),c.B=null)}pr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Hi(this.i,this.A),this.L!=2&&(fr(),Rt(17)),Rn(this),this.s=2,Gi(this)):so(this,this.S-c)};function Gi(c){c.j.G==0||c.J||uw(c.j,c)}function Rn(c){oo(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,Qs(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function aa(c,p){try{var y=c.j;if(y.G!=0&&(y.g==c||ca(y.h,c))){if(!c.K&&ca(y.h,c)&&y.G==3){try{var x=y.Da.g.parse(p)}catch{x=null}if(Array.isArray(x)&&x.length==3){var B=x;if(B[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)Zu(y),Yu(y);else break e;xp(y),Rt(18)}}else y.za=B[1],0<y.za-y.T&&37500>B[2]&&y.F&&y.v==0&&!y.C&&(y.C=ii(m(y.Za,y),6e3));if(1>=la(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else po(y,11)}else if((c.K||y.g==c)&&Zu(y),!g(p))for(B=y.Da.g.parse(p),p=0;p<B.length;p++){let De=B[p];if(y.T=De[0],De=De[1],y.G==2)if(De[0]=="c"){y.K=De[1],y.ia=De[2];const Wt=De[3];Wt!=null&&(y.la=Wt,y.j.info("VER="+y.la));const Gt=De[4];Gt!=null&&(y.Aa=Gt,y.j.info("SVER="+y.Aa));const ga=De[5];ga!=null&&typeof ga=="number"&&0<ga&&(x=1.5*ga,y.L=x,y.j.info("backChannelRequestTimeoutMs_="+x)),x=y;const mr=c.g;if(mr){const td=mr.g?mr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(td){var H=x.h;H.g||td.indexOf("spdy")==-1&&td.indexOf("quic")==-1&&td.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(jl(H,H.h),H.h=null))}if(x.D){const Op=mr.g?mr.g.getResponseHeader("X-HTTP-Session-Id"):null;Op&&(x.ya=Op,Be(x.I,x.D,Op))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),x=y;var te=c;if(x.qa=fw(x,x.J?x.ia:null,x.W),te.K){ua(x.h,te);var ze=te,Ut=x.L;Ut&&(ze.I=Ut),ze.B&&(oo(ze),io(ze)),x.g=te}else lw(x);0<y.i.length&&Xu(y)}else De[0]!="stop"&&De[0]!="close"||po(y,7);else y.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?po(y,7):Pp(y):De[0]!="noop"&&y.l&&y.l.ta(De),y.v=0)}}fr(4)}catch{}}var oi=class{constructor(c,p){this.g=c,this.map=p}};function ao(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Lr(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function la(c){return c.h?1:c.g?c.g.size:0}function ca(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function jl(c,p){c.g?c.g.add(p):c.h=p}function ua(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}ao.prototype.cancel=function(){if(this.i=Vl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Vl(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const y of c.g.values())p=p.concat(y.D);return p}return _(c.i)}function _p(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var p=[],y=c.length,x=0;x<y;x++)p.push(c[x]);return p}p=[],y=0;for(x in c)p[y++]=c[x];return p}function wp(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var p=[];c=c.length;for(var y=0;y<c;y++)p.push(y);return p}p=[],y=0;for(const x in c)p[y++]=x;return p}}}function da(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var y=wp(c),x=_p(c),B=x.length,H=0;H<B;H++)p.call(void 0,x[H],y&&y[H],c)}var qu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hu(c,p){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var x=c[y].indexOf("="),B=null;if(0<=x){var H=c[y].substring(0,x);B=c[y].substring(x+1)}else H=c[y];p(H,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function jr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof jr){this.h=c.h,ha(this,c.j),this.o=c.o,this.g=c.g,fa(this,c.s),this.l=c.l;var p=c.i,y=new co;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),Wu(this,y),this.m=c.m}else c&&(p=String(c).match(qu))?(this.h=!1,ha(this,p[1]||"",!0),this.o=lo(p[2]||""),this.g=lo(p[3]||"",!0),fa(this,p[4]),this.l=lo(p[5]||"",!0),Wu(this,p[6]||"",!0),this.m=lo(p[7]||"")):(this.h=!1,this.i=new co(null,this.h))}jr.prototype.toString=function(){var c=[],p=this.j;p&&c.push(Xn(p,Gu,!0),":");var y=this.g;return(y||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Xn(p,Gu,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(Xn(y,y.charAt(0)=="/"?Tp:Sp,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",Xn(y,kp)),c.join("")};function Yn(c){return new jr(c)}function ha(c,p,y){c.j=y?lo(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function fa(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Wu(c,p,y){p instanceof co?(c.i=p,Ku(c.i,c.h)):(y||(p=Xn(p,bp)),c.i=new co(p,c.h))}function Be(c,p,y){c.i.set(p,y)}function vn(c){return Be(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function lo(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Xn(c,p,y){return typeof c=="string"?(c=encodeURI(c).replace(p,Ep),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ep(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Gu=/[#\/\?@]/g,Sp=/[#\?:]/g,Tp=/[#\?]/g,bp=/[#\?@]/g,kp=/#/g;function co(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Vr(c){c.g||(c.g=new Map,c.h=0,c.i&&Hu(c.i,function(p,y){c.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}t=co.prototype,t.add=function(c,p){Vr(this),this.i=null,c=li(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(p),this.h+=1,this};function Ki(c,p){Vr(c),p=li(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Ji(c,p){return Vr(c),p=li(c,p),c.g.has(p)}t.forEach=function(c,p){Vr(this),this.g.forEach(function(y,x){y.forEach(function(B){c.call(p,B,x,this)},this)},this)},t.na=function(){Vr(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let x=0;x<p.length;x++){const B=c[x];for(let H=0;H<B.length;H++)y.push(p[x])}return y},t.V=function(c){Vr(this);let p=[];if(typeof c=="string")Ji(this,c)&&(p=p.concat(this.g.get(li(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)p=p.concat(c[y])}return p},t.set=function(c,p){return Vr(this),this.i=null,c=li(this,c),Ji(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},t.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function ai(c,p,y){Ki(c,p),0<y.length&&(c.i=null,c.g.set(li(c,p),_(y)),c.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var x=p[y];const H=encodeURIComponent(String(x)),te=this.V(x);for(x=0;x<te.length;x++){var B=H;te[x]!==""&&(B+="="+encodeURIComponent(String(te[x]))),c.push(B)}}return this.i=c.join("&")};function li(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Ku(c,p){p&&!c.j&&(Vr(c),c.i=null,c.g.forEach(function(y,x){var B=x.toLowerCase();x!=B&&(Ki(this,x),ai(this,B,y))},c)),c.j=p}function Ju(c,p){const y=new Ot;if(a.Image){const x=new Image;x.onload=E(Fr,y,"TestLoadImage: loaded",!0,p,x),x.onerror=E(Fr,y,"TestLoadImage: error",!1,p,x),x.onabort=E(Fr,y,"TestLoadImage: abort",!1,p,x),x.ontimeout=E(Fr,y,"TestLoadImage: timeout",!1,p,x),a.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=c}else p(!1)}function Ip(c,p){const y=new Ot,x=new AbortController,B=setTimeout(()=>{x.abort(),Fr(y,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:x.signal}).then(H=>{clearTimeout(B),H.ok?Fr(y,"TestPingServer: ok",!0,p):Fr(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(B),Fr(y,"TestPingServer: error",!1,p)})}function Fr(c,p,y,x,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),x(y)}catch{}}function Cp(){this.g=new Ys}function Qu(c,p,y){const x=y||"";try{da(c,function(B,H){let te=B;u(B)&&(te=xn(B)),p.push(x+H+"="+encodeURIComponent(te))})}catch(B){throw p.push(x+"type="+encodeURIComponent("_badmap")),B}}function uo(c){this.l=c.Ub||null,this.j=c.eb||!1}T(uo,Xs),uo.prototype.g=function(){return new ho(this.l,this.j)},uo.prototype.i=function(c){return function(){return c}}({});function ho(c,p){gt.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(ho,gt),t=ho.prototype,t.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,Yi(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qi(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Yi(this)),this.g&&(this.readyState=3,Yi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fl(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fl(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Qi(this):Yi(this),this.readyState==3&&Fl(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Qi(this))},t.Qa=function(c){this.g&&(this.response=c,Qi(this))},t.ga=function(){this.g&&Qi(this)};function Qi(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Yi(c)}t.setRequestHeader=function(c,p){this.u.append(c,p)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=p.next();return c.join(`\r
`)};function Yi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ho.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ul(c){let p="";return z(c,function(y,x){p+=x,p+=":",p+=y,p+=`\r
`}),p}function V(c,p,y){e:{for(x in y){var x=!1;break e}x=!0}x||(y=Ul(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):Be(c,p,y))}function q(c){gt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(q,gt);var ee=/^https?$/i,ie=["POST","PUT"];t=q.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,p,y,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ra.g(),this.v=this.o?Zs(this.o):Zs(ra),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(H){ae(this,H);return}if(c=y||"",y=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var B in x)y.set(B,x[B]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const H of x.keys())y.set(H,x.get(H));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(y.keys()).find(H=>H.toLowerCase()=="content-type"),B=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(ie,p,void 0))||x||B||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,te]of y)this.g.setRequestHeader(H,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yt(this),this.u=!0,this.g.send(c),this.u=!1}catch(H){ae(this,H)}};function ae(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,Pe(c),On(c)}function Pe(c){c.A||(c.A=!0,Tt(c,"complete"),Tt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Tt(this,"complete"),Tt(this,"abort"),On(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),On(this,!0)),q.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?bt(this):this.bb())},t.bb=function(){bt(this)};function bt(c){if(c.h&&typeof o<"u"&&(!c.v[1]||vt(c)!=4||c.Z()!=2)){if(c.u&&vt(c)==4)xt(c.Ea,0,c);else if(Tt(c,"readystatechange"),vt(c)==4){c.h=!1;try{const te=c.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var x;if(x=te===0){var B=String(c.D).match(qu)[1]||null;!B&&a.self&&a.self.location&&(B=a.self.location.protocol.slice(0,-1)),x=!ee.test(B?B.toLowerCase():"")}y=x}if(y)Tt(c,"complete"),Tt(c,"success");else{c.m=6;try{var H=2<vt(c)?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.Z()+"]",Pe(c)}}finally{On(c)}}}}function On(c,p){if(c.g){yt(c);const y=c.g,x=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Tt(c,"ready");try{y.onreadystatechange=x}catch{}}}function yt(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function vt(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<vt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),$u(p)}};function pa(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ap(c){const p={};c=(c.g&&2<=vt(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<c.length;x++){if(g(c[x]))continue;var y=C(c[x]);const B=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const H=p[B]||[];p[B]=H,H.push(y)}R(p,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fo(c,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||p}function iw(c){this.Aa=0,this.i=[],this.j=new Ot,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fo("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fo("baseRetryDelayMs",5e3,c),this.cb=fo("retryDelaySeedMs",1e4,c),this.Wa=fo("forwardChannelMaxRetries",2,c),this.wa=fo("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new ao(c&&c.concurrentRequestLimit),this.Da=new Cp,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=iw.prototype,t.la=8,t.G=1,t.connect=function(c,p,y,x){Rt(0),this.W=c,this.H=p||{},y&&x!==void 0&&(this.H.OSID=y,this.H.OAID=x),this.F=this.X,this.I=fw(this,null,this.W),Xu(this)};function Pp(c){if(sw(c),c.G==3){var p=c.U++,y=Yn(c.I);if(Be(y,"SID",c.K),Be(y,"RID",p),Be(y,"TYPE","terminate"),$l(c,y),p=new pr(c,c.j,p),p.L=2,p.v=vn(Yn(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=p.v,y=!0),y||(p.g=pw(p.j,null),p.g.ea(p.v)),p.F=Date.now(),io(p)}hw(c)}function Yu(c){c.g&&(Rp(c),c.g.cancel(),c.g=null)}function sw(c){Yu(c),c.u&&(a.clearTimeout(c.u),c.u=null),Zu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Xu(c){if(!Lr(c.h)&&!c.s){c.s=!0;var p=c.Ga;Fe||ce(),Z||(Fe(),Z=!0),he.add(p,c),c.B=0}}function Mx(c,p){return la(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ii(m(c.Ga,c,p),dw(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new pr(this,this.j,c);let H=this.o;if(this.S&&(H?(H=P(H),D(H,this.S)):H=this.S),this.m!==null||this.O||(B.H=H,H=null),this.P)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var x=this.i[y];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(p+=x,4096<p){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=aw(this,B,p),y=Yn(this.I),Be(y,"RID",c),Be(y,"CVER",22),this.D&&Be(y,"X-HTTP-Session-Id",this.D),$l(this,y),H&&(this.O?p="headers="+encodeURIComponent(String(Ul(H)))+"&"+p:this.m&&V(y,this.m,H)),jl(this.h,B),this.Ua&&Be(y,"TYPE","init"),this.P?(Be(y,"$req",p),Be(y,"SID","null"),B.T=!0,sa(B,y,null)):sa(B,y,p),this.G=2}}else this.G==3&&(c?ow(this,c):this.i.length==0||Lr(this.h)||ow(this))};function ow(c,p){var y;p?y=p.l:y=c.U++;const x=Yn(c.I);Be(x,"SID",c.K),Be(x,"RID",y),Be(x,"AID",c.T),$l(c,x),c.m&&c.o&&V(x,c.m,c.o),y=new pr(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),p&&(c.i=p.D.concat(c.i)),p=aw(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),jl(c.h,y),sa(y,x,p)}function $l(c,p){c.H&&z(c.H,function(y,x){Be(p,x,y)}),c.l&&da({},function(y,x){Be(p,x,y)})}function aw(c,p,y){y=Math.min(c.i.length,y);var x=c.l?m(c.l.Na,c.l,c):null;e:{var B=c.i;let H=-1;for(;;){const te=["count="+y];H==-1?0<y?(H=B[0].g,te.push("ofs="+H)):H=0:te.push("ofs="+H);let ze=!0;for(let Ut=0;Ut<y;Ut++){let De=B[Ut].g;const Wt=B[Ut].map;if(De-=H,0>De)H=Math.max(0,B[Ut].g-100),ze=!1;else try{Qu(Wt,te,"req"+De+"_")}catch{x&&x(Wt)}}if(ze){x=te.join("&");break e}}}return c=c.i.splice(0,y),p.D=c,x}function lw(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;Fe||ce(),Z||(Fe(),Z=!0),he.add(p,c),c.v=0}}function xp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ii(m(c.Fa,c),dw(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,cw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ii(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),Yu(this),cw(this))};function Rp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function cw(c){c.g=new pr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=Yn(c.qa);Be(p,"RID","rpc"),Be(p,"SID",c.K),Be(p,"AID",c.T),Be(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&Be(p,"TO",c.ja),Be(p,"TYPE","xmlhttp"),$l(c,p),c.m&&c.o&&V(p,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=vn(Yn(p)),y.m=null,y.P=!0,Ll(y,c)}t.Za=function(){this.C!=null&&(this.C=null,Yu(this),xp(this),Rt(19))};function Zu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function uw(c,p){var y=null;if(c.g==p){Zu(c),Rp(c),c.g=null;var x=2}else if(ca(c.h,p))y=p.D,ua(c.h,p),x=1;else return;if(c.G!=0){if(p.o)if(x==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var B=c.B;x=to(),Tt(x,new ta(x,y)),Xu(c)}else lw(c);else if(B=p.s,B==3||B==0&&0<p.X||!(x==1&&Mx(c,p)||x==2&&xp(c)))switch(y&&0<y.length&&(p=c.h,p.i=p.i.concat(y)),B){case 1:po(c,5);break;case 4:po(c,10);break;case 3:po(c,6);break;default:po(c,2)}}}function dw(c,p){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*p}function po(c,p){if(c.j.info("Error code "+p),p==2){var y=m(c.fb,c),x=c.Xa;const B=!x;x=new jr(x||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ha(x,"https"),vn(x),B?Ju(x.toString(),y):Ip(x.toString(),y)}else Rt(2);c.G=0,c.l&&c.l.sa(p),hw(c),sw(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function hw(c){if(c.G=0,c.ka=[],c.l){const p=Vl(c.h);(p.length!=0||c.i.length!=0)&&(b(c.ka,p),b(c.ka,c.i),c.h.i.length=0,_(c.i),c.i.length=0),c.l.ra()}}function fw(c,p,y){var x=y instanceof jr?Yn(y):new jr(y);if(x.g!="")p&&(x.g=p+"."+x.g),fa(x,x.s);else{var B=a.location;x=B.protocol,p=p?p+"."+B.hostname:B.hostname,B=+B.port;var H=new jr(null);x&&ha(H,x),p&&(H.g=p),B&&fa(H,B),y&&(H.l=y),x=H}return y=c.D,p=c.ya,y&&p&&Be(x,y,p),Be(x,"VER",c.la),$l(c,x),x}function pw(c,p,y){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new q(new uo({eb:y})):new q(c.pa),p.Ha(c.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function mw(){}t=mw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ed(){}ed.prototype.g=function(c,p){return new Nn(c,p)};function Nn(c,p){gt.call(this),this.g=new iw(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!g(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!g(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new ma(this)}T(Nn,gt),Nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){Pp(this.g)},Nn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=xn(c),c=y);p.i.push(new oi(p.Ya++,c)),p.G==3&&Xu(p)},Nn.prototype.N=function(){this.g.l=null,delete this.j,Pp(this.g),delete this.g,Nn.aa.N.call(this)};function gw(c){eo.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const y in p){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}T(gw,eo);function yw(){ea.call(this),this.status=1}T(yw,ea);function ma(c){this.g=c}T(ma,mw),ma.prototype.ua=function(){Tt(this.g,"a")},ma.prototype.ta=function(c){Tt(this.g,new gw(c))},ma.prototype.sa=function(c){Tt(this.g,new yw)},ma.prototype.ra=function(){Tt(this.g,"b")},ed.prototype.createWebChannel=ed.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,JC=function(){return new ed},KC=function(){return to()},GC=Jn,Yg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},na.NO_ERROR=0,na.TIMEOUT=8,na.HTTP_ERROR=6,oh=na,Wi.COMPLETE="complete",WC=Wi,Ol.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",gt.prototype.listen=gt.prototype.K,lc=Ol,q.prototype.listenOnce=q.prototype.L,q.prototype.getLastError=q.prototype.Ka,q.prototype.getLastErrorCode=q.prototype.Ba,q.prototype.getStatus=q.prototype.Z,q.prototype.getResponseJson=q.prototype.Oa,q.prototype.getResponseText=q.prototype.oa,q.prototype.send=q.prototype.ea,q.prototype.setWithCredentials=q.prototype.Ha,HC=q}).apply(typeof Ed<"u"?Ed:typeof self<"u"?self:typeof window<"u"?window:{});const vE="@firebase/firestore",_E="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=new Wv("@firebase/firestore");function _a(){return Uo.logLevel}function se(t,...e){if(Uo.logLevel<=ke.DEBUG){const n=e.map(o_);Uo.debug(`Firestore (${kl}): ${t}`,...n)}}function Mi(t,...e){if(Uo.logLevel<=ke.ERROR){const n=e.map(o_);Uo.error(`Firestore (${kl}): ${t}`,...n)}}function Li(t,...e){if(Uo.logLevel<=ke.WARN){const n=e.map(o_);Uo.warn(`Firestore (${kl}): ${t}`,...n)}}function o_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,QC(t,r,n)}function QC(t,e,n){let r=`FIRESTORE (${kl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Mi(r),new Error(r)}function je(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||QC(e,i,r)}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends Ui{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Xt.UNAUTHENTICATED))}shutdown(){}}class Zj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class eV{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){je(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Ti;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ti,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ti)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(je(typeof r.accessToken=="string",31837,{l:r}),new YC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string",2055,{h:e}),new Xt(e)}}class tV{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nV{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new tV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rV{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,En(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){je(this.o===void 0,3512);const r=s=>{s.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new wE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(je(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new wE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=iV(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function Se(t,e){return t<e?-1:t>e?1:0}function Xg(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Se(r,i);{const s=ZC(),o=sV(s.encode(EE(t,n)),s.encode(EE(e,n)));return o!==0?o:Se(r,i)}}n+=r>65535?2:1}return Se(t.length,e.length)}function EE(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function sV(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Se(t[n],e[n]);return Se(t.length,e.length)}function al(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="__name__";class Br{constructor(e,n,r){n===void 0?n=0:n>e.length&&me(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&me(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Br.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Br?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Br.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return Se(e.length,n.length)}static compareSegments(e,n){const r=Br.isNumericId(e),i=Br.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Br.extractNumericId(e).compare(Br.extractNumericId(n)):Xg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return As.fromString(e.substring(4,e.length-2))}}class Ke extends Br{construct(e,n,r){return new Ke(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ke(n)}static emptyPath(){return new Ke([])}}const oV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends Br{construct(e,n,r){return new Lt(e,n,r)}static isValidIdentifier(e){return oV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===SE}static keyField(){return new Lt([SE])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new re(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new re(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new re(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new re(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(n)}static emptyPath(){return new Lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(Ke.fromString(e))}static fromName(e){return new de(Ke.fromString(e).popFirst(5))}static empty(){return new de(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new Ke(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(t,e,n){if(!n)throw new re(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function tA(t,e,n,r){if(e===!0&&r===!0)throw new re(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function TE(t){if(!de.isDocumentKey(t))throw new re(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bE(t){if(de.isDocumentKey(t))throw new re(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function nA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Bf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me(12329,{type:typeof t})}function hn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bf(t);throw new re(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function aV(t,e){if(e<=0)throw new re(G.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t,e){const n={typeString:t};return e&&(n.value=e),n}function ku(t,e){if(!nA(t))throw new re(G.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new re(G.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE=-62135596800,IE=1e6;class We{static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*IE);return new We(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<kE)throw new re(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/IE}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:We._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ku(e,We._jsonSchema))return new We(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-kE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}We._jsonSchemaVersion="firestore/timestamp/1.0",We._jsonSchema={type:St("string",We._jsonSchemaVersion),seconds:St("number"),nanoseconds:St("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new We(0,0))}static max(){return new ye(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu=-1;function lV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ye.fromTimestamp(r===1e9?new We(n+1,0):new We(n,r));return new Ds(i,de.empty(),e)}function cV(t){return new Ds(t.readTime,t.key,nu)}class Ds{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ds(ye.min(),de.empty(),nu)}static max(){return new Ds(ye.max(),de.empty(),nu)}}function uV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Il(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==dV)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):J.reject(n)}static resolve(e){return new J((n,r)=>{n(e)})}static reject(e){return new J((n,r)=>{r(e)})}static waitFor(e){return new J((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=J.resolve(!1);for(const r of e)n=n.next(i=>i?J.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new J((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new J((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function fV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Cl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}zf.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=-1;function qf(t){return t==null}function Jh(t){return t===0&&1/t==-1/0}function pV(t){return typeof t=="number"&&Number.isInteger(t)&&!Jh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="";function mV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=CE(e)),e=gV(t.get(n),e);return CE(e)}function gV(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case rA:n+="";break;default:n+=s}}return n}function CE(t){return t+rA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ks(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function iA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){this.comparator=e,this.root=n||zt.EMPTY}insert(e,n){return new ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sd(this.root,e,this.comparator,!0)}}class Sd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??zt.RED,this.left=i??zt.EMPTY,this.right=s??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new zt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return zt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new PE(this.data.getIterator())}getIteratorFrom(e){return new PE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof At)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new At(this.comparator);return n.data=e,n}}class PE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new Vn([])}unionWith(e){let n=new At(Lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return al(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new sA("Invalid base64 string: "+s):s}}(e);return new Vt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const yV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ms(t){if(je(!!t,39018),typeof t=="string"){let e=0;const n=yV.exec(t);if(je(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ft(t.seconds),nanos:ft(t.nanos)}}function ft(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ls(t){return typeof t=="string"?Vt.fromBase64String(t):Vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="server_timestamp",aA="__type__",lA="__previous_value__",cA="__local_write_time__";function l_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[aA])===null||n===void 0?void 0:n.stringValue)===oA}function Hf(t){const e=t.mapValue.fields[lA];return l_(e)?Hf(e):e}function ru(t){const e=Ms(t.mapValue.fields[cA].timestampValue);return new We(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e,n,r,i,s,o,a,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=d}}const Qh="(default)";class ll{constructor(e,n){this.projectId=e,this.database=n||Qh}static empty(){return new ll("","")}get isDefaultDatabase(){return this.database===Qh}isEqual(e){return e instanceof ll&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA="__type__",_V="__max__",Td={mapValue:{}},dA="__vector__",Yh="value";function js(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?l_(t)?4:EV(t)?9007199254740991:wV(t)?10:11:me(28295,{value:t})}function Zr(t,e){if(t===e)return!0;const n=js(t);if(n!==js(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ru(t).isEqual(ru(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ms(i.timestampValue),a=Ms(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ls(i.bytesValue).isEqual(Ls(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ft(i.geoPointValue.latitude)===ft(s.geoPointValue.latitude)&&ft(i.geoPointValue.longitude)===ft(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ft(i.integerValue)===ft(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ft(i.doubleValue),a=ft(s.doubleValue);return o===a?Jh(o)===Jh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return al(t.arrayValue.values||[],e.arrayValue.values||[],Zr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(AE(o)!==AE(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Zr(o[l],a[l])))return!1;return!0}(t,e);default:return me(52216,{left:t})}}function iu(t,e){return(t.values||[]).find(n=>Zr(n,e))!==void 0}function cl(t,e){if(t===e)return 0;const n=js(t),r=js(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ft(s.integerValue||s.doubleValue),l=ft(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return xE(t.timestampValue,e.timestampValue);case 4:return xE(ru(t),ru(e));case 5:return Xg(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ls(s),l=Ls(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=Se(a[u],l[u]);if(d!==0)return d}return Se(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Se(ft(s.latitude),ft(o.latitude));return a!==0?a:Se(ft(s.longitude),ft(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return RE(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,d;const f=s.fields||{},m=o.fields||{},E=(a=f[Yh])===null||a===void 0?void 0:a.arrayValue,T=(l=m[Yh])===null||l===void 0?void 0:l.arrayValue,_=Se(((u=E==null?void 0:E.values)===null||u===void 0?void 0:u.length)||0,((d=T==null?void 0:T.values)===null||d===void 0?void 0:d.length)||0);return _!==0?_:RE(E,T)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Td.mapValue&&o===Td.mapValue)return 0;if(s===Td.mapValue)return 1;if(o===Td.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const m=Xg(l[f],d[f]);if(m!==0)return m;const E=cl(a[l[f]],u[d[f]]);if(E!==0)return E}return Se(l.length,d.length)}(t.mapValue,e.mapValue);default:throw me(23264,{le:n})}}function xE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=Ms(t),r=Ms(e),i=Se(n.seconds,r.seconds);return i!==0?i:Se(n.nanos,r.nanos)}function RE(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=cl(n[i],r[i]);if(s)return s}return Se(n.length,r.length)}function ul(t){return Zg(t)}function Zg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ms(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ls(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return de.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Zg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Zg(n.fields[o])}`;return i+"}"}(t.mapValue):me(61005,{value:t})}function ah(t){switch(js(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hf(t);return e?16+ah(e):16;case 5:return 2*t.stringValue.length;case 6:return Ls(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+ah(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ks(r.fields,(s,o)=>{i+=s.length+ah(o)}),i}(t.mapValue);default:throw me(13486,{value:t})}}function OE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ey(t){return!!t&&"integerValue"in t}function c_(t){return!!t&&"arrayValue"in t}function NE(t){return!!t&&"nullValue"in t}function DE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lh(t){return!!t&&"mapValue"in t}function wV(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[uA])===null||n===void 0?void 0:n.stringValue)===dA}function Ic(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ks(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ic(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ic(t.arrayValue.values[n]);return e}return Object.assign({},t)}function EV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===_V}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!lh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ic(n)}setAll(e){let n=Lt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ic(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());lh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Zr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];lh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ks(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Sn(Ic(this.value))}}function hA(t){const e=[];return Ks(t.fields,(n,r)=>{const i=new Lt([n]);if(lh(r)){const s=hA(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new en(e,0,ye.min(),ye.min(),ye.min(),Sn.empty(),0)}static newFoundDocument(e,n,r,i){return new en(e,1,n,ye.min(),r,i,0)}static newNoDocument(e,n){return new en(e,2,n,ye.min(),ye.min(),Sn.empty(),0)}static newUnknownDocument(e,n){return new en(e,3,n,ye.min(),ye.min(),Sn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n){this.position=e,this.inclusive=n}}function ME(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=de.comparator(de.fromName(o.referenceValue),n.key):r=cl(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function LE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Zr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n="asc"){this.field=e,this.dir=n}}function SV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{}class Et extends fA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new bV(e,n,r):n==="array-contains"?new CV(e,r):n==="in"?new AV(e,r):n==="not-in"?new PV(e,r):n==="array-contains-any"?new xV(e,r):new Et(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new kV(e,r):new IV(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(cl(n,this.value)):n!==null&&js(this.value)===js(n)&&this.matchesComparison(cl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Or extends fA{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Or(e,n)}matches(e){return pA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function pA(t){return t.op==="and"}function mA(t){return TV(t)&&pA(t)}function TV(t){for(const e of t.filters)if(e instanceof Or)return!1;return!0}function ty(t){if(t instanceof Et)return t.field.canonicalString()+t.op.toString()+ul(t.value);if(mA(t))return t.filters.map(e=>ty(e)).join(",");{const e=t.filters.map(n=>ty(n)).join(",");return`${t.op}(${e})`}}function gA(t,e){return t instanceof Et?function(r,i){return i instanceof Et&&r.op===i.op&&r.field.isEqual(i.field)&&Zr(r.value,i.value)}(t,e):t instanceof Or?function(r,i){return i instanceof Or&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&gA(o,i.filters[a]),!0):!1}(t,e):void me(19439)}function yA(t){return t instanceof Et?function(n){return`${n.field.canonicalString()} ${n.op} ${ul(n.value)}`}(t):t instanceof Or?function(n){return n.op.toString()+" {"+n.getFilters().map(yA).join(" ,")+"}"}(t):"Filter"}class bV extends Et{constructor(e,n,r){super(e,n,r),this.key=de.fromName(r.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class kV extends Et{constructor(e,n){super(e,"in",n),this.keys=vA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class IV extends Et{constructor(e,n){super(e,"not-in",n),this.keys=vA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>de.fromName(r.referenceValue))}class CV extends Et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return c_(n)&&iu(n.arrayValue,this.value)}}class AV extends Et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&iu(this.value.arrayValue,n)}}class PV extends Et{constructor(e,n){super(e,"not-in",n)}matches(e){if(iu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!iu(this.value.arrayValue,n)}}class xV extends Et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!c_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>iu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}}function jE(t,e=null,n=[],r=[],i=null,s=null,o=null){return new RV(t,e,n,r,i,s,o)}function u_(t){const e=_e(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ty(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),qf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ul(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ul(r)).join(",")),e.Pe=n}return e.Pe}function d_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!SV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!LE(t.startAt,e.startAt)&&LE(t.endAt,e.endAt)}function ny(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function OV(t,e,n,r,i,s,o,a){return new Al(t,e,n,r,i,s,o,a)}function Wf(t){return new Al(t)}function VE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _A(t){return t.collectionGroup!==null}function Cc(t){const e=_e(t);if(e.Te===null){e.Te=[];const n=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new At(Lt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new su(s,r))}),n.has(Lt.keyField().canonicalString())||e.Te.push(new su(Lt.keyField(),r))}return e.Te}function Yr(t){const e=_e(t);return e.Ie||(e.Ie=NV(e,Cc(t))),e.Ie}function NV(t,e){if(t.limitType==="F")return jE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new su(i.field,s)});const n=t.endAt?new Xh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Xh(t.startAt.position,t.startAt.inclusive):null;return jE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ry(t,e){const n=t.filters.concat([e]);return new Al(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Zh(t,e,n){return new Al(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gf(t,e){return d_(Yr(t),Yr(e))&&t.limitType===e.limitType}function wA(t){return`${u_(Yr(t))}|lt:${t.limitType}`}function wa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>yA(i)).join(", ")}]`),qf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ul(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ul(i)).join(",")),`Target(${r})`}(Yr(t))}; limitType=${t.limitType})`}function Kf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):de.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Cc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=ME(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Cc(r),i)||r.endAt&&!function(o,a,l){const u=ME(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Cc(r),i))}(t,e)}function DV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function EA(t){return(e,n)=>{let r=!1;for(const i of Cc(t)){const s=MV(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function MV(t,e,n){const r=t.field.isKeyField()?de.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?cl(l,u):me(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ks(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return iA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV=new ct(de.comparator);function ji(){return LV}const SA=new ct(de.comparator);function cc(...t){let e=SA;for(const n of t)e=e.insert(n.key,n);return e}function TA(t){let e=SA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ko(){return Ac()}function bA(){return Ac()}function Ac(){return new Qo(t=>t.toString(),(t,e)=>t.isEqual(e))}const jV=new ct(de.comparator),VV=new At(de.comparator);function Ie(...t){let e=VV;for(const n of t)e=e.add(n);return e}const FV=new At(Se);function UV(){return FV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jh(e)?"-0":e}}function kA(t){return{integerValue:""+t}}function $V(t,e){return pV(e)?kA(e):h_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(){this._=void 0}}function BV(t,e,n){return t instanceof ou?function(i,s){const o={fields:{[aA]:{stringValue:oA},[cA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&l_(s)&&(s=Hf(s)),s&&(o.fields[lA]=s),{mapValue:o}}(n,e):t instanceof au?CA(t,e):t instanceof lu?AA(t,e):function(i,s){const o=IA(i,s),a=FE(o)+FE(i.Ee);return ey(o)&&ey(i.Ee)?kA(a):h_(i.serializer,a)}(t,e)}function zV(t,e,n){return t instanceof au?CA(t,e):t instanceof lu?AA(t,e):n}function IA(t,e){return t instanceof ef?function(r){return ey(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ou extends Jf{}class au extends Jf{constructor(e){super(),this.elements=e}}function CA(t,e){const n=PA(e);for(const r of t.elements)n.some(i=>Zr(i,r))||n.push(r);return{arrayValue:{values:n}}}class lu extends Jf{constructor(e){super(),this.elements=e}}function AA(t,e){let n=PA(e);for(const r of t.elements)n=n.filter(i=>!Zr(i,r));return{arrayValue:{values:n}}}class ef extends Jf{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function FE(t){return ft(t.integerValue||t.doubleValue)}function PA(t){return c_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e,n){this.field=e,this.transform=n}}function HV(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof au&&i instanceof au||r instanceof lu&&i instanceof lu?al(r.elements,i.elements,Zr):r instanceof ef&&i instanceof ef?Zr(r.Ee,i.Ee):r instanceof ou&&i instanceof ou}(t.transform,e.transform)}class WV{constructor(e,n){this.version=e,this.transformResults=n}}class sr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ch(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qf{}function xA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new f_(t.key,sr.none()):new Iu(t.key,t.data,sr.none());{const n=t.data,r=Sn.empty();let i=new At(Lt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Js(t.key,r,new Vn(i.toArray()),sr.none())}}function GV(t,e,n){t instanceof Iu?function(i,s,o){const a=i.value.clone(),l=$E(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Js?function(i,s,o){if(!ch(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=$E(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(RA(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Pc(t,e,n,r){return t instanceof Iu?function(s,o,a,l){if(!ch(s.precondition,o))return a;const u=s.value.clone(),d=BE(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Js?function(s,o,a,l){if(!ch(s.precondition,o))return a;const u=BE(s.fieldTransforms,l,o),d=o.data;return d.setAll(RA(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return ch(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function KV(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=IA(r.transform,i||null);s!=null&&(n===null&&(n=Sn.empty()),n.set(r.field,s))}return n||null}function UE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&al(r,i,(s,o)=>HV(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Iu extends Qf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Js extends Qf{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function RA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function $E(t,e,n){const r=new Map;je(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,zV(o,a,n[i]))}return r}function BE(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,BV(s,o,e))}return r}class f_ extends Qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JV extends Qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&GV(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Pc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Pc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=bA();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=xA(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ye.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&al(this.mutations,e.mutations,(n,r)=>UE(n,r))&&al(this.baseMutations,e.baseMutations,(n,r)=>UE(n,r))}}class p_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){je(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return jV}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new p_(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,xe;function ZV(t){switch(t){case G.OK:return me(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return me(15467,{code:t})}}function OA(t){if(t===void 0)return Mi("GRPC error has no .code"),G.UNKNOWN;switch(t){case _t.OK:return G.OK;case _t.CANCELLED:return G.CANCELLED;case _t.UNKNOWN:return G.UNKNOWN;case _t.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case _t.INTERNAL:return G.INTERNAL;case _t.UNAVAILABLE:return G.UNAVAILABLE;case _t.UNAUTHENTICATED:return G.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case _t.NOT_FOUND:return G.NOT_FOUND;case _t.ALREADY_EXISTS:return G.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return G.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case _t.ABORTED:return G.ABORTED;case _t.OUT_OF_RANGE:return G.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return G.UNIMPLEMENTED;case _t.DATA_LOSS:return G.DATA_LOSS;default:return me(39323,{code:t})}}(xe=_t||(_t={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF=new As([4294967295,4294967295],0);function zE(t){const e=ZC().encode(t),n=new qC;return n.update(e),new Uint8Array(n.digest())}function qE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new As([n,r],0),new As([i,s],0)]}class m_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new uc(`Invalid padding: ${n}`);if(r<0)throw new uc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new uc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new uc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=As.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(As.fromNumber(r)));return i.compare(eF)===1&&(i=new As([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=zE(e),[r,i]=qE(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new m_(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;const n=zE(e),[r,i]=qE(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class uc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Cu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Yf(ye.min(),i,new ct(Se),ji(),Ie())}}class Cu{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Cu(r,n,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class NA{constructor(e,n){this.targetId=e,this.De=n}}class DA{constructor(e,n,r=Vt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class HE{constructor(){this.ve=0,this.Ce=WE(),this.Fe=Vt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ie(),n=Ie(),r=Ie();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:me(38017,{changeType:s})}}),new Cu(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=WE()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,je(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class tF{constructor(e){this.We=e,this.Ge=new Map,this.ze=ji(),this.je=bd(),this.Je=bd(),this.He=new ct(Se)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const s=i.target;if(ny(s))if(r===0){const o=new de(s.path);this.Xe(n,o,en.newNoDocument(o,ye.min()))}else je(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const a=this._t(e),l=a?this.ut(a,e,o):1;if(l!==0){this.rt(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,u)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ls(r).toUint8Array()}catch(l){if(l instanceof sA)return Li("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new m_(o,i,s)}catch(l){return Li(l instanceof uc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,s,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((s,o)=>{const a=this.st(o);if(a){if(s.current&&ny(a.target)){const l=new de(a.target.path);this.Tt(l).has(o)||this.It(o,l)||this.Xe(o,l,en.newNoDocument(l,e))}s.Ne&&(n.set(o,s.Le()),s.ke())}});let r=Ie();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.st(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));const i=new Yf(e,n,this.He,this.ze,r);return this.ze=ji(),this.je=bd(),this.Je=bd(),this.He=new ct(Se),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new HE,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new At(Se),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new At(Se),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new HE),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function bd(){return new ct(de.comparator)}function WE(){return new ct(de.comparator)}const nF={asc:"ASCENDING",desc:"DESCENDING"},rF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iF={and:"AND",or:"OR"};class sF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function iy(t,e){return t.useProto3Json||qf(e)?e:{value:e}}function tf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function MA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function oF(t,e){return tf(t,e.toTimestamp())}function Xr(t){return je(!!t,49232),ye.fromTimestamp(function(n){const r=Ms(n);return new We(r.seconds,r.nanos)}(t))}function g_(t,e){return sy(t,e).canonicalString()}function sy(t,e){const n=function(i){return new Ke(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function LA(t){const e=Ke.fromString(t);return je($A(e),10190,{key:e.toString()}),e}function oy(t,e){return g_(t.databaseId,e.path)}function ym(t,e){const n=LA(e);if(n.get(1)!==t.databaseId.projectId)throw new re(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de(VA(n))}function jA(t,e){return g_(t.databaseId,e)}function aF(t){const e=LA(t);return e.length===4?Ke.emptyPath():VA(e)}function ay(t){return new Ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VA(t){return je(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function GE(t,e,n){return{name:oy(t,e),fields:n.value.mapValue.fields}}function lF(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:me(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(je(d===void 0||typeof d=="string",58123),Vt.fromBase64String(d||"")):(je(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Vt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?G.UNKNOWN:OA(u.code);return new re(d,u.message||"")}(o);n=new DA(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ym(t,r.document.name),s=Xr(r.document.updateTime),o=r.document.createTime?Xr(r.document.createTime):ye.min(),a=new Sn({mapValue:{fields:r.document.fields}}),l=en.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new uh(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ym(t,r.document),s=r.readTime?Xr(r.readTime):ye.min(),o=en.newNoDocument(i,s),a=r.removedTargetIds||[];n=new uh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ym(t,r.document),s=r.removedTargetIds||[];n=new uh([],s,i,null)}else{if(!("filter"in e))return me(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new XV(i,s),a=r.targetId;n=new NA(a,o)}}return n}function cF(t,e){let n;if(e instanceof Iu)n={update:GE(t,e.key,e.value)};else if(e instanceof f_)n={delete:oy(t,e.key)};else if(e instanceof Js)n={update:GE(t,e.key,e.data),updateMask:vF(e.fieldMask)};else{if(!(e instanceof JV))return me(16599,{Rt:e.type});n={verify:oy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof ou)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof au)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof lu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ef)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw me(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:oF(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:me(27497)}(t,e.precondition)),n}function uF(t,e){return t&&t.length>0?(je(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?Xr(i.updateTime):Xr(s);return o.isEqual(ye.min())&&(o=Xr(s)),new WV(o,i.transformResults||[])}(n,e))):[]}function dF(t,e){return{documents:[jA(t,e.path)]}}function hF(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=jA(t,i);const s=function(u){if(u.length!==0)return UA(Or.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:Ea(m.field),direction:mF(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=iy(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:n,parent:i}}function fF(t){let e=aF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){je(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){const m=FA(f);return m instanceof Or&&mA(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(T){return new su(Sa(T.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,qf(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,E=f.values||[];return new Xh(E,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,E=f.values||[];return new Xh(E,m)}(n.endAt)),OV(e,i,o,s,a,"F",l,u)}function pF(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Sa(n.unaryFilter.field);return Et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Sa(n.unaryFilter.field);return Et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Sa(n.unaryFilter.field);return Et.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Sa(n.unaryFilter.field);return Et.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}}(t):t.fieldFilter!==void 0?function(n){return Et.create(Sa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Or.create(n.compositeFilter.filters.map(r=>FA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return me(1026)}}(n.compositeFilter.op))}(t):me(30097,{filter:t})}function mF(t){return nF[t]}function gF(t){return rF[t]}function yF(t){return iF[t]}function Ea(t){return{fieldPath:t.canonicalString()}}function Sa(t){return Lt.fromServerFormat(t.fieldPath)}function UA(t){return t instanceof Et?function(n){if(n.op==="=="){if(DE(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NAN"}};if(NE(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(DE(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NOT_NAN"}};if(NE(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ea(n.field),op:gF(n.op),value:n.value}}}(t):t instanceof Or?function(n){const r=n.getFilters().map(i=>UA(i));return r.length===1?r[0]:{compositeFilter:{op:yF(n.op),filters:r}}}(t):me(54877,{filter:t})}function vF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $A(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n,r,i,s=ye.min(),o=ye.min(),a=Vt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e){this.gt=e}}function wF(t){const e=fF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(){this.Dn=new SF}addToCollectionParentIndex(e,n){return this.Dn.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return J.resolve()}deleteFieldIndex(e,n){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,n){return J.resolve()}getDocumentsMatchingTarget(e,n){return J.resolve(null)}getIndexType(e,n){return J.resolve(0)}getFieldIndexes(e,n){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,n){return J.resolve(Ds.min())}getMinOffsetFromCollectionGroup(e,n){return J.resolve(Ds.min())}updateCollectionGroup(e,n,r){return J.resolve()}updateIndexEntries(e,n){return J.resolve()}}class SF{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new At(Ke.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new At(Ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},BA=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(BA,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new dl(0)}static ur(){return new dl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="LruGarbageCollector",TF=1048576;function QE([t,e],[n,r]){const i=Se(t,n);return i===0?Se(e,r):i}class bF{constructor(e){this.Tr=e,this.buffer=new At(QE),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();QE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class kF{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){se(JE,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Cl(n)?se(JE,"Ignoring IndexedDB error during garbage collection: ",n):await Il(n)}await this.Rr(3e5)})}}class IF{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return J.resolve(zf.ue);const r=new bF(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(KE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KE):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,s,o,a,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),_a()<=ke.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function CF(t,e){return new IF(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(){this.changes=new Qo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?J.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Pc(r.mutation,i,Vn.empty(),We.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ie()){const i=ko();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=cc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ko();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ie()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ji();const o=Ac(),a=function(){return Ac()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Js)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Pc(d.mutation,u,d.mutation.getFieldMask(),We.now())):o.set(u.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var f;return a.set(u,new PF(d,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ac();let i=new ct((o,a)=>o-a),s=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||Vn.empty();d=a.applyToLocalView(u,d),r.set(l,d);const f=(i.get(a.batchId)||Ie()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,f=bA();d.forEach(m=>{if(!s.has(m)){const E=xA(n.get(m),r.get(m));E!==null&&f.set(m,E),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return J.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return de.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_A(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):J.resolve(ko());let a=nu,l=s;return o.next(u=>J.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?J.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Ie())).next(d=>({batchId:a,changes:TA(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(r=>{let i=cc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=cc();return this.indexManager.getCollectionParents(e,s).next(a=>J.forEach(a,l=>{const u=function(f,m){return new Al(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,en.newInvalidDocument(d)))});let a=cc();return o.forEach((l,u)=>{const d=s.get(l);d!==void 0&&Pc(d.mutation,u,Vn.empty(),We.now()),Kf(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return J.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Xr(i.createTime)}}(n)),J.resolve()}getNamedQuery(e,n){return J.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:wF(i.bundledQuery),readTime:Xr(i.readTime)}}(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(){this.overlays=new ct(de.comparator),this.kr=new Map}getOverlay(e,n){return J.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ko();return J.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.wt(e,n,s)}),J.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),J.resolve()}getOverlaysForCollection(e,n,r){const i=ko(),s=n.length+1,o=new de(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return J.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ct((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=ko(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=ko(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return J.resolve(a)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new YV(n,r));let s=this.kr.get(n);s===void 0&&(s=Ie(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(){this.qr=new At(Nt.Qr),this.$r=new At(Nt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Nt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Nt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new de(new Ke([])),r=new Nt(n,e),i=new Nt(n,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new de(new Ke([])),r=new Nt(n,e),i=new Nt(n,e+1);let s=Ie();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Nt(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Nt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return de.comparator(e.key,n.key)||Se(e.Hr,n.Hr)}static Ur(e,n){return Se(e.Hr,n.Hr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new At(Nt.Qr)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new QV(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Yr=this.Yr.add(new Nt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return J.resolve(o)}lookupMutationBatch(e,n){return J.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return J.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?a_:this.er-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Nt(n,0),i=new Nt(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{const a=this.Zr(o.Hr);s.push(a)}),J.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new At(Se);return n.forEach(i=>{const s=new Nt(i,0),o=new Nt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),J.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;de.isDocumentKey(s)||(s=s.child(""));const o=new Nt(new de(s),0);let a=new At(Se);return this.Yr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Hr)),!0)},o),J.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){je(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return J.forEach(n.mutations,i=>{const s=new Nt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Nt(n,0),i=this.Yr.firstAfterOrEqual(r);return J.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e){this.ni=e,this.docs=function(){return new ct(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return J.resolve(r?r.document.mutableCopy():en.newInvalidDocument(n))}getEntries(e,n){let r=ji();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():en.newInvalidDocument(i))}),J.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ji();const o=n.path,a=new de(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||uV(cV(d),r)<=0||(i.has(d.key)||Kf(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return J.resolve(s)}getAllFromCollectionGroup(e,n,r,i){me(9500)}ri(e,n){return J.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new LF(this)}getSize(e){return J.resolve(this.size)}}class LF extends AF{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),J.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e){this.persistence=e,this.ii=new Qo(n=>u_(n),d_),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.si=0,this.oi=new y_,this.targetCount=0,this._i=dl.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),J.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new dl(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.hr(n),J.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),J.waitFor(s).next(()=>i)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return J.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),J.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),J.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),J.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return J.resolve(r)}containsKey(e,n){return J.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,n){this.ai={},this.overlays={},this.ui=new zf(0),this.ci=!1,this.ci=!0,this.li=new NF,this.referenceDelegate=e(this),this.hi=new jF(this),this.indexManager=new EF,this.remoteDocumentCache=function(i){return new MF(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new _F(n),this.Ti=new RF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new OF,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new DF(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const i=new VF(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return J.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class VF extends hV{constructor(e){super(),this.currentSequenceNumber=e}}class v_{constructor(e){this.persistence=e,this.Ai=new y_,this.Ri=null}static Vi(e){return new v_(e)}get mi(){if(this.Ri)return this.Ri;throw me(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),J.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),J.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.mi,r=>{const i=de.fromPath(r);return this.fi(e,i).next(s=>{s||n.removeEntry(i,ye.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return J.or([()=>J.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class nf{constructor(e,n){this.persistence=e,this.gi=new Qo(r=>mV(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=CF(this,n)}static Vi(e,n){return new nf(e,n)}Ii(){}di(e){return J.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return J.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?J.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,n).next(a=>{a||(r++,s.removeEntry(o,ye.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),J.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),J.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),J.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ah(e.data.value)),n}Sr(e,n,r){return J.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return J.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=Ie(),i=Ie();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new __(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return yM()?8:fV(sn())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ps(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new FF;return this.ws(e,n,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,n,o,a.size)})}).next(()=>s.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(_a()<=ke.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",wa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),J.resolve()):(_a()<=ke.DEBUG&&se("QueryEngine","Query:",wa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(_a()<=ke.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",wa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yr(n))):J.resolve())}ps(e,n){if(VE(n))return J.resolve(null);let r=Yr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Zh(n,null,"F"),r=Yr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ie(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.bs(n,a);return this.Ds(n,u,o,l.readTime)?this.ps(e,Zh(n,null,"F")):this.vs(e,u,n,l)}))})))}ys(e,n,r,i){return VE(n)||i.isEqual(ye.min())?J.resolve(null):this.gs.getDocuments(e,r).next(s=>{const o=this.bs(n,s);return this.Ds(n,o,r,i)?J.resolve(null):(_a()<=ke.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wa(n)),this.vs(e,o,n,lV(i,nu)).next(a=>a))})}bs(e,n){let r=new At(EA(e));return n.forEach((i,s)=>{Kf(e,s)&&(r=r.add(s))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,n,r){return _a()<=ke.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",wa(n)),this.gs.getDocumentsMatchingQuery(e,n,Ds.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="LocalStore",$F=3e8;class BF{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new ct(Se),this.Ms=new Qo(s=>u_(s),d_),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xF(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function zF(t,e,n,r){return new BF(t,e,n,r)}async function qA(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ie();for(const u of i){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Bs:u,removedBatchIds:o,addedBatchIds:a}))})})}function qF(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const f=u.batch,m=f.keys();let E=J.resolve();return m.forEach(T=>{E=E.next(()=>d.getEntry(l,T)).next(_=>{const b=u.docVersions.get(T);je(b!==null,48541),_.version.compareTo(b)<0&&(f.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),d.addEntry(_)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ie();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function HA(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function HF(t,e){const n=_e(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const a=[];e.targetChanges.forEach((d,f)=>{const m=i.get(f);if(!m)return;a.push(n.hi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.hi.addMatchingKeys(s,d.addedDocuments,f)));let E=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?E=E.withResumeToken(Vt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):d.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(d.resumeToken,r)),i=i.insert(f,E),function(_,b,v){return _.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=$F?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(m,E,d)&&a.push(n.hi.updateTargetData(s,E))});let l=ji(),u=Ie();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(WF(s,o,e.documentUpdates).next(d=>{l=d.Ls,u=d.ks})),!r.isEqual(ye.min())){const d=n.hi.getLastRemoteSnapshotVersion(s).next(f=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return J.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Fs=i,s))}function WF(t,e,n){let r=Ie(),i=Ie();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ji();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ye.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):se(w_,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ls:o,ks:i}})}function GF(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=a_),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function KF(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(s=>s?(i=s,J.resolve(i)):n.hi.allocateTargetId(r).next(o=>(i=new gs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function ly(t,e,n){const r=_e(t),i=r.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Cl(o))throw o;se(w_,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function YE(t,e,n){const r=_e(t);let i=ye.min(),s=Ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const f=_e(l),m=f.Ms.get(d);return m!==void 0?J.resolve(f.Fs.get(m)):f.hi.getTargetData(u,d)}(r,o,Yr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:ye.min(),n?s:Ie())).next(a=>(JF(r,DV(e),a),{documents:a,qs:s})))}function JF(t,e,n){let r=t.xs.get(e)||ye.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.xs.set(e,r)}class XE{constructor(){this.activeTargetIds=UV()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QF{constructor(){this.Fo=new XE,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new XE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="ConnectivityMonitor";class eS{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){se(ZE,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){se(ZE,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kd=null;function cy(){return kd===null?kd=function(){return 268435456+Math.round(2147483648*Math.random())}():kd++,"0x"+kd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="RestConnection",XF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ZF{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Qh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const o=cy(),a=this.Go(e,n.toUriEncodedString());se(vm,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,s);const{host:u}=new URL(a),d=Tl(u);return this.jo(e,a,l,r,d).then(f=>(se(vm,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Li(vm,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Jo(e,n,r,i,s,o){return this.Wo(e,n,r,i,s)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+kl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,n){const r=XF[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt="WebChannelConnection";class t4 extends ZF{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,s){const o=cy();return new Promise((a,l)=>{const u=new HC;u.setWithCredentials(!0),u.listenOnce(WC.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case oh.NO_ERROR:const f=u.getResponseJson();se(Qt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case oh.TIMEOUT:se(Qt,`RPC '${e}' ${o} timed out`),l(new re(G.DEADLINE_EXCEEDED,"Request time out"));break;case oh.HTTP_ERROR:const m=u.getStatus();if(se(Qt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let E=u.getResponseJson();Array.isArray(E)&&(E=E[0]);const T=E==null?void 0:E.error;if(T&&T.status&&T.message){const _=function(v){const g=v.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(g)>=0?g:G.UNKNOWN}(T.status);l(new re(_,T.message))}else l(new re(G.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new re(G.UNAVAILABLE,"Connection failed."));break;default:me(9055,{c_:e,streamId:o,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{se(Qt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);se(Qt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",d,r,15)})}P_(e,n,r){const i=cy(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=JC(),a=KC(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");se(Qt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const f=o.createWebChannel(d,l);this.T_(f);let m=!1,E=!1;const T=new e4({Ho:b=>{E?se(Qt,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(m||(se(Qt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),se(Qt,`RPC '${e}' stream ${i} sending:`,b),f.send(b))},Yo:()=>f.close()}),_=(b,v,g)=>{b.listen(v,k=>{try{g(k)}catch(j){setTimeout(()=>{throw j},0)}})};return _(f,lc.EventType.OPEN,()=>{E||(se(Qt,`RPC '${e}' stream ${i} transport opened.`),T.s_())}),_(f,lc.EventType.CLOSE,()=>{E||(E=!0,se(Qt,`RPC '${e}' stream ${i} transport closed`),T.__(),this.I_(f))}),_(f,lc.EventType.ERROR,b=>{E||(E=!0,Li(Qt,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),T.__(new re(G.UNAVAILABLE,"The operation could not be completed")))}),_(f,lc.EventType.MESSAGE,b=>{var v;if(!E){const g=b.data[0];je(!!g,16349);const k=g,j=(k==null?void 0:k.error)||((v=k[0])===null||v===void 0?void 0:v.error);if(j){se(Qt,`RPC '${e}' stream ${i} received error:`,j);const U=j.status;let z=function(N){const D=_t[N];if(D!==void 0)return OA(D)}(U),R=j.message;z===void 0&&(z=G.INTERNAL,R="Unknown error status: "+U+" with message "+j.message),E=!0,T.__(new re(z,R)),f.close()}else se(Qt,`RPC '${e}' stream ${i} received:`,g),T.a_(g)}}),_(a,GC.STAT_EVENT,b=>{b.stat===Yg.PROXY?se(Qt,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===Yg.NOPROXY&&se(Qt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.o_()},0),T}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function _m(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t){return new sF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="PersistentStream";class GA{constructor(e,n,r,i,s,o,a,l){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new WA(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(Mi(n.toString()),Mi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new re(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return se(tS,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(se(tS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class n4 extends GA{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=lF(this.serializer,e),r=function(s){if(!("targetChange"in s))return ye.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ye.min():o.readTime?Xr(o.readTime):ye.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=ay(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=ny(l)?{documents:dF(s,l)}:{query:hF(s,l).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=MA(s,o.resumeToken);const u=iy(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ye.min())>0){a.readTime=tf(s,o.snapshotVersion.toTimestamp());const u=iy(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=pF(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=ay(this.serializer),n.removeTarget=e,this.k_(n)}}class r4 extends GA{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=uF(e.writeResults,e.commitTime),r=Xr(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=ay(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>cF(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{}class s4 extends i4{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new re(G.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,sy(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new re(G.UNKNOWN,s.toString())})}Jo(e,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,sy(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(G.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class o4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Mi(n),this._a=!1):se("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o="RemoteStore";class a4{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Yo(this)&&(se($o,"Restarting streams for network reachability change."),await async function(l){const u=_e(l);u.Ia.add(4),await Au(u),u.Aa.set("Unknown"),u.Ia.delete(4),await Zf(u)}(this))})}),this.Aa=new o4(r,i)}}async function Zf(t){if(Yo(t))for(const e of t.da)await e(!0)}async function Au(t){for(const e of t.da)await e(!1)}function KA(t,e){const n=_e(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),b_(n)?T_(n):Pl(n).x_()&&S_(n,e))}function E_(t,e){const n=_e(t),r=Pl(n);n.Ta.delete(e),r.x_()&&JA(n,e),n.Ta.size===0&&(r.x_()?r.B_():Yo(n)&&n.Aa.set("Unknown"))}function S_(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Pl(t).H_(e)}function JA(t,e){t.Ra.$e(e),Pl(t).Y_(e)}function T_(t){t.Ra=new tF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Pl(t).start(),t.Aa.aa()}function b_(t){return Yo(t)&&!Pl(t).M_()&&t.Ta.size>0}function Yo(t){return _e(t).Ia.size===0}function QA(t){t.Ra=void 0}async function l4(t){t.Aa.set("Online")}async function c4(t){t.Ta.forEach((e,n)=>{S_(t,e)})}async function u4(t,e){QA(t),b_(t)?(t.Aa.la(e),T_(t)):t.Aa.set("Unknown")}async function d4(t,e,n){if(t.Aa.set("Online"),e instanceof DA&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))}(t,e)}catch(r){se($o,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await rf(t,r)}else if(e instanceof uh?t.Ra.Ye(e):e instanceof NA?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ye.min()))try{const r=await HA(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Ra.Pt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.Ta.get(u);d&&s.Ta.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=s.Ta.get(l);if(!d)return;s.Ta.set(l,d.withResumeToken(Vt.EMPTY_BYTE_STRING,d.snapshotVersion)),JA(s,l);const f=new gs(d.target,l,u,d.sequenceNumber);S_(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){se($o,"Failed to raise snapshot:",r),await rf(t,r)}}async function rf(t,e,n){if(!Cl(e))throw e;t.Ia.add(1),await Au(t),t.Aa.set("Offline"),n||(n=()=>HA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se($o,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Zf(t)})}function YA(t,e){return e().catch(n=>rf(t,n,e))}async function ep(t){const e=_e(t),n=Vs(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:a_;for(;h4(e);)try{const i=await GF(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,f4(e,i)}catch(i){await rf(e,i)}XA(e)&&ZA(e)}function h4(t){return Yo(t)&&t.Pa.length<10}function f4(t,e){t.Pa.push(e);const n=Vs(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function XA(t){return Yo(t)&&!Vs(t).M_()&&t.Pa.length>0}function ZA(t){Vs(t).start()}async function p4(t){Vs(t).na()}async function m4(t){const e=Vs(t);for(const n of t.Pa)e.X_(n.mutations)}async function g4(t,e,n){const r=t.Pa.shift(),i=p_.from(r,e,n);await YA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ep(t)}async function y4(t,e){e&&Vs(t).Z_&&await async function(r,i){if(function(o){return ZV(o)&&o!==G.ABORTED}(i.code)){const s=r.Pa.shift();Vs(r).N_(),await YA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await ep(r)}}(t,e),XA(t)&&ZA(t)}async function nS(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),se($o,"RemoteStore received new credentials");const r=Yo(n);n.Ia.add(3),await Au(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Zf(n)}async function v4(t,e){const n=_e(t);e?(n.Ia.delete(2),await Zf(n)):e||(n.Ia.add(2),await Au(n),n.Aa.set("Unknown"))}function Pl(t){return t.Va||(t.Va=function(n,r,i){const s=_e(n);return s.ia(),new n4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:l4.bind(null,t),e_:c4.bind(null,t),n_:u4.bind(null,t),J_:d4.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),b_(t)?T_(t):t.Aa.set("Unknown")):(await t.Va.stop(),QA(t))})),t.Va}function Vs(t){return t.ma||(t.ma=function(n,r,i){const s=_e(n);return s.ia(),new r4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:p4.bind(null,t),n_:y4.bind(null,t),ea:m4.bind(null,t),ta:g4.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await ep(t)):(await t.ma.stop(),t.Pa.length>0&&(se($o,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new k_(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function I_(t,e){if(Mi("AsyncQueue",`${e}: ${t}`),Cl(t))return new re(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{static emptySet(e){return new Ga(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||de.comparator(n.key,r.key):(n,r)=>de.comparator(n.key,r.key),this.keyedMap=cc(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ga)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ga;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(){this.fa=new ct(de.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):me(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class hl{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new hl(e,n,Ga.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class w4{constructor(){this.queries=iS(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=_e(n),s=i.queries;i.queries=iS(),s.forEach((o,a)=>{for(const l of a.wa)l.onError(r)})})(this,new re(G.ABORTED,"Firestore shutting down"))}}function iS(){return new Qo(t=>wA(t),Gf)}async function C_(t,e){const n=_e(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new _4,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=I_(o,`Initialization of query '${wa(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&P_(n)}async function A_(t,e){const n=_e(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function E4(t,e){const n=_e(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&P_(n)}function S4(t,e,n){const r=_e(t),i=r.queries.get(e);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(e)}function P_(t){t.Da.forEach(e=>{e.next()})}var uy,sS;(sS=uy||(uy={})).Fa="default",sS.Cache="cache";class x_{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new hl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=hl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==uy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e){this.key=e}}class t1{constructor(e){this.key=e}}class T4{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ie(),this.mutatedKeys=Ie(),this.Xa=EA(e),this.eu=new Ga(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new rS,i=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const m=i.get(d),E=Kf(this.query,f)?f:null,T=!!m&&this.mutatedKeys.has(m.key),_=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let b=!1;m&&E?m.data.isEqual(E.data)?T!==_&&(r.track({type:3,doc:E}),b=!0):this.iu(m,E)||(r.track({type:2,doc:E}),b=!0,(l&&this.Xa(E,l)>0||u&&this.Xa(E,u)<0)&&(a=!0)):!m&&E?(r.track({type:0,doc:E}),b=!0):m&&!E&&(r.track({type:1,doc:m}),b=!0,(l||u)&&(a=!0)),b&&(E?(o=o.add(E),s=_?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((d,f)=>function(E,T){const _=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{At:b})}};return _(E)-_(T)}(d.type,f.type)||this.Xa(d.doc,f.doc)),this.su(r),i=i!=null&&i;const a=n&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,u=l!==this.Ya;return this.Ya=l,o.length!==0||u?{snapshot:new hl(this.query,e.eu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new rS,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ie(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new t1(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new e1(r))}),n}uu(e){this.Ha=e.qs,this.Za=Ie();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return hl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const R_="SyncEngine";class b4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class k4{constructor(e){this.key=e,this.lu=!1}}class I4{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Qo(a=>wA(a),Gf),this.Tu=new Map,this.Iu=new Set,this.du=new ct(de.comparator),this.Eu=new Map,this.Au=new y_,this.Ru={},this.Vu=new Map,this.mu=dl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function C4(t,e,n=!0){const r=a1(t);let i;const s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await n1(r,e,n,!0),i}async function A4(t,e){const n=a1(t);await n1(n,e,!0,!1)}async function n1(t,e,n,r){const i=await KF(t.localStore,Yr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await P4(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&KA(t.remoteStore,i),a}async function P4(t,e,n,r,i){t.gu=(f,m,E)=>async function(_,b,v,g){let k=b.view.nu(v);k.Ds&&(k=await YE(_.localStore,b.query,!1).then(({documents:R})=>b.view.nu(R,k)));const j=g&&g.targetChanges.get(b.targetId),U=g&&g.targetMismatches.get(b.targetId)!=null,z=b.view.applyChanges(k,_.isPrimaryClient,j,U);return aS(_,b.targetId,z._u),z.snapshot}(t,f,m,E);const s=await YE(t.localStore,e,!0),o=new T4(e,s.qs),a=o.nu(s.documents),l=Cu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);aS(t,n,u._u);const d=new b4(e,n,o);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),u.snapshot}async function x4(t,e,n){const r=_e(t),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!Gf(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ly(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&E_(r.remoteStore,i.targetId),dy(r,i.targetId)}).catch(Il)):(dy(r,i.targetId),await ly(r.localStore,i.targetId,!0))}async function R4(t,e){const n=_e(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),E_(n.remoteStore,r.targetId))}async function O4(t,e,n){const r=F4(t);try{const i=await function(o,a){const l=_e(o),u=We.now(),d=a.reduce((E,T)=>E.add(T.key),Ie());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",E=>{let T=ji(),_=Ie();return l.Os.getEntries(E,d).next(b=>{T=b,T.forEach((v,g)=>{g.isValidDocument()||(_=_.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(E,T)).next(b=>{f=b;const v=[];for(const g of a){const k=KV(g,f.get(g.key).overlayedDocument);k!=null&&v.push(new Js(g.key,k,hA(k.value.mapValue),sr.exists(!0)))}return l.mutationQueue.addMutationBatch(E,u,v,a)}).next(b=>{m=b;const v=b.applyToLocalDocumentSet(f,_);return l.documentOverlayCache.saveOverlays(E,b.batchId,v)})}).then(()=>({batchId:m.batchId,changes:TA(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ru[o.currentUser.toKey()];u||(u=new ct(Se)),u=u.insert(a,l),o.Ru[o.currentUser.toKey()]=u}(r,i.batchId,n),await Pu(r,i.changes),await ep(r.remoteStore)}catch(i){const s=I_(i,"Failed to persist write");n.reject(s)}}async function r1(t,e){const n=_e(t);try{const r=await HF(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Eu.get(s);o&&(je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?je(o.lu,14607):i.removedDocuments.size>0&&(je(o.lu,42227),o.lu=!1))}),await Pu(n,r,e)}catch(r){await Il(r)}}function oS(t,e,n){const r=_e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=_e(o);l.onlineState=a;let u=!1;l.queries.forEach((d,f)=>{for(const m of f.wa)m.va(a)&&(u=!0)}),u&&P_(l)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function N4(t,e,n){const r=_e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),s=i&&i.key;if(s){let o=new ct(de.comparator);o=o.insert(s,en.newNoDocument(s,ye.min()));const a=Ie().add(s),l=new Yf(ye.min(),new Map,new ct(Se),o,a);await r1(r,l),r.du=r.du.remove(s),r.Eu.delete(e),O_(r)}else await ly(r.localStore,e,!1).then(()=>dy(r,e,n)).catch(Il)}async function D4(t,e){const n=_e(t),r=e.batch.batchId;try{const i=await qF(n.localStore,e);s1(n,r,null),i1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Pu(n,i)}catch(i){await Il(i)}}async function M4(t,e,n){const r=_e(t);try{const i=await function(o,a){const l=_e(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(je(f!==null,37113),d=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);s1(r,e,n),i1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Pu(r,i)}catch(i){await Il(i)}}function i1(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function s1(t,e,n){const r=_e(t);let i=r.Ru[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function dy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||o1(t,r)})}function o1(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(E_(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),O_(t))}function aS(t,e,n){for(const r of n)r instanceof e1?(t.Au.addReference(r.key,e),L4(t,r)):r instanceof t1?(se(R_,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||o1(t,r.key)):me(19791,{yu:r})}function L4(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(se(R_,"New document in limbo: "+n),t.Iu.add(r),O_(t))}function O_(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new de(Ke.fromString(e)),r=t.mu.next();t.Eu.set(r,new k4(n)),t.du=t.du.insert(n,r),KA(t.remoteStore,new gs(Yr(Wf(n.path)),r,"TargetPurposeLimboResolution",zf.ue))}}async function Pu(t,e,n){const r=_e(t),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,l)=>{o.push(r.gu(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=__.Es(l.targetId,u);s.push(f)}}))}),await Promise.all(o),r.hu.J_(i),await async function(l,u){const d=_e(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>J.forEach(u,m=>J.forEach(m.Is,E=>d.persistence.referenceDelegate.addReference(f,m.targetId,E)).next(()=>J.forEach(m.ds,E=>d.persistence.referenceDelegate.removeReference(f,m.targetId,E)))))}catch(f){if(!Cl(f))throw f;se(w_,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const E=d.Fs.get(m),T=E.snapshotVersion,_=E.withLastLimboFreeSnapshotVersion(T);d.Fs=d.Fs.insert(m,_)}}}(r.localStore,s))}async function j4(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){se(R_,"User change. New user:",e.toKey());const r=await qA(n.localStore,e);n.currentUser=e,function(s,o){s.Vu.forEach(a=>{a.forEach(l=>{l.reject(new re(G.CANCELLED,o))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Pu(n,r.Bs)}}function V4(t,e){const n=_e(t),r=n.Eu.get(e);if(r&&r.lu)return Ie().add(r.key);{let i=Ie();const s=n.Tu.get(e);if(!s)return i;for(const o of s){const a=n.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function a1(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=r1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=V4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=N4.bind(null,e),e.hu.J_=E4.bind(null,e.eventManager),e.hu.pu=S4.bind(null,e.eventManager),e}function F4(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=D4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=M4.bind(null,e),e}class sf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return zF(this.persistence,new UF,e.initialUser,this.serializer)}Du(e){return new zA(v_.Vi,this.serializer)}bu(e){return new QF}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sf.provider={build:()=>new sf};class U4 extends sf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){je(this.persistence.referenceDelegate instanceof nf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new kF(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new zA(r=>nf.Vi(r,n),this.serializer)}}class hy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>oS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=j4.bind(null,this.syncEngine),await v4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new w4}()}createDatastore(e){const n=Xf(e.databaseInfo.databaseId),r=function(s){return new t4(s)}(e.databaseInfo);return function(s,o,a,l){return new s4(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new a4(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>oS(this.syncEngine,n,0),function(){return eS.C()?new eS:new YF}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,d){const f=new I4(i,s,o,a,l,u);return d&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=_e(i);se($o,"RemoteStore shutting down."),s.Ia.add(5),await Au(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}hy.provider={build:()=>new hy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Mi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="FirestoreClient";class $4{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Xt.UNAUTHENTICATED,this.clientId=$f.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{se(Fs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(se(Fs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=I_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function wm(t,e){t.asyncQueue.verifyOperationInProgress(),se(Fs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await qA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Li("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{se("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Li("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function lS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await B4(t);se(Fs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>nS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>nS(e.remoteStore,i)),t._onlineComponents=e}async function B4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se(Fs,"Using user provided OfflineComponentProvider");try{await wm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===G.FAILED_PRECONDITION||i.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Li("Error using user provided cache. Falling back to memory cache: "+n),await wm(t,new sf)}}else se(Fs,"Using default OfflineComponentProvider"),await wm(t,new U4(void 0));return t._offlineComponents}async function l1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se(Fs,"Using user provided OnlineComponentProvider"),await lS(t,t._uninitializedComponentsProvider._online)):(se(Fs,"Using default OnlineComponentProvider"),await lS(t,new hy))),t._onlineComponents}function z4(t){return l1(t).then(e=>e.syncEngine)}async function of(t){const e=await l1(t),n=e.eventManager;return n.onListen=C4.bind(null,e.syncEngine),n.onUnlisten=x4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=A4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=R4.bind(null,e.syncEngine),n}function q4(t,e,n={}){const r=new Ti;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new N_({next:m=>{d.Ou(),o.enqueueAndForget(()=>A_(s,f));const E=m.docs.has(a);!E&&m.fromCache?u.reject(new re(G.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&m.fromCache&&l&&l.source==="server"?u.reject(new re(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new x_(Wf(a.path),d,{includeMetadataChanges:!0,ka:!0});return C_(s,f)}(await of(t),t.asyncQueue,e,n,r)),r.promise}function H4(t,e,n={}){const r=new Ti;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new N_({next:m=>{d.Ou(),o.enqueueAndForget(()=>A_(s,f)),m.fromCache&&l.source==="server"?u.reject(new re(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new x_(a,d,{includeMetadataChanges:!0,ka:!0});return C_(s,f)}(await of(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="firestore.googleapis.com",uS=!0;class dS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=u1,this.ssl=uS}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:uS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=BA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TF)throw new re(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=c1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new re(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new re(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new re(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new XC;switch(r.type){case"firstParty":return new nV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=cS.get(n);r&&(se("ComponentProvider","Removing Datastore"),cS.delete(n),r.terminate())}(this),Promise.resolve()}}function d1(t,e,n,r={}){var i;t=hn(t,tp);const s=Tl(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;s&&(eC(`https://${l}`),tC("Firestore",!0)),o.host!==u1&&o.host!==l&&Li("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:r});if(!jo(u,a)&&(t._setSettings(u),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=Xt.MOCK_USER;else{d=lM(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new re(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Xt(m)}t._authCredentials=new Zj(new YC(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ti(this.firestore,e,this._query)}}class it{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new it(this.firestore,e,this._key)}toJSON(){return{type:it._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ku(n,it._jsonSchema))return new it(e,r||null,new de(Ke.fromString(n.referencePath)))}}it._jsonSchemaVersion="firestore/documentReference/1.0",it._jsonSchema={type:St("string",it._jsonSchemaVersion),referencePath:St("string")};class bi extends ti{constructor(e,n,r){super(e,n,Wf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new it(this.firestore,null,new de(e))}withConverter(e){return new bi(this.firestore,e,this._path)}}function Cn(t,e,...n){if(t=lt(t),eA("collection","path",e),t instanceof tp){const r=Ke.fromString(e,...n);return bE(r),new bi(t,null,r)}{if(!(t instanceof it||t instanceof bi))throw new re(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ke.fromString(e,...n));return bE(r),new bi(t.firestore,null,r)}}function dr(t,e,...n){if(t=lt(t),arguments.length===1&&(e=$f.newId()),eA("doc","path",e),t instanceof tp){const r=Ke.fromString(e,...n);return TE(r),new it(t,null,new de(r))}{if(!(t instanceof it||t instanceof bi))throw new re(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ke.fromString(e,...n));return TE(r),new it(t.firestore,t instanceof bi?t.converter:null,new de(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="AsyncQueue";class fS{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new WA(this,"async_queue_retry"),this.oc=()=>{const r=_m();r&&se(hS,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=_m();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=_m();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Ti;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Cl(e))throw e;se(hS,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Mi("INTERNAL UNHANDLED ERROR: ",pS(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=k_.createAndSchedule(this,e,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&me(47125,{hc:pS(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function pS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class ei extends tp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new fS,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fS(e),this._firestoreClient=void 0,await e}}}function h1(t,e){const n=typeof t=="object"?t:sC(),r=typeof t=="string"?t:Qh,i=Kv(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=oM("firestore");s&&d1(i,...s)}return i}function xu(t){if(t._terminated)throw new re(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||W4(t),t._firestoreClient}function W4(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,d){return new vV(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,c1(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new $4(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ln(Vt.fromBase64String(e))}catch(n){throw new re(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ln(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ku(e,Ln._jsonSchema))return Ln.fromBase64String(e.bytes)}}Ln._jsonSchemaVersion="firestore/bytes/1.0",Ln._jsonSchema={type:St("string",Ln._jsonSchemaVersion),bytes:St("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ir._jsonSchemaVersion}}static fromJSON(e){if(ku(e,Ir._jsonSchema))return new Ir(e.latitude,e.longitude)}}Ir._jsonSchemaVersion="firestore/geoPoint/1.0",Ir._jsonSchema={type:St("string",Ir._jsonSchemaVersion),latitude:St("number"),longitude:St("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Cr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ku(e,Cr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Cr(e.vectorValues);throw new re(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Cr._jsonSchemaVersion="firestore/vectorValue/1.0",Cr._jsonSchema={type:St("string",Cr._jsonSchemaVersion),vectorValues:St("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=/^__.*__$/;class K4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Js(e,this.data,this.fieldMask,n,this.fieldTransforms):new Iu(e,this.data,n,this.fieldTransforms)}}class f1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Js(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function p1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ec:t})}}class D_{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new D_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return af(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(p1(this.Ec)&&G4.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class J4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xf(e)}Dc(e,n,r,i=!1){return new D_({Ec:e,methodName:n,bc:r,path:Lt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function np(t){const e=t._freezeSettings(),n=Xf(t._databaseId);return new J4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function m1(t,e,n,r,i,s={}){const o=t.Dc(s.merge||s.mergeFields?2:0,e,n,i);L_("Data must be an object, but it was:",o,r);const a=g1(r,o);let l,u;if(s.merge)l=new Vn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const m=fy(e,f,n);if(!o.contains(m))throw new re(G.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);v1(d,m)||d.push(m)}l=new Vn(d),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new K4(new Sn(a),l,u)}class rp extends Ou{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rp}}class M_ extends Ou{_toFieldTransform(e){return new qV(e.path,new ou)}isEqual(e){return e instanceof M_}}function Q4(t,e,n,r){const i=t.Dc(1,e,n);L_("Data must be an object, but it was:",i,r);const s=[],o=Sn.empty();Ks(r,(l,u)=>{const d=j_(e,l,n);u=lt(u);const f=i.gc(d);if(u instanceof rp)s.push(d);else{const m=Nu(u,f);m!=null&&(s.push(d),o.set(d,m))}});const a=new Vn(s);return new f1(o,a,i.fieldTransforms)}function Y4(t,e,n,r,i,s){const o=t.Dc(1,e,n),a=[fy(e,r,n)],l=[i];if(s.length%2!=0)throw new re(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(fy(e,s[m])),l.push(s[m+1]);const u=[],d=Sn.empty();for(let m=a.length-1;m>=0;--m)if(!v1(u,a[m])){const E=a[m];let T=l[m];T=lt(T);const _=o.gc(E);if(T instanceof rp)u.push(E);else{const b=Nu(T,_);b!=null&&(u.push(E),d.set(E,b))}}const f=new Vn(u);return new f1(d,f,o.fieldTransforms)}function X4(t,e,n,r=!1){return Nu(n,t.Dc(r?4:3,e))}function Nu(t,e){if(y1(t=lt(t)))return L_("Unsupported field value:",e,t),g1(t,e);if(t instanceof Ou)return function(r,i){if(!p1(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Nu(a,i.yc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $V(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=We.fromDate(r);return{timestampValue:tf(i.serializer,s)}}if(r instanceof We){const s=new We(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:tf(i.serializer,s)}}if(r instanceof Ir)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ln)return{bytesValue:MA(i.serializer,r._byteString)};if(r instanceof it){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:g_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Cr)return function(o,a){return{mapValue:{fields:{[uA]:{stringValue:dA},[Yh]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return h_(a.serializer,u)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${Bf(r)}`)}(t,e)}function g1(t,e){const n={};return iA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ks(t,(r,i)=>{const s=Nu(i,e.Vc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function y1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof Ir||t instanceof Ln||t instanceof it||t instanceof Ou||t instanceof Cr)}function L_(t,e,n){if(!y1(n)||!nA(n)){const r=Bf(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function fy(t,e,n){if((e=lt(e))instanceof Ru)return e._internalPath;if(typeof e=="string")return j_(t,e);throw af("Field path arguments must be of type string or ",t,!1,void 0,n)}const Z4=new RegExp("[~\\*/\\[\\]]");function j_(t,e,n){if(e.search(Z4)>=0)throw af(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ru(...e.split("."))._internalPath}catch{throw af(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function af(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new re(G.INVALID_ARGUMENT,a+t+l)}function v1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new it(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new e3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ip("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class e3 extends _1{data(){return super.data()}}function ip(t,e){return typeof e=="string"?j_(t,e):e instanceof Ru?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class V_{}class sp extends V_{}function ki(t,e,...n){let r=[];e instanceof V_&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof op).length,a=s.filter(l=>l instanceof Du).length;if(o>1||o>0&&a>0)throw new re(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Du extends sp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Du(e,n,r)}_apply(e){const n=this._parse(e);return S1(e._query,n),new ti(e.firestore,e.converter,ry(e._query,n))}_parse(e){const n=np(e.firestore);return function(s,o,a,l,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new re(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){yS(f,d);const T=[];for(const _ of f)T.push(gS(l,s,_));m={arrayValue:{values:T}}}else m=gS(l,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||yS(f,d),m=X4(a,o,f,d==="in"||d==="not-in");return Et.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function E1(t,e,n){const r=e,i=ip("where",t);return Du._create(i,r,n)}class op extends V_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new op(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Or.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)S1(o,l),o=ry(o,l)}(e._query,n),new ti(e.firestore,e.converter,ry(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ap extends sp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ap(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new re(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new re(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new su(s,o)}(e._query,this._field,this._direction);return new ti(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Al(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Us(t,e="asc"){const n=e,r=ip("orderBy",t);return ap._create(r,n)}class lp extends sp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new lp(e,n,r)}_apply(e){return new ti(e.firestore,e.converter,Zh(e._query,this._limit,this._limitType))}}function Bo(t){return aV("limit",t),lp._create("limit",t,"F")}function gS(t,e,n){if(typeof(n=lt(n))=="string"){if(n==="")throw new re(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_A(e)&&n.indexOf("/")!==-1)throw new re(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ke.fromString(n));if(!de.isDocumentKey(r))throw new re(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return OE(t,new de(r))}if(n instanceof it)return OE(t,n._key);throw new re(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bf(n)}.`)}function yS(t,e){if(!Array.isArray(t)||t.length===0)throw new re(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function S1(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new re(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class T1{convertValue(e,n="none"){switch(js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ks(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Yh].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ft(o.doubleValue));return new Cr(s)}convertGeoPoint(e){return new Ir(ft(e.latitude),ft(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Hf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ru(e));default:return null}}convertTimestamp(e){const n=Ms(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ke.fromString(e);je($A(r),9688,{name:e});const i=new ll(r.get(1),r.get(3)),s=new de(r.popFirst(5));return i.isEqual(n)||Mi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class La{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ps extends _1{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ip("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ps._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ps._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ps._jsonSchema={type:St("string",Ps._jsonSchemaVersion),bundleSource:St("string","DocumentSnapshot"),bundleName:St("string"),bundle:St("string")};class xc extends Ps{data(e={}){return super.data(e)}}class xs{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new La(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xc(this._firestore,this._userDataWriter,r.key,r,new La(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new xc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new La(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new xc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new La(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:t3(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$f.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function t3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(t){t=hn(t,it);const e=hn(t.firestore,ei);return q4(xu(e),t._key).then(n=>k1(e,t,n))}xs._jsonSchemaVersion="firestore/querySnapshot/1.0",xs._jsonSchema={type:St("string",xs._jsonSchemaVersion),bundleSource:St("string","QuerySnapshot"),bundleName:St("string"),bundle:St("string")};class U_ extends T1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,n)}}function py(t){t=hn(t,ti);const e=hn(t.firestore,ei),n=xu(e),r=new U_(e);return w1(t._query),H4(n,t._query).then(i=>new xs(e,r,t,i))}function Mu(t,e,n){t=hn(t,it);const r=hn(t.firestore,ei),i=b1(t.converter,e,n);return ju(r,[m1(np(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,sr.none())])}function Rc(t,e,n,...r){t=hn(t,it);const i=hn(t.firestore,ei),s=np(i);let o;return o=typeof(e=lt(e))=="string"||e instanceof Ru?Y4(s,"updateDoc",t._key,e,n,r):Q4(s,"updateDoc",t._key,e),ju(i,[o.toMutation(t._key,sr.exists(!0))])}function Ka(t){return ju(hn(t.firestore,ei),[new f_(t._key,sr.none())])}function Lu(t,e){const n=hn(t.firestore,ei),r=dr(t),i=b1(t.converter,e);return ju(n,[m1(np(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,sr.exists(!1))]).then(()=>r)}function Ar(t,...e){var n,r,i;t=lt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||mS(e[o])||(s=e[o++]);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(mS(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let l,u,d;if(t instanceof it)u=hn(t.firestore,ei),d=Wf(t._key.path),l={next:f=>{e[o]&&e[o](k1(u,t,f))},error:e[o+1],complete:e[o+2]};else{const f=hn(t,ti);u=hn(f.firestore,ei),d=f._query;const m=new U_(u);l={next:E=>{e[o]&&e[o](new xs(u,m,f,E))},error:e[o+1],complete:e[o+2]},w1(t._query)}return function(m,E,T,_){const b=new N_(_),v=new x_(E,b,T);return m.asyncQueue.enqueueAndForget(async()=>C_(await of(m),v)),()=>{b.Ou(),m.asyncQueue.enqueueAndForget(async()=>A_(await of(m),v))}}(xu(u),d,a,l)}function ju(t,e){return function(r,i){const s=new Ti;return r.asyncQueue.enqueueAndForget(async()=>O4(await z4(r),i,s)),s.promise}(xu(t),e)}function k1(t,e,n){const r=n.docs.get(e._key),i=new U_(t);return new Ps(t,i,e._key,r,new La(n.hasPendingWrites,n.fromCache),e.converter)}function fn(){return new M_("serverTimestamp")}(function(e,n=!0){(function(i){kl=i})(bl),sl(new Vo("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ei(new eV(r.getProvider("auth-internal")),new rV(o,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new re(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ll(u.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Cs(vE,_E,e),Cs(vE,_E,"esm2017")})();const n3=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:T1,Bytes:Ln,CollectionReference:bi,DocumentReference:it,DocumentSnapshot:Ps,FieldPath:Ru,FieldValue:Ou,Firestore:ei,FirestoreError:re,GeoPoint:Ir,Query:ti,QueryCompositeFilterConstraint:op,QueryConstraint:sp,QueryDocumentSnapshot:xc,QueryFieldFilterConstraint:Du,QueryLimitConstraint:lp,QueryOrderByConstraint:ap,QuerySnapshot:xs,SnapshotMetadata:La,Timestamp:We,VectorValue:Cr,_AutoId:$f,_ByteString:Vt,_DatabaseId:ll,_DocumentKey:de,_EmptyAuthCredentialsProvider:XC,_FieldPath:Lt,_cast:hn,_logWarn:Li,_validateIsNotUsedTogether:tA,addDoc:Lu,collection:Cn,connectFirestoreEmulator:d1,deleteDoc:Ka,doc:dr,ensureFirestoreConfigured:xu,executeWrite:ju,getDoc:F_,getDocs:py,getFirestore:h1,limit:Bo,onSnapshot:Ar,orderBy:Us,query:ki,serverTimestamp:fn,setDoc:Mu,updateDoc:Rc,where:E1},Symbol.toStringTag,{value:"Module"}));let Id;const $_=()=>{if(Id)return Id;const t={apiKey:"AIzaSyBCHiVGNM8ovM2e3hAjvUh_2r6Ee1h9gtY",authDomain:"ghost-p.firebaseapp.com",projectId:"ghost-p",storageBucket:"ghost-p.firebasestorage.app",messagingSenderId:"671841877324",appId:"1:671841877324:web:de94f129e628afea6423e9"};if(!t.apiKey||!t.projectId)return console.warn("Firebase config missing. App will work in limited mode."),null;try{return Id=iC(t),Id}catch(e){return console.error("Firebase initialization error:",e),null}};let Xl=null;const I1=()=>{const t=$_();return t?Xl||(Xl=Jj(t),L2(Xl,MC).catch(e=>{console.error("[Firebase] Failed to set auth persistence:",e)}),Xl):null},Ct=()=>{const t=$_();return t?h1(t):null},r3=Object.freeze(Object.defineProperty({__proto__:null,getFirebaseApp:$_,getFirebaseAuth:I1,getFirestoreDb:Ct},Symbol.toStringTag,{value:"Module"})),Em=async(t,e={})=>{var d,f,m;const n=Ct();if(!n||!(t!=null&&t.uid))return null;const r=dr(n,"users",t.uid),i=await F_(r),{plan:s,forcePlanOverride:o,...a}=e,l=i.exists()?{}:{createdAt:fn(),plan:t.isAnonymous?"guest":"trial",onboardingStage:t.isAnonymous?"demo":"signed_in"},u={uid:t.uid,email:t.email??null,displayName:t.displayName??null,photoURL:t.photoURL??null,authProvider:((f=(d=t.providerData)==null?void 0:d[0])==null?void 0:f.providerId)??(t.isAnonymous?"anonymous":"custom"),lastActiveAt:fn(),...l,...a};if(s!==void 0){const E=i.exists()?(m=i.data())==null?void 0:m.plan:null;(o||!E||E==="guest"||s!=="trial")&&(u.plan=s)}return await Mu(r,u,{merge:!0}),u},C1=()=>{const t=I1(),[e,n]=A.useState(null),[r,i]=A.useState(!0),[s,o]=A.useState(null),[a,l]=A.useState(!1);A.useEffect(()=>{if(!t){i(!1);return}let T=!0;const _=F2(t,async b=>{if(console.log("[useFirebaseAuth] Auth state changed:",{hasUser:!!b,isAnonymous:b==null?void 0:b.isAnonymous,uid:b==null?void 0:b.uid,email:b==null?void 0:b.email,isInitialLoad:T}),n(b),b)try{await Em(b)}catch(v){console.error("Failed to ensure user profile document:",v)}T&&!b&&(console.log("[useFirebaseAuth] No persisted session found, creating anonymous session"),sE(t).catch(v=>{console.error("Firebase anonymous auth failed:",v)})),T=!1,i(!1)});return()=>_()},[t]);const u=A.useCallback(async T=>{if(!t)throw new Error("Firebase not configured.");o(null),l(!0);try{return await T()}catch(_){let b=_;throw _.code==="auth/credential-already-in-use"?(b=new Error("This account is already linked to another Ghost session. Signing you in with your existing account..."),b.code=_.code):_.code==="auth/popup-closed-by-user"?(b=new Error("Sign-in popup was closed. Please try again."),b.code=_.code):_.code==="auth/popup-blocked"?(b=new Error("Pop-up was blocked by your browser. Please allow pop-ups for this site and try again."),b.code=_.code):_.code==="auth/network-request-failed"&&(b=new Error("Network error. Please check your connection and try again."),b.code=_.code),o(b),b}finally{l(!1)}},[t]),d=A.useCallback(()=>u(async()=>{var v,g,k;const T=(v=t.currentUser)==null?void 0:v.isAnonymous;(g=t.currentUser)==null||g.uid;const _=new pi;_.setCustomParameters({prompt:"select_account"});let b;try{t.currentUser&&t.currentUser.isAnonymous?b=await ij(t.currentUser,_):b=await cE(t,_)}catch(j){if(j.code==="auth/credential-already-in-use")console.log("[useFirebaseAuth] Google account already linked to another user, signing in with existing account"),(k=j.customData)==null||k.email,T&&await mm(t),b=await cE(t,_);else throw j}return await Em(b.user,{authProvider:"google",linkedFromAnonymous:!!T,plan:"trial"}),n(b.user),b.user}),[t,u]),f=A.useCallback(({email:T,password:_,displayName:b})=>u(async()=>{var j;if(!T||!_)throw new Error("Email and password are required.");const v=Jo.credential(T,_);let g;const k=(j=t.currentUser)==null?void 0:j.isAnonymous;try{if(t.currentUser&&t.currentUser.isAnonymous)g=await O2(t.currentUser,v);else try{g=await oE(t,T,_)}catch(U){if(U.code==="auth/user-not-found")g=await N2(t,T,_);else throw U}}catch(U){if(U.code==="auth/credential-already-in-use")console.log("[useFirebaseAuth] Email account already linked to another user, signing in with existing account"),k&&await mm(t),g=await oE(t,T,_);else throw U}return b&&g.user.displayName!==b&&await M2(g.user,{displayName:b}),await Em(g.user,{authProvider:"password",linkedFromAnonymous:!!k,plan:"trial"}),n(g.user),g.user}),[t,u]),m=A.useCallback(()=>t?u(async()=>{await mm(t),n(null),await sE(t).catch(T=>{console.error("Failed to start new anonymous session after sign out:",T)})}):Promise.resolve(),[t,u]),E=A.useMemo(()=>({upgradeWithGoogle:d,upgradeWithEmail:f,signOutUser:m,authError:s,isActionInFlight:a}),[s,a,m,f,d]);return{user:e,isLoading:r,...E}},i3=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState(0),i=A.useRef(null),s=A.useRef(null),o=A.useRef(null),a=A.useRef(null),l=A.useRef(null),u=A.useCallback(()=>{i.current&&(i.current.close(),i.current=null),l.current&&cancelAnimationFrame(l.current),a.current&&a.current.disconnect(),e(!1),r(0)},[]),d=A.useCallback(async()=>{try{const f=await navigator.mediaDevices.getUserMedia({audio:!0});i.current=new(window.AudioContext||window.webkitAudioContext),s.current=i.current.createAnalyser(),s.current.fftSize=256,a.current=i.current.createMediaStreamSource(f),a.current.connect(s.current),o.current=new Uint8Array(s.current.frequencyBinCount);const m=()=>{if(!s.current)return;s.current.getByteFrequencyData(o.current);const E=o.current.reduce((T,_)=>T+_,0)/o.current.length;r(E),l.current=requestAnimationFrame(m)};m(),e(!0)}catch(f){throw console.error("Error accessing microphone:",f),u(),f}},[u]);return A.useEffect(()=>u,[u]),{isActive:t,audioLevel:n,start:d,stop:u}},s3=["pending","chunking","indexed"],o3=(t,e={})=>{const[n,r]=A.useState([]),i=typeof e.maxSizeBytes=="number"?e.maxSizeBytes:(typeof e.maxDocuments=="number",Number.POSITIVE_INFINITY),s=Ct(),o=A.useMemo(()=>t?Cn(s,"users",t,"knowledgeBase"):null,[s,t]);A.useEffect(()=>{if(!o){r([]);return}return Ar(o,E=>{r(E.docs.map(T=>{const _=T.data(),b=_.createdAt&&typeof _.createdAt.toDate=="function"?_.createdAt.toDate().toISOString():new Date().toISOString();return{id:T.id,..._,createdAt:b}}).sort((T,_)=>new Date(_.createdAt)-new Date(T.createdAt)))})},[o]);const a=A.useMemo(()=>n.reduce((E,T)=>E+(T.size||0),0),[n]),l=A.useMemo(()=>Number.isFinite(i)?a>=i:!1,[a,i]),u=E=>Number.isFinite(i)?a+E>i:!1,d=async E=>{if(l)throw new Error("Knowledge base storage limit reached for your current plan.");if(u(E.size)){const b=g=>{if(g===0)return"0 B";const k=1024,j=["B","KB","MB","GB"],U=Math.floor(Math.log(g)/Math.log(k));return`${(g/Math.pow(k,U)).toFixed(1)} ${j[U]}`},v=i-a;throw new Error(`File size (${b(E.size)}) would exceed your plan's storage limit. You have ${b(v)} remaining of ${b(i)} total.`)}const T={name:E.name,size:E.size,type:E.type||"application/octet-stream",status:"pending"};if(!o){const b=crypto.randomUUID(),v=new Date().toISOString();r(g=>[{id:b,...T,createdAt:v},...g]),s3.slice(1).forEach((g,k)=>{setTimeout(()=>{r(j=>j.map(U=>U.id===b?{...U,status:g}:U))},(k+1)*1200)});return}const _={...T,createdAt:fn()};try{const b=await Lu(o,_),v=b.id,g=await f(E);await Rc(b,{status:"chunking"});try{console.log("[useKnowledgeBase] Starting RAG processing for document:",v);const{ragService:k}=await cr(async()=>{const{ragService:U}=await import("./ragService-CZtZrTmo.js");return{ragService:U}},[]),j=await k.storeDocument(t,v,g,{name:E.name,size:E.size,type:E.type});console.log("[useKnowledgeBase]  RAG processing complete:",j),await Rc(b,{status:"indexed",indexedAt:fn(),chunkCount:j.chunks})}catch(k){console.error("[useKnowledgeBase]  RAG processing failed:",k),await Rc(b,{status:"indexed",indexedAt:fn(),ragError:k.message})}}catch(b){throw console.error("Failed to upload knowledge base doc",b),b}},f=E=>new Promise((T,_)=>{const b=new FileReader;b.onload=k=>{const j=k.target.result;if(!j||j.trim().length===0){_(new Error("File appears to be empty or could not be read as text."));return}T(j)},b.onerror=k=>{console.error("[useKnowledgeBase] FileReader error:",k),_(new Error("Failed to read file. Please ensure it's a valid text file."))};const v=E.type||"",g=E.name.toLowerCase();v==="application/pdf"||g.endsWith(".pdf")?_(new Error("PDF processing not yet implemented. Please upload text files (.txt, .md, .docx).")):(v.startsWith("text/")||v==="application/json"||g.endsWith(".txt")||g.endsWith(".md")||g.endsWith(".markdown")||g.endsWith(".docx")||g.endsWith(".doc")||console.warn("[useKnowledgeBase] Unknown file type, attempting to read as text:",v,g),b.readAsText(E))});return{documents:n,uploadDocument:d,removeDocument:async E=>{if(o){try{try{const{ragService:T}=await cr(async()=>{const{ragService:_}=await import("./ragService-CZtZrTmo.js");return{ragService:_}},[]);await T.deleteDocument(t,E)}catch(T){console.warn("[useKnowledgeBase] Failed to delete from Pinecone:",T)}await Ka(dr(o,E))}catch(T){throw console.error("Failed to delete doc",T),T}return}r(T=>T.filter(_=>_.id!==E))},limitReached:l,totalSize:a,maxSizeBytes:i,maxDocuments:Number.isFinite(i)?void 0:Number.POSITIVE_INFINITY}},a3=({userId:t,sessionId:e,enabled:n=!0})=>{const[r,i]=A.useState([]),[s,o]=A.useState([]),[a,l]=A.useState(!1),u=A.useRef(null),d=A.useRef(null);return A.useEffect(()=>{if(u.current&&(u.current(),u.current=null),d.current&&(d.current(),d.current=null),i([]),o([]),l(!1),!n||!t||!e)return;l(!0);const f=Ct(),m=Cn(f,"users",t,"sessions",e,"transcript"),E=ki(m,Us("createdAt","desc"),Bo(200));u.current=Ar(E,b=>{const v=b.docs.map(g=>({id:g.id,...g.data()}));v.reverse(),i(v),l(!1)},b=>{console.error("Firestore transcript listener error:",b),l(!1)});const T=Cn(f,"users",t,"sessions",e,"suggestions"),_=ki(T,Us("createdAt","desc"),Bo(50));return d.current=Ar(_,b=>{const v=b.docs.map(g=>({id:g.id,...g.data()}));o(v)},b=>{console.error("Firestore suggestions listener error:",b)}),()=>{u.current&&(u.current(),u.current=null),d.current&&(d.current(),d.current=null)}},[t,e,n]),{transcript:r,suggestions:s,isLoading:a}},A1=({callId:t,enabled:e})=>{const[n,r]=A.useState([]),[i,s]=A.useState([]),[o,a]=A.useState(!0),[l,u]=A.useState(null);return A.useEffect(()=>{if(t&&t!==l&&(console.log("[useVapiCallPlayback] New call detected, clearing old data:",{oldCallId:l,newCallId:t}),r([]),s([]),u(t)),!e||!t){console.log("[useVapiCallPlayback] Disabled or no callId:",{enabled:e,callId:t}),a(!1);return}console.log("[useVapiCallPlayback] Setting up listeners for callId:",t);const d=Ct();if(!d){console.error("[useVapiCallPlayback] Firestore DB not available"),a(!1);return}a(!0);const f=Cn(d,"calls",t,"transcripts"),m=ki(f,Us("timestamp","desc"),Bo(100)),E=Ar(m,v=>{console.log("[useVapiCallPlayback] Transcript snapshot:",v.size,"docs");const g=v.docs.map(k=>{var U,z;const j=k.data();return{id:k.id,...j,timestamp:(U=j.timestamp)!=null&&U.toDate?j.timestamp.toDate():j.timestamp||new Date,createdAt:(z=j.createdAt)!=null&&z.toDate?j.createdAt.toDate():j.createdAt||new Date}});g.reverse(),console.log("[useVapiCallPlayback] Transcripts:",g.length),r(g),a(!1)},v=>{console.error("[useVapiCallPlayback] Error listening to Vapi call transcripts:",v),a(!1)}),T=Cn(d,"calls",t,"suggestions"),_=ki(T,Us("createdAt","desc"),Bo(50)),b=Ar(_,v=>{console.log("[useVapiCallPlayback]  Suggestions snapshot received:",v.size,"docs"),v.size>0&&console.log("[useVapiCallPlayback]  First suggestion doc:",v.docs[0].id,v.docs[0].data());const g=v.docs.map(k=>{var z,R,P;const j=k.data(),U={id:k.id,...j,timestamp:(z=j.timestamp)!=null&&z.toDate?j.timestamp.toDate():j.timestamp||new Date,createdAt:(R=j.createdAt)!=null&&R.toDate?j.createdAt.toDate():j.createdAt||new Date};return console.log("[useVapiCallPlayback] Processed suggestion:",U.id,(P=U.text)==null?void 0:P.substring(0,50)),U});g.sort((k,j)=>{const U=k.createdAt instanceof Date?k.createdAt.getTime():new Date(k.createdAt).getTime();return(j.createdAt instanceof Date?j.createdAt.getTime():new Date(j.createdAt).getTime())-U}),console.log("[useVapiCallPlayback]  Final suggestions array:",g.length,"items"),s(g),a(!1)},v=>{var g;if(console.error("[useVapiCallPlayback]  Error listening to Vapi call suggestions:",v),console.error("[useVapiCallPlayback] Error details:",v.code,v.message),v.code==="failed-precondition"||(g=v.message)!=null&&g.includes("index")){console.log("[useVapiCallPlayback]  Retrying with simple query (no orderBy)...");const k=ki(T);Ar(k,j=>{const U=j.docs.map(z=>{var P,N;const R=z.data();return{id:z.id,...R,timestamp:(P=R.timestamp)!=null&&P.toDate?R.timestamp.toDate():R.timestamp||new Date,createdAt:(N=R.createdAt)!=null&&N.toDate?R.createdAt.toDate():R.createdAt||new Date}});U.sort((z,R)=>{const P=z.createdAt instanceof Date?z.createdAt.getTime():new Date(z.createdAt).getTime();return(R.createdAt instanceof Date?R.createdAt.getTime():new Date(R.createdAt).getTime())-P}),s(U),a(!1)},j=>{console.error("[useVapiCallPlayback]  Retry also failed:",j),a(!1)})}else a(!1)});return()=>{E(),b()}},[t,e]),{transcript:n,suggestions:i,isLoading:o}},Sm=Number.POSITIVE_INFINITY,Tm={FREE:5*1024,STARTER:5*1024*1024,FOUNDERS:10*1024*1024},vS={free:{label:"Free",headline:"Try Ghost with essential features",description:"Perfect for testing and getting started. No credit card required.",badgeColor:"blue",upgradeCta:"Upgrade to unlock more features",entitlements:{kbSizeLimit:Tm.FREE,playbackLimit:5,analyticsAccess:!0,conciergeAccess:!1,desktopStealth:!1,apiAccess:!1}},starter:{label:"Starter",headline:"For individual professionals",description:"Everything you need for regular use with more capacity.",badgeColor:"green",upgradeCta:"Upgrade to Founders Club for lifetime access",entitlements:{kbSizeLimit:Tm.STARTER,playbackLimit:50,analyticsAccess:!0,conciergeAccess:!1,desktopStealth:!1,apiAccess:!1}},founders:{label:"Founders Club",headline:"Lifetime access for early believers",description:"Unlimited everything, one-time payment, lifetime access.",badgeColor:"green",upgradeCta:"Contact us for enterprise solutions",entitlements:{kbSizeLimit:Tm.FOUNDERS,playbackLimit:Sm,analyticsAccess:!0,conciergeAccess:!0,desktopStealth:!0,apiAccess:!1}},enterprise:{label:"Enterprise",headline:"Custom solutions for teams",description:"SAML/SCIM, SOC2 compliance, API access, dedicated support, and more.",badgeColor:"green",upgradeCta:"Contact sales for custom pricing",entitlements:{kbSizeLimit:Sm,playbackLimit:Sm,analyticsAccess:!0,conciergeAccess:!0,desktopStealth:!0,apiAccess:!0}}},Oc=t=>{const n={guest:"free",trial:"free",concierge:"enterprise"}[t]||t,r=vS[n]?n:"free";return vS[r]},P1=t=>{const[e,n]=A.useState(null),[r,i]=A.useState(!0);A.useEffect(()=>{if(!t){n(null),i(!1);return}const o=Ct();if(!o){n(null),i(!1);return}const a=Ar(dr(o,"users",t),l=>{n(l.exists()?l.data():null),i(!1)},l=>{console.error("Failed to load user profile:",l),i(!1)});return()=>a()},[t]);const s=A.useMemo(()=>e!=null&&e.plan?Oc(e.plan):Oc("guest"),[e==null?void 0:e.plan]);return{profile:e,planDetails:s,isLoading:r}},Cd={latencyTarget:500,persona:"Calm",triggers:{price:!0,competitor:!0,timeline:!0,security:!1},mode:"sales"},l3=t=>{const[e,n]=A.useState(Cd),[r,i]=A.useState(!0),[s,o]=A.useState(!1);A.useEffect(()=>{if(!t){i(!1);return}a(t)},[t]);const a=async d=>{try{const f=Ct(),m=dr(f,"users",d,"settings","app"),E=await F_(m);if(E.exists()){const T=E.data();n({...Cd,...T})}else await l(d,Cd,!0)}catch(f){console.error("Failed to load settings",f)}finally{i(!1)}},l=async(d,f,m=!1)=>{if(d){o(!0);try{const E=Ct(),T=dr(E,"users",d,"settings","app");await Mu(T,{...f,updatedAt:fn(),...m&&{createdAt:fn()}},{merge:!0}),n(f)}catch(E){throw console.error("Failed to save settings",E),E}finally{o(!1)}}},u=async d=>{const f={...e,...d};t?await l(t,f):n(f)};return{settings:e,isLoading:r,isSaving:s,updateSettings:u,resetSettings:()=>u(Cd)}},x1=({enabled:t=!0,volume:e=.3,rate:n=1.1,pitch:r=1})=>{const i=A.useRef(null),s=A.useRef(!1),o=A.useRef(0),a=A.useCallback(u=>{if(!t||!u||!u.trim())return;const d=Date.now();if(d-o.current<2e3){console.log("[TTS]  Skipping whisper (too soon after last one):",u);return}if(o.current=d,(i.current||window.speechSynthesis.speaking)&&window.speechSynthesis.cancel(),!("speechSynthesis"in window)){console.warn("[TTS] Speech synthesis not supported in this browser");return}const f=new SpeechSynthesisUtterance(u);f.volume=e,f.rate=n,f.pitch=r,f.lang="en-US";const m=window.speechSynthesis.getVoices(),E=m.find(T=>T.name.toLowerCase().includes("whisper")||T.name.toLowerCase().includes("soft")||T.name.toLowerCase().includes("samantha")||T.name.toLowerCase().includes("karen"));E&&(f.voice=E),s.current=!0,f.onend=()=>{s.current=!1,i.current=null},f.onerror=T=>{console.error("[TTS] Error:",T),s.current=!1,i.current=null},i.current=f,m.length===0?window.speechSynthesis.onvoiceschanged=()=>{window.speechSynthesis.speak(f)}:window.speechSynthesis.speak(f),console.log("[TTS] Whispering coaching cue:",u)},[t,e,n,r]),l=A.useCallback(()=>{i.current&&(window.speechSynthesis.cancel(),i.current=null,s.current=!1)},[]);return{whisper:a,stop:l,isSpeaking:s.current}},R1=(t,e=null)=>{const n=A.useMemo(()=>{try{return t&&t.entitlements||Oc("guest").entitlements}catch(u){return console.error("[useEntitlements] Error getting entitlements:",u),Oc("guest").entitlements}},[t]),r=A.useMemo(()=>{try{return((n==null?void 0:n.playbackLimit)??0)>0}catch(u){return console.error("[useEntitlements] Error checking session replay access:",u),!1}},[n]),i=A.useMemo(()=>{var u;try{if(!t||e!=null&&e.isAnonymous)return!1;const d=(u=t==null?void 0:t.label)==null?void 0:u.toLowerCase();return["free","starter","founders club","enterprise"].includes(d)}catch(d){return console.error("[useEntitlements] Error checking TTS whispers access:",d),!1}},[t,e]),s=A.useMemo(()=>{var u;try{if(!t||e!=null&&e.isAnonymous)return!1;const d=(u=t==null?void 0:t.label)==null?void 0:u.toLowerCase();return["free","starter","founders club","enterprise"].includes(d)}catch(d){return console.error("[useEntitlements] Error checking export access:",d),!1}},[t,e]),o=A.useMemo(()=>{try{return((n==null?void 0:n.kbSizeLimit)??(n==null?void 0:n.kbLimit)??0)>0}catch(u){return console.error("[useEntitlements] Error checking KB access:",u),!1}},[n]),a=A.useMemo(()=>{try{return(n==null?void 0:n.analyticsAccess)??!1}catch(u){return console.error("[useEntitlements] Error checking analytics access:",u),!1}},[n]),l=A.useMemo(()=>{try{const u=(n==null?void 0:n.playbackLimit)??0;return Number.isFinite(u)?u:null}catch(u){return console.error("[useEntitlements] Error getting playback limit:",u),0}},[n]);return{entitlements:n,canAccessSessionReplay:r,canUseTTSWhispers:i,canExportSessions:s,canAccessKnowledgeBase:o,canAccessAnalytics:a,playbackLimit:l,canViewSession:u=>{const d=(n==null?void 0:n.playbackLimit)??0;return Number.isFinite(d)?u<d:!0}}},B_=async(t,e,n={})=>{if(!t)return;const r=Ct();if(r)try{const i=Cn(r,"users",t,"analytics");await Lu(i,{eventType:e,...n,timestamp:fn(),createdAt:fn()})}catch(i){console.error("[Analytics] Failed to track event:",i)}},c3=async(t,e,n)=>{if(!(!t||!e))try{await B_(t,"session_metrics",{sessionId:e,...n})}catch(r){console.error("[Analytics] Failed to track session metrics:",r)}},u3=async(t,e,n,r={})=>{if(t)try{await B_(t,"feature_used",{feature:e,action:n,...r})}catch(i){console.error("[Analytics] Failed to track feature usage:",i)}},d3=t=>{const e=A.useCallback((i,s={})=>{t&&B_(t,i,s)},[t]),n=A.useCallback((i,s)=>{!t||!i||c3(t,i,s)},[t]),r=A.useCallback((i,s,o={})=>{t&&u3(t,i,s,o)},[t]);return{track:e,trackSession:n,trackFeature:r}},h3=t=>{const[e,n]=A.useState([]),[r,i]=A.useState(!0),[s,o]=A.useState(null);return A.useEffect(()=>{if(!t){n([]),i(!1);return}const d=Ct();if(!d){o("Firestore not available"),i(!1);return}i(!0),o(null);const f=Cn(d,"users",t,"playbooks"),m=ki(f,Us("createdAt","desc")),E=Ar(m,T=>{const _=T.docs.map(b=>{var v,g;return{id:b.id,...b.data(),createdAt:(v=b.data().createdAt)!=null&&v.toDate?b.data().createdAt.toDate():new Date(b.data().createdAt),updatedAt:(g=b.data().updatedAt)!=null&&g.toDate?b.data().updatedAt.toDate():b.data().updatedAt?new Date(b.data().updatedAt):null}});n(_),i(!1)},T=>{console.error("[usePlaybooks] Error fetching playbooks:",T),o(T.message),i(!1)});return()=>E()},[t]),{playbooks:e,isLoading:r,error:s,createPlaybook:async d=>{if(!t)throw new Error("User must be logged in to create playbooks");const f=Ct();if(!f)throw new Error("Firestore not available");const m=Cn(f,"users",t,"playbooks"),E=new Date,T={...d,createdAt:E,updatedAt:E};return(await Lu(m,T)).id},updatePlaybook:async(d,f)=>{if(!t)throw new Error("User must be logged in to update playbooks");const m=Ct();if(!m)throw new Error("Firestore not available");const E=dr(m,"users",t,"playbooks",d);await Rc(E,{...f,updatedAt:new Date})},deletePlaybook:async d=>{if(!t)throw new Error("User must be logged in to delete playbooks");const f=Ct();if(!f)throw new Error("Firestore not available");const m=dr(f,"users",t,"playbooks",d);await Ka(m)}}};var O1={};function _S(t,e){if(t==null)return{};var n,r,i=function(o,a){if(o==null)return{};var l={};for(var u in o)if({}.hasOwnProperty.call(o,u)){if(a.indexOf(u)!==-1)continue;l[u]=o[u]}return l}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Re(t){return Re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(t)}function N1(t){var e=function(n,r){if(Re(n)!="object"||!n)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,r);if(Re(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(t,"string");return Re(e)=="symbol"?e:e+""}function wS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,N1(r.key),r)}}function Hn(t,e,n){return e&&wS(t.prototype,e),n&&wS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function cp(t,e){if(e&&(Re(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}function Nr(t){return Nr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nr(t)}function cu(t,e){return cu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},cu(t,e)}function up(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cu(t,e)}function Hr(t,e,n){return(e=N1(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ES(t,e,n,r,i,s,o){try{var a=t[s](o),l=a.value}catch(u){return void n(u)}a.done?e(l):Promise.resolve(l).then(r,i)}function ge(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(l){ES(s,r,i,o,a,"next",l)}function a(l){ES(s,r,i,o,a,"throw",l)}o(void 0)})}}function SS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function nn(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var s,o,a,l,u=[],d=!0,f=!1;try{if(a=(i=i.call(n)).next,r===0){if(Object(i)!==i)return;d=!1}else for(;!(d=(s=a.call(i)).done)&&(u.push(s.value),u.length!==r);d=!0);}catch(m){f=!0,o=m}finally{try{if(!d&&i.return!=null&&(l=i.return(),Object(l)!==l))return}finally{if(f)throw o}}return u}}(t,e)||function(n,r){if(n){if(typeof n=="string")return SS(n,r);var i={}.toString.call(n).slice(8,-1);return i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set"?Array.from(n):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?SS(n,r):void 0}}(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function f3(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var TS,Ad={exports:{}},my=function(){if(TS)return Ad.exports;TS=1;var t,e=typeof Reflect=="object"?Reflect:null,n=e&&typeof e.apply=="function"?e.apply:function(_,b,v){return Function.prototype.apply.call(_,b,v)};t=e&&typeof e.ownKeys=="function"?e.ownKeys:Object.getOwnPropertySymbols?function(_){return Object.getOwnPropertyNames(_).concat(Object.getOwnPropertySymbols(_))}:function(_){return Object.getOwnPropertyNames(_)};var r=Number.isNaN||function(_){return _!=_};function i(){i.init.call(this)}Ad.exports=i,Ad.exports.once=function(_,b){return new Promise(function(v,g){function k(U){_.removeListener(b,j),g(U)}function j(){typeof _.removeListener=="function"&&_.removeListener("error",k),v([].slice.call(arguments))}T(_,b,j,{once:!0}),b!=="error"&&function(U,z,R){typeof U.on=="function"&&T(U,"error",z,R)}(_,k,{once:!0})})},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function o(_){if(typeof _!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}function a(_){return _._maxListeners===void 0?i.defaultMaxListeners:_._maxListeners}function l(_,b,v,g){var k,j,U,z;if(o(v),(j=_._events)===void 0?(j=_._events=Object.create(null),_._eventsCount=0):(j.newListener!==void 0&&(_.emit("newListener",b,v.listener?v.listener:v),j=_._events),U=j[b]),U===void 0)U=j[b]=v,++_._eventsCount;else if(typeof U=="function"?U=j[b]=g?[v,U]:[U,v]:g?U.unshift(v):U.push(v),(k=a(_))>0&&U.length>k&&!U.warned){U.warned=!0;var R=new Error("Possible EventEmitter memory leak detected. "+U.length+" "+String(b)+" listeners added. Use emitter.setMaxListeners() to increase limit");R.name="MaxListenersExceededWarning",R.emitter=_,R.type=b,R.count=U.length,z=R,console&&console.warn&&console.warn(z)}return _}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(_,b,v){var g={fired:!1,wrapFn:void 0,target:_,type:b,listener:v},k=u.bind(g);return k.listener=v,g.wrapFn=k,k}function f(_,b,v){var g=_._events;if(g===void 0)return[];var k=g[b];return k===void 0?[]:typeof k=="function"?v?[k.listener||k]:[k]:v?function(j){for(var U=new Array(j.length),z=0;z<U.length;++z)U[z]=j[z].listener||j[z];return U}(k):E(k,k.length)}function m(_){var b=this._events;if(b!==void 0){var v=b[_];if(typeof v=="function")return 1;if(v!==void 0)return v.length}return 0}function E(_,b){for(var v=new Array(b),g=0;g<b;++g)v[g]=_[g];return v}function T(_,b,v,g){if(typeof _.on=="function")g.once?_.once(b,v):_.on(b,v);else{if(typeof _.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _);_.addEventListener(b,function k(j){g.once&&_.removeEventListener(b,k),v(j)})}}return Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(_){if(typeof _!="number"||_<0||r(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");s=_}}),i.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(_){if(typeof _!="number"||_<0||r(_))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_+".");return this._maxListeners=_,this},i.prototype.getMaxListeners=function(){return a(this)},i.prototype.emit=function(_){for(var b=[],v=1;v<arguments.length;v++)b.push(arguments[v]);var g=_==="error",k=this._events;if(k!==void 0)g=g&&k.error===void 0;else if(!g)return!1;if(g){var j;if(b.length>0&&(j=b[0]),j instanceof Error)throw j;var U=new Error("Unhandled error."+(j?" ("+j.message+")":""));throw U.context=j,U}var z=k[_];if(z===void 0)return!1;if(typeof z=="function")n(z,this,b);else{var R=z.length,P=E(z,R);for(v=0;v<R;++v)n(P[v],this,b)}return!0},i.prototype.addListener=function(_,b){return l(this,_,b,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(_,b){return l(this,_,b,!0)},i.prototype.once=function(_,b){return o(b),this.on(_,d(this,_,b)),this},i.prototype.prependOnceListener=function(_,b){return o(b),this.prependListener(_,d(this,_,b)),this},i.prototype.removeListener=function(_,b){var v,g,k,j,U;if(o(b),(g=this._events)===void 0)return this;if((v=g[_])===void 0)return this;if(v===b||v.listener===b)--this._eventsCount==0?this._events=Object.create(null):(delete g[_],g.removeListener&&this.emit("removeListener",_,v.listener||b));else if(typeof v!="function"){for(k=-1,j=v.length-1;j>=0;j--)if(v[j]===b||v[j].listener===b){U=v[j].listener,k=j;break}if(k<0)return this;k===0?v.shift():function(z,R){for(;R+1<z.length;R++)z[R]=z[R+1];z.pop()}(v,k),v.length===1&&(g[_]=v[0]),g.removeListener!==void 0&&this.emit("removeListener",_,U||b)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(_){var b,v,g;if((v=this._events)===void 0)return this;if(v.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):v[_]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete v[_]),this;if(arguments.length===0){var k,j=Object.keys(v);for(g=0;g<j.length;++g)(k=j[g])!=="removeListener"&&this.removeAllListeners(k);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(b=v[_])=="function")this.removeListener(_,b);else if(b!==void 0)for(g=b.length-1;g>=0;g--)this.removeListener(_,b[g]);return this},i.prototype.listeners=function(_){return f(this,_,!0)},i.prototype.rawListeners=function(_){return f(this,_,!1)},i.listenerCount=function(_,b){return typeof _.listenerCount=="function"?_.listenerCount(b):m.call(_,b)},i.prototype.listenerCount=m,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]},Ad.exports}(),Pd=f3(my),bS=Object.prototype.hasOwnProperty;function kS(t,e,n){for(n of t.keys())if(cn(n,e))return n}function cn(t,e){var n,r,i;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&cn(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if((i=r)&&typeof i=="object"&&!(i=kS(e,i))||!e.has(i))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if((i=r[0])&&typeof i=="object"&&!(i=kS(e,i))||!cn(r[1],e.get(i)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){for(n in r=0,t)if(bS.call(t,n)&&++r&&!bS.call(e,n)||!(n in e)||!cn(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!=t&&e!=e}const p3={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},D1={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},ht={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},an={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},ns={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class Q{static getFirstMatch(e,n){const r=n.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,n){const r=n.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,n,r){if(e.test(n))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),!(n[0]===1&&n[1]<5))return n[0]===1&&n[1]<6?"Cupcake":n[0]===1&&n[1]>=6?"Donut":n[0]===2&&n[1]<2?"Eclair":n[0]===2&&n[1]===2?"Froyo":n[0]===2&&n[1]>2?"Gingerbread":n[0]===3?"Honeycomb":n[0]===4&&n[1]<1?"Ice Cream Sandwich":n[0]===4&&n[1]<4?"Jelly Bean":n[0]===4&&n[1]>=4?"KitKat":n[0]===5?"Lollipop":n[0]===6?"Marshmallow":n[0]===7?"Nougat":n[0]===8?"Oreo":n[0]===9?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,n,r=!1){const i=Q.getVersionPrecision(e),s=Q.getVersionPrecision(n);let o=Math.max(i,s),a=0;const l=Q.map([e,n],u=>{const d=o-Q.getVersionPrecision(u),f=u+new Array(d+1).join(".0");return Q.map(f.split("."),m=>new Array(20-m.length).join("0")+m).reverse()});for(r&&(a=o-Math.min(i,s)),o-=1;o>=a;){if(l[0][o]>l[1][o])return 1;if(l[0][o]===l[1][o]){if(o===a)return 0;o-=1}else if(l[0][o]<l[1][o])return-1}}static map(e,n){const r=[];let i;if(Array.prototype.map)return Array.prototype.map.call(e,n);for(i=0;i<e.length;i+=1)r.push(n(e[i]));return r}static find(e,n){let r,i;if(Array.prototype.find)return Array.prototype.find.call(e,n);for(r=0,i=e.length;r<i;r+=1){const s=e[r];if(n(s,r))return s}}static assign(e,...n){const r=e;let i,s;if(Object.assign)return Object.assign(e,...n);for(i=0,s=n.length;i<s;i+=1){const o=n[i];typeof o=="object"&&o!==null&&Object.keys(o).forEach(a=>{r[a]=o[a]})}return e}static getBrowserAlias(e){return p3[e]}static getBrowserTypeByAlias(e){return D1[e]||""}}const qe=/version\/(\d+(\.?_?\d+)+)/i,m3=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},n=Q.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||Q.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},n=Q.getFirstMatch(qe,t)||Q.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},n=Q.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||Q.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},n=Q.getFirstMatch(qe,t)||Q.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},n=Q.getFirstMatch(qe,t)||Q.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},n=Q.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||Q.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},n=Q.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||Q.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},n=Q.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||Q.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},n=Q.getFirstMatch(qe,t)||Q.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},n=Q.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||Q.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},n=Q.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||Q.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},n=Q.getFirstMatch(qe,t)||Q.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},n=Q.getFirstMatch(qe,t)||Q.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},n=Q.getFirstMatch(qe,t)||Q.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},n=Q.getFirstMatch(qe,t)||Q.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},n=Q.getFirstMatch(qe,t)||Q.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},n=Q.getFirstMatch(qe,t)||Q.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},n=Q.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||Q.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},n=Q.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||Q.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},n=Q.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},n=Q.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},n=Q.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},n=Q.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},n=Q.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},n=Q.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return n&&(e.version=n),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},n=Q.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},n=Q.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},n=Q.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},n=Q.getFirstMatch(qe,t)||Q.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},n=Q.getFirstMatch(qe,t)||Q.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},n=Q.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},n=Q.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||Q.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},n=Q.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||Q.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},n=Q.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},n=Q.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},n=Q.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},n=Q.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||Q.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},n=Q.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},n=Q.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e={name:"Android Browser"},n=Q.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},n=Q.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},n=Q.getFirstMatch(qe,t);return n&&(e.version=n),e}},{test:[/.*/i],describe(t){const e=t.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:Q.getFirstMatch(e,t),version:Q.getSecondMatch(e,t)}}}];var g3=[{test:[/Roku\/DVP/],describe(t){const e=Q.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:an.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=Q.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:an.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=Q.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),n=Q.getWindowsVersionName(e);return{name:an.Windows,version:e,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:an.iOS},n=Q.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return n&&(e.version=n),e}},{test:[/macintosh/i],describe(t){const e=Q.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),n=Q.getMacOSVersionName(e),r={name:an.MacOS,version:e};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=Q.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:an.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e=Q.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),n=Q.getAndroidVersionName(e),r={name:an.Android,version:e};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=Q.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),n={name:an.WebOS};return e&&e.length&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=Q.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||Q.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||Q.getFirstMatch(/\bbb(\d+)/i,t);return{name:an.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=Q.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:an.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=Q.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:an.Tizen,version:e}}},{test:[/linux/i],describe:()=>({name:an.Linux})},{test:[/CrOS/],describe:()=>({name:an.ChromeOS})},{test:[/PlayStation 4/],describe(t){const e=Q.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:an.PlayStation4,version:e}}}],y3=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(t){const e=Q.getFirstMatch(/(can-l01)/i,t)&&"Nova",n={type:ht.mobile,vendor:"Huawei"};return e&&(n.model=e),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:ht.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:ht.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:ht.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:ht.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:ht.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:ht.tablet})},{test(t){const e=t.test(/ipod|iphone/i),n=t.test(/like (ipod|iphone)/i);return e&&!n},describe(t){const e=Q.getFirstMatch(/(ipod|iphone)/i,t);return{type:ht.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:ht.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:ht.mobile})},{test:t=>t.getBrowserName(!0)==="blackberry",describe:()=>({type:ht.mobile,vendor:"BlackBerry"})},{test:t=>t.getBrowserName(!0)==="bada",describe:()=>({type:ht.mobile})},{test:t=>t.getBrowserName()==="windows phone",describe:()=>({type:ht.mobile,vendor:"Microsoft"})},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe:()=>({type:ht.tablet})},{test:t=>t.getOSName(!0)==="android",describe:()=>({type:ht.mobile})},{test:t=>t.getOSName(!0)==="macos",describe:()=>({type:ht.desktop,vendor:"Apple"})},{test:t=>t.getOSName(!0)==="windows",describe:()=>({type:ht.desktop})},{test:t=>t.getOSName(!0)==="linux",describe:()=>({type:ht.desktop})},{test:t=>t.getOSName(!0)==="playstation 4",describe:()=>({type:ht.tv})},{test:t=>t.getOSName(!0)==="roku",describe:()=>({type:ht.tv})}],v3=[{test:t=>t.getBrowserName(!0)==="microsoft edge",describe(t){if(/\sedg\//i.test(t))return{name:ns.Blink};const e=Q.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:ns.EdgeHTML,version:e}}},{test:[/trident/i],describe(t){const e={name:ns.Trident},n=Q.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:t=>t.test(/presto/i),describe(t){const e={name:ns.Presto},n=Q.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=t.test(/gecko/i),n=t.test(/like gecko/i);return e&&!n},describe(t){const e={name:ns.Gecko},n=Q.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:ns.Blink})},{test:[/(apple)?webkit/i],describe(t){const e={name:ns.WebKit},n=Q.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}}];class IS{constructor(e,n=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=Q.find(m3,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=Q.find(g3,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:n}=this.getOS();return e?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:n}=this.getPlatform();return e?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const e=Q.find(y3,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=Q.find(v3,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return Q.assign({},this.parsedResult)}satisfies(e){const n={};let r=0;const i={};let s=0;if(Object.keys(e).forEach(o=>{const a=e[o];typeof a=="string"?(i[o]=a,s+=1):typeof a=="object"&&(n[o]=a,r+=1)}),r>0){const o=Object.keys(n),a=Q.find(o,u=>this.isOS(u));if(a){const u=this.satisfies(n[a]);if(u!==void 0)return u}const l=Q.find(o,u=>this.isPlatform(u));if(l){const u=this.satisfies(n[l]);if(u!==void 0)return u}}if(s>0){const o=Object.keys(i),a=Q.find(o,l=>this.isBrowser(l,!0));if(a!==void 0)return this.compareVersion(i[a])}}isBrowser(e,n=!1){const r=this.getBrowserName().toLowerCase();let i=e.toLowerCase();const s=Q.getBrowserTypeByAlias(i);return n&&s&&(i=s.toLowerCase()),i===r}compareVersion(e){let n=[0],r=e,i=!1;const s=this.getBrowserVersion();if(typeof s=="string")return e[0]===">"||e[0]==="<"?(r=e.substr(1),e[1]==="="?(i=!0,r=e.substr(2)):n=[],e[0]===">"?n.push(1):n.push(-1)):e[0]==="="?r=e.substr(1):e[0]==="~"&&(i=!0,r=e.substr(1)),n.indexOf(Q.compareVersions(s,r,i))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,n=!1){return this.isBrowser(e,n)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(n=>this.is(n))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class _3{static getParser(e,n=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new IS(e,n)}static parse(e){return new IS(e).getResult()}static get BROWSER_MAP(){return D1}static get ENGINE_MAP(){return ns}static get OS_MAP(){return an}static get PLATFORMS_MAP(){return ht}}function dp(){return Date.now()+Math.random().toString()}function Zl(){throw new Error("Method must be implemented in subclass")}function M1(t,e){return e!=null&&e.proxyUrl?e.proxyUrl+(e.proxyUrl.slice(-1)==="/"?"":"/")+t.substring(8):t}function lf(t){return t!=null&&t.callObjectBundleUrlOverride?t.callObjectBundleUrlOverride:M1("https://c.daily.co/call-machine/versioned/".concat("0.85.0","/static/call-machine-object-bundle.js"),t)}function cf(t){try{new URL(t)}catch{return!1}return!0}const Ge=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Po="8.55.0",Me=globalThis;function uf(t,e,n){const r=Me,i=r.__SENTRY__=r.__SENTRY__||{},s=i[Po]=i[Po]||{};return s[t]||(s[t]=e())}const Xo=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,gy=["debug","info","warn","error","log","assert","trace"],df={};function Vu(t){if(!("console"in Me))return t();const e=Me.console,n={},r=Object.keys(df);r.forEach(i=>{const s=df[i];n[i]=e[i],e[i]=s});try{return t()}finally{r.forEach(i=>{e[i]=n[i]})}}const ve=uf("logger",function(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return Xo?gy.forEach(n=>{e[n]=(...r)=>{t&&Vu(()=>{Me.console[n](`Sentry Logger [${n}]:`,...r)})}}):gy.forEach(n=>{e[n]=()=>{}}),e}),Io="?",CS=/\(error: (.*)\)/,AS=/captureMessage|captureException/;function xd(t){return t[t.length-1]||{}}const PS="<anonymous>";function $s(t){try{return t&&typeof t=="function"&&t.name||PS}catch{return PS}}function xS(t){const e=t.exception;if(e){const n=[];try{return e.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}const dh={},RS={};function xo(t,e){dh[t]=dh[t]||[],dh[t].push(e)}function Ro(t,e){if(!RS[t]){RS[t]=!0;try{e()}catch(n){Xo&&ve.error(`Error while instrumenting ${t}`,n)}}}function Pr(t,e){const n=t&&dh[t];if(n)for(const r of n)try{r(e)}catch(i){Xo&&ve.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${$s(r)}
Error:`,i)}}let bm=null;function w3(){bm=Me.onerror,Me.onerror=function(t,e,n,r,i){return Pr("error",{column:r,error:i,line:n,msg:t,url:e}),!!bm&&bm.apply(this,arguments)},Me.onerror.__SENTRY_INSTRUMENTED__=!0}let km=null;function E3(){km=Me.onunhandledrejection,Me.onunhandledrejection=function(t){return Pr("unhandledrejection",t),!km||km.apply(this,arguments)},Me.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function hp(){return z_(Me),Me}function z_(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||Po,e[Po]=e[Po]||{}}const L1=Object.prototype.toString;function q_(t){switch(L1.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return zo(t,Error)}}function xl(t,e){return L1.call(t)===`[object ${e}]`}function j1(t){return xl(t,"ErrorEvent")}function OS(t){return xl(t,"DOMError")}function _i(t){return xl(t,"String")}function H_(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function yy(t){return t===null||H_(t)||typeof t!="object"&&typeof t!="function"}function fl(t){return xl(t,"Object")}function fp(t){return typeof Event<"u"&&zo(t,Event)}function pp(t){return!!(t&&t.then&&typeof t.then=="function")}function zo(t,e){try{return t instanceof e}catch{return!1}}function V1(t){return!(typeof t!="object"||t===null||!t.__isVue&&!t._isVue)}const W_=Me;function F1(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,i=[];let s=0,o=0;const a=" > ",l=a.length;let u;const d=Array.isArray(e)?e:e.keyAttrs,f=!Array.isArray(e)&&e.maxStringLength||80;for(;n&&s++<r&&(u=S3(n,d),!(u==="html"||s>1&&o+i.length*l+u.length>=f));)i.push(u),o+=u.length,n=n.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function S3(t,e){const n=t,r=[];if(!n||!n.tagName)return"";if(W_.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const i=e&&e.length?e.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(i&&i.length)i.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const o=n.className;if(o&&_i(o)){const a=o.split(/\s+/);for(const l of a)r.push(`.${l}`)}}const s=["aria-label","type","name","title","alt"];for(const o of s){const a=n.getAttribute(o);a&&r.push(`[${o}="${a}"]`)}return r.join("")}function Ja(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function NS(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const i=t[r];try{V1(i)?n.push("[VueViewModel]"):n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function T3(t,e,n=!1){return!!_i(t)&&(xl(e,"RegExp")?e.test(t):!!_i(e)&&(n?t===e:t.includes(e)))}function Rd(t,e=[],n=!1){return e.some(r=>T3(t,r,n))}function Fn(t,e,n){if(!(e in t))return;const r=t[e],i=n(r);typeof i=="function"&&U1(i,r);try{t[e]=i}catch{Xo&&ve.log(`Failed to replace method "${e}" in object`,t)}}function qo(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{Xo&&ve.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function U1(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,qo(t,"__sentry_original__",e)}catch{}}function G_(t){return t.__sentry_original__}function $1(t){if(q_(t))return{message:t.message,name:t.name,stack:t.stack,...MS(t)};if(fp(t)){const e={type:t.type,target:DS(t.target),currentTarget:DS(t.currentTarget),...MS(t)};return typeof CustomEvent<"u"&&zo(t,CustomEvent)&&(e.detail=t.detail),e}return t}function DS(t){try{return e=t,typeof Element<"u"&&zo(e,Element)?F1(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}var e}function MS(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}return{}}function rr(t){return vy(t,new Map)}function vy(t,e){if(function(n){if(!fl(n))return!1;try{const r=Object.getPrototypeOf(n).constructor.name;return!r||r==="Object"}catch{return!0}}(t)){const n=e.get(t);if(n!==void 0)return n;const r={};e.set(t,r);for(const i of Object.getOwnPropertyNames(t))t[i]!==void 0&&(r[i]=vy(t[i],e));return r}if(Array.isArray(t)){const n=e.get(t);if(n!==void 0)return n;const r=[];return e.set(t,r),t.forEach(i=>{r.push(vy(i,e))}),r}return t}function Fu(){return Date.now()/1e3}const Ii=function(){const{performance:t}=Me;if(!t||!t.now)return Fu;const e=Date.now()-t.now(),n=t.timeOrigin==null?e:t.timeOrigin;return()=>(n+t.now())/1e3}();function or(){const t=Me,e=t.crypto||t.msCrypto;let n=()=>16*Math.random();try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return e.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(15&n())>>r/4).toString(16))}function B1(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function os(t){const{message:e,event_id:n}=t;if(e)return e;const r=B1(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function _y(t,e,n){const r=t.exception=t.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=e||""),s.type||(s.type="Error")}function pl(t,e){const n=B1(t);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...e},e&&"data"in e){const i={...r&&r.data,...e.data};n.mechanism.data=i}}function LS(t){if(function(e){try{return e.__sentry_captured__}catch{}}(t))return!0;try{qo(t,"__sentry_captured__",!0)}catch{}return!1}var di;function Ho(t){return new tr(e=>{e(t)})}function hf(t){return new tr((e,n)=>{n(t)})}(()=>{const{performance:t}=Me;!t||!t.now||(t.now(),t.timing&&t.timing.navigationStart)})(),function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"}(di||(di={}));class tr{constructor(e){tr.prototype.__init.call(this),tr.prototype.__init2.call(this),tr.prototype.__init3.call(this),tr.prototype.__init4.call(this),this._state=di.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}then(e,n){return new tr((r,i)=>{this._handlers.push([!1,s=>{if(e)try{r(e(s))}catch(o){i(o)}else r(s)},s=>{if(n)try{r(n(s))}catch(o){i(o)}else i(s)}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new tr((n,r)=>{let i,s;return this.then(o=>{s=!1,i=o,e&&e()},o=>{s=!0,i=o,e&&e()}).then(()=>{s?r(i):n(i)})})}__init(){this._resolve=e=>{this._setResult(di.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(di.REJECTED,e)}}__init3(){this._setResult=(e,n)=>{this._state===di.PENDING&&(pp(n)?n.then(this._resolve,this._reject):(this._state=e,this._value=n,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===di.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===di.RESOLVED&&n[1](this._value),this._state===di.REJECTED&&n[2](this._value),n[0]=!0)})}}}function b3(t){const e=Ii(),n={sid:or(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(r){return rr({sid:`${r.sid}`,init:r.init,started:new Date(1e3*r.started).toISOString(),timestamp:new Date(1e3*r.timestamp).toISOString(),status:r.status,errors:r.errors,did:typeof r.did=="number"||typeof r.did=="string"?`${r.did}`:void 0,duration:r.duration,abnormal_mechanism:r.abnormal_mechanism,attrs:{release:r.release,environment:r.environment,ip_address:r.ipAddress,user_agent:r.userAgent}})}(n)};return t&&ml(n,t),n}function ml(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Ii(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:or()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function jS(){return or()}function wy(){return or().substring(16)}function mp(t,e,n=2){if(!e||typeof e!="object"||n<=0)return e;if(t&&e&&Object.keys(e).length===0)return t;const r={...t};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=mp(r[i],e[i],n-1));return r}const Ey="_sentrySpan";function VS(t,e){e?qo(t,Ey,e):delete t[Ey]}function FS(t){return t[Ey]}class K_{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:jS(),spanId:wy()}}clone(){const e=new K_;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,VS(e,FS(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&ml(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,[r,i]=n instanceof Bs?[n.getScopeData(),n.getRequestSession()]:fl(n)?[e,e.requestSession]:[],{tags:s,extra:o,user:a,contexts:l,level:u,fingerprint:d=[],propagationContext:f}=r||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...o},this._contexts={...this._contexts,...l},a&&Object.keys(a).length&&(this._user=a),u&&(this._level=u),d.length&&(this._fingerprint=d),f&&(this._propagationContext=f),i&&(this._requestSession=i),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,VS(this,void 0),this._attachments=[],this.setPropagationContext({traceId:jS()}),this._notifyScopeListeners(),this}addBreadcrumb(e,n){const r=typeof n=="number"?n:100;if(r<=0)return this;const i={timestamp:Fu(),...e};return this._breadcrumbs.push(i),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client&&this._client.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:FS(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=mp(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext={spanId:wy(),...e},this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=n&&n.event_id?n.event_id:or();if(!this._client)return ve.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...n,event_id:r},this),r}captureMessage(e,n,r){const i=r&&r.event_id?r.event_id:or();if(!this._client)return ve.warn("No client configured on scope - will not capture message!"),i;const s=new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:s,...r,event_id:i},this),i}captureEvent(e,n){const r=n&&n.event_id?n.event_id:or();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(ve.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}const Bs=K_;class k3{constructor(e,n){let r,i;r=e||new Bs,i=n||new Bs,this._stack=[{scope:r}],this._isolationScope=i}withScope(e){const n=this._pushScope();let r;try{r=e(n)}catch(i){throw this._popScope(),i}return pp(r)?r.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function gl(){const t=z_(hp());return t.stack=t.stack||new k3(uf("defaultCurrentScope",()=>new Bs),uf("defaultIsolationScope",()=>new Bs))}function I3(t){return gl().withScope(t)}function C3(t,e){const n=gl();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function US(t){return gl().withScope(()=>t(gl().getIsolationScope()))}function J_(t){const e=z_(t);return e.acs?e.acs:{withIsolationScope:US,withScope:I3,withSetScope:C3,withSetIsolationScope:(n,r)=>US(r),getCurrentScope:()=>gl().getScope(),getIsolationScope:()=>gl().getIsolationScope()}}function Zo(){return J_(hp()).getCurrentScope()}function Uu(){return J_(hp()).getIsolationScope()}function tn(){return Zo().getClient()}function A3(t){const e=t.getPropagationContext(),{traceId:n,spanId:r,parentSpanId:i}=e;return rr({trace_id:n,span_id:r,parent_span_id:i})}function P3(t){const e=t._sentryMetrics;if(!e)return;const n={};for(const[,[r,i]]of e)(n[r]||(n[r]=[])).push(rr(i));return n}const x3=/^sentry-/;function R3(t){const e=function(r){if(!(!r||!_i(r)&&!Array.isArray(r)))return Array.isArray(r)?r.reduce((i,s)=>{const o=$S(s);return Object.entries(o).forEach(([a,l])=>{i[a]=l}),i},{}):$S(r)}(t);if(!e)return;const n=Object.entries(e).reduce((r,[i,s])=>(i.match(x3)&&(r[i.slice(7)]=s),r),{});return Object.keys(n).length>0?n:void 0}function $S(t){return t.split(",").map(e=>e.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((e,[n,r])=>(n&&r&&(e[n]=r),e),{})}let BS=!1;function O3(t){const{spanId:e,traceId:n,isRemote:r}=t.spanContext();return rr({parent_span_id:r?e:Q_(t).parent_span_id,span_id:r?wy():e,trace_id:n})}function zS(t){return typeof t=="number"?qS(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?qS(t.getTime()):Ii()}function qS(t){return t>9999999999?t/1e3:t}function Q_(t){if(function(e){return typeof e.getSpanJSON=="function"}(t))return t.getSpanJSON();try{const{spanId:e,traceId:n}=t.spanContext();if(function(r){const i=r;return!!(i.attributes&&i.startTime&&i.name&&i.endTime&&i.status)}(t)){const{attributes:r,startTime:i,name:s,endTime:o,parentSpanId:a,status:l}=t;return rr({span_id:e,trace_id:n,data:r,description:s,parent_span_id:a,start_timestamp:zS(i),timestamp:zS(o)||void 0,status:N3(l),op:r["sentry.op"],origin:r["sentry.origin"],_metrics_summary:P3(t)})}return{span_id:e,trace_id:n}}catch{return{}}}function N3(t){if(t&&t.code!==0)return t.code===1?"ok":t.message||"unknown_error"}function z1(t){return t._sentryRootSpan||t}function D3(){BS||(Vu(()=>{console.warn("[Sentry] Deprecation warning: Returning null from `beforeSendSpan` will be disallowed from SDK version 9.0.0 onwards. The callback will only support mutating spans. To drop certain spans, configure the respective integrations directly.")}),BS=!0)}const Y_="production";function q1(t,e){const n=e.getOptions(),{publicKey:r}=e.getDsn()||{},i=rr({environment:n.environment||Y_,release:n.release,public_key:r,trace_id:t});return e.emit("createDsc",i),i}function M3(t){const e=tn();if(!e)return{};const n=z1(t),r=n._frozenDsc;if(r)return r;const i=n.spanContext().traceState,s=i&&i.get("sentry.dsc"),o=s&&R3(s);if(o)return o;const a=q1(t.spanContext().traceId,e),l=Q_(n),u=l.data||{},d=u["sentry.sample_rate"];d!=null&&(a.sample_rate=`${d}`);const f=u["sentry.source"],m=l.description;return f!=="url"&&m&&(a.transaction=m),function(E){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const T=tn(),_=T&&T.getOptions();return!!_&&(_.enableTracing||"tracesSampleRate"in _||"tracesSampler"in _)}()&&(a.sampled=String(function(E){const{traceFlags:T}=E.spanContext();return T===1}(n))),e.emit("createDsc",a,n),a}const L3=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function ff(t,e=!1){const{host:n,path:r,pass:i,port:s,projectId:o,protocol:a,publicKey:l}=t;return`${a}://${l}${e&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r&&`${r}/`}${o}`}function HS(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function j3(t){const e=typeof t=="string"?function(n){const r=L3.exec(n);if(!r)return void Vu(()=>{console.error(`Invalid Sentry Dsn: ${n}`)});const[i,s,o="",a="",l="",u=""]=r.slice(1);let d="",f=u;const m=f.split("/");if(m.length>1&&(d=m.slice(0,-1).join("/"),f=m.pop()),f){const E=f.match(/^\d+/);E&&(f=E[0])}return HS({host:a,pass:o,path:d,projectId:f,port:l,protocol:i,publicKey:s})}(t):HS(t);if(e&&function(n){if(!Xo)return!0;const{port:r,projectId:i,protocol:s}=n;return!(["protocol","publicKey","host","projectId"].find(o=>!n[o]&&(ve.error(`Invalid Sentry Dsn: ${o} missing`),!0))||(i.match(/^\d+$/)?function(o){return o==="http"||o==="https"}(s)?r&&isNaN(parseInt(r,10))&&(ve.error(`Invalid Sentry Dsn: Invalid port ${r}`),1):(ve.error(`Invalid Sentry Dsn: Invalid protocol ${s}`),1):(ve.error(`Invalid Sentry Dsn: Invalid projectId ${i}`),1)))}(e))return e}function hi(t,e=100,n=1/0){try{return Sy("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function H1(t,e=3,n=102400){const r=hi(t,e);return i=r,function(s){return~-encodeURI(s).split(/%..|./).length}(JSON.stringify(i))>n?H1(t,e-1,n):r;var i}function Sy(t,e,n=1/0,r=1/0,i=function(){const s=typeof WeakSet=="function",o=s?new WeakSet:[];return[function(a){if(s)return!!o.has(a)||(o.add(a),!1);for(let l=0;l<o.length;l++)if(o[l]===a)return!0;return o.push(a),!1},function(a){if(s)o.delete(a);else for(let l=0;l<o.length;l++)if(o[l]===a){o.splice(l,1);break}}]}()){const[s,o]=i;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const a=function(E,T){try{if(E==="domain"&&T&&typeof T=="object"&&T._events)return"[Domain]";if(E==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&T===global)return"[Global]";if(typeof window<"u"&&T===window)return"[Window]";if(typeof document<"u"&&T===document)return"[Document]";if(V1(T))return"[VueViewModel]";if(fl(_=T)&&"nativeEvent"in _&&"preventDefault"in _&&"stopPropagation"in _)return"[SyntheticEvent]";if(typeof T=="number"&&!Number.isFinite(T))return`[${T}]`;if(typeof T=="function")return`[Function: ${$s(T)}]`;if(typeof T=="symbol")return`[${String(T)}]`;if(typeof T=="bigint")return`[BigInt: ${String(T)}]`;const b=function(v){const g=Object.getPrototypeOf(v);return g?g.constructor.name:"null prototype"}(T);return/^HTML(\w*)Element$/.test(b)?`[HTMLElement: ${b}]`:`[object ${b}]`}catch(b){return`**non-serializable** (${b})`}var _}(t,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;const l=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(l===0)return a.replace("object ","");if(s(e))return"[Circular ~]";const u=e;if(u&&typeof u.toJSON=="function")try{return Sy("",u.toJSON(),l-1,r,i)}catch{}const d=Array.isArray(e)?[]:{};let f=0;const m=$1(e);for(const E in m){if(!Object.prototype.hasOwnProperty.call(m,E))continue;if(f>=r){d[E]="[MaxProperties ~]";break}const T=m[E];d[E]=Sy(E,T,l-1,r,i),f++}return o(e),d}function uu(t,e=[]){return[t,e]}function V3(t,e){const[n,r]=t;return[n,[...r,e]]}function WS(t,e){const n=t[1];for(const r of n)if(e(r,r[0].type))return!0;return!1}function Ty(t){return Me.__SENTRY__&&Me.__SENTRY__.encodePolyfill?Me.__SENTRY__.encodePolyfill(t):new TextEncoder().encode(t)}function F3(t){const[e,n]=t;let r=JSON.stringify(e);function i(s){typeof r=="string"?r=typeof s=="string"?r+s:[Ty(r),s]:r.push(typeof s=="string"?Ty(s):s)}for(const s of n){const[o,a]=s;if(i(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)i(a);else{let l;try{l=JSON.stringify(a)}catch{l=JSON.stringify(hi(a))}i(l)}}return typeof r=="string"?r:function(s){const o=s.reduce((u,d)=>u+d.length,0),a=new Uint8Array(o);let l=0;for(const u of s)a.set(u,l),l+=u.length;return a}(r)}function U3(t){const e=typeof t.data=="string"?Ty(t.data):t.data;return[rr({type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),e]}const $3={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket",raw_security:"security"};function GS(t){return $3[t]}function W1(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function B3(t,e,n,r){const i=W1(n),s=t.type&&t.type!=="replay_event"?t.type:"event";(function(a,l){l&&(a.sdk=a.sdk||{},a.sdk.name=a.sdk.name||l.name,a.sdk.version=a.sdk.version||l.version,a.sdk.integrations=[...a.sdk.integrations||[],...l.integrations||[]],a.sdk.packages=[...a.sdk.packages||[],...l.packages||[]])})(t,n&&n.sdk);const o=function(a,l,u,d){const f=a.sdkProcessingMetadata&&a.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:a.event_id,sent_at:new Date().toISOString(),...l&&{sdk:l},...!!u&&d&&{dsn:ff(d)},...f&&{trace:rr({...f})}}}(t,i,r,e);return delete t.sdkProcessingMetadata,uu(o,[[{type:s},t]])}function by(t,e,n,r=0){return new tr((i,s)=>{const o=t[r];if(e===null||typeof o!="function")i(e);else{const a=o({...e},n);Ge&&o.id&&a===null&&ve.log(`Event processor "${o.id}" dropped event`),pp(a)?a.then(l=>by(t,l,n,r+1).then(i)).then(null,s):by(t,a,n,r+1).then(i).then(null,s)}})}let Od,KS,Im;function z3(t,e){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:s}=e;(function(o,a){const{extra:l,tags:u,user:d,contexts:f,level:m,transactionName:E}=a,T=rr(l);T&&Object.keys(T).length&&(o.extra={...T,...o.extra});const _=rr(u);_&&Object.keys(_).length&&(o.tags={..._,...o.tags});const b=rr(d);b&&Object.keys(b).length&&(o.user={...b,...o.user});const v=rr(f);v&&Object.keys(v).length&&(o.contexts={...v,...o.contexts}),m&&(o.level=m),E&&o.type!=="transaction"&&(o.transaction=E)})(t,e),r&&function(o,a){o.contexts={trace:O3(a),...o.contexts},o.sdkProcessingMetadata={dynamicSamplingContext:M3(a),...o.sdkProcessingMetadata};const l=z1(a),u=Q_(l).description;u&&!o.transaction&&o.type==="transaction"&&(o.transaction=u)}(t,r),function(o,a){o.fingerprint=o.fingerprint?Array.isArray(o.fingerprint)?o.fingerprint:[o.fingerprint]:[],a&&(o.fingerprint=o.fingerprint.concat(a)),o.fingerprint&&!o.fingerprint.length&&delete o.fingerprint}(t,n),function(o,a){const l=[...o.breadcrumbs||[],...a];o.breadcrumbs=l.length?l:void 0}(t,i),function(o,a){o.sdkProcessingMetadata={...o.sdkProcessingMetadata,...a}}(t,s)}function JS(t,e){const{extra:n,tags:r,user:i,contexts:s,level:o,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:u,eventProcessors:d,attachments:f,propagationContext:m,transactionName:E,span:T}=e;Nd(t,"extra",n),Nd(t,"tags",r),Nd(t,"user",i),Nd(t,"contexts",s),t.sdkProcessingMetadata=mp(t.sdkProcessingMetadata,a,2),o&&(t.level=o),E&&(t.transactionName=E),T&&(t.span=T),l.length&&(t.breadcrumbs=[...t.breadcrumbs,...l]),u.length&&(t.fingerprint=[...t.fingerprint,...u]),d.length&&(t.eventProcessors=[...t.eventProcessors,...d]),f.length&&(t.attachments=[...t.attachments,...f]),t.propagationContext={...t.propagationContext,...m}}function Nd(t,e,n){t[e]=mp(t[e],n,1)}function q3(t,e,n,r,i,s){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=t,l={...e,event_id:e.event_id||n.event_id||or(),timestamp:e.timestamp||Fu()},u=n.integrations||t.integrations.map(T=>T.name);(function(T,_){const{environment:b,release:v,dist:g,maxValueLength:k=250}=_;T.environment=T.environment||b||Y_,!T.release&&v&&(T.release=v),!T.dist&&g&&(T.dist=g),T.message&&(T.message=Ja(T.message,k));const j=T.exception&&T.exception.values&&T.exception.values[0];j&&j.value&&(j.value=Ja(j.value,k));const U=T.request;U&&U.url&&(U.url=Ja(U.url,k))})(l,t),function(T,_){_.length>0&&(T.sdk=T.sdk||{},T.sdk.integrations=[...T.sdk.integrations||[],..._])}(l,u),i&&i.emit("applyFrameMetadata",e),e.type===void 0&&function(T,_){const b=function(v){const g=Me._sentryDebugIds;if(!g)return{};const k=Object.keys(g);return Im&&k.length===KS||(KS=k.length,Im=k.reduce((j,U)=>{Od||(Od={});const z=Od[U];if(z)j[z[0]]=z[1];else{const R=v(U);for(let P=R.length-1;P>=0;P--){const N=R[P],D=N&&N.filename,C=g[U];if(D&&C){j[D]=C,Od[U]=[D,C];break}}}return j},{})),Im}(_);try{T.exception.values.forEach(v=>{v.stacktrace.frames.forEach(g=>{b&&g.filename&&(g.debug_id=b[g.filename])})})}catch{}}(l,t.stackParser);const d=function(T,_){if(!_)return T;const b=T?T.clone():new Bs;return b.update(_),b}(r,n.captureContext);n.mechanism&&pl(l,n.mechanism);const f=i?i.getEventProcessors():[],m=uf("globalScope",()=>new Bs).getScopeData();s&&JS(m,s.getScopeData()),d&&JS(m,d.getScopeData());const E=[...n.attachments||[],...m.attachments];return E.length&&(n.attachments=E),z3(l,m),by([...f,...m.eventProcessors],l,n).then(T=>(T&&function(_){const b={};try{_.exception.values.forEach(g=>{g.stacktrace.frames.forEach(k=>{k.debug_id&&(k.abs_path?b[k.abs_path]=k.debug_id:k.filename&&(b[k.filename]=k.debug_id),delete k.debug_id)})})}catch{}if(Object.keys(b).length===0)return;_.debug_meta=_.debug_meta||{},_.debug_meta.images=_.debug_meta.images||[];const v=_.debug_meta.images;Object.entries(b).forEach(([g,k])=>{v.push({type:"sourcemap",code_file:g,debug_id:k})})}(T),typeof o=="number"&&o>0?function(_,b,v){if(!_)return null;const g={..._,..._.breadcrumbs&&{breadcrumbs:_.breadcrumbs.map(k=>({...k,...k.data&&{data:hi(k.data,b,v)}}))},..._.user&&{user:hi(_.user,b,v)},..._.contexts&&{contexts:hi(_.contexts,b,v)},..._.extra&&{extra:hi(_.extra,b,v)}};return _.contexts&&_.contexts.trace&&g.contexts&&(g.contexts.trace=_.contexts.trace,_.contexts.trace.data&&(g.contexts.trace.data=hi(_.contexts.trace.data,b,v))),_.spans&&(g.spans=_.spans.map(k=>({...k,...k.data&&{data:hi(k.data,b,v)}}))),_.contexts&&_.contexts.flags&&g.contexts&&(g.contexts.flags=hi(_.contexts.flags,3,v)),g}(T,o,a):T))}function QS(t,e){return Zo().captureEvent(t,e)}function YS(t){const e=tn(),n=Uu(),r=Zo(),{release:i,environment:s=Y_}=e&&e.getOptions()||{},{userAgent:o}=Me.navigator||{},a=b3({release:i,environment:s,user:r.getUser()||n.getUser(),...o&&{userAgent:o},...t}),l=n.getSession();return l&&l.status==="ok"&&ml(l,{status:"exited"}),G1(),n.setSession(a),r.setSession(a),a}function G1(){const t=Uu(),e=Zo(),n=e.getSession()||t.getSession();n&&function(r,i){let s={};r.status==="ok"&&(s={status:"exited"}),ml(r,s)}(n),K1(),t.setSession(),e.setSession()}function K1(){const t=Uu(),e=Zo(),n=tn(),r=e.getSession()||t.getSession();r&&n&&n.captureSession(r)}function XS(t=!1){t?G1():K1()}function H3(t,e,n){return e||`${function(r){return`${function(i){const s=i.protocol?`${i.protocol}:`:"",o=i.port?`:${i.port}`:"";return`${s}//${i.host}${o}${i.path?`/${i.path}`:""}/api/`}(r)}${r.projectId}/envelope/`}(t)}?${function(r,i){const s={sentry_version:"7"};return r.publicKey&&(s.sentry_key=r.publicKey),i&&(s.sentry_client=`${i.name}/${i.version}`),new URLSearchParams(s).toString()}(t,n)}`}const ZS=[];function eT(t,e){for(const n of e)n&&n.afterAllSetup&&n.afterAllSetup(t)}function tT(t,e,n){if(n[e.name])Ge&&ve.log(`Integration skipped because it was already installed: ${e.name}`);else{if(n[e.name]=e,ZS.indexOf(e.name)===-1&&typeof e.setupOnce=="function"&&(e.setupOnce(),ZS.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const r=e.preprocessEvent.bind(e);t.on("preprocessEvent",(i,s)=>r(i,s,t))}if(typeof e.processEvent=="function"){const r=e.processEvent.bind(e),i=Object.assign((s,o)=>r(s,o,t),{id:e.name});t.addEventProcessor(i)}Ge&&ve.log(`Integration installed: ${e.name}`)}}class vr extends Error{constructor(e,n="warn"){super(e),this.message=e,this.logLevel=n}}const nT="Not capturing exception because it's already been captured.";class W3{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=j3(e.dsn):Ge&&ve.warn("No DSN provided, client will not send events."),this._dsn){const r=H3(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:r})}const n=["enableTracing","tracesSampleRate","tracesSampler"].find(r=>r in e&&e[r]==null);n&&Vu(()=>{console.warn(`[Sentry] Deprecation warning: \`${n}\` is set to undefined, which leads to tracing being enabled. In v9, a value of \`undefined\` will result in tracing being disabled.`)})}captureException(e,n,r){const i=or();if(LS(e))return Ge&&ve.log(nT),i;const s={event_id:i,...n};return this._process(this.eventFromException(e,s).then(o=>this._captureEvent(o,s,r))),s.event_id}captureMessage(e,n,r,i){const s={event_id:or(),...r},o=H_(e)?e:String(e),a=yy(e)?this.eventFromMessage(o,n,s):this.eventFromException(e,s);return this._process(a.then(l=>this._captureEvent(l,s,i))),s.event_id}captureEvent(e,n,r){const i=or();if(n&&n.originalException&&LS(n.originalException))return Ge&&ve.log(nT),i;const s={event_id:i,...n},o=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,s,o||r)),s.event_id}captureSession(e){typeof e.release!="string"?Ge&&ve.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),ml(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(e).then(r=>n.flush(e).then(i=>r&&i))):Ho(!0)}close(e){return this.flush(e).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const n=this._integrations[e.name];tT(this,e,this._integrations),n||eT(this,[e])}sendEvent(e,n={}){this.emit("beforeSendEvent",e,n);let r=B3(e,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])r=V3(r,U3(s));const i=this.sendEnvelope(r);i&&i.then(s=>this.emit("afterSendEvent",e,s),null)}sendSession(e){const n=function(r,i,s,o){const a=W1(s);return uu({sent_at:new Date().toISOString(),...a&&{sdk:a},...!!o&&i&&{dsn:ff(i)}},["aggregates"in r?[{type:"sessions"},r]:[{type:"session"},r.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(n)}recordDroppedEvent(e,n,r){if(this._options.sendClientReports){const i=typeof r=="number"?r:1,s=`${e}:${n}`;Ge&&ve.log(`Recording outcome: "${s}"${i>1?` (${i} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+i}}on(e,n){const r=this._hooks[e]=this._hooks[e]||[];return r.push(n),()=>{const i=r.indexOf(n);i>-1&&r.splice(i,1)}}emit(e,...n){const r=this._hooks[e];r&&r.forEach(i=>i(...n))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,n=>(Ge&&ve.error("Error while sending envelope:",n),n)):(Ge&&ve.error("Transport disabled"),Ho({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(n,r){const i={};return r.forEach(s=>{s&&tT(n,s,i)}),i}(this,e),eT(this,e)}_updateSessionFromEvent(e,n){let r=n.level==="fatal",i=!1;const s=n.exception&&n.exception.values;if(s){i=!0;for(const a of s){const l=a.mechanism;if(l&&l.handled===!1){r=!0;break}}}const o=e.status==="ok";(o&&e.errors===0||o&&r)&&(ml(e,{...r&&{status:"crashed"},errors:e.errors||Number(i||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new tr(n=>{let r=0;const i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),n(!0)):(r+=1,e&&r>=e&&(clearInterval(i),n(!1)))},1)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,n,r=Zo(),i=Uu()){const s=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o.length>0&&(n.integrations=o),this.emit("preprocessEvent",e,n),e.type||i.setLastEventId(e.event_id||n.event_id),q3(s,e,n,r,this,i).then(a=>{if(a===null)return a;a.contexts={trace:A3(r),...a.contexts};const l=function(u,d){const f=d.getPropagationContext();return f.dsc||q1(f.traceId,u)}(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:l,...a.sdkProcessingMetadata},a})}_captureEvent(e,n={},r){return this._processEvent(e,n,r).then(i=>i.event_id,i=>{Ge&&(i instanceof vr&&i.logLevel==="log"?ve.log(i.message):ve.warn(i))})}_processEvent(e,n,r){const i=this.getOptions(),{sampleRate:s}=i,o=iT(e),a=rT(e),l=e.type||"error",u=`before send for type \`${l}\``,d=s===void 0?void 0:function(E){if(typeof E=="boolean")return Number(E);const T=typeof E=="string"?parseFloat(E):E;if(!(typeof T!="number"||isNaN(T)||T<0||T>1))return T;Ge&&ve.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(E)} of type ${JSON.stringify(typeof E)}.`)}(s);if(a&&typeof d=="number"&&Math.random()>d)return this.recordDroppedEvent("sample_rate","error",e),hf(new vr(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const f=l==="replay_event"?"replay":l,m=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,n,r,m).then(E=>{if(E===null)throw this.recordDroppedEvent("event_processor",f,e),new vr("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return E;const T=function(_,b,v,g){const{beforeSend:k,beforeSendTransaction:j,beforeSendSpan:U}=b;if(rT(v)&&k)return k(v,g);if(iT(v)){if(v.spans&&U){const z=[];for(const R of v.spans){const P=U(R);P?z.push(P):(D3(),_.recordDroppedEvent("before_send","span"))}v.spans=z}if(j){if(v.spans){const z=v.spans.length;v.sdkProcessingMetadata={...v.sdkProcessingMetadata,spanCountBeforeProcessing:z}}return j(v,g)}}return v}(this,i,E,n);return function(_,b){const v=`${b} must return \`null\` or a valid event.`;if(pp(_))return _.then(g=>{if(!fl(g)&&g!==null)throw new vr(v);return g},g=>{throw new vr(`${b} rejected with ${g}`)});if(!fl(_)&&_!==null)throw new vr(v);return _}(T,u)}).then(E=>{if(E===null){if(this.recordDroppedEvent("before_send",f,e),o){const b=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",b)}throw new vr(`${u} returned \`null\`, will not send event.`,"log")}const T=r&&r.getSession();if(!o&&T&&this._updateSessionFromEvent(T,E),o){const b=(E.sdkProcessingMetadata&&E.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(E.spans?E.spans.length:0);b>0&&this.recordDroppedEvent("before_send","span",b)}const _=E.transaction_info;if(o&&_&&E.transaction!==e.transaction){const b="custom";E.transaction_info={..._,source:b}}return this.sendEvent(E,n),E}).then(null,E=>{throw E instanceof vr?E:(this.captureException(E,{data:{__sentry__:!0},originalException:E}),new vr(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${E}`))})}_process(e){this._numProcessing++,e.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([n,r])=>{const[i,s]=n.split(":");return{reason:i,category:s,quantity:r}})}_flushOutcomes(){Ge&&ve.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0)return void(Ge&&ve.log("No outcomes to send"));if(!this._dsn)return void(Ge&&ve.log("No dsn provided, will not send outcomes"));Ge&&ve.log("Sending outcomes:",e);const n=(r=e,uu((i=this._options.tunnel&&ff(this._dsn))?{dsn:i}:{},[[{type:"client_report"},{timestamp:s||Fu(),discarded_events:r}]]));var r,i,s;this.sendEnvelope(n)}}function rT(t){return t.type===void 0}function iT(t){return t.type==="transaction"}function G3(t){const e=[];function n(r){return e.splice(e.indexOf(r),1)[0]||Promise.resolve(void 0)}return{$:e,add:function(r){if(!(t===void 0||e.length<t))return hf(new vr("Not adding Promise because buffer limit was reached."));const i=r();return e.indexOf(i)===-1&&e.push(i),i.then(()=>n(i)).then(null,()=>n(i).then(null,()=>{})),i},drain:function(r){return new tr((i,s)=>{let o=e.length;if(!o)return i(!0);const a=setTimeout(()=>{r&&r>0&&i(!1)},r);e.forEach(l=>{Ho(l).then(()=>{--o||(clearTimeout(a),i(!0))},s)})})}}}function K3(t,{statusCode:e,headers:n},r=Date.now()){const i={...t},s=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(s)for(const a of s.trim().split(",")){const[l,u,,,d]=a.split(":",5),f=parseInt(l,10),m=1e3*(isNaN(f)?60:f);if(u)for(const E of u.split(";"))E==="metric_bucket"&&d&&!d.split(";").includes("custom")||(i[E]=r+m);else i.all=r+m}else o?i.all=r+function(a,l=Date.now()){const u=parseInt(`${a}`,10);if(!isNaN(u))return 1e3*u;const d=Date.parse(`${a}`);return isNaN(d)?6e4:d-l}(o,r):e===429&&(i.all=r+6e4);return i}function J3(t,e,n=G3(t.bufferSize||64)){let r={};return{send:function(i){const s=[];if(WS(i,(l,u)=>{const d=GS(u);if(function(f,m,E=Date.now()){return function(T,_){return T[_]||T.all||0}(f,m)>E}(r,d)){const f=sT(l,u);t.recordDroppedEvent("ratelimit_backoff",d,f)}else s.push(l)}),s.length===0)return Ho({});const o=uu(i[0],s),a=l=>{WS(o,(u,d)=>{const f=sT(u,d);t.recordDroppedEvent(l,GS(d),f)})};return n.add(()=>e({body:F3(o)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&Ge&&ve.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=K3(r,l),l),l=>{throw a("network_error"),l})).then(l=>l,l=>{if(l instanceof vr)return Ge&&ve.error("Skipped sending event because buffer is full."),a("queue_overflow"),Ho({});throw l})},flush:i=>n.drain(i)}}function sT(t,e){if(e==="event"||e==="transaction")return Array.isArray(t)?t[1]:void 0}const Q3=100;function mo(t,e){const n=tn(),r=Uu();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:s=Q3}=n.getOptions();if(s<=0)return;const o={timestamp:Fu(),...t},a=i?Vu(()=>i(o,e)):o;a!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",a,e),r.addBreadcrumb(a,s))}let oT;const aT=new WeakMap,Y3=()=>({name:"FunctionToString",setupOnce(){oT=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=G_(this),n=aT.has(tn())&&e!==void 0?e:this;return oT.apply(n,t)}}catch{}},setup(t){aT.set(t,!0)}}),X3=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/],Z3=(t={})=>({name:"InboundFilters",processEvent(e,n,r){const i=r.getOptions(),s=function(o={},a={}){return{allowUrls:[...o.allowUrls||[],...a.allowUrls||[]],denyUrls:[...o.denyUrls||[],...a.denyUrls||[]],ignoreErrors:[...o.ignoreErrors||[],...a.ignoreErrors||[],...o.disableErrorDefaults?[]:X3],ignoreTransactions:[...o.ignoreTransactions||[],...a.ignoreTransactions||[]],ignoreInternal:o.ignoreInternal===void 0||o.ignoreInternal}}(t,i);return function(o,a){return a.ignoreInternal&&function(l){try{return l.exception.values[0].type==="SentryError"}catch{}return!1}(o)?(Ge&&ve.warn(`Event dropped due to being internal Sentry Error.
Event: ${os(o)}`),!0):function(l,u){return l.type||!u||!u.length?!1:function(d){const f=[];d.message&&f.push(d.message);let m;try{m=d.exception.values[d.exception.values.length-1]}catch{}return m&&m.value&&(f.push(m.value),m.type&&f.push(`${m.type}: ${m.value}`)),f}(l).some(d=>Rd(d,u))}(o,a.ignoreErrors)?(Ge&&ve.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${os(o)}`),!0):function(l){return l.type||!l.exception||!l.exception.values||l.exception.values.length===0?!1:!l.message&&!l.exception.values.some(u=>u.stacktrace||u.type&&u.type!=="Error"||u.value)}(o)?(Ge&&ve.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${os(o)}`),!0):function(l,u){if(l.type!=="transaction"||!u||!u.length)return!1;const d=l.transaction;return!!d&&Rd(d,u)}(o,a.ignoreTransactions)?(Ge&&ve.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${os(o)}`),!0):function(l,u){if(!u||!u.length)return!1;const d=Dd(l);return!!d&&Rd(d,u)}(o,a.denyUrls)?(Ge&&ve.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${os(o)}.
Url: ${Dd(o)}`),!0):function(l,u){if(!u||!u.length)return!0;const d=Dd(l);return!d||Rd(d,u)}(o,a.allowUrls)?!1:(Ge&&ve.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${os(o)}.
Url: ${Dd(o)}`),!0)}(e,s)?null:e}});function Dd(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?function(n=[]){for(let r=n.length-1;r>=0;r--){const i=n[r];if(i&&i.filename!=="<anonymous>"&&i.filename!=="[native code]")return i.filename||null}return null}(e):null}catch{return Ge&&ve.error(`Cannot extract url for event ${os(t)}`),null}}function eU(t,e,n=250,r,i,s,o){if(!(s.exception&&s.exception.values&&o&&zo(o.originalException,Error)))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;var l,u;a&&(s.exception.values=(l=ky(t,e,i,o.originalException,r,s.exception.values,a,0),u=n,l.map(d=>(d.value&&(d.value=Ja(d.value,u)),d))))}function ky(t,e,n,r,i,s,o,a){if(s.length>=n+1)return s;let l=[...s];if(zo(r[i],Error)){lT(o,a);const u=t(e,r[i]),d=l.length;cT(u,i,d,a),l=ky(t,e,n,r[i],i,[u,...l],u,d)}return Array.isArray(r.errors)&&r.errors.forEach((u,d)=>{if(zo(u,Error)){lT(o,a);const f=t(e,u),m=l.length;cT(f,`errors[${d}]`,m,a),l=ky(t,e,n,u,i,[f,...l],f,m)}}),l}function lT(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function cT(t,e,n,r){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function Cm(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}function tU(){"console"in Me&&gy.forEach(function(t){t in Me.console&&Fn(Me.console,t,function(e){return df[t]=e,function(...n){Pr("console",{args:n,level:t});const r=df[t];r&&r.apply(Me.console,n)}})})}function nU(t){return t==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}const rU=()=>{let t;return{name:"Dedupe",processEvent(e){if(e.type)return e;try{if(function(n,r){return r?!!(function(i,s){const o=i.message,a=s.message;return!(!o&&!a||o&&!a||!o&&a||o!==a||!dT(i,s)||!uT(i,s))}(n,r)||function(i,s){const o=hT(s),a=hT(i);return!(!o||!a||o.type!==a.type||o.value!==a.value||!dT(i,s)||!uT(i,s))}(n,r)):!1}(e,t))return Ge&&ve.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}};function uT(t,e){let n=xS(t),r=xS(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||r.length!==n.length)return!1;for(let i=0;i<r.length;i++){const s=r[i],o=n[i];if(s.filename!==o.filename||s.lineno!==o.lineno||s.colno!==o.colno||s.function!==o.function)return!1}return!0}function dT(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return n.join("")===r.join("")}catch{return!1}}function hT(t){return t.exception&&t.exception.values&&t.exception.values[0]}function fT(t){return t===void 0?void 0:t>=400&&t<500?"warning":t>=500?"error":void 0}const Am=Me;function Iy(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function iU(){if(typeof EdgeRuntime=="string")return!0;if(!function(){if(!("fetch"in Am))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}())return!1;if(Iy(Am.fetch))return!0;let t=!1;const e=Am.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=Iy(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){Xo&&ve.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}function sU(t,e){const n="fetch";xo(n,t),Ro(n,()=>function(r,i=!1){i&&!iU()||Fn(Me,"fetch",function(s){return function(...o){const a=new Error,{method:l,url:u}=function(f){if(f.length===0)return{method:"GET",url:""};if(f.length===2){const[E,T]=f;return{url:pT(E),method:Cy(T,"method")?String(T.method).toUpperCase():"GET"}}const m=f[0];return{url:pT(m),method:Cy(m,"method")?String(m.method).toUpperCase():"GET"}}(o),d={args:o,fetchData:{method:l,url:u},startTimestamp:1e3*Ii(),virtualError:a};return r||Pr("fetch",{...d}),s.apply(Me,o).then(async f=>(r?r(f):Pr("fetch",{...d,endTimestamp:1e3*Ii(),response:f}),f),f=>{throw Pr("fetch",{...d,endTimestamp:1e3*Ii(),error:f}),q_(f)&&f.stack===void 0&&(f.stack=a.stack,qo(f,"framesToPop",1)),f})}})}(void 0,e))}function Cy(t,e){return!!t&&typeof t=="object"&&!!t[e]}function pT(t){return typeof t=="string"?t:t?Cy(t,"url")?t.url:t.toString?t.toString():"":""}const Md=Me,Mt=Me;let Ay=0;function mT(){return Ay>0}function yl(t,e={}){if(!function(r){return typeof r=="function"}(t))return t;try{const r=t.__sentry_wrapped__;if(r)return typeof r=="function"?r:t;if(G_(t))return t}catch{return t}const n=function(...r){try{const i=r.map(s=>yl(s,e));return t.apply(this,i)}catch(i){throw Ay++,setTimeout(()=>{Ay--}),function(...s){const o=J_(hp());if(s.length===2){const[a,l]=s;return a?o.withSetScope(a,l):o.withScope(l)}o.withScope(s[0])}(s=>{var o;s.addEventProcessor(a=>(e.mechanism&&(_y(a,void 0),pl(a,e.mechanism)),a.extra={...a.extra,arguments:r},a)),o=i,Zo().captureException(o,void 0)}),i}};try{for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}catch{}U1(n,t),qo(t,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>t.name})}catch{}return n}const gp=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function X_(t,e){const n=Z_(t,e),r={type:lU(e),value:cU(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function oU(t,e,n,r){const i=tn(),s=i&&i.getOptions().normalizeDepth,o=function(u){for(const d in u)if(Object.prototype.hasOwnProperty.call(u,d)){const f=u[d];if(f instanceof Error)return f}}(e),a={__serialized__:H1(e,s)};if(o)return{exception:{values:[X_(t,o)]},extra:a};const l={exception:{values:[{type:fp(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:uU(e,{isUnhandledRejection:r})}]},extra:a};if(n){const u=Z_(t,n);u.length&&(l.exception.values[0].stacktrace={frames:u})}return l}function Pm(t,e){return{exception:{values:[X_(t,e)]}}}function Z_(t,e){const n=e.stacktrace||e.stack||"",r=function(s){return s&&aU.test(s.message)?1:0}(e),i=function(s){return typeof s.framesToPop=="number"?s.framesToPop:0}(e);try{return t(n,r,i)}catch{}return[]}const aU=/Minified React error #\d+;/i;function J1(t){return typeof WebAssembly<"u"&&WebAssembly.Exception!==void 0&&t instanceof WebAssembly.Exception}function lU(t){const e=t&&t.name;return!e&&J1(t)?t.message&&Array.isArray(t.message)&&t.message.length==2?t.message[0]:"WebAssembly.Exception":e}function cU(t){const e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:J1(t)&&Array.isArray(t.message)&&t.message.length==2?t.message[1]:e:"No error message"}function Py(t,e,n,r,i){let s;if(j1(e)&&e.error)return Pm(t,e.error);if(OS(e)||xl(e,"DOMException")){const o=e;if("stack"in e)s=Pm(t,e);else{const a=o.name||(OS(o)?"DOMError":"DOMException"),l=o.message?`${a}: ${o.message}`:a;s=xy(t,l,n,r),_y(s,l)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}return q_(e)?Pm(t,e):fl(e)||fp(e)?(s=oU(t,e,n,i),pl(s,{synthetic:!0}),s):(s=xy(t,e,n,r),_y(s,`${e}`),pl(s,{synthetic:!0}),s)}function xy(t,e,n,r){const i={};if(r&&n){const s=Z_(t,n);s.length&&(i.exception={values:[{value:e,stacktrace:{frames:s}}]}),pl(i,{synthetic:!0})}if(H_(e)){const{__sentry_template_string__:s,__sentry_template_values__:o}=e;return i.logentry={message:s,params:o},i}return i.message=e,i}function uU(t,{isUnhandledRejection:e}){const n=function(i,s=40){const o=Object.keys($1(i));o.sort();const a=o[0];if(!a)return"[object has no keys]";if(a.length>=s)return Ja(a,s);for(let l=o.length;l>0;l--){const u=o.slice(0,l).join(", ");if(!(u.length>s))return l===o.length?u:Ja(u,s)}return""}(t),r=e?"promise rejection":"exception";return j1(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:fp(t)?`Event \`${function(i){try{const s=Object.getPrototypeOf(i);return s?s.constructor.name:void 0}catch{}}(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}class dU extends W3{constructor(e){const n={parentSpanIsAlwaysRootSpan:!0,...e};(function(r,i,s=[i],o="npm"){const a=r._metadata||{};a.sdk||(a.sdk={name:`sentry.javascript.${i}`,packages:s.map(l=>({name:`${o}:@sentry/${l}`,version:Po})),version:Po}),r._metadata=a})(n,"browser",["browser"],Mt.SENTRY_SDK_SOURCE||"npm"),super(n),n.sendClientReports&&Mt.document&&Mt.document.addEventListener("visibilitychange",()=>{Mt.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,n){return function(r,i,s,o){const a=Py(r,i,s&&s.syntheticException||void 0,o);return pl(a),a.level="error",s&&s.event_id&&(a.event_id=s.event_id),Ho(a)}(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return function(i,s,o="info",a,l){const u=xy(i,s,a&&a.syntheticException||void 0,l);return u.level=o,a&&a.event_id&&(u.event_id=a.event_id),Ho(u)}(this._options.stackParser,e,n,r,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(gp&&ve.warn("SDK not enabled, will not capture user feedback."));const n=function(r,{metadata:i,tunnel:s,dsn:o}){const a={event_id:r.event_id,sent_at:new Date().toISOString(),...i&&i.sdk&&{sdk:{name:i.sdk.name,version:i.sdk.version}},...!!s&&!!o&&{dsn:ff(o)}};return uu(a,[function(u){return[{type:"user_report"},u]}(r)])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(n)}_prepareEvent(e,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r)}}const hU=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,un=Me;let gT,xm,Rm,Ld;function fU(){if(!un.document)return;const t=Pr.bind(null,"dom"),e=yT(t,!0);un.document.addEventListener("click",e,!1),un.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(n=>{const r=un[n],i=r&&r.prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&(Fn(i,"addEventListener",function(s){return function(o,a,l){if(o==="click"||o=="keypress")try{const u=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},d=u[o]=u[o]||{refCount:0};if(!d.handler){const f=yT(t);d.handler=f,s.call(this,o,f,l)}d.refCount++}catch{}return s.call(this,o,a,l)}}),Fn(i,"removeEventListener",function(s){return function(o,a,l){if(o==="click"||o=="keypress")try{const u=this.__sentry_instrumentation_handlers__||{},d=u[o];d&&(d.refCount--,d.refCount<=0&&(s.call(this,o,d.handler,l),d.handler=void 0,delete u[o]),Object.keys(u).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return s.call(this,o,a,l)}}))})}function yT(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(s){try{return s.target}catch{return null}}(n);if(function(s,o){return s==="keypress"&&(!o||!o.tagName||o.tagName!=="INPUT"&&o.tagName!=="TEXTAREA"&&!o.isContentEditable)}(n.type,r))return;qo(n,"_sentryCaptured",!0),r&&!r._sentryId&&qo(r,"_sentryId",or());const i=n.type==="keypress"?"input":n.type;(function(s){if(s.type!==xm)return!1;try{if(!s.target||s.target._sentryId!==Rm)return!1}catch{}return!0})(n)||(t({event:n,name:i,global:e}),xm=n.type,Rm=r?r._sentryId:void 0),clearTimeout(gT),gT=un.setTimeout(()=>{Rm=void 0,xm=void 0},1e3)}}function Q1(t){const e="history";xo(e,t),Ro(e,pU)}function pU(){if(!function(){const n=Md.chrome,r=n&&n.app&&n.app.runtime,i="history"in Md&&!!Md.history.pushState&&!!Md.history.replaceState;return!r&&i}())return;const t=un.onpopstate;function e(n){return function(...r){const i=r.length>2?r[2]:void 0;if(i){const s=Ld,o=String(i);Ld=o,Pr("history",{from:s,to:o})}return n.apply(this,r)}}un.onpopstate=function(...n){const r=un.location.href,i=Ld;if(Ld=r,Pr("history",{from:i,to:r}),t)try{return t.apply(this,n)}catch{}},Fn(un.history,"pushState",e),Fn(un.history,"replaceState",e)}const hh={};function vT(t){hh[t]=void 0}const dc="__sentry_xhr_v3__";function mU(){if(!un.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(e,n,r){const i=new Error,s=1e3*Ii(),o=_i(r[0])?r[0].toUpperCase():void 0,a=function(u){if(_i(u))return u;try{return u.toString()}catch{}}(r[1]);if(!o||!a)return e.apply(n,r);n[dc]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const l=()=>{const u=n[dc];if(u&&n.readyState===4){try{u.status_code=n.status}catch{}Pr("xhr",{endTimestamp:1e3*Ii(),startTimestamp:s,xhr:n,virtualError:i})}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply:(u,d,f)=>(l(),u.apply(d,f))}):n.addEventListener("readystatechange",l),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(u,d,f){const[m,E]=f,T=d[dc];return T&&_i(m)&&_i(E)&&(T.request_headers[m.toLowerCase()]=E),u.apply(d,f)}}),e.apply(n,r)}}),t.send=new Proxy(t.send,{apply(e,n,r){const i=n[dc];return i?(r[0]!==void 0&&(i.body=r[0]),Pr("xhr",{startTimestamp:1e3*Ii(),xhr:n}),e.apply(n,r)):e.apply(n,r)}})}function gU(t,e=function(n){const r=hh[n];if(r)return r;let i=un[n];if(Iy(i))return hh[n]=i.bind(un);const s=un.document;if(s&&typeof s.createElement=="function")try{const o=s.createElement("iframe");o.hidden=!0,s.head.appendChild(o);const a=o.contentWindow;a&&a[n]&&(i=a[n]),s.head.removeChild(o)}catch(o){hU&&ve.warn(`Could not create sandbox iframe for ${n} check, bailing to window.${n}: `,o)}return i&&(hh[n]=i.bind(un))}("fetch")){let n=0,r=0;return J3(t,function(i){const s=i.body.length;n+=s,r++;const o={body:i.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};if(!e)return vT("fetch"),hf("No fetch implementation available");try{return e(t.url,o).then(a=>(n-=s,r--,{statusCode:a.status,headers:{"x-sentry-rate-limits":a.headers.get("X-Sentry-Rate-Limits"),"retry-after":a.headers.get("Retry-After")}}))}catch(a){return vT("fetch"),n-=s,r--,hf(a)}})}function Om(t,e,n,r){const i={filename:t,function:e==="<anonymous>"?Io:e,in_app:!0};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}const yU=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,vU=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,_U=/\((\S*)(?::(\d+))(?::(\d+))\)/,wU=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,EU=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,SU=function(...t){const e=t.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,i=0)=>{const s=[],o=n.split(`
`);for(let a=r;a<o.length;a++){const l=o[a];if(l.length>1024)continue;const u=CS.test(l)?l.replace(CS,"$1"):l;if(!u.match(/\S*Error: /)){for(const d of e){const f=d(u);if(f){s.push(f);break}}if(s.length>=50+i)break}}return function(a){if(!a.length)return[];const l=Array.from(a);return/sentryWrapped/.test(xd(l).function||"")&&l.pop(),l.reverse(),AS.test(xd(l).function||"")&&(l.pop(),AS.test(xd(l).function||"")&&l.pop()),l.slice(0,50).map(u=>({...u,filename:u.filename||xd(l).filename,function:u.function||Io}))}(s.slice(i))}}([30,t=>{const e=yU.exec(t);if(e){const[,r,i,s]=e;return Om(r,Io,+i,+s)}const n=vU.exec(t);if(n){if(n[2]&&n[2].indexOf("eval")===0){const s=_U.exec(n[2]);s&&(n[2]=s[1],n[3]=s[2],n[4]=s[3])}const[r,i]=_T(n[1]||Io,n[2]);return Om(i,r,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],[50,t=>{const e=wU.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const i=EU.exec(e[3]);i&&(e[1]=e[1]||"eval",e[3]=i[1],e[4]=i[2],e[5]="")}let n=e[3],r=e[1]||Io;return[r,n]=_T(r,n),Om(n,r,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]),_T=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:Io,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},wT=1024,TU=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:"Breadcrumbs",setup(n){var r;e.console&&function(i){const s="console";xo(s,i),Ro(s,tU)}(function(i){return function(s){if(tn()!==i)return;const o={category:"console",data:{arguments:s.args,logger:"console"},level:nU(s.level),message:NS(s.args," ")};if(s.level==="assert"){if(s.args[0]!==!1)return;o.message=`Assertion failed: ${NS(s.args.slice(1)," ")||"console.assert"}`,o.data.arguments=s.args.slice(1)}mo(o,{input:s.args,level:s.level})}}(n)),e.dom&&(r=function(i,s){return function(o){if(tn()!==i)return;let a,l,u=typeof s=="object"?s.serializeAttribute:void 0,d=typeof s=="object"&&typeof s.maxStringLength=="number"?s.maxStringLength:void 0;d&&d>wT&&(gp&&ve.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${d} was configured. Sentry will use 1024 instead.`),d=wT),typeof u=="string"&&(u=[u]);try{const m=o.event,E=function(T){return!!T&&!!T.target}(m)?m.target:m;a=F1(E,{keyAttrs:u,maxStringLength:d}),l=function(T){if(!W_.HTMLElement)return null;let _=T;for(let b=0;b<5;b++){if(!_)return null;if(_ instanceof HTMLElement){if(_.dataset.sentryComponent)return _.dataset.sentryComponent;if(_.dataset.sentryElement)return _.dataset.sentryElement}_=_.parentNode}return null}(E)}catch{a="<unknown>"}if(a.length===0)return;const f={category:`ui.${o.name}`,message:a};l&&(f.data={"ui.component_name":l}),mo(f,{event:o.event,name:o.name,global:o.global})}}(n,e.dom),xo("dom",r),Ro("dom",fU)),e.xhr&&function(i){xo("xhr",i),Ro("xhr",mU)}(function(i){return function(s){if(tn()!==i)return;const{startTimestamp:o,endTimestamp:a}=s,l=s.xhr[dc];if(!o||!a||!l)return;const{method:u,url:d,status_code:f,body:m}=l,E={method:u,url:d,status_code:f},T={xhr:s.xhr,input:m,startTimestamp:o,endTimestamp:a};mo({category:"xhr",data:E,type:"http",level:fT(f)},T)}}(n)),e.fetch&&sU(function(i){return function(s){if(tn()!==i)return;const{startTimestamp:o,endTimestamp:a}=s;if(a&&(!s.fetchData.url.match(/sentry_key/)||s.fetchData.method!=="POST"))if(s.error)mo({category:"fetch",data:s.fetchData,level:"error",type:"http"},{data:s.error,input:s.args,startTimestamp:o,endTimestamp:a});else{const l=s.response,u={...s.fetchData,status_code:l&&l.status},d={input:s.args,response:l,startTimestamp:o,endTimestamp:a};mo({category:"fetch",data:u,type:"http",level:fT(u.status_code)},d)}}}(n)),e.history&&Q1(function(i){return function(s){if(tn()!==i)return;let o=s.from,a=s.to;const l=Cm(Mt.location.href);let u=o?Cm(o):void 0;const d=Cm(a);u&&u.path||(u=l),l.protocol===d.protocol&&l.host===d.host&&(a=d.relative),l.protocol===u.protocol&&l.host===u.host&&(o=u.relative),mo({category:"navigation",data:{from:o,to:a}})}}(n)),e.sentry&&n.on("beforeSendEvent",function(i){return function(s){tn()===i&&mo({category:"sentry."+(s.type==="transaction"?"transaction":"event"),event_id:s.event_id,level:s.level,message:os(s)},{event:s})}}(n))}}},bU=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],kU=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:"BrowserApiErrors",setupOnce(){e.setTimeout&&Fn(Mt,"setTimeout",ET),e.setInterval&&Fn(Mt,"setInterval",ET),e.requestAnimationFrame&&Fn(Mt,"requestAnimationFrame",IU),e.XMLHttpRequest&&"XMLHttpRequest"in Mt&&Fn(XMLHttpRequest.prototype,"send",CU);const n=e.eventTarget;n&&(Array.isArray(n)?n:bU).forEach(AU)}}};function ET(t){return function(...e){const n=e[0];return e[0]=yl(n,{mechanism:{data:{function:$s(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function IU(t){return function(e){return t.apply(this,[yl(e,{mechanism:{data:{function:"requestAnimationFrame",handler:$s(t)},handled:!1,type:"instrument"}})])}}function CU(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(r=>{r in n&&typeof n[r]=="function"&&Fn(n,r,function(i){const s={mechanism:{data:{function:r,handler:$s(i)},handled:!1,type:"instrument"}},o=G_(i);return o&&(s.mechanism.data.handler=$s(o)),yl(i,s)})}),t.apply(this,e)}}function AU(t){const e=Mt[t],n=e&&e.prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Fn(n,"addEventListener",function(r){return function(i,s,o){try{typeof s.handleEvent=="function"&&(s.handleEvent=yl(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:$s(s),target:t},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[i,yl(s,{mechanism:{data:{function:"addEventListener",handler:$s(s),target:t},handled:!1,type:"instrument"}}),o])}}),Fn(n,"removeEventListener",function(r){return function(i,s,o){try{const a=s.__sentry_wrapped__;a&&r.call(this,i,a,o)}catch{}return r.call(this,i,s,o)}}))}const PU=()=>({name:"BrowserSession",setupOnce(){Mt.document!==void 0?(YS({ignoreDuration:!0}),XS(),Q1(({from:t,to:e})=>{t!==void 0&&t!==e&&(YS({ignoreDuration:!0}),XS())})):gp&&ve.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}}),xU=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(n){e.onerror&&(function(r){(function(i){const s="error";xo(s,i),Ro(s,w3)})(i=>{const{stackParser:s,attachStacktrace:o}=TT();if(tn()!==r||mT())return;const{msg:a,url:l,line:u,column:d,error:f}=i,m=function(E,T,_,b){const v=E.exception=E.exception||{},g=v.values=v.values||[],k=g[0]=g[0]||{},j=k.stacktrace=k.stacktrace||{},U=j.frames=j.frames||[],z=b,R=_,P=_i(T)&&T.length>0?T:function(){try{return W_.document.location.href}catch{return""}}();return U.length===0&&U.push({colno:z,filename:P,function:Io,in_app:!0,lineno:R}),E}(Py(s,f||a,void 0,o,!1),l,u,d);m.level="error",QS(m,{originalException:f,mechanism:{handled:!1,type:"onerror"}})})}(n),ST("onerror")),e.onunhandledrejection&&(function(r){(function(i){const s="unhandledrejection";xo(s,i),Ro(s,E3)})(i=>{const{stackParser:s,attachStacktrace:o}=TT();if(tn()!==r||mT())return;const a=function(u){if(yy(u))return u;try{if("reason"in u)return u.reason;if("detail"in u&&"reason"in u.detail)return u.detail.reason}catch{}return u}(i),l=yy(a)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(a)}`}]}}:Py(s,a,void 0,o,!0);l.level="error",QS(l,{originalException:a,mechanism:{handled:!1,type:"onunhandledrejection"}})})}(n),ST("onunhandledrejection"))}}};function ST(t){gp&&ve.log(`Global Handler attached: ${t}`)}function TT(){const t=tn();return t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const RU=()=>({name:"HttpContext",preprocessEvent(t){if(!Mt.navigator&&!Mt.location&&!Mt.document)return;const e=t.request&&t.request.url||Mt.location&&Mt.location.href,{referrer:n}=Mt.document||{},{userAgent:r}=Mt.navigator||{},i={...t.request&&t.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...t.request,...e&&{url:e},headers:i};t.request=s}}),OU=(t={})=>{const e=t.limit||5,n=t.key||"cause";return{name:"LinkedErrors",preprocessEvent(r,i,s){const o=s.getOptions();eU(X_,o.stackParser,o.maxValueLength,n,e,r,i)}}};var Ry="new",bT="loading",kT="loaded",pf="joining-meeting",hs="joined-meeting",rs="left-meeting",ci="error",NU="blocked",DU="off",MU="sendable",LU="loading",jU="interrupted",Y1="playable",fh="unknown",X1="full",VU="lobby",FU="none",Z1="base",UU="*",$U="ejected",BU="nbf-room",zU="nbf-token",qU="exp-room",HU="exp-token",Oy="no-room",WU="meeting-full",eP="end-of-life",GU="not-allowed",tP="connection-error",KU="cam-in-use",JU="mic-in-use",QU="cam-mic-in-use",YU="permissions",XU="undefined-mediadevices",ZU="not-found",e$="constraints",t$="unknown",nP="iframe-ready-for-launch-config",rP="iframe-launch-config",iP="theme-updated",sP="loading",oP="load-attempt-failed",Ny="loaded",aP="started-camera",lP="camera-error",cP="joining-meeting",uP="joined-meeting",dP="left-meeting",hP="participant-joined",fP="participant-updated",pP="participant-left",mP="participant-counts-updated",gP="access-state-updated",yP="meeting-session-summary-updated",vP="meeting-session-state-updated",n$="meeting-session-data-error",_P="waiting-participant-added",wP="waiting-participant-updated",EP="waiting-participant-removed",SP="track-started",TP="track-stopped",bP="transcription-started",kP="transcription-stopped",IP="transcription-error",Dy="recording-started",My="recording-stopped",CP="recording-stats",AP="recording-error",PP="recording-upload-completed",xP="recording-data",RP="app-message",OP="transcription-message",NP="remote-media-player-started",DP="remote-media-player-updated",MP="remote-media-player-stopped",LP="local-screen-share-started",jP="local-screen-share-stopped",VP="local-screen-share-canceled",FP="active-speaker-change",UP="active-speaker-mode-change",$P="network-quality-change",BP="network-connection",zP="cpu-load-change",qP="face-counts-updated",hc="fullscreen",fc="exited-fullscreen",HP="live-streaming-started",WP="live-streaming-updated",GP="live-streaming-stopped",KP="live-streaming-error",JP="lang-updated",QP="receive-settings-updated",Ly="input-settings-updated",jy="nonfatal-error",Vy="error",Nm=4096,IT=102400,Dm="iframe-call-message",CT="local-screen-start",AT="daily-method-update-live-streaming-endpoints",jd="transmit-log",wi="daily-custom-track",ph={NONE:"none",BGBLUR:"background-blur",BGIMAGE:"background-image",FACE_DETECTION:"face-detection"},YP={NONE:"none",NOISE_CANCELLATION:"noise-cancellation"},Fy={PLAY:"play",PAUSE:"pause"},Mm=["jpg","png","jpeg"],r$="add-endpoints",i$="remove-endpoints",PT="sip-call-transfer";function hr(){return!Ae()&&typeof window<"u"&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}function Ae(){return typeof navigator<"u"&&navigator.product&&navigator.product==="ReactNative"}function XP(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function s$(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)&&(function(t,e){if(!t||!e)return!0;switch(t){case"Chrome":return e.major>=75;case"Safari":return RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")&&!(e.major===13&&e.minor===0&&e.point===0);case"Firefox":return e.major>=67}return!0}(Wo(),mf())||Ae())}function xT(){if(Ae()||!document)return!1;var t=document.createElement("iframe");return!!t.requestFullscreen||!!t.webkitRequestFullscreen}var Uy="none",o$="software",a$="hardware",l$=function(){try{var t,e=document.createElement("canvas"),n=!1;(t=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0}))||(n=!0,t=e.getContext("webgl2"));var r=t!=null;return e.remove(),r?n?o$:a$:Uy}catch{return Uy}}();function ZP(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return!Ae()&&l$!==Uy&&(t?function(){return RT()?!1:["Chrome","Firefox"].includes(Wo())}():function(){if(RT())return!1;var e=Wo();if(e==="Safari"){var n=tw();if(n.major<15||n.major===15&&n.minor<4)return!1}return e==="Chrome"?ew().major>=77:e==="Firefox"?nw().major>=97:["Chrome","Firefox","Safari"].includes(e)}())}function ex(){if(Ae()||tx()||typeof AudioWorkletNode>"u")return!1;switch(Wo()){case"Chrome":case"Firefox":return!0;case"Safari":var t=mf();return t.major>17||t.major===17&&t.minor>=4}return!1}function Lm(){return XP()&&typeof MediaStreamTrack<"u"&&!function(){var t,e=Wo();if(!hr())return!0;switch(e){case"Chrome":return(t=ew()).major&&t.major>0&&t.major<75;case"Firefox":return(t=nw()).major<91;case"Safari":return(t=tw()).major<13||t.major===13&&t.minor<1;default:return!0}}()}function tx(){return hr().match(/Linux; Android/)}function RT(){var t,e=hr(),n=e.match(/Mac/)&&(!Ae()&&typeof window<"u"&&(t=window)!==null&&t!==void 0&&(t=t.navigator)!==null&&t!==void 0&&t.maxTouchPoints?window.navigator.maxTouchPoints:0)>=5;return!!(e.match(/Mobi/)||e.match(/Android/)||n)||!!hr().match(/DailyAnd\//)||void 0}function Wo(){if(typeof window<"u"){var t=hr();return nx()?"Safari":t.indexOf("Edge")>-1?"Edge":t.match(/Chrome\//)?"Chrome":t.indexOf("Safari")>-1||rx()?"Safari":t.indexOf("Firefox")>-1?"Firefox":t.indexOf("MSIE")>-1||t.indexOf(".NET")>-1?"IE":"Unknown Browser"}}function mf(){switch(Wo()){case"Chrome":return ew();case"Safari":return tw();case"Firefox":return nw();case"Edge":return function(){var t=0,e=0;if(typeof window<"u"){var n=hr().match(/Edge\/(\d+).(\d+)/);if(n)try{t=parseInt(n[1]),e=parseInt(n[2])}catch{}}return{major:t,minor:e}}()}}function ew(){var t=0,e=0,n=0,r=0,i=!1;if(typeof window<"u"){var s=hr(),o=s.match(/Chrome\/(\d+).(\d+).(\d+).(\d+)/);if(o)try{t=parseInt(o[1]),e=parseInt(o[2]),n=parseInt(o[3]),r=parseInt(o[4]),i=s.indexOf("OPR/")>-1}catch{}}return{major:t,minor:e,build:n,patch:r,opera:i}}function nx(){return!!hr().match(/iPad|iPhone|iPod/i)&&XP()}function rx(){return hr().indexOf("AppleWebKit/605.1.15")>-1}function tw(){var t=0,e=0,n=0;if(typeof window<"u"){var r=hr().match(/Version\/(\d+).(\d+)(.(\d+))?/);if(r)try{t=parseInt(r[1]),e=parseInt(r[2]),n=parseInt(r[4])}catch{}else(nx()||rx())&&(t=14,e=0,n=3)}return{major:t,minor:e,point:n}}function nw(){var t=0,e=0;if(typeof window<"u"){var n=hr().match(/Firefox\/(\d+).(\d+)/);if(n)try{t=parseInt(n[1]),e=parseInt(n[2])}catch{}}return{major:t,minor:e}}var ix=function(){return Hn(function t(){qn(this,t)},[{key:"addListenerForMessagesFromCallMachine",value:function(t,e,n){Zl()}},{key:"addListenerForMessagesFromDailyJs",value:function(t,e,n){Zl()}},{key:"sendMessageToCallMachine",value:function(t,e,n,r){Zl()}},{key:"sendMessageToDailyJs",value:function(t,e){Zl()}},{key:"removeListener",value:function(t){Zl()}}])}();function OT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OT(Object(n),!0).forEach(function(r){Hr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sx=function(){return!!t})()}var c$=function(){function t(){var e,n,r,i;return qn(this,t),n=this,r=Nr(r=t),(e=cp(n,sx()?Reflect.construct(r,[],Nr(n).constructor):r.apply(n,i)))._wrappedListeners={},e._messageCallbacks={},e}return up(t,ix),Hn(t,[{key:"addListenerForMessagesFromCallMachine",value:function(e,n,r){var i=this,s=function(o){if(o.data&&o.data.what==="iframe-call-message"&&(!o.data.callClientId||o.data.callClientId===n)&&(!o.data.from||o.data.from!=="module")){var a=jm({},o.data);if(delete a.from,a.callbackStamp&&i._messageCallbacks[a.callbackStamp]){var l=a.callbackStamp;i._messageCallbacks[l].call(r,a),delete i._messageCallbacks[l]}delete a.what,delete a.callbackStamp,e.call(r,a)}};this._wrappedListeners[e]=s,window.addEventListener("message",s)}},{key:"addListenerForMessagesFromDailyJs",value:function(e,n,r){var i=function(s){var o;if(!(!s.data||s.data.what!==Dm||!s.data.action||s.data.from&&s.data.from!=="module"||s.data.callClientId&&n&&s.data.callClientId!==n||s!=null&&(o=s.data)!==null&&o!==void 0&&o.callFrameId)){var a=s.data;e.call(r,a)}};this._wrappedListeners[e]=i,window.addEventListener("message",i)}},{key:"sendMessageToCallMachine",value:function(e,n,r,i){if(!r)throw new Error("undefined callClientId. Are you trying to use a DailyCall instance previously destroyed?");var s=jm({},e);if(s.what=Dm,s.from="module",s.callClientId=r,n){var o=dp();this._messageCallbacks[o]=n,s.callbackStamp=o}var a=i?i.contentWindow:window,l=this._callMachineTargetOrigin(i);l&&a.postMessage(s,l)}},{key:"sendMessageToDailyJs",value:function(e,n){e.what=Dm,e.callClientId=n,e.from="embedded",window.postMessage(e,this._targetOriginFromWindowLocation())}},{key:"removeListener",value:function(e){var n=this._wrappedListeners[e];n&&(window.removeEventListener("message",n),delete this._wrappedListeners[e])}},{key:"forwardPackagedMessageToCallMachine",value:function(e,n,r){var i=jm({},e);i.callClientId=r;var s=n?n.contentWindow:window,o=this._callMachineTargetOrigin(n);o&&s.postMessage(i,o)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(e,n){var r=function(i){if(i.data&&i.data.what==="iframe-call-message"&&(!i.data.callClientId||i.data.callClientId===n)&&(!i.data.from||i.data.from!=="module")){var s=i.data;e(s)}};return this._wrappedListeners[e]=r,window.addEventListener("message",r),e}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(e){var n=this._wrappedListeners[e];n&&(window.removeEventListener("message",n),delete this._wrappedListeners[e])}},{key:"_callMachineTargetOrigin",value:function(e){return e?e.src?new URL(e.src).origin:void 0:this._targetOriginFromWindowLocation()}},{key:"_targetOriginFromWindowLocation",value:function(){return window.location.protocol==="file:"?"*":window.location.origin}}])}();function NT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ox(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ox=function(){return!!t})()}var u$=function(){function t(){var e,n,r,i;return qn(this,t),n=this,r=Nr(r=t),e=cp(n,ox()?Reflect.construct(r,[],Nr(n).constructor):r.apply(n,i)),global.callMachineToDailyJsEmitter=global.callMachineToDailyJsEmitter||new my.EventEmitter,global.dailyJsToCallMachineEmitter=global.dailyJsToCallMachineEmitter||new my.EventEmitter,e._wrappedListeners={},e._messageCallbacks={},e}return up(t,ix),Hn(t,[{key:"addListenerForMessagesFromCallMachine",value:function(e,n,r){this._addListener(e,global.callMachineToDailyJsEmitter,n,r,"received call machine message")}},{key:"addListenerForMessagesFromDailyJs",value:function(e,n,r){this._addListener(e,global.dailyJsToCallMachineEmitter,n,r,"received daily-js message")}},{key:"sendMessageToCallMachine",value:function(e,n,r){this._sendMessage(e,global.dailyJsToCallMachineEmitter,r,n,"sending message to call machine")}},{key:"sendMessageToDailyJs",value:function(e,n){this._sendMessage(e,global.callMachineToDailyJsEmitter,n,null,"sending message to daily-js")}},{key:"removeListener",value:function(e){var n=this._wrappedListeners[e];n&&(global.callMachineToDailyJsEmitter.removeListener("message",n),global.dailyJsToCallMachineEmitter.removeListener("message",n),delete this._wrappedListeners[e])}},{key:"_addListener",value:function(e,n,r,i,s){var o=this,a=function(l){if(l.callClientId===r){if(l.callbackStamp&&o._messageCallbacks[l.callbackStamp]){var u=l.callbackStamp;o._messageCallbacks[u].call(i,l),delete o._messageCallbacks[u]}e.call(i,l)}};this._wrappedListeners[e]=a,n.addListener("message",a)}},{key:"_sendMessage",value:function(e,n,r,i,s){var o=function(l){for(var u=1;u<arguments.length;u++){var d=arguments[u]!=null?arguments[u]:{};u%2?NT(Object(d),!0).forEach(function(f){Hr(l,f,d[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(d)):NT(Object(d)).forEach(function(f){Object.defineProperty(l,f,Object.getOwnPropertyDescriptor(d,f))})}return l}({},e);if(o.callClientId=r,i){var a=dp();this._messageCallbacks[a]=i,o.callbackStamp=a}n.emit("message",o)}}])}(),$y="replace",By="shallow-merge",DT=[$y,By],d$=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data,r=e.mergeStrategy,i=r===void 0?$y:r;qn(this,t),t._validateMergeStrategy(i),t._validateData(n,i),this.mergeStrategy=i,this.data=n}return Hn(t,[{key:"isNoOp",value:function(){return t.isNoOpUpdate(this.data,this.mergeStrategy)}}],[{key:"isNoOpUpdate",value:function(e,n){return Object.keys(e).length===0&&n===By}},{key:"_validateMergeStrategy",value:function(e){if(!DT.includes(e))throw Error("Unrecognized mergeStrategy provided. Options are: [".concat(DT,"]"))}},{key:"_validateData",value:function(e,n){if(!function(a){if(a==null||Re(a)!=="object")return!1;var l=Object.getPrototypeOf(a);return l==null||l===Object.prototype}(e))throw Error("Meeting session data must be a plain (map-like) object");var r;try{if(r=JSON.stringify(e),n===$y){var i=JSON.parse(r);cn(i,e)||console.warn("The meeting session data provided will be modified when serialized.",i,e)}else if(n===By){for(var s in e)if(Object.hasOwnProperty.call(e,s)&&e[s]!==void 0){var o=JSON.parse(JSON.stringify(e[s]));cn(e[s],o)||console.warn("At least one key in the meeting session data provided will be modified when serialized.",o,e[s])}}}catch(a){throw Error("Meeting session data must be serializable to JSON: ".concat(a))}if(r.length>IT)throw Error("Meeting session data is too large (".concat(r.length," characters). Maximum size suppported is ").concat(IT,"."))}}])}();function ax(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ax=function(){return!!t})()}function zy(t){var e=typeof Map=="function"?new Map:void 0;return zy=function(n){if(n===null||!function(i){try{return Function.toString.call(i).indexOf("[native code]")!==-1}catch{return typeof i=="function"}}(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,r)}function r(){return function(i,s,o){if(ax())return Reflect.construct.apply(null,arguments);var a=[null];a.push.apply(a,s);var l=new(i.bind.apply(i,a));return o&&cu(l,o.prototype),l}(n,arguments,Nr(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),cu(r,n)},zy(t)}function lx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lx=function(){return!!t})()}function MT(t){var e,n=(e=window._daily)===null||e===void 0?void 0:e.pendings;if(n){var r=n.indexOf(t);r!==-1&&n.splice(r,1)}}var h$=function(){return Hn(function t(e){qn(this,t),this._currentLoad=null,this._callClientId=e},[{key:"load",value:function(){var t,e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;if(this.loaded)return window._daily.instances[this._callClientId].callMachine.reset(),void r(!0);t=this._callClientId,window._daily.pendings.push(t),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new f$(n,function(){r(!1)},function(s,o){o||MT(e._callClientId),i(s,o)}),this._currentLoad.start()}},{key:"cancel",value:function(){this._currentLoad&&this._currentLoad.cancel(),MT(this._callClientId)}},{key:"loaded",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}])}(),f$=function(){return Hn(function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;qn(this,t),this._attemptsRemaining=3,this._currentAttempt=null,this._dailyConfig=e,this._successCallback=n,this._failureCallback=r},[{key:"start",value:function(){var t=this;if(!this._currentAttempt){var e=function(n){t._currentAttempt.cancelled||(t._attemptsRemaining--,t._failureCallback(n,t._attemptsRemaining>0),t._attemptsRemaining<=0||setTimeout(function(){t._currentAttempt.cancelled||(t._currentAttempt=new LT(t._dailyConfig,t._successCallback,e),t._currentAttempt.start())},3e3))};this._currentAttempt=new LT(this._dailyConfig,this._successCallback,e),this._currentAttempt.start()}}},{key:"cancel",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:"cancelled",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:"succeeded",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}])}(),Vm=function(){function t(){return qn(this,t),e=this,r=arguments,n=Nr(n=t),cp(e,lx()?Reflect.construct(n,r||[],Nr(e).constructor):n.apply(e,r));var e,n,r}return up(t,zy(Error)),Hn(t)}(),gf=2e4,LT=function(){return Hn(function e(n,r,i){qn(this,e),this._loadAttemptImpl=Ae()||!n.avoidEval?new p$(n,r,i):new m$(n,r,i)},[{key:"start",value:(t=ge(function*(){return this._loadAttemptImpl.start()}),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(){this._loadAttemptImpl.cancel()}},{key:"cancelled",get:function(){return this._loadAttemptImpl.cancelled}},{key:"succeeded",get:function(){return this._loadAttemptImpl.succeeded}}]);var t}(),p$=function(){return Hn(function i(s,o,a){qn(this,i),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache=typeof iOSCallObjectBundleCache<"u"&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._dailyConfig=s,this._successCallback=o,this._failureCallback=a},[{key:"start",value:(r=ge(function*(){var i=lf(this._dailyConfig);!(yield this._tryLoadFromIOSCache(i))&&this._loadFromNetwork(i)}),function(){return r.apply(this,arguments)})},{key:"cancel",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:"_tryLoadFromIOSCache",value:(n=ge(function*(i){if(!this._iosCache)return!1;try{var s=yield this._iosCache.get(i);return!!this.cancelled||!!s&&(s.code?(Function('"use strict";'+s.code)(),this.succeeded=!0,this._successCallback(),!0):(this._refetchHeaders=s.refetchHeaders,!1))}catch{return!1}}),function(i){return n.apply(this,arguments)})},{key:"_loadFromNetwork",value:(e=ge(function*(i){var s=this;this._networkTimeout=setTimeout(function(){s._networkTimedOut=!0,s._failureCallback({msg:"Timed out (>".concat(gf," ms) when loading call object bundle ").concat(i),type:"timeout"})},gf);try{var o=this._refetchHeaders?{headers:this._refetchHeaders}:{},a=yield fetch(i,o);if(clearTimeout(this._networkTimeout),this.cancelled||this._networkTimedOut)throw new Vm;var l=yield this._getBundleCodeFromResponse(i,a);if(this.cancelled)throw new Vm;Function('"use strict";'+l)(),this._iosCache&&this._iosCache.set(i,l,a.headers),this.succeeded=!0,this._successCallback()}catch(u){if(clearTimeout(this._networkTimeout),u instanceof Vm||this.cancelled||this._networkTimedOut)return;this._failureCallback({msg:"Failed to load call object bundle ".concat(i,": ").concat(u),type:u.message})}}),function(i){return e.apply(this,arguments)})},{key:"_getBundleCodeFromResponse",value:(t=ge(function*(i,s){if(s.ok)return yield s.text();if(this._iosCache&&s.status===304)return(yield this._iosCache.renew(i,s.headers)).code;throw new Error("Received ".concat(s.status," response"))}),function(i,s){return t.apply(this,arguments)})}]);var t,e,n,r}(),m$=function(){return Hn(function t(e,n,r){qn(this,t),this.cancelled=!1,this.succeeded=!1,this._dailyConfig=e,this._successCallback=n,this._failureCallback=r,this._attemptId=dp(),this._networkTimeout=null,this._scriptElement=null},[{key:"start",value:function(){window._dailyCallMachineLoadWaitlist||(window._dailyCallMachineLoadWaitlist=new Set);var t=lf(this._dailyConfig);(typeof document>"u"?"undefined":Re(document))==="object"?this._startLoading(t):this._failureCallback({msg:"Call object bundle must be loaded in a DOM/web context",type:"missing context"})}},{key:"cancel",value:function(){this._stopLoading(),this.cancelled=!0}},{key:"_startLoading",value:function(t){var e=this;this._signUpForCallMachineLoadWaitlist(),this._networkTimeout=setTimeout(function(){e._stopLoading(),e._failureCallback({msg:"Timed out (>".concat(gf," ms) when loading call object bundle ").concat(t),type:"timeout"})},gf);var n=document.getElementsByTagName("head")[0],r=document.createElement("script");this._scriptElement=r,r.onload=function(){e._stopLoading(),e.succeeded=!0,e._successCallback()},r.onerror=function(i){e._stopLoading(),e._failureCallback({msg:"Failed to load call object bundle ".concat(i.target.src),type:i.message})},r.src=t,n.appendChild(r)}},{key:"_stopLoading",value:function(){this._withdrawFromCallMachineLoadWaitlist(),clearTimeout(this._networkTimeout),this._scriptElement&&(this._scriptElement.onload=null,this._scriptElement.onerror=null)}},{key:"_signUpForCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.add(this._attemptId)}},{key:"_withdrawFromCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.delete(this._attemptId)}}])}(),Vd=function(t,e,n){return y$(t.local,e,n)===!0},g$=function(t,e,n){return t.local.streams&&t.local.streams[e]&&t.local.streams[e].stream&&t.local.streams[e].stream["get".concat(n==="video"?"Video":"Audio","Tracks")]()[0]},ja=function(t,e,n,r){var i=v$(t,e,n,r);return i&&i.pendingTrack},y$=function(t,e,n){if(!t)return!1;var r=function(s){switch(s){case"avatar":return!0;case"staged":return s;default:return!!s}},i=t.public.subscribedTracks;return i&&i[e]?["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo"].indexOf(n)===-1&&i[e].custom?[!0,"staged"].includes(i[e].custom)?r(i[e].custom):r(i[e].custom[n]):r(i[e][n]):!i||r(i.ALL)},v$=function(t,e,n,r){var i=Object.values(t.streams||{}).filter(function(s){return s.participantId===e&&s.type===n&&s.pendingTrack&&s.pendingTrack.kind===r}).sort(function(s,o){return new Date(o.starttime)-new Date(s.starttime)});return i&&i[0]},_$=function(t,e){var n=t.local.public.customTracks;if(n&&n[e])return n[e].track};function jT(t,e){for(var n=e.getState(),r=0,i=["cam","screen"];r<i.length;r++)for(var s=i[r],o=0,a=["video","audio"];o<a.length;o++){var l=a[o],u=s==="cam"?l:"screen".concat(l.charAt(0).toUpperCase()+l.slice(1)),d=t.tracks[u];if(d){var f=t.local?g$(n,s,l):ja(n,t.session_id,s,l);d.state==="playable"&&(d.track=f),d.persistentTrack=f}}}function VT(t,e){try{var n=e.getState();for(var r in t.tracks)if(!w$(r)){var i=t.tracks[r].kind;if(i){var s=t.tracks[r];if(s){var o=t.local?_$(n,r):ja(n,t.session_id,r,i);s.state==="playable"&&(t.tracks[r].track=o),s.persistentTrack=o}}else console.error("unknown type for custom track")}}catch(a){console.error(a)}}function w$(t){return["video","audio","screenVideo","screenAudio"].includes(t)}function FT(t,e,n){var r=n.getState();if(t.local){if(t.audio)try{t.audioTrack=r.local.streams.cam.stream.getAudioTracks()[0],t.audioTrack||(t.audio=!1)}catch{}if(t.video)try{t.videoTrack=r.local.streams.cam.stream.getVideoTracks()[0],t.videoTrack||(t.video=!1)}catch{}if(t.screen)try{t.screenVideoTrack=r.local.streams.screen.stream.getVideoTracks()[0],t.screenAudioTrack=r.local.streams.screen.stream.getAudioTracks()[0],t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch{}}else{var i=!0;try{var s=r.participants[t.session_id];s&&s.public&&s.public.rtcType&&s.public.rtcType.impl==="peer-to-peer"&&s.private&&!["connected","completed"].includes(s.private.peeringState)&&(i=!1)}catch(d){console.error(d)}if(!i)return t.audio=!1,t.audioTrack=!1,t.video=!1,t.videoTrack=!1,t.screen=!1,void(t.screenTrack=!1);try{if(r.streams,t.audio&&Vd(r,t.session_id,"cam-audio")){var o=ja(r,t.session_id,"cam","audio");o&&(e&&e.audioTrack&&e.audioTrack.id===o.id?t.audioTrack=o:o.muted||(t.audioTrack=o)),t.audioTrack||(t.audio=!1)}if(t.video&&Vd(r,t.session_id,"cam-video")){var a=ja(r,t.session_id,"cam","video");a&&(e&&e.videoTrack&&e.videoTrack.id===a.id?t.videoTrack=a:a.muted||(t.videoTrack=a)),t.videoTrack||(t.video=!1)}if(t.screen&&Vd(r,t.session_id,"screen-audio")){var l=ja(r,t.session_id,"screen","audio");l&&(e&&e.screenAudioTrack&&e.screenAudioTrack.id===l.id?t.screenAudioTrack=l:l.muted||(t.screenAudioTrack=l))}if(t.screen&&Vd(r,t.session_id,"screen-video")){var u=ja(r,t.session_id,"screen","video");u&&(e&&e.screenVideoTrack&&e.screenVideoTrack.id===u.id?t.screenVideoTrack=u:u.muted||(t.screenVideoTrack=u))}t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch(d){console.error("unexpected error matching up tracks",d)}}}function E$(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(l,u){if(l){if(typeof l=="string")return UT(l,u);var d={}.toString.call(l).slice(8,-1);return d==="Object"&&l.constructor&&(d=l.constructor.name),d==="Map"||d==="Set"?Array.from(l):d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)?UT(l,u):void 0}}(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var l=n.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{o||n.return==null||n.return()}finally{if(a)throw s}}}}function UT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var zr=new Map,Qa=null;function S$(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(l,u){if(l){if(typeof l=="string")return $T(l,u);var d={}.toString.call(l).slice(8,-1);return d==="Object"&&l.constructor&&(d=l.constructor.name),d==="Map"||d==="Set"?Array.from(l):d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)?$T(l,u):void 0}}(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var l=n.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{o||n.return==null||n.return()}finally{if(a)throw s}}}}function $T(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var qr=new Map,Nc=null;function T$(t){cx()?function(e){zr.has(e)||(zr.set(e,{}),navigator.mediaDevices.enumerateDevices().then(function(n){zr.has(e)&&(zr.get(e).lastDevicesString=JSON.stringify(n),Qa||(Qa=function(){var r=ge(function*(){var i,s=yield navigator.mediaDevices.enumerateDevices(),o=E$(zr.keys());try{for(o.s();!(i=o.n()).done;){var a=i.value,l=JSON.stringify(s);l!==zr.get(a).lastDevicesString&&(zr.get(a).lastDevicesString=l,a(s))}}catch(u){o.e(u)}finally{o.f()}});return function(){return r.apply(this,arguments)}}(),navigator.mediaDevices.addEventListener("devicechange",Qa)))}).catch(function(){}))}(t):function(e){qr.has(e)||(qr.set(e,{}),navigator.mediaDevices.enumerateDevices().then(function(n){qr.has(e)&&(qr.get(e).lastDevicesString=JSON.stringify(n),Nc||(Nc=setInterval(ge(function*(){var r,i=yield navigator.mediaDevices.enumerateDevices(),s=S$(qr.keys());try{for(s.s();!(r=s.n()).done;){var o=r.value,a=JSON.stringify(i);a!==qr.get(o).lastDevicesString&&(qr.get(o).lastDevicesString=a,o(i))}}catch(l){s.e(l)}finally{s.f()}}),3e3)))}))}(t)}function b$(t){cx()?function(e){zr.has(e)&&(zr.delete(e),zr.size===0&&Qa&&(navigator.mediaDevices.removeEventListener("devicechange",Qa),Qa=null))}(t):function(e){qr.has(e)&&(qr.delete(e),qr.size===0&&Nc&&(clearInterval(Nc),Nc=null))}(t)}function cx(){var t;return Ae()||((t=navigator.mediaDevices)===null||t===void 0?void 0:t.ondevicechange)!==void 0}var k$=new Set;function I$(t,e){return t&&t.readyState==="live"&&!function(n,r){return n.muted&&!k$.has(n.id)}(t)}function BT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ts(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BT(Object(n),!0).forEach(function(r){Hr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var pc=Object.freeze({VIDEO:"video",AUDIO:"audio",SCREEN_VIDEO:"screenVideo",SCREEN_AUDIO:"screenAudio",CUSTOM_VIDEO:"customVideo",CUSTOM_AUDIO:"customAudio"}),C$=Object.freeze({PARTICIPANTS:"participants",STREAMING:"streaming",TRANSCRIPTION:"transcription"}),Dc=Object.values(pc),zT=["v","a","sv","sa","cv","ca"];Object.freeze(Dc.reduce(function(t,e,n){return t[e]=zT[n],t},{})),Object.freeze(zT.reduce(function(t,e,n){return t[e]=Dc[n],t},{}));var A$=[pc.VIDEO,pc.AUDIO,pc.SCREEN_VIDEO,pc.SCREEN_AUDIO],qT=Object.values(C$),HT=["p","s","t"];Object.freeze(qT.reduce(function(t,e,n){return t[e]=HT[n],t},{})),Object.freeze(HT.reduce(function(t,e,n){return t[e]=qT[n],t},{}));var ux=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.base,r=e.byUserId,i=e.byParticipantId;qn(this,t),this.base=n,this.byUserId=r,this.byParticipantId=i}return Hn(t,[{key:"clone",value:function(){var e=new t;if(this.base instanceof $t?e.base=this.base.clone():e.base=this.base,this.byUserId!==void 0)for(var n in e.byUserId={},this.byUserId){var r=this.byUserId[n];e.byUserId[n]=r instanceof $t?r.clone():r}if(this.byParticipantId!==void 0)for(var i in e.byParticipantId={},this.byParticipantId){var s=this.byParticipantId[i];e.byParticipantId[i]=s instanceof $t?s.clone():s}return e}},{key:"toJSONObject",value:function(){var e={};if(typeof this.base=="boolean"?e.base=this.base:this.base instanceof $t&&(e.base=this.base.toJSONObject()),this.byUserId!==void 0)for(var n in e.byUserId={},this.byUserId){var r=this.byUserId[n];e.byUserId[n]=r instanceof $t?r.toJSONObject():r}if(this.byParticipantId!==void 0)for(var i in e.byParticipantId={},this.byParticipantId){var s=this.byParticipantId[i];e.byParticipantId[i]=s instanceof $t?s.toJSONObject():s}return e}},{key:"toMinifiedJSONObject",value:function(){var e={};if(this.base!==void 0&&(typeof this.base=="boolean"?e.b=this.base:e.b=this.base.toMinifiedJSONObject()),this.byUserId!==void 0)for(var n in e.u={},this.byUserId){var r=this.byUserId[n];e.u[n]=typeof r=="boolean"?r:r.toMinifiedJSONObject()}if(this.byParticipantId!==void 0)for(var i in e.p={},this.byParticipantId){var s=this.byParticipantId[i];e.p[i]=typeof s=="boolean"?s:s.toMinifiedJSONObject()}return e}},{key:"normalize",value:function(){return this.base instanceof $t&&(this.base=this.base.normalize()),this.byUserId&&(this.byUserId=Object.fromEntries(Object.entries(this.byUserId).map(function(e){var n=nn(e,2),r=n[0],i=n[1];return[r,i instanceof $t?i.normalize():i]}))),this.byParticipantId&&(this.byParticipantId=Object.fromEntries(Object.entries(this.byParticipantId).map(function(e){var n=nn(e,2),r=n[0],i=n[1];return[r,i instanceof $t?i.normalize():i]}))),this}}],[{key:"fromJSONObject",value:function(e){var n,r,i;if(e.base!==void 0&&(n=typeof e.base=="boolean"?e.base:$t.fromJSONObject(e.base)),e.byUserId!==void 0)for(var s in r={},e.byUserId){var o=e.byUserId[s];r[s]=typeof o=="boolean"?o:$t.fromJSONObject(o)}if(e.byParticipantId!==void 0)for(var a in i={},e.byParticipantId){var l=e.byParticipantId[a];i[a]=typeof l=="boolean"?l:$t.fromJSONObject(l)}return new t({base:n,byUserId:r,byParticipantId:i})}},{key:"fromMinifiedJSONObject",value:function(e){var n,r,i;if(e.b!==void 0&&(n=typeof e.b=="boolean"?e.b:$t.fromMinifiedJSONObject(e.b)),e.u!==void 0)for(var s in r={},e.u){var o=e.u[s];r[s]=typeof o=="boolean"?o:$t.fromMinifiedJSONObject(o)}if(e.p!==void 0)for(var a in i={},e.p){var l=e.p[a];i[a]=typeof l=="boolean"?l:$t.fromMinifiedJSONObject(l)}return new t({base:n,byUserId:r,byParticipantId:i})}},{key:"validateJSONObject",value:function(e){if(Re(e)!=="object")return[!1,"canReceive must be an object"];for(var n=["base","byUserId","byParticipantId"],r=0,i=Object.keys(e);r<i.length;r++){var s=i[r];if(!n.includes(s))return[!1,"canReceive can only contain keys (".concat(n.join(", "),")")];if(s==="base"){var o=nn($t.validateJSONObject(e.base,!0),2),a=o[0],l=o[1];if(!a)return[!1,l]}else{if(Re(e[s])!=="object")return[!1,"invalid (non-object) value for field '".concat(s,"' in canReceive")];for(var u=0,d=Object.values(e[s]);u<d.length;u++){var f=d[u],m=nn($t.validateJSONObject(f),2),E=m[0],T=m[1];if(!E)return[!1,T]}}}return[!0]}}])}(),$t=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.video,r=e.audio,i=e.screenVideo,s=e.screenAudio,o=e.customVideo,a=e.customAudio;qn(this,t),this.video=n,this.audio=r,this.screenVideo=i,this.screenAudio=s,this.customVideo=o,this.customAudio=a}return Hn(t,[{key:"clone",value:function(){var e=new t;return this.video!==void 0&&(e.video=this.video),this.audio!==void 0&&(e.audio=this.audio),this.screenVideo!==void 0&&(e.screenVideo=this.screenVideo),this.screenAudio!==void 0&&(e.screenAudio=this.screenAudio),this.customVideo!==void 0&&(e.customVideo=ts({},this.customVideo)),this.customAudio!==void 0&&(e.customAudio=ts({},this.customAudio)),e}},{key:"toJSONObject",value:function(){var e={};return this.video!==void 0&&(e.video=this.video),this.audio!==void 0&&(e.audio=this.audio),this.screenVideo!==void 0&&(e.screenVideo=this.screenVideo),this.screenAudio!==void 0&&(e.screenAudio=this.screenAudio),this.customVideo!==void 0&&(e.customVideo=ts({},this.customVideo)),this.customAudio!==void 0&&(e.customAudio=ts({},this.customAudio)),e}},{key:"toMinifiedJSONObject",value:function(){var e={};return this.video!==void 0&&(e.v=this.video),this.audio!==void 0&&(e.a=this.audio),this.screenVideo!==void 0&&(e.sv=this.screenVideo),this.screenAudio!==void 0&&(e.sa=this.screenAudio),this.customVideo!==void 0&&(e.cv=ts({},this.customVideo)),this.customAudio!==void 0&&(e.ca=ts({},this.customAudio)),e}},{key:"normalize",value:function(){function e(n,r){return n&&Object.keys(n).length===1&&n["*"]===r}return!(this.video!==!0||this.audio!==!0||this.screenVideo!==!0||this.screenAudio!==!0||!e(this.customVideo,!0)||!e(this.customAudio,!0))||(this.video!==!1||this.audio!==!1||this.screenVideo!==!1||this.screenAudio!==!1||!e(this.customVideo,!1)||!e(this.customAudio,!1))&&this}}],[{key:"fromBoolean",value:function(e){return new t({video:e,audio:e,screenVideo:e,screenAudio:e,customVideo:{"*":e},customAudio:{"*":e}})}},{key:"fromJSONObject",value:function(e){return new t({video:e.video,audio:e.audio,screenVideo:e.screenVideo,screenAudio:e.screenAudio,customVideo:e.customVideo!==void 0?ts({},e.customVideo):void 0,customAudio:e.customAudio!==void 0?ts({},e.customAudio):void 0})}},{key:"fromMinifiedJSONObject",value:function(e){return new t({video:e.v,audio:e.a,screenVideo:e.sv,screenAudio:e.sa,customVideo:e.cv,customAudio:e.ca})}},{key:"validateJSONObject",value:function(e,n){if(typeof e=="boolean")return[!0];if(Re(e)!=="object")return[!1,"invalid (non-object, non-boolean) value in canReceive"];for(var r=Object.keys(e),i=0,s=r;i<s.length;i++){var o=s[i];if(!Dc.includes(o))return[!1,"invalid media type '".concat(o,"' in canReceive")];if(A$.includes(o)){if(typeof e[o]!="boolean")return[!1,"invalid (non-boolean) value for media type '".concat(o,"' in canReceive")]}else{if(Re(e[o])!=="object")return[!1,"invalid (non-object) value for media type '".concat(o,"' in canReceive")];for(var a=0,l=Object.values(e[o]);a<l.length;a++)if(typeof l[a]!="boolean")return[!1,"invalid (non-boolean) value for entry within '".concat(o,"' in canReceive")];if(n&&e[o]["*"]===void 0)return[!1,`canReceive "base" permission must specify "*" as an entry within '`.concat(o,"'")]}}return n&&r.length!==Dc.length?[!1,'canReceive "base" permission must specify all media types: '.concat(Dc.join(", ")," (or be set to a boolean shorthand)")]:[!0]}}])}(),P$=["result"],x$=["preserveIframe"];function WT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ue(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WT(Object(n),!0).forEach(function(r){Hr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dx=function(){return!!t})()}function GT(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(l,u){if(l){if(typeof l=="string")return KT(l,u);var d={}.toString.call(l).slice(8,-1);return d==="Object"&&l.constructor&&(d=l.constructor.name),d==="Map"||d==="Set"?Array.from(l):d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)?KT(l,u):void 0}}(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var l=n.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{o||n.return==null||n.return()}finally{if(a)throw s}}}}function KT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var go={},JT="video",R$="voice",QT=Ae()?{data:{}}:{data:{},topology:"none"},YT={present:0,hidden:0},hx={maxBitrate:{min:1e5,max:25e5},maxFramerate:{min:1,max:30},scaleResolutionDownBy:{min:1,max:8}},Fm=Object.keys(hx),XT=["state","volume","simulcastEncodings"],ZT={androidInCallNotification:{title:"string",subtitle:"string",iconName:"string",disableForCustomOverride:"boolean"},disableAutoDeviceManagement:{audio:"boolean",video:"boolean"}},yf={id:{iconPath:"string",iconPathDarkMode:"string",label:"string",tooltip:"string",visualState:"'default' | 'sidebar-open' | 'active'"}},qy={id:{allow:"string",controlledBy:"'*' | 'owners' | string[]",csp:"string",iconURL:"string",label:"string",loading:"'eager' | 'lazy'",location:"'main' | 'sidebar'",name:"string",referrerPolicy:"string",sandbox:"string",src:"string",srcdoc:"string",shared:"string[] | 'owners' | boolean"}},yo={customIntegrations:{validate:wx,help:vx()},customTrayButtons:{validate:_x,help:"customTrayButtons should be a dictionary of the type ".concat(JSON.stringify(yf))},url:{validate:function(t){return typeof t=="string"},help:"url should be a string"},baseUrl:{validate:function(t){return typeof t=="string"},help:"baseUrl should be a string"},token:{validate:function(t){return typeof t=="string"},help:"token should be a string",queryString:"t"},dailyConfig:{validate:function(t,e){try{return e.validateDailyConfig(t),!0}catch(n){console.error("Failed to validate dailyConfig",n)}return!1},help:"Unsupported dailyConfig. Check error logs for detailed info."},reactNativeConfig:{validate:function(t){return Ex(t,ZT)},help:"reactNativeConfig should look like ".concat(JSON.stringify(ZT),", all fields optional")},lang:{validate:function(t){return["da","de","en-us","en","es","fi","fr","it","jp","ka","nl","no","pl","pt","pt-BR","ru","sv","tr","user"].includes(t)},help:"language not supported. Options are: da, de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, pt-BR, ru, sv, tr, user"},userName:!0,userData:{validate:function(t){try{return fx(t),!0}catch(e){return console.error(e),!1}},help:"invalid userData type provided"},startVideoOff:!0,startAudioOff:!0,allowLocalVideo:!0,allowLocalAudio:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,showUserNameChangeUI:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(t,e){if(typeof t=="boolean")return e._preloadCache.allowLocalVideo=t,!0;var n;if(t instanceof MediaStreamTrack)e._sharedTracks.videoTrack=t,n={customTrack:wi};else{if(delete e._sharedTracks.videoTrack,typeof t!="string")return console.error("videoSource must be a MediaStreamTrack, boolean, or a string"),!1;n={deviceId:t}}return e._updatePreloadCacheInputSettings({video:{settings:n}},!1),!0}},audioSource:{validate:function(t,e){if(typeof t=="boolean")return e._preloadCache.allowLocalAudio=t,!0;var n;if(t instanceof MediaStreamTrack)e._sharedTracks.audioTrack=t,n={customTrack:wi};else{if(delete e._sharedTracks.audioTrack,typeof t!="string")return console.error("audioSource must be a MediaStreamTrack, boolean, or a string"),!1;n={deviceId:t}}return e._updatePreloadCacheInputSettings({audio:{settings:n}},!1),!0}},subscribeToTracksAutomatically:{validate:function(t,e){return e._preloadCache.subscribeToTracksAutomatically=t,!0}},theme:{validate:function(t){var e=["accent","accentText","background","backgroundAccent","baseText","border","mainAreaBg","mainAreaBgAccent","mainAreaText","supportiveText"],n=function(r){for(var i=0,s=Object.keys(r);i<s.length;i++){var o=s[i];if(!e.includes(o))return console.error('unsupported color "'.concat(o,'". Valid colors: ').concat(e.join(", "))),!1;if(!r[o].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return console.error("".concat(o,' theme color should be provided in valid hex color format. Received: "').concat(r[o],'"')),!1}return!0};return Re(t)==="object"&&("light"in t&&"dark"in t||"colors"in t)?"light"in t&&"dark"in t?"colors"in t.light?"colors"in t.dark?n(t.light.colors)&&n(t.dark.colors):(console.error('Dark theme is missing "colors" property.',t),!1):(console.error('Light theme is missing "colors" property.',t),!1):n(t.colors):(console.error('Theme must contain either both "light" and "dark" properties, or "colors".',t),!1)},help:"unsupported theme configuration. Check error logs for detailed info."},layoutConfig:{validate:function(t){if("grid"in t){var e=t.grid;if("maxTilesPerPage"in e){if(!Number.isInteger(e.maxTilesPerPage))return console.error("grid.maxTilesPerPage should be an integer. You passed ".concat(e.maxTilesPerPage,".")),!1;if(e.maxTilesPerPage>49)return console.error("grid.maxTilesPerPage can't be larger than 49 without sacrificing browser performance. Please contact us at https://www.daily.co/contact to talk about your use case."),!1}if("minTilesPerPage"in e){if(!Number.isInteger(e.minTilesPerPage))return console.error("grid.minTilesPerPage should be an integer. You passed ".concat(e.minTilesPerPage,".")),!1;if(e.minTilesPerPage<1)return console.error("grid.minTilesPerPage can't be lower than 1."),!1;if("maxTilesPerPage"in e&&e.minTilesPerPage>e.maxTilesPerPage)return console.error("grid.minTilesPerPage can't be higher than grid.maxTilesPerPage."),!1}}return!0},help:"unsupported layoutConfig. Check error logs for detailed info."},receiveSettings:{validate:function(t){return px(t,{allowAllParticipantsKey:!1})},help:yx({allowAllParticipantsKey:!1})},sendSettings:{validate:function(t,e){return!!function(n,r){try{return r.validateUpdateSendSettings(n),!0}catch(i){return console.error("Failed to validate send settings",i),!1}}(t,e)&&(e._preloadCache.sendSettings=t,!0)},help:"Invalid sendSettings provided. Check error logs for detailed info."},inputSettings:{validate:function(t,e){var n;return!!mx(t)&&(e._inputSettings||(e._inputSettings={}),gx(t,(n=e.properties)===null||n===void 0?void 0:n.dailyConfig,e._sharedTracks),e._updatePreloadCacheInputSettings(t,!0),!0)},help:Hy()},layout:{validate:function(t){return t==="custom-v1"||t==="browser"||t==="none"},help:'layout may only be set to "custom-v1"',queryString:"layout"},emb:{queryString:"emb"},embHref:{queryString:"embHref"},dailyJsVersion:{queryString:"dailyJsVersion"},proxy:{queryString:"proxy"},strictMode:!0,allowMultipleCallInstances:!0},Fd={styles:{validate:function(t){for(var e in t)if(e!=="cam"&&e!=="screen")return!1;if(t.cam){for(var n in t.cam)if(n!=="div"&&n!=="video")return!1}if(t.screen){for(var r in t.screen)if(r!=="div"&&r!=="video")return!1}return!0},help:"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }"},setSubscribedTracks:{validate:function(t,e){if(e._preloadCache.subscribeToTracksAutomatically)return!1;var n=[!0,!1,"staged"];if(n.includes(t)||!Ae()&&t==="avatar")return!0;var r=["audio","video","screenAudio","screenVideo","rmpAudio","rmpVideo"],i=function(s){var o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];for(var a in s)if(a==="custom"){if(!n.includes(s[a])&&!i(s[a],!0))return!1}else{var l=!o&&!r.includes(a),u=!n.includes(s[a]);if(l||u)return!1}return!0};return i(t)},help:"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: "+"true".concat(Ae()?"":" | 'avatar'"," | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }")},setAudio:!0,setVideo:!0,setScreenShare:{validate:function(t){return t===!1},help:"setScreenShare must be false, as it's only meant for stopping remote participants' screen shares"},eject:!0,updatePermissions:{validate:function(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var r=nn(n[e],2),i=r[0],s=r[1];switch(i){case"hasPresence":if(typeof s!="boolean")return!1;break;case"canSend":if(s instanceof Set||s instanceof Array||Array.isArray(s)){var o,a=["video","audio","screenVideo","screenAudio","customVideo","customAudio"],l=GT(s);try{for(l.s();!(o=l.n()).done;){var u=o.value;if(!a.includes(u))return!1}}catch(v){l.e(v)}finally{l.f()}}else if(typeof s!="boolean")return!1;(s instanceof Array||Array.isArray(s))&&(t.canSend=new Set(s));break;case"canReceive":var d=nn(ux.validateJSONObject(s),2),f=d[0],m=d[1];if(!f)return console.error(m),!1;break;case"canAdmin":if(s instanceof Set||s instanceof Array||Array.isArray(s)){var E,T=["participants","streaming","transcription"],_=GT(s);try{for(_.s();!(E=_.n()).done;){var b=E.value;if(!T.includes(b))return!1}}catch(v){_.e(v)}finally{_.f()}}else if(typeof s!="boolean")return!1;(s instanceof Array||Array.isArray(s))&&(t.canAdmin=new Set(s));break;default:return!1}}return!0},help:"updatePermissions can take hasPresence, canSend, canReceive, and canAdmin permissions. hasPresence must be a boolean. canSend can be a boolean or an Array or Set of media types (video, audio, screenVideo, screenAudio, customVideo, customAudio). canReceive must be an object specifying base, byUserId, and/or byParticipantId fields (see documentation for more details). canAdmin can be a boolean or an Array or Set of admin types (participants, streaming, transcription)."}};Promise.any||(Promise.any=function(){var t=ge(function*(e){return new Promise(function(n,r){var i=[];e.forEach(function(s){return Promise.resolve(s).then(function(o){n(o)}).catch(function(o){i.push(o),i.length===e.length&&r(i)})})})});return function(e){return t.apply(this,arguments)}}());var O$=function(){function t(h){var S,w,M,O,$,K,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(qn(this,t),M=this,O=Nr(O=t),Hr(w=cp(M,dx()?Reflect.construct(O,[],Nr(M).constructor):O.apply(M,$)),"startListeningForDeviceChanges",function(){T$(w.handleDeviceChange)}),Hr(w,"stopListeningForDeviceChanges",function(){b$(w.handleDeviceChange)}),Hr(w,"handleDeviceChange",function(le){le=le.map(function(pe){return JSON.parse(JSON.stringify(pe))}),w.emitDailyJSEvent({action:"available-devices-updated",availableDevices:le})}),Hr(w,"handleNativeAppStateChange",function(){var le=ge(function*(pe){if(pe==="destroyed")return console.warn("App has been destroyed before leaving the meeting. Cleaning up all the resources!"),void(yield w.destroy());var Xe=pe==="active";w.disableReactNativeAutoDeviceManagement("video")||(Xe?w.camUnmutedBeforeLosingNativeActiveState&&w.setLocalVideo(!0):(w.camUnmutedBeforeLosingNativeActiveState=w.localVideo(),w.camUnmutedBeforeLosingNativeActiveState&&w.setLocalVideo(!1)))});return function(pe){return le.apply(this,arguments)}}()),Hr(w,"handleNativeAudioFocusChange",function(le){w.disableReactNativeAutoDeviceManagement("audio")||(w._hasNativeAudioFocus=le,w.toggleParticipantAudioBasedOnNativeAudioFocus(),w._hasNativeAudioFocus?w.micUnmutedBeforeLosingNativeAudioFocus&&w.setLocalAudio(!0):(w.micUnmutedBeforeLosingNativeAudioFocus=w.localAudio(),w.setLocalAudio(!1)))}),Hr(w,"handleNativeSystemScreenCaptureStop",function(){w.stopScreenShare()}),!Lm()&&!Ae())throw new Error("WebRTC not supported or suppressed");if(w.strictMode=W.strictMode===void 0||W.strictMode,w.allowMultipleCallInstances=(S=W.allowMultipleCallInstances)!==null&&S!==void 0&&S,Object.keys(go).length&&(w._logDuplicateInstanceAttempt(),!w.allowMultipleCallInstances)){if(w.strictMode)throw new Error("Duplicate DailyIframe instances are not allowed");console.warn("Using strictMode: false to allow multiple call instances is now deprecated. Set `allowMultipleCallInstances: true`")}if(window._daily||(window._daily={pendings:[],instances:{}}),w.callClientId=dp(),go[(K=w).callClientId]=K,window._daily.instances[w.callClientId]={},w._sharedTracks={},window._daily.instances[w.callClientId].tracks=w._sharedTracks,W.dailyJsVersion=t.version(),w._iframe=h,w._callObjectMode=W.layout==="none"&&!w._iframe,w._preloadCache={subscribeToTracksAutomatically:!0,outputDeviceId:null,inputSettings:null,sendSettings:null,videoTrackForNetworkConnectivityTest:null,videoTrackForConnectionQualityTest:null},W.showLocalVideo!==void 0?w._callObjectMode?console.error("showLocalVideo is not available in call object mode"):w._showLocalVideo=!!W.showLocalVideo:w._showLocalVideo=!0,W.showParticipantsBar!==void 0?w._callObjectMode?console.error("showParticipantsBar is not available in call object mode"):w._showParticipantsBar=!!W.showParticipantsBar:w._showParticipantsBar=!0,W.customIntegrations!==void 0?w._callObjectMode?console.error("customIntegrations is not available in call object mode"):w._customIntegrations=W.customIntegrations:w._customIntegrations={},W.customTrayButtons!==void 0?w._callObjectMode?console.error("customTrayButtons is not available in call object mode"):w._customTrayButtons=W.customTrayButtons:w._customTrayButtons={},W.activeSpeakerMode!==void 0?w._callObjectMode?console.error("activeSpeakerMode is not available in call object mode"):w._activeSpeakerMode=!!W.activeSpeakerMode:w._activeSpeakerMode=!1,W.receiveSettings?w._callObjectMode?w._receiveSettings=W.receiveSettings:console.error("receiveSettings is only available in call object mode"):w._receiveSettings={},w.validateProperties(W),w.properties=ue({},W),w._inputSettings||(w._inputSettings={}),w._callObjectLoader=w._callObjectMode?new h$(w.callClientId):null,w._callState=Ry,w._isPreparingToJoin=!1,w._accessState={access:fh},w._meetingSessionSummary={},w._finalSummaryOfPrevSession={},w._meetingSessionState=Bm(QT,w._callObjectMode),w._nativeInCallAudioMode=JT,w._participants={},w._isScreenSharing=!1,w._participantCounts=YT,w._rmpPlayerState={},w._waitingParticipants={},w._network={threshold:"good",quality:100,networkState:"unknown",stats:{}},w._activeSpeaker={},w._localAudioLevel=0,w._isLocalAudioLevelObserverRunning=!1,w._remoteParticipantsAudioLevel={},w._isRemoteParticipantsAudioLevelObserverRunning=!1,w._maxAppMessageSize=Nm,w._messageChannel=Ae()?new u$:new c$,w._iframe&&(w._iframe.requestFullscreen?w._iframe.addEventListener("fullscreenchange",function(){document.fullscreenElement===w._iframe?(w.emitDailyJSEvent({action:hc}),w.sendMessageToCallMachine({action:hc})):(w.emitDailyJSEvent({action:fc}),w.sendMessageToCallMachine({action:fc}))}):w._iframe.webkitRequestFullscreen&&w._iframe.addEventListener("webkitfullscreenchange",function(){document.webkitFullscreenElement===w._iframe?(w.emitDailyJSEvent({action:hc}),w.sendMessageToCallMachine({action:hc})):(w.emitDailyJSEvent({action:fc}),w.sendMessageToCallMachine({action:fc}))})),Ae()){var X=w.nativeUtils();X.addAudioFocusChangeListener&&X.removeAudioFocusChangeListener&&X.addAppStateChangeListener&&X.removeAppStateChangeListener&&X.addSystemScreenCaptureStopListener&&X.removeSystemScreenCaptureStopListener||console.warn("expected (add|remove)(AudioFocusChange|AppActiveStateChange|SystemScreenCaptureStop)Listener to be available in React Native"),w._hasNativeAudioFocus=!0,X.addAudioFocusChangeListener(w.handleNativeAudioFocusChange),X.addAppStateChangeListener(w.handleNativeAppStateChange),X.addSystemScreenCaptureStopListener(w.handleNativeSystemScreenCaptureStop)}return w._callObjectMode&&w.startListeningForDeviceChanges(),w._messageChannel.addListenerForMessagesFromCallMachine(w.handleMessageFromCallMachine,w.callClientId,w),w}return up(t,Pd),Hn(t,[{key:"destroy",value:(Ee=ge(function*(){var h;try{yield this.leave()}catch{}var S=this._iframe;if(S){var w=S.parentElement;w&&w.removeChild(S)}if(this._messageChannel.removeListener(this.handleMessageFromCallMachine),Ae()){var M=this.nativeUtils();M.removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),M.removeAppStateChangeListener(this.handleNativeAppStateChange),M.removeSystemScreenCaptureStopListener(this.handleNativeSystemScreenCaptureStop)}this._callObjectMode&&this.stopListeningForDeviceChanges(),this.resetMeetingDependentVars(),this._destroyed=!0,this.emitDailyJSEvent({action:"call-instance-destroyed"}),delete go[this.callClientId],!((h=window)===null||h===void 0||(h=h._daily)===null||h===void 0)&&h.instances&&delete window._daily.instances[this.callClientId],this.strictMode&&(this.callClientId=void 0)}),function(){return Ee.apply(this,arguments)})},{key:"isDestroyed",value:function(){return!!this._destroyed}},{key:"loadCss",value:function(h){var S=h.bodyClass,w=h.cssFile,M=h.cssText;return Ce(),this.sendMessageToCallMachine({action:"load-css",cssFile:this.absoluteUrl(w),bodyClass:S,cssText:M}),this}},{key:"iframe",value:function(){return Ce(),this._iframe}},{key:"meetingState",value:function(){return this._callState}},{key:"accessState",value:function(){return yr(this._callObjectMode,"accessState()"),this._accessState}},{key:"participants",value:function(){return this._participants}},{key:"participantCounts",value:function(){return this._participantCounts}},{key:"waitingParticipants",value:function(){return yr(this._callObjectMode,"waitingParticipants()"),this._waitingParticipants}},{key:"validateParticipantProperties",value:function(h,S){for(var w in S){if(!Fd[w])throw new Error("unrecognized updateParticipant property ".concat(w));if(Fd[w].validate&&!Fd[w].validate(S[w],this,this._participants[h]))throw new Error(Fd[w].help)}}},{key:"updateParticipant",value:function(h,S){return this._participants.local&&this._participants.local.session_id===h&&(h="local"),h&&S&&(this.validateParticipantProperties(h,S),this.sendMessageToCallMachine({action:"update-participant",id:h,properties:S})),this}},{key:"updateParticipants",value:function(h){var S=this._participants.local&&this._participants.local.session_id;for(var w in h)w===S&&(w="local"),w&&h[w]&&this.validateParticipantProperties(w,h[w]);return this.sendMessageToCallMachine({action:"update-participants",participants:h}),this}},{key:"updateWaitingParticipant",value:(Ne=ge(function*(){var h=this,S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(yr(this._callObjectMode,"updateWaitingParticipant()"),He(this._callState,"updateWaitingParticipant()"),typeof S!="string"||Re(w)!=="object")throw new Error("updateWaitingParticipant() must take an id string and a updates object");return new Promise(function(M,O){h.sendMessageToCallMachine({action:"daily-method-update-waiting-participant",id:S,updates:w},function($){$.error&&O($.error),$.id||O(new Error("unknown error in updateWaitingParticipant()")),M({id:$.id})})})}),function(){return Ne.apply(this,arguments)})},{key:"updateWaitingParticipants",value:(ce=ge(function*(){var h=this,S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(yr(this._callObjectMode,"updateWaitingParticipants()"),He(this._callState,"updateWaitingParticipants()"),Re(S)!=="object")throw new Error("updateWaitingParticipants() must take a mapping between ids and update objects");return new Promise(function(w,M){h.sendMessageToCallMachine({action:"daily-method-update-waiting-participants",updatesById:S},function(O){O.error&&M(O.error),O.ids||M(new Error("unknown error in updateWaitingParticipants()")),w({ids:O.ids})})})}),function(){return ce.apply(this,arguments)})},{key:"requestAccess",value:(he=ge(function*(){var h=this,S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},w=S.access,M=w===void 0?{level:X1}:w,O=S.name,$=O===void 0?"":O;return yr(this._callObjectMode,"requestAccess()"),He(this._callState,"requestAccess()"),new Promise(function(K,W){h.sendMessageToCallMachine({action:"daily-method-request-access",access:M,name:$},function(X){X.error&&W(X.error),X.access||W(new Error("unknown error in requestAccess()")),K({access:X.access,granted:X.granted})})})}),function(){return he.apply(this,arguments)})},{key:"localAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.audio.state):null}},{key:"localVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.video.state):null}},{key:"setLocalAudio",value:function(h){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return"forceDiscardTrack"in S&&(Ae()?(console.warn("forceDiscardTrack option not supported in React Native; ignoring"),S={}):h&&(console.warn("forceDiscardTrack option only supported when calling setLocalAudio(false); ignoring"),S={})),this.sendMessageToCallMachine({action:"local-audio",state:h,options:S}),this}},{key:"localScreenAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenAudio.state):null}},{key:"localScreenVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenVideo.state):null}},{key:"updateScreenShare",value:function(h){if(this._isScreenSharing)return this.sendMessageToCallMachine({action:"local-screen-update",options:h}),this;console.warn("There is no screen share in progress. Try calling startScreenShare first.")}},{key:"setLocalVideo",value:function(h){return this.sendMessageToCallMachine({action:"local-video",state:h}),this}},{key:"_setAllowLocalAudio",value:function(h){if(this._preloadCache.allowLocalAudio=h,this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-allow-local-audio",state:h}),this}},{key:"_setAllowLocalVideo",value:function(h){if(this._preloadCache.allowLocalVideo=h,this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-allow-local-video",state:h}),this}},{key:"getReceiveSettings",value:(Z=ge(function*(h){var S=this,w=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).showInheritedValues,M=w!==void 0&&w;if(yr(this._callObjectMode,"getReceiveSettings()"),!this._callMachineInitialized)return this._receiveSettings;switch(Re(h)){case"string":return new Promise(function(O){S.sendMessageToCallMachine({action:"get-single-participant-receive-settings",id:h,showInheritedValues:M},function($){O($.receiveSettings)})});case"undefined":return this._receiveSettings;default:throw new Error('first argument to getReceiveSettings() must be a participant id (or "base"), or there should be no arguments')}}),function(h){return Z.apply(this,arguments)})},{key:"updateReceiveSettings",value:(Fe=ge(function*(h){var S=this;if(yr(this._callObjectMode,"updateReceiveSettings()"),!px(h,{allowAllParticipantsKey:!0}))throw new Error(yx({allowAllParticipantsKey:!0}));return He(this._callState,"updateReceiveSettings()","To specify receive settings earlier, use the receiveSettings config property."),new Promise(function(w){S.sendMessageToCallMachine({action:"update-receive-settings",receiveSettings:h},function(M){w({receiveSettings:M.receiveSettings})})})}),function(h){return Fe.apply(this,arguments)})},{key:"_prepInputSettingsForSharing",value:function(h,S){if(h){var w={};if(h.audio){var M,O,$;h.audio.settings&&(!Object.keys(h.audio.settings).length&&S||(w.audio={settings:ue({},h.audio.settings)})),S&&(M=w.audio)!==null&&M!==void 0&&(M=M.settings)!==null&&M!==void 0&&M.customTrack&&(w.audio.settings={customTrack:this._sharedTracks.audioTrack});var K=((O=h.audio.processor)===null||O===void 0?void 0:O.type)==="none"&&(($=h.audio.processor)===null||$===void 0?void 0:$._isDefaultWhenNone);if(h.audio.processor&&!K){var W=ue({},h.audio.processor);delete W._isDefaultWhenNone,w.audio=ue(ue({},w.audio),{},{processor:W})}}if(h.video){var X,le,pe;h.video.settings&&(!Object.keys(h.video.settings).length&&S||(w.video={settings:ue({},h.video.settings)})),S&&(X=w.video)!==null&&X!==void 0&&(X=X.settings)!==null&&X!==void 0&&X.customTrack&&(w.video.settings={customTrack:this._sharedTracks.videoTrack});var Xe=((le=h.video.processor)===null||le===void 0?void 0:le.type)==="none"&&((pe=h.video.processor)===null||pe===void 0?void 0:pe._isDefaultWhenNone);if(h.video.processor&&!Xe){var Ft=ue({},h.video.processor);delete Ft._isDefaultWhenNone,w.video=ue(ue({},w.video),{},{processor:Ft})}}return w}}},{key:"getInputSettings",value:function(){var h=this;return Ce(),new Promise(function(S){S(h._getInputSettings())})}},{key:"_getInputSettings",value:function(){var h,S,w,M,O,$,K={processor:{type:"none",_isDefaultWhenNone:!0}};this._inputSettings?(h=((w=this._inputSettings)===null||w===void 0?void 0:w.video)||K,S=((M=this._inputSettings)===null||M===void 0?void 0:M.audio)||K):(h=((O=this._preloadCache)===null||O===void 0||(O=O.inputSettings)===null||O===void 0?void 0:O.video)||K,S=(($=this._preloadCache)===null||$===void 0||($=$.inputSettings)===null||$===void 0?void 0:$.audio)||K);var W={audio:S,video:h};return this._prepInputSettingsForSharing(W,!0)}},{key:"_updatePreloadCacheInputSettings",value:function(h,S){var w=this._inputSettings||{},M={};if(h.video){var O,$,K;M.video={},h.video.settings?(M.video.settings={},S||h.video.settings.customTrack||(K=w.video)===null||K===void 0||!K.settings?M.video.settings=h.video.settings:M.video.settings=ue(ue({},w.video.settings),h.video.settings),Object.keys(M.video.settings).length||delete M.video.settings):(O=w.video)!==null&&O!==void 0&&O.settings&&(M.video.settings=w.video.settings),h.video.processor?M.video.processor=h.video.processor:($=w.video)!==null&&$!==void 0&&$.processor&&(M.video.processor=w.video.processor)}else w.video&&(M.video=w.video);if(h.audio){var W,X,le;M.audio={},h.audio.settings?(M.audio.settings={},S||h.audio.settings.customTrack||(le=w.audio)===null||le===void 0||!le.settings?M.audio.settings=h.audio.settings:M.audio.settings=ue(ue({},w.audio.settings),h.audio.settings),Object.keys(M.audio.settings).length||delete M.audio.settings):(W=w.audio)!==null&&W!==void 0&&W.settings&&(M.audio.settings=w.audio.settings),h.audio.processor?M.audio.processor=h.audio.processor:(X=w.audio)!==null&&X!==void 0&&X.processor&&(M.audio.processor=w.audio.processor)}else w.audio&&(M.audio=w.audio);this._maybeUpdateInputSettings(M)}},{key:"_devicesFromInputSettings",value:function(h){var S,w,M=(h==null||(S=h.video)===null||S===void 0||(S=S.settings)===null||S===void 0?void 0:S.deviceId)||null,O=(h==null||(w=h.audio)===null||w===void 0||(w=w.settings)===null||w===void 0?void 0:w.deviceId)||null,$=this._preloadCache.outputDeviceId||null;return{camera:M?{deviceId:M}:{},mic:O?{deviceId:O}:{},speaker:$?{deviceId:$}:{}}}},{key:"updateInputSettings",value:(gn=ge(function*(h){var S=this;return Ce(),mx(h)?h.video||h.audio?(gx(h,this.properties.dailyConfig,this._sharedTracks),this._callObjectMode&&!this._callMachineInitialized?(this._updatePreloadCacheInputSettings(h,!0),this._getInputSettings()):new Promise(function(w,M){S.sendMessageToCallMachine({action:"update-input-settings",inputSettings:h},function(O){if(O.error)M(O.error);else{if(O.returnPreloadCache)return S._updatePreloadCacheInputSettings(h,!0),void w(S._getInputSettings());S._maybeUpdateInputSettings(O.inputSettings),w(S._prepInputSettingsForSharing(O.inputSettings,!0))}})})):this._getInputSettings():(console.error(Hy()),Promise.reject(Hy()))}),function(h){return gn.apply(this,arguments)})},{key:"setBandwidth",value:function(h){var S=h.kbs,w=h.trackConstraints;if(Ce(),this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-bandwidth",kbs:S,trackConstraints:w}),this}},{key:"getDailyLang",value:function(){var h=this;if(Ce(),this._callMachineInitialized)return new Promise(function(S){h.sendMessageToCallMachine({action:"get-daily-lang"},function(w){delete w.action,delete w.callbackStamp,S(w)})})}},{key:"setDailyLang",value:function(h){return Ce(),this.sendMessageToCallMachine({action:"set-daily-lang",lang:h}),this}},{key:"setProxyUrl",value:function(h){return this.sendMessageToCallMachine({action:"set-proxy-url",proxyUrl:h}),this}},{key:"setIceConfig",value:function(h){return this.sendMessageToCallMachine({action:"set-ice-config",iceConfig:h}),this}},{key:"meetingSessionSummary",value:function(){return[rs,ci].includes(this._callState)?this._finalSummaryOfPrevSession:this._meetingSessionSummary}},{key:"getMeetingSession",value:(Pt=ge(function*(){var h=this;return console.warn("getMeetingSession() is deprecated: use meetingSessionSummary(), which will return immediately"),He(this._callState,"getMeetingSession()"),new Promise(function(S){h.sendMessageToCallMachine({action:"get-meeting-session"},function(w){delete w.action,delete w.callbackStamp,S(w)})})}),function(){return Pt.apply(this,arguments)})},{key:"meetingSessionState",value:function(){return He(this._callState,"meetingSessionState"),this._meetingSessionState}},{key:"setMeetingSessionData",value:function(h){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"replace";yr(this._callObjectMode,"setMeetingSessionData()"),He(this._callState,"setMeetingSessionData");try{(function(w,M){new d$({data:w,mergeStrategy:M})})(h,S)}catch(w){throw console.error(w),w}try{this.sendMessageToCallMachine({action:"set-session-data",data:h,mergeStrategy:S})}catch(w){throw new Error("Error setting meeting session data: ".concat(w))}}},{key:"setUserName",value:function(h,S){var w=this;return this.properties.userName=h,new Promise(function(M){w.sendMessageToCallMachine({action:"set-user-name",name:h??"",thisMeetingOnly:Ae()||!!S&&!!S.thisMeetingOnly},function(O){delete O.action,delete O.callbackStamp,M(O)})})}},{key:"setUserData",value:(be=ge(function*(h){var S=this;try{fx(h)}catch(w){throw console.error(w),w}if(this.properties.userData=h,this._callMachineInitialized)return new Promise(function(w){try{S.sendMessageToCallMachine({action:"set-user-data",userData:h},function(M){delete M.action,delete M.callbackStamp,w(M)})}catch(M){throw new Error("Error setting user data: ".concat(M))}})}),function(h){return be.apply(this,arguments)})},{key:"validateAudioLevelInterval",value:function(h){if(h&&(h<100||typeof h!="number"))throw new Error("The interval must be a number greater than or equal to 100 milliseconds.")}},{key:"startLocalAudioLevelObserver",value:function(h){var S=this;if(typeof AudioWorkletNode>"u"&&!Ae())throw new Error("startLocalAudioLevelObserver() is not supported on this browser");if(this.validateAudioLevelInterval(h),this._callMachineInitialized)return this._isLocalAudioLevelObserverRunning=!0,new Promise(function(w,M){S.sendMessageToCallMachine({action:"start-local-audio-level-observer",interval:h},function(O){S._isLocalAudioLevelObserverRunning=!O.error,O.error?M({error:O.error}):w()})});this._preloadCache.localAudioLevelObserver={enabled:!0,interval:h}}},{key:"isLocalAudioLevelObserverRunning",value:function(){return this._isLocalAudioLevelObserverRunning}},{key:"stopLocalAudioLevelObserver",value:function(){this._preloadCache.localAudioLevelObserver=null,this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-local-audio-level-observer"})}},{key:"startRemoteParticipantsAudioLevelObserver",value:function(h){var S=this;if(this.validateAudioLevelInterval(h),this._callMachineInitialized)return this._isRemoteParticipantsAudioLevelObserverRunning=!0,new Promise(function(w,M){S.sendMessageToCallMachine({action:"start-remote-participants-audio-level-observer",interval:h},function(O){S._isRemoteParticipantsAudioLevelObserverRunning=!O.error,O.error?M({error:O.error}):w()})});this._preloadCache.remoteParticipantsAudioLevelObserver={enabled:!0,interval:h}}},{key:"isRemoteParticipantsAudioLevelObserverRunning",value:function(){return this._isRemoteParticipantsAudioLevelObserverRunning}},{key:"stopRemoteParticipantsAudioLevelObserver",value:function(){this._preloadCache.remoteParticipantsAudioLevelObserver=null,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-remote-participants-audio-level-observer"})}},{key:"startCamera",value:(L=ge(function*(){var h=this,S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(yr(this._callObjectMode,"startCamera()"),Um(this._callState,this._isPreparingToJoin,"startCamera()","Did you mean to use setLocalAudio() and/or setLocalVideo() instead?"),this.needsLoad())try{yield this.load(S)}catch(w){return Promise.reject(w)}else{if(this._didPreAuth){if(S.url&&S.url!==this.properties.url)return console.error("url in startCamera() is different than the one used in preAuth()"),Promise.reject();if(S.token&&S.token!==this.properties.token)return console.error("token in startCamera() is different than the one used in preAuth()"),Promise.reject()}this.validateProperties(S),this.properties=ue(ue({},this.properties),S)}return new Promise(function(w){h._preloadCache.inputSettings=h._prepInputSettingsForSharing(h._inputSettings,!1),h.sendMessageToCallMachine({action:"start-camera",properties:va(h.properties,h.callClientId),preloadCache:va(h._preloadCache,h.callClientId)},function(M){w({camera:M.camera,mic:M.mic,speaker:M.speaker})})})}),function(){return L.apply(this,arguments)})},{key:"validateCustomTrack",value:function(h,S,w){if(w&&w.length>50)throw new Error("Custom track `trackName` must not be more than 50 characters");if(S&&S!=="music"&&S!=="speech"&&!(S instanceof Object))throw new Error("Custom track `mode` must be either `music` | `speech` | `DailyMicAudioModeSettings` or `undefined`");if(w&&["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo","customVideoDefaults"].includes(w))throw new Error("Custom track `trackName` must not match a track name already used by daily: cam-audio, cam-video, customVideoDefaults, screen-video, screen-audio, rmpAudio, rmpVideo");if(!(h instanceof MediaStreamTrack))throw new Error("Custom tracks provided must be instances of MediaStreamTrack")}},{key:"startCustomTrack",value:function(){var h=this,S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{track,mode,trackName,ignoreAudioLevel};return Ce(),He(this._callState,"startCustomTrack()"),this.validateCustomTrack(S.track,S.mode,S.trackName),new Promise(function(w,M){h._sharedTracks.customTrack=S.track,S.track=wi,h.sendMessageToCallMachine({action:"start-custom-track",properties:S},function(O){O.error?M({error:O.error}):w(O.mediaTag)})})}},{key:"stopCustomTrack",value:function(h){var S=this;return Ce(),He(this._callState,"stopCustomTrack()"),new Promise(function(w){S.sendMessageToCallMachine({action:"stop-custom-track",mediaTag:h},function(M){w(M.mediaTag)})})}},{key:"setCamera",value:function(h){var S=this;return ec(),Ud(this._callMachineInitialized,"setCamera()"),new Promise(function(w){S.sendMessageToCallMachine({action:"set-camera",cameraDeviceId:h},function(M){w({device:M.device})})})}},{key:"setAudioDevice",value:(F=ge(function*(h){return ec(),this.nativeUtils().setAudioDevice(h),{deviceId:yield this.nativeUtils().getAudioDevice()}}),function(h){return F.apply(this,arguments)})},{key:"cycleCamera",value:function(){var h=this,S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(w){h.sendMessageToCallMachine({action:"cycle-camera",properties:S},function(M){w({device:M.device})})})}},{key:"cycleMic",value:function(){var h=this;return Ce(),new Promise(function(S){h.sendMessageToCallMachine({action:"cycle-mic"},function(w){S({device:w.device})})})}},{key:"getCameraFacingMode",value:function(){var h=this;return ec(),new Promise(function(S){h.sendMessageToCallMachine({action:"get-camera-facing-mode"},function(w){S(w.facingMode)})})}},{key:"setInputDevicesAsync",value:(C=ge(function*(h){var S=this,w=h.audioDeviceId,M=h.videoDeviceId,O=h.audioSource,$=h.videoSource;if(Ce(),O!==void 0&&(w=O),$!==void 0&&(M=$),typeof w=="boolean"&&(this._setAllowLocalAudio(w),w=void 0),typeof M=="boolean"&&(this._setAllowLocalVideo(M),M=void 0),!w&&!M)return yield this.getInputDevices();var K={};return w&&(w instanceof MediaStreamTrack?(this._sharedTracks.audioTrack=w,w=wi,K.audio={settings:{customTrack:w}}):(delete this._sharedTracks.audioTrack,K.audio={settings:{deviceId:w}})),M&&(M instanceof MediaStreamTrack?(this._sharedTracks.videoTrack=M,M=wi,K.video={settings:{customTrack:M}}):(delete this._sharedTracks.videoTrack,K.video={settings:{deviceId:M}})),this._callObjectMode&&this.needsLoad()?(this._updatePreloadCacheInputSettings(K,!1),this._devicesFromInputSettings(this._inputSettings)):new Promise(function(W){S.sendMessageToCallMachine({action:"set-input-devices",audioDeviceId:w,videoDeviceId:M},function(X){if(delete X.action,delete X.callbackStamp,X.returnPreloadCache)return S._updatePreloadCacheInputSettings(K,!1),void W(S._devicesFromInputSettings(S._inputSettings));W(X)})})}),function(h){return C.apply(this,arguments)})},{key:"setOutputDeviceAsync",value:(D=ge(function*(h){var S=this,w=h.outputDeviceId;if(Ce(),!w||typeof w!="string")throw new Error("outputDeviceId must be provided and must be a valid device id");return this._preloadCache.outputDeviceId=w,this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise(function(M,O){S.sendMessageToCallMachine({action:"set-output-device",outputDeviceId:w},function($){if(delete $.action,delete $.callbackStamp,$.error){var K=new Error($.error.message);return K.type=$.error.type,void O(K)}$.returnPreloadCache?M(S._devicesFromInputSettings(S._inputSettings)):M($)})})}),function(h){return D.apply(this,arguments)})},{key:"getInputDevices",value:(N=ge(function*(){var h=this;return this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise(function(S){h.sendMessageToCallMachine({action:"get-input-devices"},function(w){w.returnPreloadCache?S(h._devicesFromInputSettings(h._inputSettings)):S({camera:w.camera,mic:w.mic,speaker:w.speaker})})})}),function(){return N.apply(this,arguments)})},{key:"nativeInCallAudioMode",value:function(){return ec(),this._nativeInCallAudioMode}},{key:"setNativeInCallAudioMode",value:function(h){if(ec(),[JT,R$].includes(h)){if(h!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=h,!this.disableReactNativeAutoDeviceManagement("audio")&&mh(this._callState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}else console.error("invalid in-call audio mode specified: ",h)}},{key:"preAuth",value:(P=ge(function*(){var h=this,S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(yr(this._callObjectMode,"preAuth()"),Um(this._callState,this._isPreparingToJoin,"preAuth()"),this.needsLoad()&&(yield this.load(S)),!S.url)throw new Error("preAuth() requires at least a url to be provided");return this.validateProperties(S),this.properties=ue(ue({},this.properties),S),new Promise(function(w,M){h._preloadCache.inputSettings=h._prepInputSettingsForSharing(h._inputSettings,!1),h.sendMessageToCallMachine({action:"daily-method-preauth",properties:va(h.properties,h.callClientId),preloadCache:va(h._preloadCache,h.callClientId)},function(O){return O.error?M(O.error):O.access?(h._didPreAuth=!0,void w({access:O.access})):M(new Error("unknown error in preAuth()"))})})}),function(){return P.apply(this,arguments)})},{key:"load",value:(R=ge(function*(h){var S=this;if(this.needsLoad()){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");if(h&&(this.validateProperties(h),this.properties=ue(ue({},this.properties),h)),!this._callObjectMode&&!this.properties.url)throw new Error("can't load iframe meeting because url property isn't set");return this._updateCallState(bT),this.emitDailyJSEvent({action:sP}),this._callObjectMode?new Promise(function(w,M){S._callObjectLoader.cancel();var O=Date.now();S._callObjectLoader.load(S.properties.dailyConfig,function($){S._bundleLoadTime=$?"no-op":Date.now()-O,S._updateCallState(kT),$&&S.emitDailyJSEvent({action:Ny}),w()},function($,K){if(S.emitDailyJSEvent({action:oP}),!K){S._updateCallState(ci),S.resetMeetingDependentVars();var W={action:Vy,errorMsg:$.msg,error:{type:"connection-error",msg:"Failed to load call object bundle.",details:{on:"load",sourceError:$,bundleUrl:lf(S.properties.dailyConfig)}}};S._maybeSendToSentry(W),S.emitDailyJSEvent(W),M($.msg)}})}):(this._iframe.src=M1(this.assembleMeetingUrl(),this.properties.dailyConfig),new Promise(function(w,M){S._loadedCallback=function(O){S._callState!==ci?(S._updateCallState(kT),(S.properties.cssFile||S.properties.cssText)&&S.loadCss(S.properties),w()):M(O)}}))}}),function(h){return R.apply(this,arguments)})},{key:"join",value:(z=ge(function*(){var h=this,S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._testCallInProgress&&this.stopTestCallQuality();var w=!1;if(this.needsLoad()){this.updateIsPreparingToJoin(!0);try{yield this.load(S)}catch(M){return this.updateIsPreparingToJoin(!1),Promise.reject(M)}}else{if(w=!(!this.properties.cssFile&&!this.properties.cssText),this._didPreAuth){if(S.url&&S.url!==this.properties.url)return console.error("url in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject();if(S.token&&S.token!==this.properties.token)return console.error("token in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject()}if(S.url&&!this._callObjectMode&&S.url&&S.url!==this.properties.url)return console.error("url in join() is different than the one used in load() (".concat(this.properties.url," -> ").concat(S.url,")")),this.updateIsPreparingToJoin(!1),Promise.reject();this.validateProperties(S),this.properties=ue(ue({},this.properties),S)}return S.showLocalVideo!==void 0&&(this._callObjectMode?console.error("showLocalVideo is not available in callObject mode"):this._showLocalVideo=!!S.showLocalVideo),S.showParticipantsBar!==void 0&&(this._callObjectMode?console.error("showParticipantsBar is not available in callObject mode"):this._showParticipantsBar=!!S.showParticipantsBar),this._callState===hs||this._callState===pf?(console.warn("already joined meeting, call leave() before joining again"),void this.updateIsPreparingToJoin(!1)):(this._updateCallState(pf,!1),this.emitDailyJSEvent({action:cP}),this._preloadCache.inputSettings=this._prepInputSettingsForSharing(this._inputSettings||{},!1),this.sendMessageToCallMachine({action:"join-meeting",properties:va(this.properties,this.callClientId),preloadCache:va(this._preloadCache,this.callClientId)}),new Promise(function(M,O){h._joinedCallback=function($,K){if(h._callState!==ci){if(h._updateCallState(hs),$)for(var W in $){if(h._callObjectMode){var X=h._callMachine().store;jT($[W],X),VT($[W],X),FT($[W],h._participants[W],X)}h._participants[W]=ue({},$[W]),h.toggleParticipantAudioBasedOnNativeAudioFocus()}w&&h.loadCss(h.properties),M($)}else O(K)}}))}),function(){return z.apply(this,arguments)})},{key:"leave",value:(U=ge(function*(){var h=this;return this._testCallInProgress&&this.stopTestCallQuality(),new Promise(function(S){h._callState===rs||h._callState===ci?S():h._callObjectLoader&&!h._callObjectLoader.loaded?(h._callObjectLoader.cancel(),h._updateCallState(rs),h.resetMeetingDependentVars(),h.emitDailyJSEvent({action:rs}),S()):(h._resolveLeave=S,h.sendMessageToCallMachine({action:"leave-meeting"}))})}),function(){return U.apply(this,arguments)})},{key:"startScreenShare",value:(j=ge(function*(){var h=this,S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ud(this._callMachineInitialized,"startScreenShare()"),S.screenVideoSendSettings&&this._validateVideoSendSettings("screenVideo",S.screenVideoSendSettings),S.mediaStream&&(this._sharedTracks.screenMediaStream=S.mediaStream,S.mediaStream=wi),typeof DailyNativeUtils<"u"&&DailyNativeUtils.isIOS!==void 0&&DailyNativeUtils.isIOS){var w=this.nativeUtils();if(yield w.isScreenBeingCaptured())return void this.emitDailyJSEvent({action:jy,type:"screen-share-error",errorMsg:"Could not start the screen sharing. The screen is already been captured!"});w.setSystemScreenCaptureStartCallback(function(){w.setSystemScreenCaptureStartCallback(null),h.sendMessageToCallMachine({action:CT,captureOptions:S})}),w.presentSystemScreenCapturePrompt()}else this.sendMessageToCallMachine({action:CT,captureOptions:S})}),function(){return j.apply(this,arguments)})},{key:"stopScreenShare",value:function(){Ud(this._callMachineInitialized,"stopScreenShare()"),this.sendMessageToCallMachine({action:"local-screen-stop"})}},{key:"startRecording",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=h.type;if(S&&S!=="cloud"&&S!=="raw-tracks"&&S!=="local")throw new Error("invalid type: ".concat(S,", allowed values 'cloud', 'raw-tracks', or 'local'"));this.sendMessageToCallMachine(ue({action:"local-recording-start"},h))}},{key:"updateRecording",value:function(h){var S=h.layout,w=S===void 0?{preset:"default"}:S,M=h.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-recording",layout:w,instanceId:M})}},{key:"stopRecording",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(ue({action:"local-recording-stop"},h))}},{key:"startLiveStreaming",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(ue({action:"daily-method-start-live-streaming"},h))}},{key:"updateLiveStreaming",value:function(h){var S=h.layout,w=S===void 0?{preset:"default"}:S,M=h.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming",layout:w,instanceId:M})}},{key:"addLiveStreamingEndpoints",value:function(h){var S=h.endpoints,w=h.instanceId;this.sendMessageToCallMachine({action:AT,endpointsOp:r$,endpoints:S,instanceId:w})}},{key:"removeLiveStreamingEndpoints",value:function(h){var S=h.endpoints,w=h.instanceId;this.sendMessageToCallMachine({action:AT,endpointsOp:i$,endpoints:S,instanceId:w})}},{key:"stopLiveStreaming",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(ue({action:"daily-method-stop-live-streaming"},h))}},{key:"validateDailyConfig",value:function(h){h.camSimulcastEncodings&&(console.warn("camSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide camera simulcast settings."),this.validateSimulcastEncodings(h.camSimulcastEncodings)),h.screenSimulcastEncodings&&console.warn("screenSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide screen simulcast settings."),tx()&&h.noAutoDefaultDeviceChange&&console.warn("noAutoDefaultDeviceChange is not supported on Android, and will be ignored.")}},{key:"validateSimulcastEncodings",value:function(h){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,w=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(h){if(!(h instanceof Array||Array.isArray(h)))throw new Error("encodings must be an Array");if(!ib(h.length,1,3))throw new Error("encodings must be an Array with between 1 to ".concat(3," layers"));for(var M=0;M<h.length;M++){var O=h[M];for(var $ in this._validateEncodingLayerHasValidProperties(O),O)if(Fm.includes($)){if(typeof O[$]!="number")throw new Error("".concat($," must be a number"));if(S){var K=S[$],W=K.min,X=K.max;if(!ib(O[$],W,X))throw new Error("".concat($," value not in range. valid range: ").concat(W," to ").concat(X))}}else if(!["active","scalabilityMode"].includes($))throw new Error("Invalid key ".concat($,", valid keys are:")+Object.values(Fm));if(w&&!O.hasOwnProperty("maxBitrate"))throw new Error("maxBitrate is not specified")}}}},{key:"startRemoteMediaPlayer",value:(k=ge(function*(h){var S=this,w=h.url,M=h.settings,O=M===void 0?{state:Fy.PLAY}:M;try{(function($){if(typeof $!="string")throw new Error('url parameter must be "string" type')})(w),rb(O),function($){for(var K in $)if(!XT.includes(K))throw new Error("Invalid key ".concat(K,", valid keys are: ").concat(XT));$.simulcastEncodings&&this.validateSimulcastEncodings($.simulcastEncodings,hx,!0)}(O)}catch($){throw console.error("invalid argument Error: ".concat($)),console.error(`startRemoteMediaPlayer arguments must be of the form:
  { url: "playback url",
  settings?:
  {state: "play"|"pause", simulcastEncodings?: [{}] } }`),$}return new Promise(function($,K){S.sendMessageToCallMachine({action:"daily-method-start-remote-media-player",url:w,settings:O},function(W){W.error?K({error:W.error,errorMsg:W.errorMsg}):$({session_id:W.session_id,remoteMediaPlayerState:{state:W.state,settings:W.settings}})})})}),function(h){return k.apply(this,arguments)})},{key:"stopRemoteMediaPlayer",value:(g=ge(function*(h){var S=this;if(typeof h!="string")throw new Error(" remotePlayerID must be of type string");return new Promise(function(w,M){S.sendMessageToCallMachine({action:"daily-method-stop-remote-media-player",session_id:h},function(O){O.error?M({error:O.error,errorMsg:O.errorMsg}):w()})})}),function(h){return g.apply(this,arguments)})},{key:"updateRemoteMediaPlayer",value:(v=ge(function*(h){var S=this,w=h.session_id,M=h.settings;try{rb(M)}catch(O){throw console.error("invalid argument Error: ".concat(O)),console.error(`updateRemoteMediaPlayer arguments must be of the form:
  session_id: "participant session",
  { settings?: {state: "play"|"pause"} }`),O}return new Promise(function(O,$){S.sendMessageToCallMachine({action:"daily-method-update-remote-media-player",session_id:w,settings:M},function(K){K.error?$({error:K.error,errorMsg:K.errorMsg}):O({session_id:K.session_id,remoteMediaPlayerState:{state:K.state,settings:K.settings}})})})}),function(h){return v.apply(this,arguments)})},{key:"startTranscription",value:function(h){He(this._callState,"startTranscription()"),this.sendMessageToCallMachine(ue({action:"daily-method-start-transcription"},h))}},{key:"updateTranscription",value:function(h){if(He(this._callState,"updateTranscription()"),!h)throw new Error("updateTranscription Error: options is mandatory");if(Re(h)!=="object")throw new Error("updateTranscription Error: options must be object type");if(h.participants&&!Array.isArray(h.participants))throw new Error("updateTranscription Error: participants must be an array");this.sendMessageToCallMachine(ue({action:"daily-method-update-transcription"},h))}},{key:"stopTranscription",value:function(h){if(He(this._callState,"stopTranscription()"),h&&Re(h)!=="object")throw new Error("stopTranscription Error: options must be object type");if(h&&!h.instanceId)throw new Error('"instanceId" not provided');this.sendMessageToCallMachine(ue({action:"daily-method-stop-transcription"},h))}},{key:"startDialOut",value:(b=ge(function*(h){var S=this;He(this._callState,"startDialOut()");var w=function(K){if(K){if(!Array.isArray(K))throw new Error("Error starting dial out: audio codec must be an array");if(K.length<=0)throw new Error("Error starting dial out: audio codec array specified but empty");K.forEach(function(W){if(typeof W!="string")throw new Error("Error starting dial out: audio codec must be a string");if(W!=="OPUS"&&W!=="PCMU"&&W!=="PCMA"&&W!=="G722")throw new Error("Error starting dial out: audio codec must be one of OPUS, PCMU, PCMA, G722")})}};if(!h.sipUri&&!h.phoneNumber)throw new Error("Error starting dial out: either a sip uri or phone number must be provided");if(h.sipUri&&h.phoneNumber)throw new Error("Error starting dial out: only one of sip uri or phone number must be provided");if(h.sipUri){if(typeof h.sipUri!="string")throw new Error("Error starting dial out: sipUri must be a string");if(!h.sipUri.startsWith("sip:"))throw new Error("Error starting dial out: Invalid SIP URI, must start with 'sip:'");if(h.video&&typeof h.video!="boolean")throw new Error("Error starting dial out: video must be a boolean value");(function(K){if(K&&(w(K.audio),K.video)){if(!Array.isArray(K.video))throw new Error("Error starting dial out: video codec must be an array");if(K.video.length<=0)throw new Error("Error starting dial out: video codec array specified but empty");K.video.forEach(function(W){if(typeof W!="string")throw new Error("Error starting dial out: video codec must be a string");if(W!=="H264"&&W!=="VP8")throw new Error("Error starting dial out: video codec must be H264 or VP8")})}})(h.codecs)}if(h.phoneNumber){if(typeof h.phoneNumber!="string")throw new Error("Error starting dial out: phoneNumber must be a string");if(!/^\+\d{1,}$/.test(h.phoneNumber))throw new Error("Error starting dial out: Invalid phone number, must be valid phone number as per E.164");h.codecs&&w(h.codecs.audio)}if(h.callerId){if(typeof h.callerId!="string")throw new Error("Error starting dial out: callerId must be a string");if(h.sipUri)throw new Error("Error starting dial out: callerId not allowed with sipUri")}if(h.displayName){if(typeof h.displayName!="string")throw new Error("Error starting dial out: displayName must be a string");if(h.displayName.length>=200)throw new Error("Error starting dial out: displayName length must be less than 200")}if(h.userId){if(typeof h.userId!="string")throw new Error("Error starting dial out: userId must be a string");if(h.userId.length>36)throw new Error("Error starting dial out: userId length must be less than or equal to 36")}if(eb(h),h.permissions&&h.permissions.canReceive){var M=nn(ux.validateJSONObject(h.permissions.canReceive),2),O=M[0],$=M[1];if(!O)throw new Error($)}if(h.provider){if(h.provider!=="daily")throw new Error("Error: provider can be set only to 'daily', got: ".concat(h.provider));if(h.phoneNumber)throw new Error("Error starting dial out: provider valid only for sipUri, not phoneNumber");console.warn("(pre-beta) provider=daily is currently in pre-beta, things might break!")}return new Promise(function(K,W){S.sendMessageToCallMachine(ue({action:"dialout-start"},h),function(X){X.error?W(X.error):K(X)})})}),function(h){return b.apply(this,arguments)})},{key:"stopDialOut",value:function(h){var S=this;return He(this._callState,"stopDialOut()"),new Promise(function(w,M){S.sendMessageToCallMachine(ue({action:"dialout-stop"},h),function(O){O.error?M(O.error):w(O)})})}},{key:"sipCallTransfer",value:(_=ge(function*(h){var S=this;if(He(this._callState,"sipCallTransfer()"),!h)throw new Error("sipCallTransfer() requires a sessionId and toEndPoint");return h.useSipRefer=!1,nb(h,"sipCallTransfer"),eb(h),new Promise(function(w,M){S.sendMessageToCallMachine(ue({action:PT},h),function(O){O.error?M(O.error):w(O)})})}),function(h){return _.apply(this,arguments)})},{key:"sipRefer",value:(T=ge(function*(h){var S=this;if(He(this._callState,"sipRefer()"),!h)throw new Error("sessionId and toEndPoint are mandatory parameter");return h.useSipRefer=!0,nb(h,"sipRefer"),new Promise(function(w,M){S.sendMessageToCallMachine(ue({action:PT},h),function(O){O.error?M(O.error):w(O)})})}),function(h){return T.apply(this,arguments)})},{key:"sendDTMF",value:(E=ge(function*(h){var S=this;return He(this._callState,"sendDTMF()"),function(w){var M=w.sessionId,O=w.tones;if(!M||!O)throw new Error("sessionId and tones are mandatory parameter");if(typeof M!="string"||typeof O!="string")throw new Error("sessionId and tones should be of string type");if(O.length>20)throw new Error("tones string must be upto 20 characters");var $=/[^0-9A-D*#]/g,K=O.match($);if(K&&K[0])throw new Error("".concat(K[0]," is not valid DTMF tone"))}(h),new Promise(function(w,M){S.sendMessageToCallMachine(ue({action:"send-dtmf"},h),function(O){O.error?M(O.error):w(O)})})}),function(h){return E.apply(this,arguments)})},{key:"getNetworkStats",value:function(){var h=this;return this._callState!==hs?Promise.resolve(ue({stats:{latest:{}}},this._network)):new Promise(function(S){h.sendMessageToCallMachine({action:"get-calc-stats"},function(w){S(ue(ue({},h._network),{},{stats:w.stats}))})})}},{key:"testWebsocketConnectivity",value:(m=ge(function*(){var h=this;if($m(this._testCallInProgress,"testWebsocketConnectivity()"),this.needsLoad())try{yield this.load()}catch(S){return Promise.reject(S)}return new Promise(function(S,w){h.sendMessageToCallMachine({action:"test-websocket-connectivity"},function(M){M.error?w(M.error):S(M.results)})})}),function(){return m.apply(this,arguments)})},{key:"abortTestWebsocketConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-websocket-connectivity"})}},{key:"_validateVideoTrackForNetworkTests",value:function(h){return h?h instanceof MediaStreamTrack?!!I$(h)||(console.error("Video track is not playable. This test needs a live video track."),!1):(console.error("Video track needs to be of type `MediaStreamTrack`."),!1):(console.error("Missing video track. You must provide a video track in order to run this test."),!1)}},{key:"testCallQuality",value:(f=ge(function*(){var h=this;Ce(),yr(this._callObjectMode,"testCallQuality()"),Ud(this._callMachineInitialized,"testCallQuality()",null,!0),Um(this._callState,this._isPreparingToJoin,"testCallQuality()");var S=this._testCallAlreadyInProgress,w=function(O){S||(h._testCallInProgress=O)};if(w(!0),this.needsLoad())try{var M=this._callState;yield this.load(),this._callState=M}catch(O){return w(!1),Promise.reject(O)}return new Promise(function(O){h.sendMessageToCallMachine({action:"test-call-quality",dailyJsVersion:h.properties.dailyJsVersion},function($){var K=$.results,W=K.result,X=_S(K,P$);if(W==="failed"){var le,pe=ue({},X);(le=X.error)!==null&&le!==void 0&&le.details?(X.error.details=JSON.parse(X.error.details),pe.error=ue(ue({},pe.error),{},{details:ue({},pe.error.details)}),pe.error.details.duringTest="testCallQuality"):(pe.error=pe.error?ue({},pe.error):{},pe.error.details={duringTest:"testCallQuality"}),h._maybeSendToSentry(pe)}w(!1),O(ue({result:W},X))})})}),function(){return f.apply(this,arguments)})},{key:"stopTestCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-call-quality"})}},{key:"testConnectionQuality",value:(d=ge(function*(h){var S;Ae()?(console.warn("testConnectionQuality() is deprecated: use testPeerToPeerCallQuality() instead"),S=yield this.testPeerToPeerCallQuality(h)):(console.warn("testConnectionQuality() is deprecated: use testCallQuality() instead"),S=yield this.testCallQuality());var w={result:S.result,secondsElapsed:S.secondsElapsed};return S.data&&(w.data={maxRTT:S.data.maxRoundTripTime,packetLoss:S.data.avgRecvPacketLoss}),w}),function(h){return d.apply(this,arguments)})},{key:"testPeerToPeerCallQuality",value:(u=ge(function*(h){var S=this;if($m(this._testCallInProgress,"testPeerToPeerCallQuality()"),this.needsLoad())try{yield this.load()}catch(O){return Promise.reject(O)}var w=h.videoTrack,M=h.duration;if(!this._validateVideoTrackForNetworkTests(w))throw new Error("Video track error");return this._sharedTracks.videoTrackForConnectionQualityTest=w,new Promise(function(O,$){S.sendMessageToCallMachine({action:"test-p2p-call-quality",duration:M},function(K){K.error?$(K.error):O(K.results)})})}),function(h){return u.apply(this,arguments)})},{key:"stopTestConnectionQuality",value:function(){Ae()?(console.warn("stopTestConnectionQuality() is deprecated: use testPeerToPeerCallQuality() and stopTestPeerToPeerCallQuality() instead"),this.stopTestPeerToPeerCallQuality()):(console.warn("stopTestConnectionQuality() is deprecated: use testCallQuality() and stopTestCallQuality() instead"),this.stopTestCallQuality())}},{key:"stopTestPeerToPeerCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-p2p-call-quality"})}},{key:"testNetworkConnectivity",value:(l=ge(function*(h){var S=this;if($m(this._testCallInProgress,"testNetworkConnectivity()"),this.needsLoad())try{yield this.load()}catch(w){return Promise.reject(w)}if(!this._validateVideoTrackForNetworkTests(h))throw new Error("Video track error");return this._sharedTracks.videoTrackForNetworkConnectivityTest=h,new Promise(function(w,M){S.sendMessageToCallMachine({action:"test-network-connectivity"},function(O){O.error?M(O.error):w(O.results)})})}),function(h){return l.apply(this,arguments)})},{key:"abortTestNetworkConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-network-connectivity"})}},{key:"getCpuLoadStats",value:function(){var h=this;return new Promise(function(S){h._callState===hs?h.sendMessageToCallMachine({action:"get-cpu-load-stats"},function(w){S(w.cpuStats)}):S({cpuLoadState:void 0,cpuLoadStateReason:void 0,stats:{}})})}},{key:"_validateEncodingLayerHasValidProperties",value:function(h){var S;if(!(((S=Object.keys(h))===null||S===void 0?void 0:S.length)>0))throw new Error("Empty encoding is not allowed. At least one of these valid keys should be specified:"+Object.values(Fm))}},{key:"_validateVideoSendSettings",value:function(h,S){var w=h==="screenVideo"?["default-screen-video","detail-optimized","motion-optimized","motion-and-detail-balanced"]:["default-video","bandwidth-optimized","bandwidth-and-quality-balanced","quality-optimized","adaptive-2-layers","adaptive-3-layers"],M="Video send settings should be either an object or one of the supported presets: ".concat(w.join());if(typeof S=="string"){if(!w.includes(S))throw new Error(M)}else{if(Re(S)!=="object")throw new Error(M);if(!S.maxQuality&&!S.encodings&&S.allowAdaptiveLayers===void 0)throw new Error("Video send settings must contain at least maxQuality, allowAdaptiveLayers or encodings attribute");if(S.maxQuality&&["low","medium","high"].indexOf(S.maxQuality)===-1)throw new Error("maxQuality must be either low, medium or high");if(S.encodings){var O=!1;switch(Object.keys(S.encodings).length){case 1:O=!S.encodings.low;break;case 2:O=!S.encodings.low||!S.encodings.medium;break;case 3:O=!S.encodings.low||!S.encodings.medium||!S.encodings.high;break;default:O=!0}if(O)throw new Error("Encodings must be defined as: low, low and medium, or low, medium and high.");S.encodings.low&&this._validateEncodingLayerHasValidProperties(S.encodings.low),S.encodings.medium&&this._validateEncodingLayerHasValidProperties(S.encodings.medium),S.encodings.high&&this._validateEncodingLayerHasValidProperties(S.encodings.high)}}}},{key:"validateUpdateSendSettings",value:function(h){var S=this;if(!h||Object.keys(h).length===0)throw new Error("Send settings must contain at least information for one track!");Object.entries(h).forEach(function(w){var M=nn(w,2),O=M[0],$=M[1];S._validateVideoSendSettings(O,$)})}},{key:"updateSendSettings",value:function(h){var S=this;return this.validateUpdateSendSettings(h),this.needsLoad()?(this._preloadCache.sendSettings=h,{sendSettings:this._preloadCache.sendSettings}):new Promise(function(w,M){S.sendMessageToCallMachine({action:"update-send-settings",sendSettings:h},function(O){O.error?M(O.error):w(O.sendSettings)})})}},{key:"getSendSettings",value:function(){return this._sendSettings||this._preloadCache.sendSettings}},{key:"getLocalAudioLevel",value:function(){return this._localAudioLevel}},{key:"getRemoteParticipantsAudioLevel",value:function(){return this._remoteParticipantsAudioLevel}},{key:"getActiveSpeaker",value:function(){return Ce(),this._activeSpeaker}},{key:"setActiveSpeakerMode",value:function(h){return Ce(),this.sendMessageToCallMachine({action:"set-active-speaker-mode",enabled:h}),this}},{key:"activeSpeakerMode",value:function(){return Ce(),this._activeSpeakerMode}},{key:"subscribeToTracksAutomatically",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:"setSubscribeToTracksAutomatically",value:function(h){return He(this._callState,"setSubscribeToTracksAutomatically()","Use the subscribeToTracksAutomatically configuration property."),this._preloadCache.subscribeToTracksAutomatically=h,this.sendMessageToCallMachine({action:"daily-method-subscribe-to-tracks-automatically",enabled:h}),this}},{key:"enumerateDevices",value:(a=ge(function*(){var h=this;if(this._callObjectMode){var S=yield navigator.mediaDevices.enumerateDevices();return Wo()==="Firefox"&&mf().major>115&&mf().major<123&&(S=S.filter(function(w){return w.kind!=="audiooutput"})),{devices:S.map(function(w){var M=JSON.parse(JSON.stringify(w));if(!Ae()&&w.kind==="videoinput"&&w.getCapabilities){var O,$=w.getCapabilities();M.facing=($==null||(O=$.facingMode)===null||O===void 0?void 0:O.length)>=1?$.facingMode[0]:void 0}return M})}}return new Promise(function(w){h.sendMessageToCallMachine({action:"enumerate-devices"},function(M){w({devices:M.devices})})})}),function(){return a.apply(this,arguments)})},{key:"sendAppMessage",value:function(h){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"*";if(He(this._callState,"sendAppMessage()"),JSON.stringify(h).length>this._maxAppMessageSize)throw new Error("Message data too large. Max size is "+this._maxAppMessageSize);return this.sendMessageToCallMachine({action:"app-msg",data:h,to:S}),this}},{key:"addFakeParticipant",value:function(h){return Ce(),He(this._callState,"addFakeParticipant()"),this.sendMessageToCallMachine(ue({action:"add-fake-participant"},h)),this}},{key:"setShowNamesMode",value:function(h){return Dn(this._callObjectMode,"setShowNamesMode()"),Ce(),h&&h!=="always"&&h!=="never"?(console.error('setShowNamesMode argument should be "always", "never", or false'),this):(this.sendMessageToCallMachine({action:"set-show-names",mode:h}),this)}},{key:"setShowLocalVideo",value:function(){var h=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return Dn(this._callObjectMode,"setShowLocalVideo()"),Ce(),He(this._callState,"setShowLocalVideo()"),typeof h!="boolean"?(console.error("setShowLocalVideo only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-local-video",show:h}),this._showLocalVideo=h,this)}},{key:"showLocalVideo",value:function(){return Dn(this._callObjectMode,"showLocalVideo()"),Ce(),this._showLocalVideo}},{key:"setShowParticipantsBar",value:function(){var h=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return Dn(this._callObjectMode,"setShowParticipantsBar()"),Ce(),He(this._callState,"setShowParticipantsBar()"),typeof h!="boolean"?(console.error("setShowParticipantsBar only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-participants-bar",show:h}),this._showParticipantsBar=h,this)}},{key:"showParticipantsBar",value:function(){return Dn(this._callObjectMode,"showParticipantsBar()"),Ce(),this._showParticipantsBar}},{key:"customIntegrations",value:function(){return Ce(),Dn(this._callObjectMode,"customIntegrations()"),this._customIntegrations}},{key:"setCustomIntegrations",value:function(h){return Ce(),Dn(this._callObjectMode,"setCustomIntegrations()"),He(this._callState,"setCustomIntegrations()"),wx(h)?(this.sendMessageToCallMachine({action:"set-custom-integrations",integrations:h}),this._customIntegrations=h,this):this}},{key:"startCustomIntegrations",value:function(h){var S=this;if(Ce(),Dn(this._callObjectMode,"startCustomIntegrations()"),He(this._callState,"startCustomIntegrations()"),Array.isArray(h)&&h.some(function(O){return typeof O!="string"})||!Array.isArray(h)&&typeof h!="string")return console.error("startCustomIntegrations() only accepts string | string[]"),this;var w=typeof h=="string"?[h]:h,M=w.filter(function(O){return!(O in S._customIntegrations)});return M.length?(console.error(`Can't find custom integration(s): "`.concat(M.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"start-custom-integrations",ids:w}),this)}},{key:"stopCustomIntegrations",value:function(h){var S=this;if(Ce(),Dn(this._callObjectMode,"stopCustomIntegrations()"),He(this._callState,"stopCustomIntegrations()"),Array.isArray(h)&&h.some(function(O){return typeof O!="string"})||!Array.isArray(h)&&typeof h!="string")return console.error("stopCustomIntegrations() only accepts string | string[]"),this;var w=typeof h=="string"?[h]:h,M=w.filter(function(O){return!(O in S._customIntegrations)});return M.length?(console.error(`Can't find custom integration(s): "`.concat(M.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"stop-custom-integrations",ids:w}),this)}},{key:"customTrayButtons",value:function(){return Dn(this._callObjectMode,"customTrayButtons()"),Ce(),this._customTrayButtons}},{key:"updateCustomTrayButtons",value:function(h){return Dn(this._callObjectMode,"updateCustomTrayButtons()"),Ce(),He(this._callState,"updateCustomTrayButtons()"),_x(h)?(this.sendMessageToCallMachine({action:"update-custom-tray-buttons",btns:h}),this._customTrayButtons=h,this):(console.error("updateCustomTrayButtons only accepts a dictionary of the type ".concat(JSON.stringify(yf))),this)}},{key:"theme",value:function(){return Dn(this._callObjectMode,"theme()"),this.properties.theme}},{key:"setTheme",value:function(h){var S=this;return Dn(this._callObjectMode,"setTheme()"),new Promise(function(w,M){try{S.validateProperties({theme:h}),S.properties.theme=ue({},h),S.sendMessageToCallMachine({action:"set-theme",theme:S.properties.theme});try{S.emitDailyJSEvent({action:iP,theme:S.properties.theme})}catch(O){console.log("could not emit 'theme-updated'",O)}w(S.properties.theme)}catch(O){M(O)}})}},{key:"requestFullscreen",value:(o=ge(function*(){if(Ce(),this._iframe&&!document.fullscreenElement&&xT())try{(yield this._iframe.requestFullscreen)?this._iframe.requestFullscreen():this._iframe.webkitRequestFullscreen()}catch(h){console.log("could not make video call fullscreen",h)}}),function(){return o.apply(this,arguments)})},{key:"exitFullscreen",value:function(){Ce(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:"getSidebarView",value:(s=ge(function*(){var h=this;return this._callObjectMode?(console.error("getSidebarView is not available in callObject mode"),Promise.resolve(null)):new Promise(function(S){h.sendMessageToCallMachine({action:"get-sidebar-view"},function(w){S(w.view)})})}),function(){return s.apply(this,arguments)})},{key:"setSidebarView",value:function(h){return this._callObjectMode?(console.error("setSidebarView is not available in callObject mode"),this):(this.sendMessageToCallMachine({action:"set-sidebar-view",view:h}),this)}},{key:"room",value:(i=ge(function*(){var h=this,S=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).includeRoomConfigDefaults,w=S===void 0||S;return this._accessState.access===fh||this.needsLoad()?this.properties.url?{roomUrlPendingJoin:this.properties.url}:null:new Promise(function(M){h.sendMessageToCallMachine({action:"lib-room-info",includeRoomConfigDefaults:w},function(O){delete O.action,delete O.callbackStamp,M(O)})})}),function(){return i.apply(this,arguments)})},{key:"geo",value:(r=ge(function*(){try{var h=yield fetch("https://gs.daily.co/_ks_/x-swsl/:");return{current:(yield h.json()).geo}}catch(S){return console.error("geo lookup failed",S),{current:""}}}),function(){return r.apply(this,arguments)})},{key:"setNetworkTopology",value:(n=ge(function*(h){var S=this;return Ce(),He(this._callState,"setNetworkTopology()"),new Promise(function(w,M){S.sendMessageToCallMachine({action:"set-network-topology",opts:h},function(O){O.error?M({error:O.error}):w({workerId:O.workerId})})})}),function(h){return n.apply(this,arguments)})},{key:"getNetworkTopology",value:(e=ge(function*(){var h=this;return new Promise(function(S,w){h.needsLoad()&&S({topology:"none"}),h.sendMessageToCallMachine({action:"get-network-topology"},function(M){M.error?w({error:M.error}):S({topology:M.topology})})})}),function(){return e.apply(this,arguments)})},{key:"setPlayNewParticipantSound",value:function(h){if(Ce(),typeof h!="number"&&h!==!0&&h!==!1)throw new Error("argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is ".concat(h));this.sendMessageToCallMachine({action:"daily-method-set-play-ding",arg:h})}},{key:"on",value:function(h,S){return Pd.prototype.on.call(this,h,S)}},{key:"once",value:function(h,S){return Pd.prototype.once.call(this,h,S)}},{key:"off",value:function(h,S){return Pd.prototype.off.call(this,h,S)}},{key:"validateProperties",value:function(h){var S,w;if(h!=null&&(S=h.dailyConfig)!==null&&S!==void 0&&S.userMediaAudioConstraints){var M,O;Ae()||console.warn("userMediaAudioConstraints is deprecated. You can override constraints with inputSettings.audio.settings, found in DailyCallOptions.");var $=h.inputSettings||{};$.audio=((M=h.inputSettings)===null||M===void 0?void 0:M.audio)||{},$.audio.settings=((O=h.inputSettings)===null||O===void 0||(O=O.audio)===null||O===void 0?void 0:O.settings)||{},$.audio.settings=ue(ue({},$.audio.settings),h.dailyConfig.userMediaAudioConstraints),h.inputSettings=$,delete h.dailyConfig.userMediaAudioConstraints}if(h!=null&&(w=h.dailyConfig)!==null&&w!==void 0&&w.userMediaVideoConstraints){var K,W;Ae()||console.warn("userMediaVideoConstraints is deprecated. You can override constraints with inputSettings.video.settings, found in DailyCallOptions.");var X=h.inputSettings||{};X.video=((K=h.inputSettings)===null||K===void 0?void 0:K.video)||{},X.video.settings=((W=h.inputSettings)===null||W===void 0||(W=W.video)===null||W===void 0?void 0:W.settings)||{},X.video.settings=ue(ue({},X.video.settings),h.dailyConfig.userMediaVideoConstraints),h.inputSettings=X,delete h.dailyConfig.userMediaVideoConstraints}for(var le in h)if(yo[le]){if(yo[le].validate&&!yo[le].validate(h[le],this))throw new Error("property '".concat(le,"': ").concat(yo[le].help))}else console.warn("Ignoring unrecognized property '".concat(le,"'")),delete h[le]}},{key:"assembleMeetingUrl",value:function(){var h,S,w=ue(ue({},this.properties),{},{emb:this.callClientId,embHref:encodeURIComponent(window.location.href),proxy:(h=this.properties.dailyConfig)!==null&&h!==void 0&&h.proxyUrl?encodeURIComponent((S=this.properties.dailyConfig)===null||S===void 0?void 0:S.proxyUrl):void 0}),M=w.url.match(/\?/)?"&":"?";return w.url+M+Object.keys(yo).filter(function(O){return yo[O].queryString&&w[O]!==void 0}).map(function(O){return"".concat(yo[O].queryString,"=").concat(w[O])}).join("&")}},{key:"needsLoad",value:function(){return[Ry,bT,rs,ci].includes(this._callState)}},{key:"sendMessageToCallMachine",value:function(h,S){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");this._messageChannel.sendMessageToCallMachine(h,S,this.callClientId,this._iframe)}},{key:"forwardPackagedMessageToCallMachine",value:function(h){this._messageChannel.forwardPackagedMessageToCallMachine(h,this._iframe,this.callClientId)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(h){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(h,this.callClientId)}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(h){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(h)}},{key:"handleMessageFromCallMachine",value:function(h){switch(h.action){case nP:this.sendMessageToCallMachine(ue({action:rP},this.properties));break;case"call-machine-initialized":this._callMachineInitialized=!0;var S={action:jd,level:"log",code:1011,stats:{event:"bundle load",time:this._bundleLoadTime==="no-op"?0:this._bundleLoadTime,preLoaded:this._bundleLoadTime==="no-op",url:lf(this.properties.dailyConfig)}};this.sendMessageToCallMachine(S),this._delayDuplicateInstanceLog&&this._logDuplicateInstanceAttempt();break;case Ny:this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null),this.emitDailyJSEvent(h);break;case uP:var w,M=ue({},h);delete M.internal,this._maxAppMessageSize=((w=h.internal)===null||w===void 0?void 0:w._maxAppMessageSize)||Nm,this._joinedCallback&&(this._joinedCallback(h.participants),this._joinedCallback=null),this.emitDailyJSEvent(M);break;case hP:case fP:if(this._callState===rs)return;if(h.participant&&h.participant.session_id){var O=h.participant.local?"local":h.participant.session_id;if(this._callObjectMode){var $=this._callMachine().store;jT(h.participant,$),VT(h.participant,$),FT(h.participant,this._participants[O],$)}try{this.maybeParticipantTracksStopped(this._participants[O],h.participant),this.maybeParticipantTracksStarted(this._participants[O],h.participant),this.maybeEventRecordingStopped(this._participants[O],h.participant),this.maybeEventRecordingStarted(this._participants[O],h.participant)}catch(gt){console.error("track events error",gt)}this.compareEqualForParticipantUpdateEvent(h.participant,this._participants[O])||(this._participants[O]=ue({},h.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus(),this.emitDailyJSEvent(h))}break;case pP:if(h.participant&&h.participant.session_id){var K=this._participants[h.participant.session_id];K&&this.maybeParticipantTracksStopped(K,null),delete this._participants[h.participant.session_id],this.emitDailyJSEvent(h)}break;case mP:cn(this._participantCounts,h.participantCounts)||(this._participantCounts=h.participantCounts,this.emitDailyJSEvent(h));break;case gP:var W={access:h.access};h.awaitingAccess&&(W.awaitingAccess=h.awaitingAccess),cn(this._accessState,W)||(this._accessState=W,this.emitDailyJSEvent(h));break;case yP:if(h.meetingSession){this._meetingSessionSummary=h.meetingSession,this.emitDailyJSEvent(h);var X=ue(ue({},h),{},{action:"meeting-session-updated"});this.emitDailyJSEvent(X)}break;case Vy:var le;this._iframe&&!h.preserveIframe&&(this._iframe.src=""),this._updateCallState(ci),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(h.errorMsg),this._loadedCallback=null),h.preserveIframe;var pe=_S(h,x$);pe!=null&&(le=pe.error)!==null&&le!==void 0&&le.details&&(pe.error.details=JSON.parse(pe.error.details)),this._maybeSendToSentry(h),this._joinedCallback&&(this._joinedCallback(null,pe),this._joinedCallback=null),this.emitDailyJSEvent(pe);break;case dP:this._callState!==ci&&this._updateCallState(rs),this.resetMeetingDependentVars(),this._resolveLeave&&(this._resolveLeave(),this._resolveLeave=null),this.emitDailyJSEvent(h);break;case"selected-devices-updated":h.devices&&this.emitDailyJSEvent(h);break;case $P:var Xe=h.state,Ft=h.threshold,An=h.quality,Le=Xe.state,ut=Xe.reasons;Le===this._network.networkState&&cn(ut,this._network.networkStateReasons)&&Ft===this._network.threshold&&An===this._network.quality||(this._network.networkState=Le,this._network.networkStateReasons=ut,this._network.quality=An,this._network.threshold=Ft,h.networkState=Le,ut.length&&(h.networkStateReasons=ut),delete h.state,this.emitDailyJSEvent(h));break;case zP:h&&h.cpuLoadState&&this.emitDailyJSEvent(h);break;case qP:h&&h.faceCounts!==void 0&&this.emitDailyJSEvent(h);break;case FP:var Ze=h.activeSpeaker;this._activeSpeaker.peerId!==Ze.peerId&&(this._activeSpeaker.peerId=Ze.peerId,this.emitDailyJSEvent({action:h.action,activeSpeaker:this._activeSpeaker}));break;case"show-local-video-changed":if(this._callObjectMode)return;var tt=h.show;this._showLocalVideo=tt,this.emitDailyJSEvent({action:h.action,show:tt});break;case UP:var Wn=h.enabled;this._activeSpeakerMode!==Wn&&(this._activeSpeakerMode=Wn,this.emitDailyJSEvent({action:h.action,enabled:this._activeSpeakerMode}));break;case _P:case wP:case EP:this._waitingParticipants=h.allWaitingParticipants,this.emitDailyJSEvent({action:h.action,participant:h.participant});break;case QP:cn(this._receiveSettings,h.receiveSettings)||(this._receiveSettings=h.receiveSettings,this.emitDailyJSEvent({action:h.action,receiveSettings:h.receiveSettings}));break;case Ly:this._maybeUpdateInputSettings(h.inputSettings);break;case"send-settings-updated":cn(this._sendSettings,h.sendSettings)||(this._sendSettings=h.sendSettings,this._preloadCache.sendSettings=null,this.emitDailyJSEvent({action:h.action,sendSettings:h.sendSettings}));break;case"local-audio-level":this._localAudioLevel=h.audioLevel,this._preloadCache.localAudioLevelObserver=null,this.emitDailyJSEvent(h);break;case"remote-participants-audio-level":this._remoteParticipantsAudioLevel=h.participantsAudioLevel,this._preloadCache.remoteParticipantsAudioLevelObserver=null,this.emitDailyJSEvent(h);break;case NP:var $e=h.session_id;this._rmpPlayerState[$e]=h.playerState,this.emitDailyJSEvent(h);break;case MP:delete this._rmpPlayerState[h.session_id],this.emitDailyJSEvent(h);break;case DP:var Gn=h.session_id,ni=this._rmpPlayerState[Gn];ni&&this.compareEqualForRMPUpdateEvent(ni,h.remoteMediaPlayerState)||(this._rmpPlayerState[Gn]=h.remoteMediaPlayerState,this.emitDailyJSEvent(h));break;case"custom-button-click":case"sidebar-view-changed":case"pip-started":case"pip-stopped":this.emitDailyJSEvent(h);break;case vP:var ri=this._meetingSessionState.topology!==(h.meetingSessionState&&h.meetingSessionState.topology);this._meetingSessionState=Bm(h.meetingSessionState,this._callObjectMode),(this._callObjectMode||ri)&&this.emitDailyJSEvent(h);break;case LP:this._isScreenSharing=!0,this.emitDailyJSEvent(h);break;case jP:case VP:this._isScreenSharing=!1,this.emitDailyJSEvent(h);break;case Dy:case My:case CP:case AP:case PP:case bP:case kP:case IP:case aP:case lP:case RP:case OP:case"test-completed":case BP:case xP:case HP:case WP:case GP:case KP:case jy:case JP:case"dialin-ready":case"dialin-connected":case"dialin-error":case"dialin-stopped":case"dialin-warning":case"dialout-connected":case"dialout-answered":case"dialout-error":case"dialout-stopped":case"dialout-warning":this.emitDailyJSEvent(h);break;case"request-fullscreen":this.requestFullscreen();break;case"request-exit-fullscreen":this.exitFullscreen()}}},{key:"maybeEventRecordingStopped",value:function(h,S){var w="record";h&&(S.local||S[w]!==!1||h[w]===S[w]||this.emitDailyJSEvent({action:My}))}},{key:"maybeEventRecordingStarted",value:function(h,S){var w="record";h&&(S.local||S[w]!==!0||h[w]===S[w]||this.emitDailyJSEvent({action:Dy}))}},{key:"_trackStatePlayable",value:function(h){return!(!h||h.state!==Y1)}},{key:"_trackChanged",value:function(h,S){return(h==null?void 0:h.id)!==(S==null?void 0:S.id)}},{key:"maybeEventTrackStopped",value:function(h,S,w){var M,O,$=(M=S==null?void 0:S.tracks[h])!==null&&M!==void 0?M:null,K=(O=w==null?void 0:w.tracks[h])!==null&&O!==void 0?O:null,W=$==null?void 0:$.track;if(W){var X=this._trackStatePlayable($),le=this._trackStatePlayable(K),pe=this._trackChanged(W,K==null?void 0:K.track);X&&(le&&!pe||this.emitDailyJSEvent({action:TP,track:W,participant:w??S,type:h}))}}},{key:"maybeEventTrackStarted",value:function(h,S,w){var M,O,$=(M=S==null?void 0:S.tracks[h])!==null&&M!==void 0?M:null,K=(O=w==null?void 0:w.tracks[h])!==null&&O!==void 0?O:null,W=K==null?void 0:K.track;if(W){var X=this._trackStatePlayable($),le=this._trackStatePlayable(K),pe=this._trackChanged($==null?void 0:$.track,W);le&&(X&&!pe||this.emitDailyJSEvent({action:SP,track:W,participant:w,type:h}))}}},{key:"maybeParticipantTracksStopped",value:function(h,S){if(h)for(var w in h.tracks)this.maybeEventTrackStopped(w,h,S)}},{key:"maybeParticipantTracksStarted",value:function(h,S){if(S)for(var w in S.tracks)this.maybeEventTrackStarted(w,h,S)}},{key:"compareEqualForRMPUpdateEvent",value:function(h,S){var w,M;return h.state===S.state&&((w=h.settings)===null||w===void 0?void 0:w.volume)===((M=S.settings)===null||M===void 0?void 0:M.volume)}},{key:"emitDailyJSEvent",value:function(h){try{h.callClientId=this.callClientId,this.emit(h.action,h)}catch(S){console.log("could not emit",h,S)}}},{key:"compareEqualForParticipantUpdateEvent",value:function(h,S){return!!cn(h,S)&&(!h.videoTrack||!S.videoTrack||h.videoTrack.id===S.videoTrack.id&&h.videoTrack.muted===S.videoTrack.muted&&h.videoTrack.enabled===S.videoTrack.enabled)&&(!h.audioTrack||!S.audioTrack||h.audioTrack.id===S.audioTrack.id&&h.audioTrack.muted===S.audioTrack.muted&&h.audioTrack.enabled===S.audioTrack.enabled)}},{key:"nativeUtils",value:function(){return Ae()?typeof DailyNativeUtils>"u"?(console.warn("in React Native, DailyNativeUtils is expected to be available"),null):DailyNativeUtils:null}},{key:"updateIsPreparingToJoin",value:function(h){this._updateCallState(this._callState,h)}},{key:"_updateCallState",value:function(h){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._isPreparingToJoin;if(h!==this._callState||S!==this._isPreparingToJoin){var w=this._callState,M=this._isPreparingToJoin;this._callState=h,this._isPreparingToJoin=S;var O=this._callState===hs;this.updateShowAndroidOngoingMeetingNotification(O);var $=mh(w,M),K=mh(this._callState,this._isPreparingToJoin);$!==K&&(this.updateKeepDeviceAwake(K),this.updateDeviceAudioMode(K),this.updateNoOpRecordingEnsuringBackgroundContinuity(K))}}},{key:"resetMeetingDependentVars",value:function(){this._participants={},this._participantCounts=YT,this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:fh},this._finalSummaryOfPrevSession=this._meetingSessionSummary,this._meetingSessionSummary={},this._meetingSessionState=Bm(QT,this._callObjectMode),this._isScreenSharing=!1,this._receiveSettings={},this._inputSettings=void 0,this._sendSettings={},this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this._maxAppMessageSize=Nm,this._callMachineInitialized=!1,this._bundleLoadTime=void 0,this._preloadCache}},{key:"updateKeepDeviceAwake",value:function(h){Ae()&&this.nativeUtils().setKeepDeviceAwake(h,this.callClientId)}},{key:"updateDeviceAudioMode",value:function(h){if(Ae()&&!this.disableReactNativeAutoDeviceManagement("audio")){var S=h?this._nativeInCallAudioMode:"idle";this.nativeUtils().setAudioMode(S)}}},{key:"updateShowAndroidOngoingMeetingNotification",value:function(h){if(Ae()&&this.nativeUtils().setShowOngoingMeetingNotification){var S,w,M,O;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var $=this.properties.reactNativeConfig.androidInCallNotification;S=$.title,w=$.subtitle,M=$.iconName,O=$.disableForCustomOverride}O&&(h=!1),this.nativeUtils().setShowOngoingMeetingNotification(h,S,w,M,this.callClientId)}}},{key:"updateNoOpRecordingEnsuringBackgroundContinuity",value:function(h){Ae()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(h)}},{key:"toggleParticipantAudioBasedOnNativeAudioFocus",value:function(){var h;if(Ae()){var S=(h=this._callMachine())===null||h===void 0||(h=h.store)===null||h===void 0?void 0:h.getState();for(var w in S==null?void 0:S.streams){var M=S.streams[w];M&&M.pendingTrack&&M.pendingTrack.kind==="audio"&&(M.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:"disableReactNativeAutoDeviceManagement",value:function(h){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[h]}},{key:"absoluteUrl",value:function(h){if(h!==void 0){var S=document.createElement("a");return S.href=h,S.href}}},{key:"sayHello",value:function(){var h="hello, world.";return console.log(h),h}},{key:"_logUseAfterDestroy",value:function(){var h=Object.values(go)[0];if(this.needsLoad())if(h&&!h.needsLoad()){var S={action:jd,level:"error",code:this.strictMode?9995:9997};h.sendMessageToCallMachine(S)}else this.strictMode||console.error("You are are attempting to use a call instance that was previously destroyed, which is unsupported. Please remove `strictMode: false` from your constructor properties to enable strict mode to track down and fix this unsupported usage.");else{var w={action:jd,level:"error",code:this.strictMode?9995:9997};this._messageChannel.sendMessageToCallMachine(w,null,this.callClientId,this._iframe)}}},{key:"_logDuplicateInstanceAttempt",value:function(){for(var h=0,S=Object.values(go);h<S.length;h++){var w=S[h];w._callMachineInitialized?(w.sendMessageToCallMachine({action:jd,level:"warn",code:this.allowMultipleCallInstances?9993:9992}),w._delayDuplicateInstanceLog=!1):w._delayDuplicateInstanceLog=!0}}},{key:"_maybeSendToSentry",value:function(h){var S,w,M,O;if(!((S=h.error)!==null&&S!==void 0&&S.type&&(![tP,eP,Oy].includes(h.error.type)||h.error.type===Oy&&h.error.msg.includes("deleted")))){var $=(w=this.properties)!==null&&w!==void 0&&w.url?new URL(this.properties.url):void 0,K="production";$&&$.host.includes(".staging.daily")&&(K="staging");var W,X,le,pe,Xe,Ft=function($e){const Gn=[Z3(),Y3(),kU(),TU(),xU(),OU(),rU(),RU()];return $e.autoSessionTracking!==!1&&Gn.push(PU()),Gn}({}).filter(function($e){return!["BrowserApiErrors","Breadcrumbs","GlobalHandlers"].includes($e.name)}),An=new dU({dsn:"https://f10f1c81e5d44a4098416c0867a8b740@o77906.ingest.sentry.io/168844",transport:gU,stackParser:SU,integrations:Ft,environment:K}),Le=new Bs;if(Le.setClient(An),An.init(),this.session_id&&Le.setExtra("sessionId",this.session_id),this.properties){var ut=ue({},this.properties);ut.userName=ut.userName?"[Filtered]":void 0,ut.userData=ut.userData?"[Filtered]":void 0,ut.token=ut.token?"[Filtered]":void 0,Le.setExtra("properties",ut)}if($){var Ze=$.searchParams.get("domain");if(!Ze){var tt=$.host.match(/(.*?)\./);Ze=tt&&tt[1]||""}Ze&&Le.setTag("domain",Ze)}h.error&&(Le.setTag("fatalErrorType",h.error.type),Le.setExtra("errorDetails",h.error.details),!((W=h.error.details)===null||W===void 0)&&W.uri&&Le.setTag("serverAddress",h.error.details.uri),!((X=h.error.details)===null||X===void 0)&&X.workerGroup&&Le.setTag("workerGroup",h.error.details.workerGroup),!((le=h.error.details)===null||le===void 0)&&le.geoGroup&&Le.setTag("geoGroup",h.error.details.geoGroup),!((pe=h.error.details)===null||pe===void 0)&&pe.on&&Le.setTag("connectionAttempt",h.error.details.on),(Xe=h.error.details)!==null&&Xe!==void 0&&Xe.bundleUrl&&(Le.setTag("bundleUrl",h.error.details.bundleUrl),Le.setTag("bundleError",h.error.details.sourceError.type))),Le.setTags({callMode:this._callObjectMode?Ae()?"reactNative":(M=this.properties)!==null&&M!==void 0&&(M=M.dailyConfig)!==null&&M!==void 0&&(M=M.callMode)!==null&&M!==void 0&&M.includes("prebuilt")?this.properties.dailyConfig.callMode:"custom":"prebuilt-frame",version:t.version()});var Wn=((O=h.error)===null||O===void 0?void 0:O.msg)||h.errorMsg;Le.captureException(new Error(Wn))}}},{key:"_callMachine",value:function(){var h;return(h=window._daily)===null||h===void 0||(h=h.instances)===null||h===void 0||(h=h[this.callClientId])===null||h===void 0?void 0:h.callMachine}},{key:"_maybeUpdateInputSettings",value:function(h){if(!cn(this._inputSettings,h)){var S=this._getInputSettings();this._inputSettings=h;var w=this._getInputSettings();cn(S,w)||this.emitDailyJSEvent({action:Ly,inputSettings:w})}}}],[{key:"supportedBrowser",value:function(){if(Ae())return{supported:!0,mobile:!0,name:"React Native",version:null,supportsScreenShare:!0,supportsSfu:!0,supportsVideoProcessing:!1,supportsAudioProcessing:!1};var h=_3.getParser(hr());return{supported:!!Lm(),mobile:h.getPlatformType()==="mobile",name:h.getBrowserName(),version:h.getBrowserVersion(),supportsFullscreen:!!xT(),supportsScreenShare:!!s$(),supportsSfu:!!Lm(),supportsVideoProcessing:ZP(),supportsAudioProcessing:ex()}}},{key:"version",value:function(){return"0.85.0"}},{key:"createCallObject",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return h.layout="none",new t(null,h)}},{key:"wrap",value:function(h){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ce(),!h||!h.contentWindow||typeof h.src!="string")throw new Error("DailyIframe::Wrap needs an iframe-like first argument");return S.layout||(S.customLayout?S.layout="custom-v1":S.layout="browser"),new t(h,S)}},{key:"createFrame",value:function(h,S){var w,M;Ce(),h&&S?(w=h,M=S):h&&h.append?(w=h,M={}):(w=document.body,M=h||{});var O=M.iframeStyle;O||(O=w===document.body?{position:"fixed",border:"1px solid black",backgroundColor:"white",width:"375px",height:"450px",right:"1em",bottom:"1em"}:{border:0,width:"100%",height:"100%"});var $=document.createElement("iframe");window.navigator&&window.navigator.userAgent.match(/Chrome\/61\./)?$.allow="microphone, camera":$.allow="microphone; camera; autoplay; display-capture; screen-wake-lock",$.style.visibility="hidden",w.appendChild($),$.style.visibility=null,Object.keys(O).forEach(function(K){return $.style[K]=O[K]}),M.layout||(M.customLayout?M.layout="custom-v1":M.layout="browser");try{return new t($,M)}catch(K){throw w.removeChild($),K}}},{key:"createTransparentFrame",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ce();var S=document.createElement("iframe");return S.allow="microphone; camera; autoplay",S.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
      pointer-events: none;
    `,document.body.appendChild(S),h.layout||(h.layout="custom-v1"),t.wrap(S,h)}},{key:"getCallInstance",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;return h?go[h]:Object.values(go)[0]}}]);var e,n,r,i,s,o,a,l,u,d,f,m,E,T,_,b,v,g,k,j,U,z,R,P,N,D,C,F,L,be,Pt,gn,Fe,Z,he,ce,Ne,Ee}();function eb(t){if(t.extension){if(typeof t.extension!="string")throw new Error("Error starting dial out: extension must be a string");if(t.extension.length>20)throw new Error("Error starting dial out: extension length must be less than or equal to 20")}if(t.waitBeforeExtensionDialSec){if(typeof t.waitBeforeExtensionDialSec!="number")throw new Error("Error starting dial out: waitBeforeExtensionDialSec must be a number");if(t.waitBeforeExtensionDialSec>60)throw new Error("Error starting dial out: waitBeforeExtensionDialSec must be less than or equal to 60");if(!t.extension)throw new Error("Error starting dial out: waitBeforeExtensionDialSec requires a phoneNumber and extension")}}function va(t,e){var n={};for(var r in t)if(t[r]instanceof MediaStreamTrack)console.warn("MediaStreamTrack found in props or cache.",r),n[r]=wi;else if(r==="dailyConfig"){if(t[r].modifyLocalSdpHook){var i=window._daily.instances[e].customCallbacks||{};i.modifyLocalSdpHook=t[r].modifyLocalSdpHook,window._daily.instances[e].customCallbacks=i,delete t[r].modifyLocalSdpHook}if(t[r].modifyRemoteSdpHook){var s=window._daily.instances[e].customCallbacks||{};s.modifyRemoteSdpHook=t[r].modifyRemoteSdpHook,window._daily.instances[e].customCallbacks=s,delete t[r].modifyRemoteSdpHook}n[r]=t[r]}else n[r]=t[r];return n}function He(t){var e=arguments.length>2?arguments[2]:void 0;if(t!==hs){var n="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," only supported after join.");throw e&&(n+=" ".concat(e)),console.error(n),new Error(n)}}function mh(t,e){return[pf,hs].includes(t)||e}function Um(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"This daily-js method",r=arguments.length>3?arguments[3]:void 0;if(mh(t,e)){var i="".concat(n," not supported after joining a meeting.");throw r&&(i+=" ".concat(r)),console.error(i),new Error(i)}}function Ud(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method",n=arguments.length>2?arguments[2]:void 0;if(!t){var r="".concat(e,arguments.length>3&&arguments[3]!==void 0&&arguments[3]?" requires preAuth() or startCamera() to initialize call state.":" requires preAuth(), startCamera(), or join() to initialize call state.");throw n&&(r+=" ".concat(n)),console.error(r),new Error(r)}}function $m(t){if(t){var e="A pre-call quality test is in progress. Please try ".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," again once testing has completed. Use stopTestCallQuality() to end it early.");throw console.error(e),new Error(e)}}function yr(t){if(!t){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported on custom callObject instances");throw console.error(e),new Error(e)}}function Dn(t){if(t){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported as part of Daily's Prebuilt");throw console.error(e),new Error(e)}}function Ce(){if(Ae())throw new Error("This daily-js method is not currently supported in React Native")}function ec(){if(!Ae())throw new Error("This daily-js method is only supported in React Native")}function fx(t){if(t===void 0)return!0;var e;if(typeof t=="string")e=t;else try{e=JSON.stringify(t),cn(JSON.parse(e),t)||console.warn("The userData provided will be modified when serialized.")}catch(n){throw Error("userData must be serializable to JSON: ".concat(n))}if(e.length>4096)throw Error("userData is too large (".concat(e.length," characters). Maximum size suppported is ").concat(4096,"."));return!0}function px(t,e){for(var n=e.allowAllParticipantsKey,r=function(f){var m=["local"];return n||m.push("*"),f&&!m.includes(f)},i=function(f){return!!(f.layer===void 0||Number.isInteger(f.layer)&&f.layer>=0||f.layer==="inherit")},s=function(f){return!!f&&!(f.video&&!i(f.video))&&!(f.screenVideo&&!i(f.screenVideo))},o=0,a=Object.entries(t);o<a.length;o++){var l=nn(a[o],2),u=l[0],d=l[1];if(!r(u)||!s(d))return!1}return!0}function mx(t){if(Re(t)!=="object")return!1;for(var e=0,n=Object.entries(t);e<n.length;e++){var r=nn(n[e],2),i=r[0],s=r[1];switch(i){case"video":if(Re(s)!=="object")return!1;for(var o=0,a=Object.entries(s);o<a.length;o++){var l=nn(a[o],2),u=l[0],d=l[1];switch(u){case"processor":if(!D$(d))return!1;break;case"settings":if(!tb(d))return!1;break;default:return!1}}break;case"audio":if(Re(s)!=="object")return!1;for(var f=0,m=Object.entries(s);f<m.length;f++){var E=nn(m[f],2),T=E[0],_=E[1];switch(T){case"processor":if(!N$(_))return!1;break;case"settings":if(!tb(_))return!1;break;default:return!1}}break;default:return!1}}return!0}function gx(t,e,n){var r,i=[];t.video&&t.video.processor&&(ZP((r=e==null?void 0:e.useLegacyVideoProcessor)!==null&&r!==void 0&&r)||(t.video.settings?delete t.video.processor:delete t.video,i.push("video"))),t.audio&&t.audio.processor&&(ex()||(t.audio.settings?delete t.audio.processor:delete t.audio,i.push("audio"))),i.length>0&&console.error("Ignoring settings for browser- or platform-unsupported input processor(s): ".concat(i.join(", "))),t.audio&&t.audio.settings&&(t.audio.settings.customTrack?(n.audioTrack=t.audio.settings.customTrack,t.audio.settings={customTrack:wi}):delete n.audioTrack),t.video&&t.video.settings&&(t.video.settings.customTrack?(n.videoTrack=t.video.settings.customTrack,t.video.settings={customTrack:wi}):delete n.videoTrack)}function N$(t){if(Ae())return console.warn("Video processing is not yet supported in React Native"),!1;var e=["type"];return!!t&&Re(t)==="object"&&(Object.keys(t).filter(function(n){return!e.includes(n)}).forEach(function(n){console.warn("invalid key inputSettings -> audio -> processor : ".concat(n)),delete t[n]}),!!function(n){return typeof n!="string"?!1:Object.values(YP).includes(n)?!0:(console.error("inputSettings audio processor type invalid"),!1)}(t.type))}function D$(t){if(Ae())return console.warn("Video processing is not yet supported in React Native"),!1;var e=["type","config"];return!t||Re(t)!=="object"||!function(n){return typeof n!="string"?!1:Object.values(ph).includes(n)?!0:(console.error("inputSettings video processor type invalid"),!1)}(t.type)||t.config&&(Re(t.config)!=="object"||!function(n,r){var i=Object.keys(r);if(i.length===0)return!0;var s="invalid object in inputSettings -> video -> processor -> config";switch(n){case ph.BGBLUR:return i.length>1||i[0]!=="strength"?(console.error(s),!1):!(typeof r.strength!="number"||r.strength<=0||r.strength>1||isNaN(r.strength))||(console.error("".concat(s,"; expected: {0 < strength <= 1}, got: ").concat(r.strength)),!1);case ph.BGIMAGE:return!(r.source!==void 0&&!function(o){if(o.source==="default")return o.type="default",!0;if(o.source instanceof ArrayBuffer)return!0;if(cf(o.source))return o.type="url",!!function(u){var d=new URL(u),f=d.pathname;if(d.protocol==="data:")try{var m=f.substring(f.indexOf(":")+1,f.indexOf(";")).split("/")[1];return Mm.includes(m)}catch(T){return console.error("failed to deduce blob content type",T),!1}var E=f.split(".").at(-1).toLowerCase().trim();return Mm.includes(E)}(o.source)||(console.error("invalid image type; supported types: [".concat(Mm.join(", "),"]")),!1);return a=o.source,l=Number(a),isNaN(l)||!Number.isInteger(l)||l<=0||l>10?(console.error("invalid image selection; must be an int, > 0, <= ".concat(10)),!1):(o.type="daily-preselect",!0);var a,l}(r));default:return!0}}(t.type,t.config))?!1:(Object.keys(t).filter(function(n){return!e.includes(n)}).forEach(function(n){console.warn("invalid key inputSettings -> video -> processor : ".concat(n)),delete t[n]}),!0)}function tb(t){return Re(t)==="object"&&(!t.customTrack||t.customTrack instanceof MediaStreamTrack)}function Hy(){var t=Object.values(ph).join(" | "),e=Object.values(YP).join(" | ");return"inputSettings must be of the form: { video?: { processor?: { type: [ ".concat(t," ], config?: {} } }, audio?: { processor: {type: [ ").concat(e," ] } } }")}function yx(t){var e=t.allowAllParticipantsKey;return"receiveSettings must be of the form { [<remote participant id> | ".concat(Z1).concat(e?' | "'.concat("*",'"'):"","]: ")+'{ [video: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]], [screenVideo: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]] }}}'}function vx(){return"customIntegrations should be an object of type ".concat(JSON.stringify(qy),".")}function _x(t){if(t&&Re(t)!=="object"||Array.isArray(t))return console.error("customTrayButtons should be an Object of the type ".concat(JSON.stringify(yf),".")),!1;if(t)for(var e=0,n=Object.entries(t);e<n.length;e++)for(var r=nn(n[e],1)[0],i=0,s=Object.entries(t[r]);i<s.length;i++){var o=nn(s[i],2),a=o[0],l=o[1],u=yf.id[a];if(!u)return console.error("customTrayButton does not support key ".concat(a)),!1;switch(a){case"iconPath":case"iconPathDarkMode":if(!cf(l))return console.error("customTrayButton ".concat(a," should be a url.")),!1;break;case"visualState":if(!["default","sidebar-open","active"].includes(l))return console.error("customTrayButton ".concat(a," should be ").concat(u,". Got: ").concat(l)),!1;break;default:if(Re(l)!==u)return console.error("customTrayButton ".concat(a," should be a ").concat(u,".")),!1}}return!0}function wx(t){if(!t||t&&Re(t)!=="object"||Array.isArray(t))return console.error(vx()),!1;for(var e=function(f){return"".concat(f," should be ").concat(qy.id[f])},n=function(f,m){return console.error("customIntegration ".concat(f,": ").concat(m))},r=0,i=Object.entries(t);r<i.length;r++){var s=nn(i[r],1)[0];if(!("label"in t[s]))return n(s,"label is required"),!1;if(!("location"in t[s]))return n(s,"location is required"),!1;if(!("src"in t[s])&&!("srcdoc"in t[s]))return n(s,"src or srcdoc is required"),!1;for(var o=0,a=Object.entries(t[s]);o<a.length;o++){var l=nn(a[o],2),u=l[0],d=l[1];switch(u){case"allow":case"csp":case"name":case"referrerPolicy":case"sandbox":if(typeof d!="string")return n(s,e(u)),!1;break;case"iconURL":if(!cf(d))return n(s,"".concat(u," should be a url")),!1;break;case"src":if("srcdoc"in t[s])return n(s,"cannot have both src and srcdoc"),!1;if(!cf(d))return n(s,'src "'.concat(d,'" is not a valid URL')),!1;break;case"srcdoc":if("src"in t[s])return n(s,"cannot have both src and srcdoc"),!1;if(typeof d!="string")return n(s,e(u)),!1;break;case"location":if(!["main","sidebar"].includes(d))return n(s,e(u)),!1;break;case"controlledBy":if(d!=="*"&&d!=="owners"&&(!Array.isArray(d)||d.some(function(f){return typeof f!="string"})))return n(s,e(u)),!1;break;case"shared":if((!Array.isArray(d)||d.some(function(f){return typeof f!="string"}))&&d!=="owners"&&typeof d!="boolean")return n(s,e(u)),!1;break;default:if(!qy.id[u])return console.error("customIntegration does not support key ".concat(u)),!1}}}return!0}function Ex(t,e){if(e===void 0)return!1;switch(Re(e)){case"string":return Re(t)===e;case"object":if(Re(t)!=="object")return!1;for(var n in t)if(!Ex(t[n],e[n]))return!1;return!0;default:return!1}}function nb(t,e){var n=t.sessionId,r=t.toEndPoint,i=t.callerId,s=t.useSipRefer;if(!n||!r)throw new Error("".concat(e,"() requires a sessionId and toEndPoint"));if(typeof n!="string"||typeof r!="string")throw new Error("Invalid paramater: sessionId and toEndPoint must be of type string");if(s&&!r.startsWith("sip:"))throw new Error('"toEndPoint" must be a "sip" address');if(!r.startsWith("sip:")&&!r.startsWith("+"))throw new Error("toEndPoint: ".concat(r,' must starts with either "sip:" or "+"'));if(i&&typeof i!="string")throw new Error("callerId must be of type string");if(i&&!r.startsWith("+"))throw new Error("callerId is only valid when transferring to a PSTN number")}function rb(t){if(Re(t)!=="object")throw new Error('RemoteMediaPlayerSettings: must be "object" type');if(t.state&&!Object.values(Fy).includes(t.state))throw new Error("Invalid value for RemoteMediaPlayerSettings.state, valid values are: "+JSON.stringify(Fy));if(t.volume){if(typeof t.volume!="number")throw new Error('RemoteMediaPlayerSettings.volume: must be "number" type');if(t.volume<0||t.volume>2)throw new Error("RemoteMediaPlayerSettings.volume: must be between 0.0 - 2.0")}}function ib(t,e,n){return!(typeof t!="number"||t<e||t>n)}function Bm(t,e){return t&&!e&&delete t.data,t}const M$=Object.freeze(Object.defineProperty({__proto__:null,DAILY_ACCESS_LEVEL_FULL:X1,DAILY_ACCESS_LEVEL_LOBBY:VU,DAILY_ACCESS_LEVEL_NONE:FU,DAILY_ACCESS_UNKNOWN:fh,DAILY_CAMERA_ERROR_CAM_AND_MIC_IN_USE:QU,DAILY_CAMERA_ERROR_CAM_IN_USE:KU,DAILY_CAMERA_ERROR_CONSTRAINTS:e$,DAILY_CAMERA_ERROR_MIC_IN_USE:JU,DAILY_CAMERA_ERROR_NOT_FOUND:ZU,DAILY_CAMERA_ERROR_PERMISSIONS:YU,DAILY_CAMERA_ERROR_UNDEF_MEDIADEVICES:XU,DAILY_CAMERA_ERROR_UNKNOWN:t$,DAILY_EVENT_ACCESS_STATE_UPDATED:gP,DAILY_EVENT_ACTIVE_SPEAKER_CHANGE:FP,DAILY_EVENT_ACTIVE_SPEAKER_MODE_CHANGE:UP,DAILY_EVENT_APP_MSG:RP,DAILY_EVENT_CAMERA_ERROR:lP,DAILY_EVENT_CPU_LOAD_CHANGE:zP,DAILY_EVENT_ERROR:Vy,DAILY_EVENT_EXIT_FULLSCREEN:fc,DAILY_EVENT_FACE_COUNTS_UPDATED:qP,DAILY_EVENT_FULLSCREEN:hc,DAILY_EVENT_IFRAME_LAUNCH_CONFIG:rP,DAILY_EVENT_IFRAME_READY_FOR_LAUNCH_CONFIG:nP,DAILY_EVENT_INPUT_SETTINGS_UPDATED:Ly,DAILY_EVENT_JOINED_MEETING:uP,DAILY_EVENT_JOINING_MEETING:cP,DAILY_EVENT_LANG_UPDATED:JP,DAILY_EVENT_LEFT_MEETING:dP,DAILY_EVENT_LIVE_STREAMING_ERROR:KP,DAILY_EVENT_LIVE_STREAMING_STARTED:HP,DAILY_EVENT_LIVE_STREAMING_STOPPED:GP,DAILY_EVENT_LIVE_STREAMING_UPDATED:WP,DAILY_EVENT_LOADED:Ny,DAILY_EVENT_LOADING:sP,DAILY_EVENT_LOAD_ATTEMPT_FAILED:oP,DAILY_EVENT_LOCAL_SCREEN_SHARE_CANCELED:VP,DAILY_EVENT_LOCAL_SCREEN_SHARE_STARTED:LP,DAILY_EVENT_LOCAL_SCREEN_SHARE_STOPPED:jP,DAILY_EVENT_MEETING_SESSION_DATA_ERROR:n$,DAILY_EVENT_MEETING_SESSION_STATE_UPDATED:vP,DAILY_EVENT_MEETING_SESSION_SUMMARY_UPDATED:yP,DAILY_EVENT_NETWORK_CONNECTION:BP,DAILY_EVENT_NETWORK_QUALITY_CHANGE:$P,DAILY_EVENT_NONFATAL_ERROR:jy,DAILY_EVENT_PARTICIPANT_COUNTS_UPDATED:mP,DAILY_EVENT_PARTICIPANT_JOINED:hP,DAILY_EVENT_PARTICIPANT_LEFT:pP,DAILY_EVENT_PARTICIPANT_UPDATED:fP,DAILY_EVENT_RECEIVE_SETTINGS_UPDATED:QP,DAILY_EVENT_RECORDING_DATA:xP,DAILY_EVENT_RECORDING_ERROR:AP,DAILY_EVENT_RECORDING_STARTED:Dy,DAILY_EVENT_RECORDING_STATS:CP,DAILY_EVENT_RECORDING_STOPPED:My,DAILY_EVENT_RECORDING_UPLOAD_COMPLETED:PP,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STARTED:NP,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STOPPED:MP,DAILY_EVENT_REMOTE_MEDIA_PLAYER_UPDATED:DP,DAILY_EVENT_STARTED_CAMERA:aP,DAILY_EVENT_THEME_UPDATED:iP,DAILY_EVENT_TRACK_STARTED:SP,DAILY_EVENT_TRACK_STOPPED:TP,DAILY_EVENT_TRANSCRIPTION_ERROR:IP,DAILY_EVENT_TRANSCRIPTION_MSG:OP,DAILY_EVENT_TRANSCRIPTION_STARTED:bP,DAILY_EVENT_TRANSCRIPTION_STOPPED:kP,DAILY_EVENT_WAITING_PARTICIPANT_ADDED:_P,DAILY_EVENT_WAITING_PARTICIPANT_REMOVED:EP,DAILY_EVENT_WAITING_PARTICIPANT_UPDATED:wP,DAILY_FATAL_ERROR_CONNECTION:tP,DAILY_FATAL_ERROR_EJECTED:$U,DAILY_FATAL_ERROR_EOL:eP,DAILY_FATAL_ERROR_EXP_ROOM:qU,DAILY_FATAL_ERROR_EXP_TOKEN:HU,DAILY_FATAL_ERROR_MEETING_FULL:WU,DAILY_FATAL_ERROR_NBF_ROOM:BU,DAILY_FATAL_ERROR_NBF_TOKEN:zU,DAILY_FATAL_ERROR_NOT_ALLOWED:GU,DAILY_FATAL_ERROR_NO_ROOM:Oy,DAILY_RECEIVE_SETTINGS_ALL_PARTICIPANTS_KEY:UU,DAILY_RECEIVE_SETTINGS_BASE_KEY:Z1,DAILY_STATE_ERROR:ci,DAILY_STATE_JOINED:hs,DAILY_STATE_JOINING:pf,DAILY_STATE_LEFT:rs,DAILY_STATE_NEW:Ry,DAILY_TRACK_STATE_BLOCKED:NU,DAILY_TRACK_STATE_INTERRUPTED:jU,DAILY_TRACK_STATE_LOADING:LU,DAILY_TRACK_STATE_OFF:DU,DAILY_TRACK_STATE_PLAYABLE:Y1,DAILY_TRACK_STATE_SENDABLE:MU,default:O$},Symbol.toStringTag,{value:"Module"})),L$=Fx(M$);var rw={exports:{}},Ya=typeof Reflect=="object"?Reflect:null,sb=Ya&&typeof Ya.apply=="function"?Ya.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},gh;Ya&&typeof Ya.ownKeys=="function"?gh=Ya.ownKeys:Object.getOwnPropertySymbols?gh=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:gh=function(e){return Object.getOwnPropertyNames(e)};function j$(t){console&&console.warn&&console.warn(t)}var Sx=Number.isNaN||function(e){return e!==e};function Ue(){Ue.init.call(this)}rw.exports=Ue;rw.exports.once=$$;Ue.EventEmitter=Ue;Ue.prototype._events=void 0;Ue.prototype._eventsCount=0;Ue.prototype._maxListeners=void 0;var ob=10;function yp(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Ue,"defaultMaxListeners",{enumerable:!0,get:function(){return ob},set:function(t){if(typeof t!="number"||t<0||Sx(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");ob=t}});Ue.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ue.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Sx(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Tx(t){return t._maxListeners===void 0?Ue.defaultMaxListeners:t._maxListeners}Ue.prototype.getMaxListeners=function(){return Tx(this)};Ue.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")sb(l,this,n);else for(var u=l.length,d=Ax(l,u),r=0;r<u;++r)sb(d[r],this,n);return!0};function bx(t,e,n,r){var i,s,o;if(yp(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=Tx(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,j$(a)}return t}Ue.prototype.addListener=function(e,n){return bx(this,e,n,!1)};Ue.prototype.on=Ue.prototype.addListener;Ue.prototype.prependListener=function(e,n){return bx(this,e,n,!0)};function V$(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function kx(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=V$.bind(r);return i.listener=n,r.wrapFn=i,i}Ue.prototype.once=function(e,n){return yp(n),this.on(e,kx(this,e,n)),this};Ue.prototype.prependOnceListener=function(e,n){return yp(n),this.prependListener(e,kx(this,e,n)),this};Ue.prototype.removeListener=function(e,n){var r,i,s,o,a;if(yp(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():F$(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Ue.prototype.off=Ue.prototype.removeListener;Ue.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function Ix(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?U$(i):Ax(i,i.length)}Ue.prototype.listeners=function(e){return Ix(this,e,!0)};Ue.prototype.rawListeners=function(e){return Ix(this,e,!1)};Ue.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Cx.call(t,e)};Ue.prototype.listenerCount=Cx;function Cx(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Ue.prototype.eventNames=function(){return this._eventsCount>0?gh(this._events):[]};function Ax(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function F$(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function U$(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function $$(t,e){return new Promise(function(n,r){function i(o){t.removeListener(e,s),r(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}Px(t,e,s,{once:!0}),e!=="error"&&B$(t,i,{once:!0})})}function B$(t,e,n){typeof t.on=="function"&&Px(t,"error",e,n)}function Px(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){r.once&&t.removeEventListener(e,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var z$=rw.exports,vp={},Rs={};Object.defineProperty(Rs,"__esModule",{value:!0});Rs.Api=Rs.HttpClient=Rs.ContentType=void 0;var ne;(function(t){t.Json="application/json",t.JsonApi="application/vnd.api+json",t.FormData="multipart/form-data",t.UrlEncoded="application/x-www-form-urlencoded",t.Text="text/plain"})(ne||(Rs.ContentType=ne={}));class xx{constructor(e={}){we(this,"baseUrl","https://api.vapi.ai");we(this,"securityData",null);we(this,"securityWorker");we(this,"abortControllers",new Map);we(this,"customFetch",(...e)=>fetch(...e));we(this,"baseApiParams",{credentials:"same-origin",headers:{},redirect:"follow",referrerPolicy:"no-referrer"});we(this,"setSecurityData",e=>{this.securityData=e});we(this,"contentFormatters",{[ne.Json]:e=>e!==null&&(typeof e=="object"||typeof e=="string")?JSON.stringify(e):e,[ne.JsonApi]:e=>e!==null&&(typeof e=="object"||typeof e=="string")?JSON.stringify(e):e,[ne.Text]:e=>e!==null&&typeof e!="string"?JSON.stringify(e):e,[ne.FormData]:e=>Object.keys(e||{}).reduce((n,r)=>{const i=e[r];return n.append(r,i instanceof Blob?i:typeof i=="object"&&i!==null?JSON.stringify(i):`${i}`),n},new FormData),[ne.UrlEncoded]:e=>this.toQueryString(e)});we(this,"createAbortSignal",e=>{if(this.abortControllers.has(e)){const r=this.abortControllers.get(e);return r?r.signal:void 0}const n=new AbortController;return this.abortControllers.set(e,n),n.signal});we(this,"abortRequest",e=>{const n=this.abortControllers.get(e);n&&(n.abort(),this.abortControllers.delete(e))});we(this,"request",async({body:e,secure:n,path:r,type:i,query:s,format:o,baseUrl:a,cancelToken:l,...u})=>{const d=(typeof n=="boolean"?n:this.baseApiParams.secure)&&this.securityWorker&&await this.securityWorker(this.securityData)||{},f=this.mergeRequestParams(u,d),m=s&&this.toQueryString(s),E=this.contentFormatters[i||ne.Json],T=o||f.format;return this.customFetch(`${a||this.baseUrl||""}${r}${m?`?${m}`:""}`,{...f,headers:{...f.headers||{},...i&&i!==ne.FormData?{"Content-Type":i}:{}},signal:(l?this.createAbortSignal(l):f.signal)||null,body:typeof e>"u"||e===null?null:E(e)}).then(async _=>{const b=_.clone();b.data=null,b.error=null;const v=T?await _[T]().then(g=>(b.ok?b.data=g:b.error=g,b)).catch(g=>(b.error=g,b)):b;if(l&&this.abortControllers.delete(l),!_.ok)throw v;return v})});Object.assign(this,e)}encodeQueryParam(e,n){return`${encodeURIComponent(e)}=${encodeURIComponent(typeof n=="number"?n:`${n}`)}`}addQueryParam(e,n){return this.encodeQueryParam(n,e[n])}addArrayQueryParam(e,n){return e[n].map(i=>this.encodeQueryParam(n,i)).join("&")}toQueryString(e){const n=e||{};return Object.keys(n).filter(i=>typeof n[i]<"u").map(i=>Array.isArray(n[i])?this.addArrayQueryParam(n,i):this.addQueryParam(n,i)).join("&")}addQueryParams(e){const n=this.toQueryString(e);return n?`?${n}`:""}mergeRequestParams(e,n){return{...this.baseApiParams,...e,...n||{},headers:{...this.baseApiParams.headers||{},...e.headers||{},...n&&n.headers||{}}}}}Rs.HttpClient=xx;class q$ extends xx{constructor(){super(...arguments);we(this,"assistant",{assistantControllerCreate:(n,r={})=>this.request({path:"/assistant",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),assistantControllerFindAll:(n,r={})=>this.request({path:"/assistant",method:"GET",query:n,secure:!0,format:"json",...r}),assistantControllerFindOne:(n,r={})=>this.request({path:`/assistant/${n}`,method:"GET",secure:!0,format:"json",...r}),assistantControllerUpdate:(n,r,i={})=>this.request({path:`/assistant/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),assistantControllerReplace:(n,r,i={})=>this.request({path:`/assistant/${n}`,method:"PUT",body:r,secure:!0,type:ne.Json,format:"json",...i}),assistantControllerRemove:(n,r={})=>this.request({path:`/assistant/${n}`,method:"DELETE",secure:!0,format:"json",...r}),assistantControllerFindVersions:(n,r,i={})=>this.request({path:`/assistant/${n}/version`,method:"GET",query:r,secure:!0,format:"json",...i})});we(this,"v2",{assistantControllerFindAllPaginated:(n,r={})=>this.request({path:"/v2/assistant",method:"GET",query:n,secure:!0,format:"json",...r}),callControllerCallsExport:(n,r={})=>this.request({path:"/v2/call/export",method:"GET",query:n,secure:!0,...r}),callControllerFindAllPaginated:(n,r={})=>this.request({path:"/v2/call",method:"GET",query:n,secure:!0,format:"json",...r}),callControllerFindAllMetadataPaginated:(n,r={})=>this.request({path:"/v2/call/metadata",method:"GET",query:n,secure:!0,format:"json",...r}),phoneNumberControllerFindAllPaginated:(n,r={})=>this.request({path:"/v2/phone-number",method:"GET",query:n,secure:!0,format:"json",...r})});we(this,"squad",{squadControllerCreate:(n,r={})=>this.request({path:"/squad",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),squadControllerFindAll:(n,r={})=>this.request({path:"/squad",method:"GET",query:n,secure:!0,format:"json",...r}),squadControllerFindOne:(n,r={})=>this.request({path:`/squad/${n}`,method:"GET",secure:!0,format:"json",...r}),squadControllerUpdate:(n,r,i={})=>this.request({path:`/squad/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),squadControllerRemove:(n,r={})=>this.request({path:`/squad/${n}`,method:"DELETE",secure:!0,format:"json",...r})});we(this,"workflow",{workflowControllerFindAll:(n={})=>this.request({path:"/workflow",method:"GET",secure:!0,format:"json",...n}),workflowControllerCreate:(n,r={})=>this.request({path:"/workflow",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),workflowControllerFindOne:(n,r={})=>this.request({path:`/workflow/${n}`,method:"GET",secure:!0,format:"json",...r}),workflowControllerDelete:(n,r={})=>this.request({path:`/workflow/${n}`,method:"DELETE",secure:!0,format:"json",...r}),workflowControllerUpdate:(n,r,i={})=>this.request({path:`/workflow/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i})});we(this,"call",{callControllerCreate:(n,r={})=>this.request({path:"/call",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),callControllerFindAll:(n,r={})=>this.request({path:"/call",method:"GET",query:n,secure:!0,format:"json",...r}),callControllerFindOne:(n,r={})=>this.request({path:`/call/${n}`,method:"GET",secure:!0,format:"json",...r}),callControllerUpdate:(n,r,i={})=>this.request({path:`/call/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),callControllerDeleteCallData:(n,r,i={})=>this.request({path:`/call/${n}`,method:"DELETE",body:r,secure:!0,type:ne.Json,format:"json",...i}),callControllerCreatePhoneCall:(n,r={})=>this.request({path:"/call/phone",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),callControllerCreateWebCall:(n,r={})=>this.request({path:"/call/web",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r})});we(this,"chat",{chatControllerListChats:(n,r={})=>this.request({path:"/chat",method:"GET",query:n,secure:!0,format:"json",...r}),chatControllerCreateChat:(n,r={})=>this.request({path:"/chat",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),chatControllerGetChat:(n,r={})=>this.request({path:`/chat/${n}`,method:"GET",secure:!0,format:"json",...r}),chatControllerDeleteChat:(n,r={})=>this.request({path:`/chat/${n}`,method:"DELETE",secure:!0,format:"json",...r}),chatControllerCreateOpenAiChat:(n,r={})=>this.request({path:"/chat/responses",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),chatControllerCreateWebChat:(n,r={})=>this.request({path:"/chat/web",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),chatControllerCreateOpenAiWebChat:(n,r={})=>this.request({path:"/chat/web/responses",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r})});we(this,"campaign",{campaignControllerCreate:(n,r={})=>this.request({path:"/campaign",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),campaignControllerFindAll:(n,r={})=>this.request({path:"/campaign",method:"GET",query:n,secure:!0,format:"json",...r}),campaignControllerFindOne:(n,r={})=>this.request({path:`/campaign/${n}`,method:"GET",secure:!0,format:"json",...r}),campaignControllerUpdate:(n,r,i={})=>this.request({path:`/campaign/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),campaignControllerRemove:(n,r={})=>this.request({path:`/campaign/${n}`,method:"DELETE",secure:!0,format:"json",...r})});we(this,"session",{sessionControllerCreate:(n,r={})=>this.request({path:"/session",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),sessionControllerFindAllPaginated:(n,r={})=>this.request({path:"/session",method:"GET",query:n,secure:!0,format:"json",...r}),sessionControllerFindOne:(n,r={})=>this.request({path:`/session/${n}`,method:"GET",secure:!0,format:"json",...r}),sessionControllerUpdate:(n,r,i={})=>this.request({path:`/session/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),sessionControllerRemove:(n,r={})=>this.request({path:`/session/${n}`,method:"DELETE",secure:!0,format:"json",...r})});we(this,"phoneNumber",{phoneNumberControllerImportTwilio:(n,r={})=>this.request({path:"/phone-number/import/twilio",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),phoneNumberControllerImportVonage:(n,r={})=>this.request({path:"/phone-number/import/vonage",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),phoneNumberControllerCreate:(n,r={})=>this.request({path:"/phone-number",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),phoneNumberControllerFindAll:(n,r={})=>this.request({path:"/phone-number",method:"GET",query:n,secure:!0,format:"json",...r}),phoneNumberControllerFindOne:(n,r={})=>this.request({path:`/phone-number/${n}`,method:"GET",secure:!0,format:"json",...r}),phoneNumberControllerUpdate:(n,r,i={})=>this.request({path:`/phone-number/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),phoneNumberControllerRemove:(n,r={})=>this.request({path:`/phone-number/${n}`,method:"DELETE",secure:!0,format:"json",...r})});we(this,"tool",{toolControllerCreate:(n,r={})=>this.request({path:"/tool",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),toolControllerFindAll:(n,r={})=>this.request({path:"/tool",method:"GET",query:n,secure:!0,format:"json",...r}),toolControllerFindOne:(n,r={})=>this.request({path:`/tool/${n}`,method:"GET",secure:!0,format:"json",...r}),toolControllerUpdate:(n,r,i={})=>this.request({path:`/tool/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),toolControllerRemove:(n,r={})=>this.request({path:`/tool/${n}`,method:"DELETE",secure:!0,format:"json",...r})});we(this,"file",{fileControllerCreateDeprecated:(n,r={})=>this.request({path:"/file/upload",method:"POST",body:n,secure:!0,type:ne.FormData,format:"json",...r}),fileControllerCreate:(n,r={})=>this.request({path:"/file",method:"POST",body:n,secure:!0,type:ne.FormData,format:"json",...r}),fileControllerFindAll:(n={})=>this.request({path:"/file",method:"GET",secure:!0,format:"json",...n}),fileControllerFindOne:(n,r={})=>this.request({path:`/file/${n}`,method:"GET",secure:!0,format:"json",...r}),fileControllerUpdate:(n,r,i={})=>this.request({path:`/file/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),fileControllerRemove:(n,r={})=>this.request({path:`/file/${n}`,method:"DELETE",secure:!0,format:"json",...r})});we(this,"knowledgeBase",{knowledgeBaseControllerCreate:(n,r={})=>this.request({path:"/knowledge-base",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),knowledgeBaseControllerFindAll:(n,r={})=>this.request({path:"/knowledge-base",method:"GET",query:n,secure:!0,format:"json",...r}),knowledgeBaseControllerFindOne:(n,r={})=>this.request({path:`/knowledge-base/${n}`,method:"GET",secure:!0,format:"json",...r}),knowledgeBaseControllerUpdate:(n,r,i={})=>this.request({path:`/knowledge-base/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),knowledgeBaseControllerRemove:(n,r={})=>this.request({path:`/knowledge-base/${n}`,method:"DELETE",secure:!0,format:"json",...r})});we(this,"structuredOutput",{structuredOutputControllerFindAll:(n,r={})=>this.request({path:"/structured-output",method:"GET",query:n,secure:!0,format:"json",...r}),structuredOutputControllerCreate:(n,r={})=>this.request({path:"/structured-output",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),structuredOutputControllerFindOne:(n,r={})=>this.request({path:`/structured-output/${n}`,method:"GET",secure:!0,format:"json",...r}),structuredOutputControllerUpdate:(n,r,i,s={})=>this.request({path:`/structured-output/${n}`,method:"PATCH",query:r,body:i,secure:!0,type:ne.Json,format:"json",...s}),structuredOutputControllerRemove:(n,r={})=>this.request({path:`/structured-output/${n}`,method:"DELETE",secure:!0,format:"json",...r}),structuredOutputControllerRun:(n,r={})=>this.request({path:"/structured-output/run",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),structuredOutputControllerSuggest:(n,r={})=>this.request({path:"/structured-output/suggest",method:"POST",body:n,secure:!0,type:ne.Json,...r})});we(this,"testSuite",{testSuiteControllerFindAllPaginated:(n,r={})=>this.request({path:"/test-suite",method:"GET",query:n,secure:!0,format:"json",...r}),testSuiteControllerCreate:(n,r={})=>this.request({path:"/test-suite",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),testSuiteControllerFindOne:(n,r={})=>this.request({path:`/test-suite/${n}`,method:"GET",secure:!0,format:"json",...r}),testSuiteControllerUpdate:(n,r,i={})=>this.request({path:`/test-suite/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),testSuiteControllerRemove:(n,r={})=>this.request({path:`/test-suite/${n}`,method:"DELETE",secure:!0,format:"json",...r}),testSuiteTestControllerFindAllPaginated:(n,r,i={})=>this.request({path:`/test-suite/${n}/test`,method:"GET",query:r,secure:!0,format:"json",...i}),testSuiteTestControllerCreate:(n,r,i={})=>this.request({path:`/test-suite/${n}/test`,method:"POST",body:r,secure:!0,type:ne.Json,format:"json",...i}),testSuiteTestControllerFindOne:(n,r,i={})=>this.request({path:`/test-suite/${n}/test/${r}`,method:"GET",secure:!0,format:"json",...i}),testSuiteTestControllerUpdate:(n,r,i,s={})=>this.request({path:`/test-suite/${n}/test/${r}`,method:"PATCH",body:i,secure:!0,type:ne.Json,format:"json",...s}),testSuiteTestControllerRemove:(n,r,i={})=>this.request({path:`/test-suite/${n}/test/${r}`,method:"DELETE",secure:!0,format:"json",...i}),testSuiteRunControllerFindAllPaginated:(n,r,i={})=>this.request({path:`/test-suite/${n}/run`,method:"GET",query:r,secure:!0,format:"json",...i}),testSuiteRunControllerCreate:(n,r,i={})=>this.request({path:`/test-suite/${n}/run`,method:"POST",body:r,secure:!0,type:ne.Json,format:"json",...i}),testSuiteRunControllerFindOne:(n,r,i={})=>this.request({path:`/test-suite/${n}/run/${r}`,method:"GET",secure:!0,format:"json",...i}),testSuiteRunControllerUpdate:(n,r,i,s={})=>this.request({path:`/test-suite/${n}/run/${r}`,method:"PATCH",body:i,secure:!0,type:ne.Json,format:"json",...s}),testSuiteRunControllerRemove:(n,r,i={})=>this.request({path:`/test-suite/${n}/run/${r}`,method:"DELETE",secure:!0,format:"json",...i})});we(this,"reporting",{insightControllerCreate:(n,r={})=>this.request({path:"/reporting/insight",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),insightControllerFindAll:(n,r={})=>this.request({path:"/reporting/insight",method:"GET",query:n,secure:!0,format:"json",...r}),insightControllerUpdate:(n,r,i={})=>this.request({path:`/reporting/insight/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),insightControllerFindOne:(n,r={})=>this.request({path:`/reporting/insight/${n}`,method:"GET",secure:!0,format:"json",...r}),insightControllerRemove:(n,r={})=>this.request({path:`/reporting/insight/${n}`,method:"DELETE",secure:!0,format:"json",...r}),insightControllerRun:(n,r,i={})=>this.request({path:`/reporting/insight/${n}/run`,method:"POST",body:r,secure:!0,type:ne.Json,format:"json",...i}),insightControllerPreview:(n,r={})=>this.request({path:"/reporting/insight/preview",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r})});we(this,"eval",{evalControllerCreate:(n,r={})=>this.request({path:"/eval",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),evalControllerGetPaginated:(n,r={})=>this.request({path:"/eval",method:"GET",query:n,secure:!0,format:"json",...r}),evalControllerUpdate:(n,r,i={})=>this.request({path:`/eval/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),evalControllerRemove:(n,r={})=>this.request({path:`/eval/${n}`,method:"DELETE",secure:!0,format:"json",...r}),evalControllerGet:(n,r={})=>this.request({path:`/eval/${n}`,method:"GET",secure:!0,format:"json",...r}),evalControllerRemoveRun:(n,r={})=>this.request({path:`/eval/run/${n}`,method:"DELETE",secure:!0,format:"json",...r}),evalControllerGetRun:(n,r={})=>this.request({path:`/eval/run/${n}`,method:"GET",secure:!0,format:"json",...r}),evalControllerRun:(n,r={})=>this.request({path:"/eval/run",method:"POST",body:n,secure:!0,type:ne.Json,...r}),evalControllerGetRunsPaginated:(n,r={})=>this.request({path:"/eval/run",method:"GET",query:n,secure:!0,format:"json",...r})});we(this,"observability",{scorecardControllerGet:(n,r={})=>this.request({path:`/observability/scorecard/${n}`,method:"GET",secure:!0,format:"json",...r}),scorecardControllerUpdate:(n,r,i={})=>this.request({path:`/observability/scorecard/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),scorecardControllerRemove:(n,r={})=>this.request({path:`/observability/scorecard/${n}`,method:"DELETE",secure:!0,format:"json",...r}),scorecardControllerGetPaginated:(n,r={})=>this.request({path:"/observability/scorecard",method:"GET",query:n,secure:!0,format:"json",...r}),scorecardControllerCreate:(n,r={})=>this.request({path:"/observability/scorecard",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r})});we(this,"org",{orgControllerCreate:(n,r={})=>this.request({path:"/org",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),orgControllerFindAll:(n={})=>this.request({path:"/org",method:"GET",secure:!0,format:"json",...n}),orgControllerFeatureFlagEnabled:(n,r={})=>this.request({path:"/org/feature-flag",method:"GET",query:n,secure:!0,format:"json",...r}),orgControllerFindOne:(n,r={})=>this.request({path:`/org/${n}`,method:"GET",secure:!0,format:"json",...r}),orgControllerUpdate:(n,r,i={})=>this.request({path:`/org/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),orgControllerDeleteOrg:(n,r={})=>this.request({path:`/org/${n}`,method:"DELETE",secure:!0,...r}),orgControllerFindAllUsers:(n,r={})=>this.request({path:`/org/${n}/user`,method:"GET",secure:!0,format:"json",...r}),orgControllerOrgLeave:(n,r={})=>this.request({path:`/org/${n}/leave`,method:"DELETE",secure:!0,...r}),orgControllerOrgRemoveUser:(n,r,i={})=>this.request({path:`/org/${n}/member/${r}/leave`,method:"DELETE",secure:!0,...i}),orgControllerUsersInvite:(n,r,i={})=>this.request({path:`/org/${n}/invite`,method:"POST",body:r,secure:!0,type:ne.Json,...i}),orgControllerUserUpdate:(n,r,i={})=>this.request({path:`/org/${n}/role`,method:"PATCH",body:r,secure:!0,type:ne.Json,...i}),orgControllerOrgToken:(n,r={})=>this.request({path:`/org/${n}/auth`,method:"GET",secure:!0,format:"json",...r})});we(this,"token",{tokenControllerCreate:(n,r={})=>this.request({path:"/token",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),tokenControllerFindAll:(n,r={})=>this.request({path:"/token",method:"GET",query:n,secure:!0,format:"json",...r}),tokenControllerFindOne:(n,r={})=>this.request({path:`/token/${n}`,method:"GET",secure:!0,format:"json",...r}),tokenControllerUpdate:(n,r,i={})=>this.request({path:`/token/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),tokenControllerRemove:(n,r={})=>this.request({path:`/token/${n}`,method:"DELETE",secure:!0,format:"json",...r})});we(this,"credential",{credentialControllerCreate:(n,r={})=>this.request({path:"/credential",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),credentialControllerFindAll:(n,r={})=>this.request({path:"/credential",method:"GET",query:n,secure:!0,format:"json",...r}),credentialControllerFindOne:(n,r={})=>this.request({path:`/credential/${n}`,method:"GET",secure:!0,format:"json",...r}),credentialControllerUpdate:(n,r,i={})=>this.request({path:`/credential/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),credentialControllerRemove:(n,r={})=>this.request({path:`/credential/${n}`,method:"DELETE",secure:!0,format:"json",...r})});we(this,"template",{templateControllerCreate:(n,r={})=>this.request({path:"/template",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),templateControllerFindAll:(n,r={})=>this.request({path:"/template",method:"GET",query:n,secure:!0,format:"json",...r}),templateControllerFindAllPinned:(n={})=>this.request({path:"/template/pinned",method:"GET",secure:!0,format:"json",...n}),templateControllerFindOne:(n,r={})=>this.request({path:`/template/${n}`,method:"GET",secure:!0,format:"json",...r}),templateControllerUpdate:(n,r,i={})=>this.request({path:`/template/${n}`,method:"PATCH",body:r,secure:!0,type:ne.Json,format:"json",...i}),templateControllerRemove:(n,r={})=>this.request({path:`/template/${n}`,method:"DELETE",secure:!0,format:"json",...r})});we(this,"voiceLibrary",{voiceLibraryControllerVoiceGetByProvider:(n,r,i={})=>this.request({path:`/voice-library/${n}`,method:"GET",query:r,secure:!0,format:"json",...i}),voiceLibraryControllerVoiceGetAccentsByProvider:(n,r={})=>this.request({path:`/voice-library/${n}/accents`,method:"GET",secure:!0,format:"json",...r}),voiceLibraryControllerVoiceLibrarySyncByProvider:(n,r={})=>this.request({path:`/voice-library/sync/${n}`,method:"POST",secure:!0,format:"json",...r}),voiceLibraryControllerVoiceLibrarySyncDefaultVoices:(n,r={})=>this.request({path:"/voice-library/sync",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r}),voiceLibraryControllerVoiceLibraryCreateSesameVoice:(n,r={})=>this.request({path:"/voice-library/create-sesame-voice",method:"POST",body:n,secure:!0,type:ne.Json,...r})});we(this,"provider",{providerResourceControllerCreateProviderResource:(n,r,i={})=>this.request({path:`/provider/${n}/${r}`,method:"POST",secure:!0,format:"json",...i}),providerResourceControllerGetProviderResourcesPaginated:(n,r,i,s={})=>this.request({path:`/provider/${n}/${r}`,method:"GET",query:i,secure:!0,format:"json",...s}),providerResourceControllerGetProviderResource:(n,r,i,s={})=>this.request({path:`/provider/${n}/${r}/${i}`,method:"GET",secure:!0,format:"json",...s}),providerResourceControllerDeleteProviderResource:(n,r,i,s={})=>this.request({path:`/provider/${n}/${r}/${i}`,method:"DELETE",secure:!0,format:"json",...s}),providerResourceControllerUpdateProviderResource:(n,r,i,s={})=>this.request({path:`/provider/${n}/${r}/${i}`,method:"PATCH",secure:!0,format:"json",...s}),providerControllerGetWorkflows:(n,r,i={})=>this.request({path:`/${n}/workflows`,method:"GET",query:r,secure:!0,format:"json",...i}),providerControllerGetWorkflowTriggerHook:(n,r,i={})=>this.request({path:`/${n}/workflows/${r}/hooks`,method:"GET",secure:!0,format:"json",...i}),providerControllerGetLocations:(n,r={})=>this.request({path:`/${n}/locations`,method:"GET",secure:!0,format:"json",...r}),voiceProviderControllerSearchVoices:(n,r,i={})=>this.request({path:`/${n}/voices/search`,method:"GET",query:r,secure:!0,format:"json",...i}),voiceProviderControllerSearchVoice:(n,r,i={})=>this.request({path:`/${n}/voice/search`,method:"GET",query:r,secure:!0,format:"json",...i}),voiceProviderControllerAddVoices:(n,r,i={})=>this.request({path:`/${n}/voices/add`,method:"POST",body:r,secure:!0,type:ne.Json,format:"json",...i}),voiceProviderControllerAddVoice:(n,r,i={})=>this.request({path:`/${n}/voice/add`,method:"POST",body:r,secure:!0,type:ne.Json,format:"json",...i})});we(this,"v11Labs",{voiceProviderControllerCloneVoices:(n,r={})=>this.request({path:"/11labs/voice/clone",method:"POST",body:n,secure:!0,type:ne.FormData,...r})});we(this,"analytics",{analyticsControllerQuery:(n,r={})=>this.request({path:"/analytics",method:"POST",body:n,secure:!0,type:ne.Json,format:"json",...r})})}}Rs.Api=q$;Object.defineProperty(vp,"__esModule",{value:!0});vp.client=void 0;const H$=Rs,W$=new H$.Api({baseUrl:"https://api.vapi.ai",baseApiParams:{secure:!0},securityWorker:async t=>{if(t)return{headers:{Authorization:`Bearer ${t}`}}}});vp.client=W$;var Rl={};Object.defineProperty(Rl,"__esModule",{value:!0});Rl.createSafeDailyConfig=G$;Rl.safeSetLocalAudio=K$;Rl.safeSetInputDevicesAsync=J$;Rl.createSafeDailyFactoryOptions=Q$;function G$(t){if(!t)return{};const{alwaysIncludeMicInPermissionPrompt:e,...n}=t;return e===!1?(console.warn("[Vapi] alwaysIncludeMicInPermissionPrompt:false detected. This can cause Chrome 140+ issues. Removing the property."),n):t}function K$(t,e){if(!t)throw new Error("Call object is not available.");t.setLocalAudio(e)}async function J$(t,e){if(!t)throw new Error("Call object is not available.");if("audioSource"in e&&e.audioSource===!1){console.warn("[Vapi] setInputDevicesAsync with audioSource:false detected. This can cause Chrome 140+ issues. Using default device instead.");const{audioSource:n,...r}=e;await t.setInputDevicesAsync(r);return}await t.setInputDevicesAsync(e)}function Q$(t){return t?t.audioSource===!1?(console.warn("[Vapi] audioSource:false detected in factory options. This can cause Chrome 140+ issues. Defaulting to true."),{...t,audioSource:!0}):t:{}}var Rx=vw&&vw.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(O1,"__esModule",{value:!0});const zm=Rx(L$),Y$=Rx(z$),qm=vp,vo=Rl;async function X$(t,e){t.muted=!1,t.autoplay=!0,e!=null&&(t.srcObject=new MediaStream([e]),await t.play())}async function ab(t,e){const n=document.createElement("audio");return n.dataset.participantId=e,document.body.appendChild(n),await X$(n,t),n}function lb(t){const e=document.querySelector(`audio[data-participant-id="${t}"]`);e==null||e.remove()}function cb(t,e,n,r){t.participant.local||e.updateParticipant(t.participant.session_id,{setSubscribedTracks:{audio:!0,video:n||r}})}class Z$ extends Y$.default{on(e,n){return super.on(e,n),this}once(e,n){return super.once(e,n),this}emit(e,...n){return super.emit(e,...n)}removeListener(e,n){return super.removeListener(e,n),this}removeAllListeners(e){return super.removeAllListeners(e),this}}class e5 extends Z${constructor(n,r,i,s){super();we(this,"started",!1);we(this,"call",null);we(this,"speakingTimeout",null);we(this,"dailyCallConfig",{});we(this,"dailyCallObject",{});we(this,"hasEmittedCallEndedStatus",!1);qm.client.baseUrl=r??"https://api.vapi.ai",qm.client.setSecurityData(n),this.dailyCallConfig=(0,vo.createSafeDailyConfig)(i),this.dailyCallObject=(0,vo.createSafeDailyFactoryOptions)(s)}async cleanup(){this.started=!1,this.hasEmittedCallEndedStatus=!1,this.call&&(await this.call.destroy(),this.call=null),this.speakingTimeout=null}isMobileDevice(){if(typeof navigator>"u")return!1;const n=navigator.userAgent;return/android|iphone|ipad|ipod|iemobile|blackberry|bada/i.test(n.toLowerCase())}async sleep(n){return new Promise(r=>setTimeout(r,n))}async start(n,r,i,s,o,a){var u,d,f,m,E,T,_;const l=Date.now();if(!n&&!i&&!s){const b=new Error("Assistant or Squad or Workflow must be provided.");throw this.emit("error",{type:"validation-error",stage:"input-validation",message:b.message,timestamp:new Date().toISOString()}),b}if(this.started)return this.emit("call-start-progress",{stage:"validation",status:"failed",timestamp:new Date().toISOString(),metadata:{reason:"already-started"}}),null;this.emit("call-start-progress",{stage:"initialization",status:"started",timestamp:new Date().toISOString(),metadata:{hasAssistant:!!n,hasSquad:!!i,hasWorkflow:!!s}}),this.started=!0;try{this.emit("call-start-progress",{stage:"web-call-creation",status:"started",timestamp:new Date().toISOString()});const b=Date.now(),v=(await qm.client.call.callControllerCreateWebCall({assistant:typeof n=="string"?void 0:n,assistantId:typeof n=="string"?n:void 0,assistantOverrides:r,squad:typeof i=="string"?void 0:i,squadId:typeof i=="string"?i:void 0,workflow:typeof s=="string"?void 0:s,workflowId:typeof s=="string"?s:void 0,workflowOverrides:o,roomDeleteOnUserLeaveEnabled:a==null?void 0:a.roomDeleteOnUserLeaveEnabled})).data,g=Date.now()-b;this.emit("call-start-progress",{stage:"web-call-creation",status:"completed",duration:g,timestamp:new Date().toISOString(),metadata:{callId:(v==null?void 0:v.id)||"unknown",videoRecordingEnabled:((u=v==null?void 0:v.artifactPlan)==null?void 0:u.videoRecordingEnabled)??!1,voiceProvider:((f=(d=v==null?void 0:v.assistant)==null?void 0:d.voice)==null?void 0:f.provider)||"unknown"}}),this.call&&(this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"started",timestamp:new Date().toISOString(),metadata:{action:"cleanup-existing"}}),await this.cleanup());const k=((m=v==null?void 0:v.artifactPlan)==null?void 0:m.videoRecordingEnabled)??!1,j=((T=(E=v==null?void 0:v.assistant)==null?void 0:E.voice)==null?void 0:T.provider)==="tavus";this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"started",timestamp:new Date().toISOString(),metadata:{audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??k,isVideoRecordingEnabled:k,isVideoEnabled:j}});const U=Date.now();try{this.call=zm.default.createCallObject({audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??k,dailyConfig:this.dailyCallConfig});const C=Date.now()-U;this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"completed",duration:C,timestamp:new Date().toISOString()})}catch(C){const F=Date.now()-U;throw this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"failed",duration:F,timestamp:new Date().toISOString(),metadata:{error:C==null?void 0:C.toString()}}),this.emit("error",{type:"daily-call-object-creation-error",stage:"daily-call-object-creation",error:C,timestamp:new Date().toISOString()}),C}(_=this.call.iframe())==null||_.style.setProperty("display","none"),this.call.on("left-meeting",()=>{var C;this.emit("call-end"),this.hasEmittedCallEndedStatus||(this.emit("message",{type:"status-update",status:"ended",endedReason:"customer-ended-call"}),this.hasEmittedCallEndedStatus=!0),k&&((C=this.call)==null||C.stopRecording()),this.cleanup().catch(console.error)}),this.call.on("error",C=>{var F;this.emit("error",C),k&&((F=this.call)==null||F.stopRecording())}),this.call.on("camera-error",C=>{this.emit("camera-error",C)}),this.call.on("network-quality-change",C=>{this.emit("network-quality-change",C)}),this.call.on("network-connection",C=>{this.emit("network-connection",C)}),this.call.on("track-started",async C=>{var F,L,be;!C||!C.participant||(F=C.participant)!=null&&F.local||((L=C.participant)==null?void 0:L.user_name)==="Vapi Speaker"&&(C.track.kind==="video"&&this.emit("video",C.track),C.track.kind==="audio"&&await ab(C.track,C.participant.session_id),(be=this.call)==null||be.sendAppMessage("playable"))}),this.call.on("participant-joined",C=>{!C||!this.call||cb(C,this.call,k,j)}),this.call.on("participant-updated",C=>{C&&this.emit("daily-participant-updated",C.participant)}),this.call.on("participant-left",C=>{C&&lb(C.participant.session_id)});const z=this.isMobileDevice();if(this.emit("call-start-progress",{stage:"mobile-permissions",status:"started",timestamp:new Date().toISOString(),metadata:{isMobile:z}}),z){const C=Date.now();await this.sleep(1e3);const F=Date.now()-C;this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",duration:F,timestamp:new Date().toISOString(),metadata:{action:"permissions-wait"}})}else this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-mobile"}});this.emit("call-start-progress",{stage:"daily-call-join",status:"started",timestamp:new Date().toISOString()});const R=Date.now();try{await this.call.join({url:v.webCallUrl,subscribeToTracksAutomatically:!1});const C=Date.now()-R;this.emit("call-start-progress",{stage:"daily-call-join",status:"completed",duration:C,timestamp:new Date().toISOString()})}catch(C){const F=Date.now()-R;throw this.emit("call-start-progress",{stage:"daily-call-join",status:"failed",duration:F,timestamp:new Date().toISOString(),metadata:{error:C==null?void 0:C.toString()}}),this.emit("error",{type:"daily-call-join-error",stage:"daily-call-join",error:C,duration:F,timestamp:new Date().toISOString()}),C}if(k){this.emit("call-start-progress",{stage:"video-recording-setup",status:"started",timestamp:new Date().toISOString()});const C=new Date().getTime(),F=Date.now();try{this.call.startRecording({width:1280,height:720,backgroundColor:"#FF1F2D3D",layout:{preset:"default"}});const L=Date.now()-F;this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",duration:L,timestamp:new Date().toISOString()}),this.call.on("recording-started",()=>{const be=(new Date().getTime()-C)/1e3;this.emit("call-start-progress",{stage:"video-recording-started",status:"completed",timestamp:new Date().toISOString(),metadata:{delaySeconds:be}}),this.send({type:"control",control:"say-first-message",videoRecordingStartDelaySeconds:be})})}catch(L){const be=Date.now()-F;this.emit("call-start-progress",{stage:"video-recording-setup",status:"failed",duration:be,timestamp:new Date().toISOString(),metadata:{error:L==null?void 0:L.toString()}}),this.emit("error",{type:"video-recording-setup-error",stage:"video-recording-setup",error:L,timestamp:new Date().toISOString()})}}else this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-enabled"}});this.emit("call-start-progress",{stage:"audio-observer-setup",status:"started",timestamp:new Date().toISOString()});const P=Date.now();try{this.call.startRemoteParticipantsAudioLevelObserver(100);const C=Date.now()-P;this.emit("call-start-progress",{stage:"audio-observer-setup",status:"completed",duration:C,timestamp:new Date().toISOString()})}catch(C){const F=Date.now()-P;this.emit("call-start-progress",{stage:"audio-observer-setup",status:"failed",duration:F,timestamp:new Date().toISOString(),metadata:{error:C==null?void 0:C.toString()}}),this.emit("error",{type:"audio-observer-setup-error",stage:"audio-observer-setup",error:C,timestamp:new Date().toISOString()})}this.call.on("remote-participants-audio-level",C=>{C&&this.handleRemoteParticipantsAudioLevel(C)}),this.call.on("app-message",C=>this.onAppMessage(C)),this.call.on("nonfatal-error",C=>{var F;(C==null?void 0:C.type)==="audio-processor-error"&&((F=this.call)==null||F.updateInputSettings({audio:{processor:{type:"none"}}}).then(()=>{(0,vo.safeSetLocalAudio)(this.call,!0)}))}),this.emit("call-start-progress",{stage:"audio-processing-setup",status:"started",timestamp:new Date().toISOString()});const N=Date.now();try{this.call.updateInputSettings({audio:{processor:{type:"noise-cancellation"}}});const C=Date.now()-N;this.emit("call-start-progress",{stage:"audio-processing-setup",status:"completed",duration:C,timestamp:new Date().toISOString()})}catch(C){const F=Date.now()-N;this.emit("call-start-progress",{stage:"audio-processing-setup",status:"failed",duration:F,timestamp:new Date().toISOString(),metadata:{error:C==null?void 0:C.toString()}}),this.emit("error",{type:"audio-processing-setup-error",stage:"audio-processing-setup",error:C,timestamp:new Date().toISOString()})}const D=Date.now()-l;return this.emit("call-start-success",{totalDuration:D,callId:(v==null?void 0:v.id)||"unknown",timestamp:new Date().toISOString()}),v}catch(b){const v=Date.now()-l;return this.emit("call-start-failed",{stage:"unknown",totalDuration:v,error:(b==null?void 0:b.toString())||"Unknown error occurred",errorStack:b instanceof Error?b.stack:"No stack trace available",timestamp:new Date().toISOString(),context:{hasAssistant:!!n,hasSquad:!!i,hasWorkflow:!!s,isMobile:this.isMobileDevice()}}),this.emit("error",{type:"start-method-error",stage:"unknown",error:b,totalDuration:v,timestamp:new Date().toISOString(),context:{hasAssistant:!!n,hasSquad:!!i,hasWorkflow:!!s,isMobile:this.isMobileDevice()}}),await this.cleanup(),null}}onAppMessage(n){if(n)try{if(n.data==="listening")return this.emit("call-start");try{const r=JSON.parse(n.data);this.emit("message",r),r&&"type"in r&&"status"in r&&r.type==="status-update"&&r.status==="ended"&&(this.hasEmittedCallEndedStatus=!0)}catch(r){console.log("Error parsing message data: ",r)}}catch(r){console.error(r)}}handleRemoteParticipantsAudioLevel(n){const r=Object.values(n.participantsAudioLevel).reduce((s,o)=>s+o,0);this.emit("volume-level",Math.min(1,r/.15)),r>.01&&(this.speakingTimeout?(clearTimeout(this.speakingTimeout),this.speakingTimeout=null):this.emit("speech-start"),this.speakingTimeout=setTimeout(()=>{this.emit("speech-end"),this.speakingTimeout=null},1e3))}async stop(){this.started=!1,this.call&&(await this.call.destroy(),this.call=null),this.speakingTimeout=null}send(n){var r;(r=this.call)==null||r.sendAppMessage(JSON.stringify(n))}setMuted(n){(0,vo.safeSetLocalAudio)(this.call,!n)}isMuted(){return this.call?this.call.localAudio()===!1:!1}say(n,r,i,s){this.send({type:"say",message:n,endCallAfterSpoken:r,interruptionsEnabled:i??!1,interruptAssistantEnabled:s??!1})}end(){this.send({type:"end-call"}),this.stop()}setInputDevicesAsync(n){return(0,vo.safeSetInputDevicesAsync)(this.call,n)}async increaseMicLevel(n){if(!this.call)throw new Error("Call object is not available.");try{const r=await navigator.mediaDevices.getUserMedia({audio:!0}),i=new AudioContext,s=i.createMediaStreamSource(r),o=i.createGain();o.gain.value=n,s.connect(o);const a=i.createMediaStreamDestination();o.connect(a);const[l]=a.stream.getAudioTracks();await(0,vo.safeSetInputDevicesAsync)(this.call,{audioSource:l})}catch(r){console.error("Error adjusting microphone level:",r)}}setOutputDeviceAsync(n){var r;(r=this.call)==null||r.setOutputDeviceAsync(n)}getDailyCallObject(){return this.call}startScreenSharing(n,r){var i;(i=this.call)==null||i.startScreenShare({displayMediaOptions:n,screenVideoSendSettings:r})}stopScreenSharing(){var n;(n=this.call)==null||n.stopScreenShare()}async reconnect(n){var i,s,o,a,l,u,d,f,m,E,T,_,b;const r=Date.now();if(this.started)throw new Error("Cannot reconnect while a call is already in progress. Call stop() first.");if(!n.webCallUrl)throw new Error("webCallUrl is required for reconnection.");this.emit("call-start-progress",{stage:"reconnect-initialization",status:"started",timestamp:new Date().toISOString(),metadata:{callId:n.id||"unknown",hasVideoRecording:!!((i=n==null?void 0:n.artifactPlan)!=null&&i.videoRecordingEnabled),voiceProvider:((o=(s=n==null?void 0:n.assistant)==null?void 0:s.voice)==null?void 0:o.provider)||"unknown"}}),this.started=!0;try{this.call&&(this.emit("call-start-progress",{stage:"cleanup-existing-call",status:"started",timestamp:new Date().toISOString()}),await this.cleanup(),this.emit("call-start-progress",{stage:"cleanup-existing-call",status:"completed",timestamp:new Date().toISOString()}));const v=((a=n==null?void 0:n.artifactPlan)==null?void 0:a.videoRecordingEnabled)??!1,g=((u=(l=n==null?void 0:n.assistant)==null?void 0:l.voice)==null?void 0:u.provider)==="tavus";this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"started",timestamp:new Date().toISOString(),metadata:{audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??v,isVideoRecordingEnabled:v,isVideoEnabled:g}});const k=Date.now();this.call=zm.default.createCallObject({audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??v,dailyConfig:this.dailyCallConfig});const j=Date.now()-k;this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"completed",duration:j,timestamp:new Date().toISOString()}),(d=this.call.iframe())==null||d.style.setProperty("display","none"),this.call.on("left-meeting",()=>{var C;this.emit("call-end"),this.hasEmittedCallEndedStatus||(this.emit("message",{type:"status-update",status:"ended",endedReason:"customer-ended-call"}),this.hasEmittedCallEndedStatus=!0),v&&((C=this.call)==null||C.stopRecording()),this.cleanup().catch(console.error)}),this.call.on("error",C=>{var F;this.emit("error",C),v&&((F=this.call)==null||F.stopRecording())}),this.call.on("camera-error",C=>{this.emit("camera-error",C)}),this.call.on("network-quality-change",C=>{this.emit("network-quality-change",C)}),this.call.on("network-connection",C=>{this.emit("network-connection",C)}),this.call.on("track-started",async C=>{var F,L,be;!C||!C.participant||(F=C.participant)!=null&&F.local||((L=C.participant)==null?void 0:L.user_name)==="Vapi Speaker"&&(C.track.kind==="video"&&this.emit("video",C.track),C.track.kind==="audio"&&await ab(C.track,C.participant.session_id),(be=this.call)==null||be.sendAppMessage("playable"))}),this.call.on("participant-joined",C=>{!C||!this.call||cb(C,this.call,v,g)}),this.call.on("participant-updated",C=>{C&&this.emit("daily-participant-updated",C.participant)}),this.call.on("participant-left",C=>{C&&lb(C.participant.session_id)}),this.call.on("remote-participants-audio-level",C=>{C&&this.handleRemoteParticipantsAudioLevel(C)}),this.call.on("app-message",C=>this.onAppMessage(C)),this.call.on("nonfatal-error",C=>{var F;(C==null?void 0:C.type)==="audio-processor-error"&&((F=this.call)==null||F.updateInputSettings({audio:{processor:{type:"none"}}}).then(()=>{(0,vo.safeSetLocalAudio)(this.call,!0)}))});const U=this.isMobileDevice();if(this.emit("call-start-progress",{stage:"mobile-permissions",status:"started",timestamp:new Date().toISOString(),metadata:{isMobile:U}}),U){const C=Date.now();await this.sleep(1e3);const F=Date.now()-C;this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",duration:F,timestamp:new Date().toISOString(),metadata:{action:"permissions-wait"}})}else this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-mobile"}});this.emit("call-start-progress",{stage:"daily-call-join",status:"started",timestamp:new Date().toISOString()});const z=Date.now();await this.call.join({url:n.webCallUrl,subscribeToTracksAutomatically:!1});const R=Date.now()-z;if(this.emit("call-start-progress",{stage:"daily-call-join",status:"completed",duration:R,timestamp:new Date().toISOString()}),v){this.emit("call-start-progress",{stage:"video-recording-setup",status:"started",timestamp:new Date().toISOString()});const C=Date.now(),F=new Date().getTime();try{this.call.startRecording({width:1280,height:720,backgroundColor:"#FF1F2D3D",layout:{preset:"default"}});const L=Date.now()-C;this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",duration:L,timestamp:new Date().toISOString()}),this.call.on("recording-started",()=>{const be=(new Date().getTime()-F)/1e3;this.emit("call-start-progress",{stage:"video-recording-started",status:"completed",timestamp:new Date().toISOString(),metadata:{delaySeconds:be}}),this.send({type:"control",control:"say-first-message",videoRecordingStartDelaySeconds:be})})}catch(L){const be=Date.now()-C;this.emit("call-start-progress",{stage:"video-recording-setup",status:"failed",duration:be,timestamp:new Date().toISOString(),metadata:{error:L==null?void 0:L.toString()}})}}else this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-enabled"}});this.emit("call-start-progress",{stage:"audio-observer-setup",status:"started",timestamp:new Date().toISOString()});const P=Date.now();try{this.call.startRemoteParticipantsAudioLevelObserver(100);const C=Date.now()-P;this.emit("call-start-progress",{stage:"audio-observer-setup",status:"completed",duration:C,timestamp:new Date().toISOString()})}catch(C){const F=Date.now()-P;this.emit("call-start-progress",{stage:"audio-observer-setup",status:"failed",duration:F,timestamp:new Date().toISOString(),metadata:{error:C==null?void 0:C.toString()}})}this.emit("call-start-progress",{stage:"audio-processing-setup",status:"started",timestamp:new Date().toISOString()});const N=Date.now();try{this.call.updateInputSettings({audio:{processor:{type:"noise-cancellation"}}});const C=Date.now()-N;this.emit("call-start-progress",{stage:"audio-processing-setup",status:"completed",duration:C,timestamp:new Date().toISOString()})}catch(C){const F=Date.now()-N;this.emit("call-start-progress",{stage:"audio-processing-setup",status:"failed",duration:F,timestamp:new Date().toISOString(),metadata:{error:C==null?void 0:C.toString()}})}const D=Date.now()-r;this.emit("call-start-success",{totalDuration:D,callId:(n==null?void 0:n.id)||"unknown",timestamp:new Date().toISOString()}),this.emit("call-start")}catch(v){const g=Date.now()-r;throw this.emit("call-start-failed",{stage:"reconnect",totalDuration:g,error:(v==null?void 0:v.toString())||"Unknown error occurred",errorStack:v instanceof Error?v.stack:"No stack trace available",timestamp:new Date().toISOString(),context:{isReconnect:!0,callId:(n==null?void 0:n.id)||"unknown",hasVideoRecording:!!((f=n==null?void 0:n.artifactPlan)!=null&&f.videoRecordingEnabled),voiceProvider:((E=(m=n==null?void 0:n.assistant)==null?void 0:m.voice)==null?void 0:E.provider)||"unknown",isMobile:this.isMobileDevice()}}),this.emit("error",{type:"reconnect-error",error:v,totalDuration:g,timestamp:new Date().toISOString(),context:{isReconnect:!0,callId:(n==null?void 0:n.id)||"unknown",hasVideoRecording:!!((T=n==null?void 0:n.artifactPlan)!=null&&T.videoRecordingEnabled),voiceProvider:((b=(_=n==null?void 0:n.assistant)==null?void 0:_.voice)==null?void 0:b.provider)||"unknown",isMobile:this.isMobileDevice()}}),await this.cleanup(),v}}static async runNetworkTestsStandalone(){console.log("Starting standalone network connectivity tests...");const n={};let r=null;try{console.log("Creating temporary call object for testing..."),r=zm.default.createCallObject({audioSource:!0,videoSource:!0}),console.log(`
1. Testing network connectivity (TURN server)...`);let i=null;try{i=(await navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0];const o=await r.testNetworkConnectivity(i);n.networkConnectivity=o,console.log("Network connectivity test result:",o)}catch(s){n.networkConnectivity={result:"error",error:s==null?void 0:s.toString()},console.error("Network connectivity test error:",s)}finally{i&&i.stop()}console.log(`
2. Testing websocket connectivity...`);try{const s=await r.testWebsocketConnectivity();n.websocketConnectivity=s,console.log("Websocket connectivity test result:",s)}catch(s){n.websocketConnectivity={result:"error",error:s==null?void 0:s.toString()},console.error("Websocket connectivity test error:",s)}console.log(`
3. Testing call quality...`);try{if(typeof r.testCallQuality=="function")try{console.log("Initializing call state with startCamera..."),await r.startCamera();const s=await r.testCallQuality();n.callQuality=s,console.log("Call quality test result:",s)}catch(s){console.error("Failed to start camera for call quality test:",s),n.callQuality={result:"error",error:s==null?void 0:s.toString(),message:"Failed to initialize camera for call quality test. Check camera permissions."}}else n.callQuality={result:"not-available",message:"testCallQuality method not available"},console.log("Call quality test not available in current Daily.co version")}catch(s){n.callQuality={result:"error",error:s==null?void 0:s.toString()},console.error("Call quality test error:",s)}}catch(i){console.error("Failed to create temporary call object:",i),n.error=i==null?void 0:i.toString()}finally{if(r)try{console.log("Cleaning up temporary call object..."),await r.destroy()}catch(i){console.error("Error destroying temporary call object:",i)}}return console.log(`
=== Network Test Summary ===`),console.log("Results:",JSON.stringify(n,null,2)),n}}var t5=O1.default=e5;class n5{constructor({onEvent:e,onError:n,onReconnect:r,apiKey:i,assistantId:s}){var o;if(this.onEvent=e,this.onError=n||(()=>{}),this.onReconnect=r||(()=>{}),this.apiKey=i||"f918b43a-6259-4835-afad-98f7ada0757e",this.assistantId=s||"fe755d37-3f00-49f8-8627-9c5d713e0aa9",console.log("Using Vapi public key:",(o=this.apiKey)==null?void 0:o.slice(0,6)),console.log("Using Vapi assistant ID:",this.assistantId),!this.apiKey){this.onError({type:"missing_api_key",message:"VITE_VAPI_API_KEY (PUBLIC key) is required. Add it to Vercel environment variables."});return}if(!this.assistantId){this.onError({type:"missing_assistant_id",message:"VITE_VAPI_ASSISTANT_ID is required. Get it from your Vapi assistant settings."});return}this.vapi=new t5(this.apiKey),this.isStopped=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.callId=null,this.setupEventListeners(),this.testProcessTranscript=async a=>{if(!this.callId){console.error("[VapiClient] No callId available for test");return}console.log("[VapiClient] Manual test: Processing transcript:",a),await this.processTranscript(a,"user")}}setupEventListeners(){this.vapi.on("call-start",r=>{var a,l,u,d;console.log("[VapiClient]  call-start event received:",r);let i=null;r&&(i=((a=r.call)==null?void 0:a.id)||r.id||r.callId,console.log("[VapiClient]  callId from event:",i)),!i&&this.vapi.call&&(i=this.vapi.call.id,console.log("[VapiClient]  callId from this.vapi.call.id:",i)),i?(this.callId=i,console.log("[VapiClient]  this.callId set in call-start handler:",this.callId)):(u=(l=this.vapi)==null?void 0:l.call)!=null&&u.id?(this.callId=this.vapi.call.id,i=this.callId,console.log("[VapiClient]  Got callId from this.vapi.call.id in call-start:",this.callId)):this.callId||(console.warn("[VapiClient]  call-start event has no callId, and this.callId is not set"),console.warn("[VapiClient]  Event details:",JSON.stringify(r,null,2)),console.warn("[VapiClient]  this.vapi.call:",(d=this.vapi)==null?void 0:d.call)),this.reconnectAttempts=0;const s={type:"status",status:"connected",...r||{}},o=this.callId||i;o?(s.callId=o,console.log("[VapiClient]  Emitting status event with callId:",o)):console.warn("[VapiClient]  Emitting status event WITHOUT callId - frontend won't be able to listen to suggestions"),this.onEvent(s)}),this.vapi.on("call-end",r=>{console.log("Vapi call ended:",r),this.onEvent({type:"status",status:"ended",...r||{}})});const e=(r,i="transcript")=>{var b,v,g,k,j,U;if(console.log(`[Vapi ${i} event]:`,r),!r)return;const s=r.transcript||r.text||r.message||r.content,o=r.role||r.speaker||r.type,a=r.transcriptType||r.type;if(!s){console.log(`[Vapi ${i}]: No transcript text found in event`);return}if(o==="assistant"||o==="system"||o==="assistant-message"||o==="bot"){console.log("Ghost: Filtering out assistant speech (silent mode):",s);return}const l=s.trim().toLowerCase(),d=["em","eh","uh","um","hmm","mhm","mm","huh","ok","okay","yeah","yes","yep","yup","sure","right","alright","got it","i see","i understand","thanks","thank you","no problem","sounds good","...","..",".",""].some(z=>!!(l===z||l.startsWith(z+" ")||l.startsWith(z+".")||l.startsWith(z+",")||l.startsWith(z+"!")||l.startsWith(z+"?"))),f=s.trim().length<=3&&/^[a-z]{1,3}[.,!?]*$/i.test(s.trim());if(d||f){console.log("Ghost: Filtering out filler word/acknowledgment:",s);return}if((z=>{const R=z.toLowerCase().trim();return["ask:","acknowledge concern","reframe around","highlight","pivot to","emphasize","probe deeper","what's driving","what specific","how will this impact","what would make this","offer expedited","request case studies","reveal key performance","explore specific metrics","focus on quantifiable","what's the deadline","what's the cost of inaction"].some(N=>R.startsWith(N)||R.includes(N+" ")||R.includes(" "+N))})(s)){console.log("Ghost: Filtering out coaching cue picked up by microphone:",s);return}const E=a==="final"||i==="final"||!a,T=E&&o==="user";console.log(`[Vapi transcript captured]: "${s}" (role: ${o}, type: ${a||"unknown"}, final: ${E})`),console.log("[VapiClient]  DEBUG - this.callId at handleTranscript:",this.callId),console.log("[VapiClient]  DEBUG - this.vapi?.call?.id:",(v=(b=this.vapi)==null?void 0:b.call)==null?void 0:v.id),console.log("[VapiClient]  DEBUG - event?.callId:",r==null?void 0:r.callId),console.log("[VapiClient]  DEBUG - event?.call?.id:",(g=r==null?void 0:r.call)==null?void 0:g.id),this.onEvent({type:"transcript",text:s,speaker:o==="user"?"Them":"You",timestamp:r.timestamp||new Date().toISOString()});let _=this.callId;console.log("[VapiClient]  DEBUG - Initial callIdToUse from this.callId:",_),!_&&((j=(k=this.vapi)==null?void 0:k.call)!=null&&j.id)&&(_=this.vapi.call.id,this.callId=_,console.log("[VapiClient]  DEBUG - Got callId from this.vapi.call.id:",_)),!_&&(r!=null&&r.callId)&&(_=r.callId,this.callId=_,console.log("[VapiClient]  DEBUG - Got callId from event.callId:",_)),!_&&((U=r==null?void 0:r.call)!=null&&U.id)&&(_=r.call.id,this.callId=_,console.log("[VapiClient]  DEBUG - Got callId from event.call.id:",_)),console.log(`[VapiClient] Checking if should process: role=${o}, callId=${_}, isFinal=${E}, transcript="${s.substring(0,30)}"`),T&&_?(console.log("[VapiClient]  Calling processTranscript with callId:",_),this.processTranscript(s,o,_)):console.log(E?`[VapiClient]  Skipping processTranscript: role=${o}, callId=${_}, isFinal=${E}`:"[VapiClient]  Skipping partial transcript (will process when final)")};this.vapi.on("transcript",r=>e(r,"transcript")),this.vapi.on("message",r=>{var i,s,o,a,l,u,d,f,m,E,T;try{const _=r.role||((i=r.message)==null?void 0:i.role)||r.speaker;if(_==="assistant"||_==="bot"){const g=r.type||((s=r.message)==null?void 0:s.type);if(!!!(r.transcript||r.text||r.content||(o=r.message)!=null&&o.transcript||(a=r.message)!=null&&a.text||(l=r.data)!=null&&l.transcript||(u=r.data)!=null&&u.text)&&g!=="transcript"){console.log(" CRITICAL: Blocking assistant message that might trigger speech:",{role:_,messageType:g,event:r});return}}const b=JSON.stringify(r,null,2);console.log("[Vapi message event] Full event:",b),console.log("[Vapi message event] Event type:",r==null?void 0:r.type),console.log("[Vapi message event] Event keys:",Object.keys(r||{}));const v=r.transcript||r.text||r.content||((d=r.message)==null?void 0:d.transcript)||((f=r.message)==null?void 0:f.text)||((m=r.data)==null?void 0:m.transcript)||((E=r.data)==null?void 0:E.text);if(v){const g=v.trim().toLowerCase(),j=[/^(em|eh|uh|um|hmm|mhm|mm|huh|ok|okay|yeah|yes|yep|yup|sure|right|alright)[.,!?]*$/i,/^(got it|i see|i understand|thanks|thank you|no problem|sounds good)[.,!?]*$/i,/^\.{1,3}$/,/^[a-z]{1,3}[.,!?]*$/i].some(z=>z.test(g)),U=r.role||((T=r.message)==null?void 0:T.role)||r.speaker;if(j&&(!U||U==="assistant"||U==="bot"||U==="system")){console.log(" CRITICAL: Filtering suspicious assistant-like response:",v);return}console.log("[Vapi message event]  Found transcript:",v),e({transcript:v,text:v,role:U||"user",...r},"message")}else console.log("[Vapi message event]  No transcript found in event")}catch(_){console.error("[Vapi message event] Error processing:",_)}}),this.vapi.on("user-transcript",r=>{console.log("[Vapi user-transcript event]:",JSON.stringify(r,null,2)),e(r,"user-transcript")}),this.vapi.on("assistant-transcript",r=>{console.log("Ghost: Ignoring assistant transcript:",r)}),["status-update","function-call","hang","speech-update","metadata","conversation-item"].forEach(r=>{this.vapi.on(r,i=>{var s;console.log(`[Vapi ${r} event]:`,JSON.stringify(i,null,2)),(i.transcript||i.text||i.content||(s=i.message)!=null&&s.transcript)&&(console.log(`[Vapi ${r}] Contains transcript data!`),e(i,r))})}),this.vapi.on("speech-start",r=>{if(r.role==="assistant"||r.role==="bot"){console.log(" CRITICAL: Assistant speech-start blocked:",r);return}this.onEvent({type:"speech-start",...r})}),this.vapi.on("speech-end",r=>{if(r.role==="assistant"||r.role==="bot"){console.log(" CRITICAL: Assistant speech-end blocked:",r);return}this.onEvent({type:"speech-end",...r})}),this.vapi.on("speech-update",r=>{var o,a;const i=r.role||r.speaker,s=r.status;if(i==="assistant"||i==="bot"){console.log(" CRITICAL: Assistant speech-update blocked:",{role:i,status:s,event:r});try{(a=(o=this.vapi)==null?void 0:o.call)!=null&&a.stopSpeaking&&(this.vapi.call.stopSpeaking(),console.log("[VapiClient]  Called stopSpeaking() to mute assistant"))}catch(l){console.warn("[VapiClient] Could not stop assistant speech programmatically:",l)}return}}),this.vapi.on("message",r=>{var o,a;const i=r.role||((o=r.message)==null?void 0:o.role)||r.speaker,s=r.type||((a=r.message)==null?void 0:a.type);if((i==="assistant"||i==="bot")&&s!=="transcript"&&!r.transcript){console.log(" CRITICAL: Blocking assistant message that might trigger speech:",{role:i,messageType:s,event:r});return}}),this.vapi.on("error",async r=>{var o,a;console.error("Vapi SDK error:",r);const i=(r==null?void 0:r.errorMsg)||(r==null?void 0:r.message)||((o=r==null?void 0:r.error)==null?void 0:o.message);if(i&&i.toLowerCase().includes("meeting has ended")){this.callId=null,this.onEvent({type:"status",status:"ended"});return}let s="Vapi SDK error";(a=r==null?void 0:r.error)!=null&&a.message?s=r.error.message:r!=null&&r.message?s=r.message:typeof r=="string"?s=r:r!=null&&r.data&&(s=JSON.stringify(r.data)),this.onError({type:"sdk_error",message:s,error:r,hint:"Check: 1) Public API key has web call permissions, 2) Assistant is configured for WebRTC, 3) Domain restrictions allow this origin"})}),this.vapi.on("function-call",r=>{this.onEvent({type:"function-call",...r})})}async startSession(e=null){var n,r,i,s,o,a;if(!this.apiKey||!this.assistantId)return!1;this.isStopped&&(this.isStopped=!1,this.reconnectAttempts=0);try{console.log("Starting Vapi session with assistant:",this.assistantId);const l=await this.vapi.start(this.assistantId);setTimeout(()=>{try{console.log("[VapiClient]  Ensuring assistant remains silent (Ghost is a silent coach)")}catch(d){console.warn("[VapiClient] Could not apply silent mode (non-critical):",d)}},100),console.log("Vapi WebRTC session started:",l);let u=null;return l!=null&&l.id?(u=l.id,console.log("[VapiClient]  Got callId from result.id:",u)):(n=l==null?void 0:l.call)!=null&&n.id?(u=l.call.id,console.log("[VapiClient]  Got callId from result.call.id:",u)):(i=(r=this.vapi)==null?void 0:r.call)!=null&&i.id&&(u=this.vapi.call.id,console.log("[VapiClient]  Got callId from this.vapi.call.id:",u)),u?(this.callId=u,console.log("[VapiClient]  Vapi callId captured:",this.callId),this.onEvent({type:"status",status:"connected",callId:this.callId})):(console.warn("[VapiClient]  No callId in start result, waiting for call-start event..."),this.onEvent({type:"status",status:"connecting"}),setTimeout(()=>{var d,f;!this.callId&&((f=(d=this.vapi)==null?void 0:d.call)!=null&&f.id)&&(this.callId=this.vapi.call.id,console.log("[VapiClient]  Got callId from delayed check (this.vapi.call.id):",this.callId),this.onEvent({type:"status",status:"connected",callId:this.callId}))},1e3)),!0}catch(l){console.error("Vapi session start error:",l);let u="Failed to start Vapi session",d=null;return(s=l==null?void 0:l.error)!=null&&s.message?(u=l.error.message,d=l.error):l!=null&&l.message?u=l.message:l!=null&&l.data&&(d=l.data,u=((o=l.data)==null?void 0:o.message)||u),((l==null?void 0:l.status)===403||((a=l==null?void 0:l.error)==null?void 0:a.statusCode)===403)&&(u="403 Forbidden: Check that: 1) Public API key is correct and has web call permissions, 2) Assistant ID is valid, 3) Domain restrictions allow this origin. WebRTC is enabled by default - no dashboard configuration needed."),this.onError({type:"call_creation_error",message:u,error:d||l,hint:"Verify: 1) Public key allows web calls, 2) Assistant supports WebRTC, 3) No domain restrictions blocking this origin"}),!1}}async handleReconnect(){if(this.isStopped||this.reconnectAttempts>=this.maxReconnectAttempts){this.reconnectAttempts>=this.maxReconnectAttempts&&this.onError({type:"max_reconnect",message:"Max reconnection attempts reached. Please restart the session."});return}this.reconnectAttempts++;const e=Math.min(1e3*Math.pow(2,this.reconnectAttempts-1),3e4);this.onReconnect({attempt:this.reconnectAttempts,maxAttempts:this.maxReconnectAttempts,nextAttemptIn:e}),await new Promise(n=>setTimeout(n,e)),this.isStopped||await this.startSession()}async processTranscript(e,n,r=null){var s,o;const i=r||this.callId;if(console.log("[VapiClient]  processTranscript called:",{text:e.substring(0,50),role:n,callIdParam:r,thisCallId:this.callId,callIdToUse:i}),!i){console.log("[VapiClient]  No callId available, skipping transcript processing"),console.log("[VapiClient]  DEBUG - this.callId:",this.callId),console.log("[VapiClient]  DEBUG - this.vapi?.call?.id:",(o=(s=this.vapi)==null?void 0:s.call)==null?void 0:o.id);return}try{const a="/api/process-transcript";console.log("[VapiClient]  Sending transcript to",a,"with callId:",i);const l=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,callId:i,role:n,speaker:n==="user"?"Them":"You"})});if(!l.ok){const d=await l.text().catch(()=>l.statusText);console.error("[VapiClient]  Failed to process transcript:",{status:l.status,statusText:l.statusText,url:l.url,error:d.substring(0,200)});return}const u=await l.json();console.log("[VapiClient]  Transcript processed successfully:",{hasCoachingCue:!!u.coachingCue,triggers:u.triggers,source:u.source})}catch(a){console.error("[VapiClient]  Error processing transcript:",{message:a.message,stack:a.stack,name:a.name})}}stopSession(){this.isStopped=!0;try{this.vapi&&this.vapi.stop()}catch(e){console.error("Error stopping Vapi session:",e)}this.reconnectAttempts=0,this.callId=null}getStatus(){return{isStopped:this.isStopped,reconnectAttempts:this.reconnectAttempts,callId:this.callId,connected:this.callId!==null&&!this.isStopped}}}class r5{constructor({onEvent:e,onError:n,onReconnect:r,useVapi:i=!1}){this.onEvent=e,this.onError=n||(()=>{}),this.onReconnect=r||(()=>{}),this.useVapi=i||!0,this.mode=null,this.useVapi?this.vapiClient=new n5({onEvent:this.onEvent,onError:this.onError,onReconnect:this.onReconnect}):(this.abortController=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3),this.isStopped=!1}async startSession(e,n=null){return this.isStopped=!1,this.mode=e,this.useVapi&&this.vapiClient?await this.vapiClient.startSession(n):(this.reconnectAttempts=0,this.reconnectDelay=1e3,await this.connect(),!0)}async connect(){if(!this.isStopped&&!(this.useVapi&&this.vapiClient)){this.abortController=new AbortController;try{const e=await fetch(`/api/ghost-sim?mode=${this.mode}`,{signal:this.abortController.signal});if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);if(!e.body)throw new Error("Response body is null");this.reconnectAttempts=0,this.reconnectDelay=1e3;const n=e.body.getReader(),r=new TextDecoder;let i="";for(;!this.isStopped;){const{done:s,value:o}=await n.read();if(s){this.isStopped||await this.handleReconnect();break}i+=r.decode(o,{stream:!0});const a=i.split(`
`);i=a.pop()??"",a.forEach(l=>{if(l.trim())try{const u=JSON.parse(l);this.onEvent(u)}catch(u){console.error("Failed to parse event",u,l),this.onError({type:"parse_error",message:"Failed to parse event from stream",error:u})}})}}catch(e){if(this.isStopped||e.name==="AbortError")return;console.error("Ghost session error",e),this.onError({type:"connection_error",message:e.message||"Connection failed",error:e}),this.isStopped||await this.handleReconnect()}}}async handleReconnect(){if(this.isStopped||this.reconnectAttempts>=this.maxReconnectAttempts){this.reconnectAttempts>=this.maxReconnectAttempts&&this.onError({type:"max_reconnect",message:"Max reconnection attempts reached. Please restart the session."});return}this.reconnectAttempts++;const e=Math.min(this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1),3e4);this.onReconnect({attempt:this.reconnectAttempts,maxAttempts:this.maxReconnectAttempts,nextAttemptIn:e}),await new Promise(n=>setTimeout(n,e)),this.isStopped||await this.connect()}stopSession(){this.isStopped=!0,this.useVapi&&this.vapiClient?this.vapiClient.stopSession():(this.abortController&&(this.abortController.abort(),this.abortController=null),this.reconnectAttempts=0)}get callId(){return this.useVapi&&this.vapiClient?this.vapiClient.callId:null}getStatus(){return this.useVapi&&this.vapiClient?{...this.vapiClient.getStatus(),mode:this.mode,provider:"vapi"}:{isStopped:this.isStopped,reconnectAttempts:this.reconnectAttempts,mode:this.mode,provider:"mock"}}}class ub{constructor({onTranscript:e,onError:n}){this.onTranscript=e,this.onError=n||(()=>{}),this.recognition=null,this.isListening=!1,this.isStopped=!1,this.hasNetworkError=!1}start(){if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window))return this.onError({type:"not_supported",message:"Speech recognition not supported in this browser. Using mock mode."}),!1;const e=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new e,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang="en-US",this.recognition.onresult=n=>{let r="",i="";for(let s=n.resultIndex;s<n.results.length;s++){const o=n.results[s][0].transcript;n.results[s].isFinal?i+=o+" ":r+=o}i?this.onTranscript({text:i.trim(),isFinal:!0,interim:!1}):r&&this.onTranscript({text:r,isFinal:!1,interim:!0})},this.recognition.onerror=n=>{if(n.error!=="network"&&n.error!=="no-speech"&&console.warn("[SpeechToText] Error:",n.error),this.onError({type:"recognition_error",message:n.error,error:n}),n.error==="network"||n.error==="not-allowed"){this.isStopped=!0,this.hasNetworkError=!0;return}},this.recognition.onend=()=>{this.isListening=!1,!this.isStopped&&!this.hasNetworkError&&setTimeout(()=>{!this.isStopped&&!this.hasNetworkError&&this.start()},100)};try{return this.recognition.start(),this.isListening=!0,!0}catch(n){return console.error("Failed to start speech recognition:",n),this.onError({type:"start_error",message:"Failed to start speech recognition",error:n}),!1}}stop(){if(this.isStopped=!0,this.hasNetworkError=!1,this.recognition&&this.isListening){try{this.recognition.stop()}catch{}this.isListening=!1}}isSupported(){return"webkitSpeechRecognition"in window||"SpeechRecognition"in window}}const Ox=async({userId:t,sessionId:e,mode:n="sales"})=>{if(!t||!e)return;const r=Ct();if(r)try{const i=dr(r,"users",t,"sessions",e);await Mu(i,{mode:n,startedAt:fn(),updatedAt:fn()},{merge:!0}),console.log("[SessionStore]  Session document created:",e)}catch(i){console.error("[SessionStore] Failed to create session document:",i)}},i5=async({userId:t,sessionId:e,updates:n})=>{if(!t||!e)return;const r=Ct();if(r)try{const i=dr(r,"users",t,"sessions",e);await Mu(i,{...n,endedAt:fn(),updatedAt:fn()},{merge:!0}),console.log("[SessionStore]  Session updated:",e)}catch(i){console.error("[SessionStore] Failed to update session:",i)}},T5=async({userId:t,sessionId:e})=>{if(!t||!e)return;const n=Ct();if(!n)throw new Error("Firestore not available");try{const r=Cn(n,"users",t,"sessions",e,"transcript"),i=await py(r),s=i.docs.map(d=>Ka(d.ref));await Promise.all(s),console.log("[SessionStore]  Deleted",i.size,"transcript entries");const o=Cn(n,"users",t,"sessions",e,"suggestions"),a=await py(o),l=a.docs.map(d=>Ka(d.ref));await Promise.all(l),console.log("[SessionStore]  Deleted",a.size,"suggestion entries");const u=dr(n,"users",t,"sessions",e);return await Ka(u),console.log("[SessionStore]  Session deleted:",e),!0}catch(r){throw console.error("[SessionStore] Failed to delete session:",r),r}},db=async({userId:t,sessionId:e,type:n,payload:r})=>{if(!t||!e)return;const i=Ct();if(i)try{await Ox({userId:t,sessionId:e});const s=Cn(i,"users",t,"sessions",e,n);await Lu(s,{...r,createdAt:fn()})}catch(s){console.error("Failed to persist session event",s)}},s5=A.lazy(()=>cr(()=>import("./ParametersModal-DWm7F9F4.js"),__vite__mapDeps([0,1])).then(t=>({default:t.ParametersModal}))),o5=A.lazy(()=>cr(()=>import("./KnowledgeBaseModal-DSELrNNL.js"),__vite__mapDeps([2,1,3,4])).then(t=>({default:t.KnowledgeBaseModal}))),a5=A.lazy(()=>cr(()=>import("./UpgradeAccountModal-D68t9cbr.js"),__vite__mapDeps([5,1,6])).then(t=>({default:t.UpgradeAccountModal}))),l5=A.lazy(()=>cr(()=>import("./SessionReplayModal-tRZ3Vo5e.js"),__vite__mapDeps([7,3,4])).then(t=>({default:t.SessionReplayModal}))),c5=A.lazy(()=>cr(()=>import("./AnalyticsDashboard-HO2oHruq.js"),__vite__mapDeps([8,6])).then(t=>({default:t.AnalyticsDashboard}))),u5=A.lazy(()=>cr(()=>import("./PaymentModal-mfC9R7fp.js"),__vite__mapDeps([9,1,10])).then(t=>({default:t.PaymentModal}))),d5=A.lazy(()=>cr(()=>import("./PricingModal-Bk-4kJH0.js"),__vite__mapDeps([11,1,10])).then(t=>({default:t.PricingModal}))),h5=A.lazy(()=>cr(()=>import("./PlaybooksModal-BegDpozi.js"),__vite__mapDeps([12,4])).then(t=>({default:t.PlaybooksModal}))),f5=["sales","interview","negotiation"],p5={connected:"Low Latency",connecting:"Handshaking",disconnected:"Offline"},m5=8e3,g5=[{value:"top-left",label:"Top Left"},{value:"top-right",label:"Top Right"},{value:"bottom-left",label:"Bottom Left"},{value:"bottom-right",label:"Bottom Right"},{value:"free",label:"Free Position"}];function y5(){var Qu,uo,ho,Fl,Qi,Yi,Ul;const[t,e]=A.useState(null),n=A.useRef(null),[r,i]=A.useState(null),s=A.useRef(null),o=A.useRef(null),[a,l]=A.useState("disconnected"),u=A.useRef(null),{isActive:d,audioLevel:f,start:m,stop:E}=i3(),T=A.useRef(null),_=A.useRef(null),[b,v]=A.useState(!1),{user:g,isLoading:k,upgradeWithGoogle:j,upgradeWithEmail:U,signOutUser:z,authError:R,isActionInFlight:P}=C1(),{profile:N,planDetails:D}=P1(g==null?void 0:g.uid),{canUseTTSWhispers:C,canAccessSessionReplay:F,canExportSessions:L,canAccessAnalytics:be}=R1(D,g),{track:Pt,trackSession:gn,trackFeature:Fe}=d3(g==null?void 0:g.uid),[Z,he]=A.useState(()=>typeof window>"u"?!1:window.localStorage.getItem("ghost-whispers-muted")==="true"),{whisper:ce,stop:Ne}=x1({enabled:d&&!Z&&C,volume:.4,rate:1.2,pitch:1}),Ee=A.useRef(new Set),[h,S]=A.useState([]),[w,M]=A.useState([]),{transcript:O,suggestions:$,isLoading:K}=a3({userId:g==null?void 0:g.uid,sessionId:n.current,enabled:!!n.current&&!!(g!=null&&g.uid)&&!r});A.useEffect(()=>{if(typeof window>"u"||!(window.location.pathname||"").endsWith("/payment-success"))return;const ee=new URLSearchParams(window.location.search||"").get("session_id");ee&&(async()=>{try{console.log("[App] Verifying Stripe session from URL:",ee);const ie=await fetch(`/api/stripe-verify-session?session_id=${ee}`),ae=await ie.text();let Pe=null;try{Pe=ae?JSON.parse(ae):null}catch{console.warn("[App] Non-JSON response from stripe-verify-session:",ae==null?void 0:ae.slice(0,200))}console.log("[App] Stripe verify response:",{ok:ie.ok,data:Pe})}catch(ie){console.error("[App] Stripe verify failed:",ie)}finally{try{const ie=new URL(window.location.href);ie.pathname="/app",ie.search="",window.history.replaceState({},"",ie.toString())}catch{window.location.href="/app"}}})()},[]);const{transcript:W,suggestions:X}=A1({callId:r,enabled:!!r&&!!(g!=null&&g.uid)}),[le,pe]=A.useState(null),[Xe,Ft]=A.useState(!1),An=A.useRef(0),Le=A.useCallback(V=>{pe(V)},[]),[ut,Ze]=A.useState(!1),[tt,Wn]=A.useState(!1),$e=A.useRef(null),Gn=A.useRef(0),ni=A.useRef(null),[ri,gt]=A.useState(()=>{if(typeof window>"u")return .85;const V=window.localStorage.getItem("ghost-hud-opacity"),q=V?parseFloat(V):NaN;return Number.isFinite(q)?q:.85}),[Tt,zi]=A.useState(0),[xt,Mr]=A.useState(()=>typeof window>"u"?!1:window.localStorage.getItem("ghost-focus-mode")==="true"),[Pn,qi]=A.useState(()=>typeof window>"u"?"listening":window.localStorage.getItem("ghost-speaker-mode")||"listening"),[yn,Qs]=A.useState(()=>{if(typeof window>"u")return null;const V=window.localStorage.getItem("ghost-hud-free-position");if(V)try{const q=JSON.parse(V);if(q&&typeof q.top=="number"&&typeof q.left=="number")return q}catch(q){console.warn("[HUD] Failed to parse free position:",q)}return null}),[xn,$u]=A.useState(()=>{if(typeof window>"u")return"bottom-right";const V=window.localStorage.getItem("ghost-hud-free-position");if(V)try{const q=JSON.parse(V);if(q&&typeof q.top=="number"&&typeof q.left=="number")return"free"}catch{}return window.localStorage.getItem("ghost-hud-position")||"bottom-right"}),[Ys,Xs]=A.useState(null),[Zs,Ol]=A.useState(!1),Kn=A.useRef(null),eo=A.useRef(null),[ea,Jn]=A.useState(!1),Bu=A.useCallback(V=>{switch(V){case"top-left":return{top:80,left:16};case"top-right":return{top:80,right:16};case"bottom-left":return{bottom:16,left:16};case"bottom-right":default:return{bottom:16,right:16}}},[]),[to,no]=A.useState(!1),fr=A.useMemo(()=>W.length>0?W.map(V=>{var q;return{speaker:V.speaker||"Them",text:V.text,time:(q=V.timestamp)!=null&&q.toDate?V.timestamp.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}}):O.length>0?O:h,[W,O,h]),nt=A.useMemo(()=>{console.log("[App] Computing suggestions:",{vapiSuggestionsCount:X.length,firestoreSuggestionsCount:$.length,localSuggestionsCount:w.length});let V=[];X.length>0?V=X.map(ie=>{var ae,Pe;return{id:ie.id,text:ie.text,type:ie.type||"suggestion",ragUsed:ie.ragUsed||!1,receivedAt:(ae=ie.timestamp)!=null&&ae.toDate?ie.timestamp.toDate().toISOString():(Pe=ie.createdAt)!=null&&Pe.toDate?ie.createdAt.toDate().toISOString():new Date().toISOString()}}):$.length>0?V=$:V=w;const q=new Set,ee=V.filter(ie=>{const ae=(ie.text||ie.content||"").trim().toLowerCase();if(!ae)return!1;const Pe=ae.replace(/\s+/g," ").replace(/[.,!?;:]/g,"").trim();return q.has(Pe)?(console.log("[App]  Filtering duplicate suggestion:",ae.substring(0,50)),!1):(q.add(Pe),!0)});return console.log("[App]  Deduplicated suggestions:",ee.length,"items (from",V.length,"total)"),ee},[X,$,w]),Rt=A.useRef(0);A.useEffect(()=>{const V=nt.length,q=Rt.current;if(V>q&&n.current){const ee=V-q;Pt("cue_generated",{sessionId:n.current,callId:s.current,totalCues:V,newCues:ee})}Rt.current=V,(X.length>0||$.length>0)&&!Xe&&Ft(!0)},[nt.length,Pt]),A.useEffect(()=>{Ft(!1)},[r]),A.useEffect(()=>{typeof navigator<"u"&&(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||Le("This browser cannot access a live microphone. Ghost will run in read-only mode."))},[Le]);const ta=Zi(!1),ii=Zi(!1),Ot=Zi(!1),Nl=Zi(!1),Dl=Zi(!1),on=Zi(!1),Hi=Zi(!1),Ml=Zi(!1),[na,Wi]=A.useState("founders");A.useEffect(()=>{if(typeof window>"u"||k)return;const q=new URLSearchParams(window.location.search).get("checkout");if(q==="starter"||q==="founders"){Wi(q);const ee=setTimeout(()=>{on.open();const ie=window.location.pathname;window.history.replaceState({},"",ie)},500);return()=>clearTimeout(ee)}},[k,on]),A.useEffect(()=>{typeof window<"u"&&window.localStorage.setItem("ghost-hud-opacity",String(ri))},[ri]),A.useEffect(()=>{typeof window<"u"&&window.localStorage.setItem("ghost-focus-mode",String(xt))},[xt]),A.useEffect(()=>{typeof window<"u"&&window.localStorage.setItem("ghost-whispers-muted",String(Z)),Z&&Ne()},[Z,Ne]);const ra=A.useRef(d);A.useEffect(()=>{ra.current!==d&&(Mr(!!d),ra.current=d)},[d]),A.useEffect(()=>{typeof window<"u"&&(window.localStorage.setItem("ghost-hud-position",xn),xn!=="free"&&yn&&(window.localStorage.removeItem("ghost-hud-free-position"),Qs(null)))},[xn,yn]),A.useEffect(()=>{typeof window<"u"&&window.localStorage.setItem("ghost-speaker-mode",Pn)},[Pn]),A.useEffect(()=>{typeof window<"u"&&yn&&(window.localStorage.setItem("ghost-hud-free-position",JSON.stringify(yn)),xn!=="free"&&$u("free"))},[yn,xn]),A.useEffect(()=>{tt&&(Ze(!0),$e.current&&clearTimeout($e.current))},[tt]);const si=A.useCallback(V=>{const q=(V==null?void 0:V.trigger)||{};return!!(q.objection||q.competitor||q.timeline)},[]);A.useEffect(()=>{const V=nt[0];if(!V||V.id===ni.current||(ni.current=V.id,tt)||xt&&!si(V))return;const q=Date.now();q-Gn.current<m5||(Gn.current=q,Ze(!0),$e.current&&clearTimeout($e.current),$e.current=setTimeout(()=>{Ze(!1)},6e3))},[nt,tt,xt,si]),A.useEffect(()=>()=>{$e.current&&clearTimeout($e.current)},[]);const pr=A.useMemo(()=>d&&!Xe?{title:"Listening for signals",body:"Mention price, budget, competition, or timing to trigger real-time intel."}:Xe?{title:"Waiting for the next cue",body:"We'll surface another recommendation as soon as we detect a new trigger."}:{title:"No Signals Yet",body:"AI is calibrated and waiting for conversation triggers."},[d,Xe]),ia=A.useCallback(()=>{if(typeof document<"u"){const V=document.getElementById("live-intel-panel");V==null||V.scrollIntoView({behavior:"smooth",block:"start"})}},[]),zu=nt[0],ro=A.useMemo(()=>{if(!xt)return nt;const V=nt.filter(si);return V.length>0?V:nt},[nt,xt,si]),sa=ro[0]||zu,Ll=sa?sa.text:Xe?"Awaiting next cue":d?"Ghost is listening silently":"Tap START to unlock intel",Qn=A.useMemo(()=>ro.slice(0,3),[ro]),oa=A.useMemo(()=>nt.slice(0,8),[nt]),io=((Qu=Qn[Tt])==null?void 0:Qu.id)||null;A.useEffect(()=>{(Qn.length===0||Tt>=Qn.length)&&zi(0)},[Tt,Qn.length]);const so=A.useCallback(()=>{Ze(V=>{const q=!V;return q||(Wn(!1),no(!1)),Fe("hud",q?"expanded":"collapsed"),q}),$e.current&&(clearTimeout($e.current),$e.current=null)},[Fe]),oo=A.useCallback(()=>{Wn(V=>{const q=!V;return Fe("hud",q?"pinned":"unpinned"),q}),$e.current&&(clearTimeout($e.current),$e.current=null)},[Fe]),Gi=A.useCallback(()=>{Qn.length!==0&&(Ze(!0),zi(V=>(V+1)%Qn.length),$e.current&&(clearTimeout($e.current),$e.current=null))},[Qn.length]),[Rn,aa]=A.useState(()=>typeof window>"u"?!0:localStorage.getItem("ghostHudTourComplete")!=="1"),[oi,ao]=A.useState(0),Lr=[{title:"Move & dock",body:"Press and hold the HUD header to drag it anywhere on screen. Your position is saved automatically."},{title:"Stay stealthy",body:"Turn on Focus to only see high-priority cues. Use Pin to keep the HUD open during intense moments."},{title:"Keyboard superpowers",body:"Ctrl+Shift+G/H/I/L/M will toggle, pin, jump, and mute whispers without touching the mouse."}],la=Lr[Math.min(oi,Lr.length-1)]||Lr[0];A.useEffect(()=>{Rn&&Ze(!0)},[Rn]),A.useCallback((V,q)=>{const ee=q<window.innerHeight/2,ie=V<window.innerWidth/2;return ee&&ie?"top-left":ee&&!ie?"top-right":!ee&&ie?"bottom-left":"bottom-right"},[]);const ca=A.useCallback((V,q)=>{Qs({top:V,left:q})},[]),jl=A.useCallback(V=>{if(V.button!==0||V.target instanceof HTMLElement&&V.target.closest("button")||!eo.current)return;V.preventDefault();const q=eo.current.getBoundingClientRect();Kn.current={offsetX:V.clientX-q.left,offsetY:V.clientY-q.top,width:q.width,height:q.height},Ze(!0),Ol(!0),no(!1),Jn(!1)},[]);A.useEffect(()=>{if(!Zs)return;const V=80,q=ie=>{if(!Kn.current)return;const{offsetX:ae,offsetY:Pe,width:bt,height:On}=Kn.current,yt=window.innerWidth-bt-12,vt=V,pa=window.innerHeight-On-12;Xs({top:Math.min(Math.max(ie.clientY-Pe,vt),pa),left:Math.min(Math.max(ie.clientX-ae,12),yt)})},ee=ie=>{if(Ol(!1),Kn.current){const{offsetX:ae,offsetY:Pe,width:bt,height:On}=Kn.current,yt=window.innerWidth-bt-12,vt=V,pa=window.innerHeight-On-12,Ap=Math.min(Math.max(ie.clientY-Pe,vt),pa),fo=Math.min(Math.max(ie.clientX-ae,12),yt);ca(Ap,fo)}Xs(null),Kn.current=null};return window.addEventListener("pointermove",q),window.addEventListener("pointerup",ee),()=>{window.removeEventListener("pointermove",q),window.removeEventListener("pointerup",ee)}},[Zs,ca]);const ua=A.useCallback(V=>{var ee;if(!V.ctrlKey||!V.shiftKey)return;const q=typeof document<"u"?(ee=document.activeElement)==null?void 0:ee.tagName:null;if(!(q&&["INPUT","TEXTAREA"].includes(q)))switch(V.code){case"KeyG":V.preventDefault(),so();break;case"KeyH":V.preventDefault(),oo();break;case"KeyI":V.preventDefault(),Gi();break;case"KeyL":V.preventDefault(),ia();break;case"KeyF":V.preventDefault(),Mr(ie=>{const ae=!ie;return Fe("focus_mode",ae?"enabled":"disabled",{source:"hotkey"}),ae});break;case"KeyM":V.preventDefault(),C?he(ie=>{const ae=!ie;return Fe("tts_whispers",ae?"muted":"unmuted",{source:"hotkey"}),ae}):Ot.open();break;case"KeyS":V.preventDefault(),qi(ie=>{const ae=ie==="listening"?"speaking":"listening";return Fe("speaker_mode",ae,{source:"hotkey"}),ae});break}},[so,oo,Gi,ia,C,Ot,Fe,Mr]);A.useEffect(()=>(window.addEventListener("keydown",ua),()=>window.removeEventListener("keydown",ua)),[ua]);const Vl=Ys?{top:Ys.top,left:Ys.left}:yn?{top:yn.top,left:yn.left}:Bu(xn),_p={...Vl,opacity:ri,transition:Zs?"none":"opacity 0.2s ease, transform 0.2s ease"};A.useEffect(()=>{Rn&&Ze(!0)},[Rn]);const wp=Ys?Ys.top<=(typeof window<"u"?window.innerHeight/2:!0):xn.startsWith("top"),da=A.useCallback(()=>{aa(!1),typeof window<"u"&&window.localStorage.setItem("ghostHudTourComplete","1"),ao(0)},[]),qu=A.useCallback(()=>{oi<Lr.length-1?ao(V=>V+1):da()},[oi,Lr.length,da]),Hu=A.useCallback(()=>{ao(0),aa(!0),Ze(!0),typeof window<"u"&&window.localStorage.removeItem("ghostHudTourComplete")},[]);A.useEffect(()=>{var q;if(!d||!ce)return;const V=X.length>0?X:$;if(V.length>0){const ee=V[0],ie=(q=ee.text)==null?void 0:q.trim();if(ie){const ae=`${r||"local"}-${ee.id||"no-id"}-${ie.substring(0,30).replace(/\s+/g,"-")}`;if(Ee.current.has(ae))console.log("[App]  Skipping duplicate coaching cue (already whispered):",ie.substring(0,50));else{if(Ee.current.add(ae),Ee.current.size>50){const Pe=Ee.current.values().next().value;Ee.current.delete(Pe)}ce(ie),console.log("[App]  Whispered new coaching cue from Firestore:",ie)}}}},[X,$,d,ce,r]);const{settings:jr,updateSettings:Yn}=l3(g==null?void 0:g.uid),{playbooks:ha,createPlaybook:fa,updatePlaybook:Wu,deletePlaybook:Be}=h3(g==null?void 0:g.uid),[vn,lo]=A.useState(()=>typeof window<"u"&&window.localStorage.getItem("ghost-selected-playbook-id")||null);A.useEffect(()=>{typeof window<"u"&&(vn?window.localStorage.setItem("ghost-selected-playbook-id",vn):window.localStorage.removeItem("ghost-selected-playbook-id"))},[vn]);const Xn=jr.mode||"sales",Ep=((uo=D==null?void 0:D.entitlements)==null?void 0:uo.kbSizeLimit)??0,{documents:Gu,uploadDocument:Sp,removeDocument:Tp,limitReached:bp,totalSize:kp,maxSizeBytes:co}=o3(g==null?void 0:g.uid,{maxSizeBytes:Ep}),Vr=A.useMemo(()=>Array.from({length:40}).map((V,q)=>I.jsx("div",{className:"w-2 bg-blue-500 rounded-full transition-all duration-75",style:{height:`${Math.max(10,Math.random()*f*2)}%`,opacity:Math.max(.3,f/255)}},`bar-${q}`)),[f]),Ki=A.useRef(null);A.useEffect(()=>(Ki.current&&clearTimeout(Ki.current),Ki.current=setTimeout(()=>{var V;(V=u.current)==null||V.scrollIntoView({behavior:"smooth"})},100),()=>{Ki.current&&clearTimeout(Ki.current)}),[fr.length]),A.useEffect(()=>{const V=new ub({onTranscript:()=>{},onError:()=>{}});v(V.isSupported())},[]);const Ji=A.useCallback(V=>{S(q=>[...q,V]),db({userId:g==null?void 0:g.uid,sessionId:n.current,type:"transcript",payload:V}).catch(q=>{console.error("Failed to persist transcript:",q)})},[g==null?void 0:g.uid]),ai=A.useCallback(V=>{Ji({speaker:"System",text:V,isSystem:!0,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})},[Ji]),li=A.useCallback(V=>{M(q=>[V,...q]),db({userId:g==null?void 0:g.uid,sessionId:n.current,type:"suggestions",payload:V}).catch(q=>{console.error("Failed to persist suggestion:",q)})},[g==null?void 0:g.uid]),Ku=A.useCallback(async(V,q)=>{const ee=s.current||r;if(!ee||!V||!V.trim()){console.log("[App] processTranscriptForCoaching: Missing callId or text",{callId:ee,hasText:!!V});return}if(Pn!=="listening"){console.log("[App]  Skipping transcript processing - user is speaking (speakerMode:",Pn,")");return}if(q!=="Them"){console.log('[App]  Skipping transcript processing - speaker is not "Them" (speaker:',q,")");return}try{console.log("[App] Processing transcript for coaching:",{text:V,speaker:q,callId:ee});const ie=await fetch("/api/process-transcript",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:V.trim(),callId:ee,role:"user",speaker:"Them",skipTranscriptSave:!0,playbookId:vn})});if(!ie.ok){const Pe=await ie.text();console.error("[App] Failed to process transcript:",ie.status,Pe);return}const ae=await ie.json();if(console.log("[App] Transcript processed - Full result:",JSON.stringify(ae,null,2)),console.log("[App] Coaching cue:",ae.coachingCue),console.log("[App] Triggers detected:",ae.triggers),ae.coachingCue&&ae.coachingCue.trim()){const Pe=ae.coachingCue.trim(),bt=`${ee}-${Pe.substring(0,20)}`;Ee.current.has(bt)||(Ee.current.add(bt),ce(Pe),console.log("[App]  Whispered coaching cue to user:",Pe))}}catch(ie){console.error("[App] Error processing transcript:",ie)}},[r,Pn]),Ju=A.useCallback((V,q)=>{if(!V||!V.trim())return!1;const ee=V.toLowerCase().trim();if(q&&q.length>0)for(const ie of q.slice(0,10)){const ae=(ie.text||ie.content||"").toLowerCase().trim();if(!ae)continue;const Pe=ae.replace(/^ask:\s*/i,"").replace(/[.,!?;:]/g,"").trim(),bt=ee.replace(/[.,!?;:]/g,"").trim();if(bt===Pe||bt.includes(Pe)||Pe.includes(bt))return console.log("[App]  Filtered coaching cue from transcript:",V,"matches:",ae),!0;if(["ask:","ask,","acknowledge concern","reframe around","highlight","pivot to","emphasize","probe deeper","what's driving","what specific","how will this impact","what would make this","offer expedited","request case studies","reveal key performance","explore specific metrics","focus on quantifiable","what's the deadline","what's the cost of inaction","what's the budget","what's the value","what's the ideal investment"].some(yt=>ee.startsWith(yt)||ee.includes(yt+" ")))return console.log("[App]  Filtered coaching cue pattern from transcript:",V),!0}return!1},[]),Ip=A.useCallback(V=>{var q;if(V.type==="status"&&(V.status==="connected"&&V.callId?(i(V.callId),s.current=V.callId,typeof window<"u"&&window.localStorage.setItem("ghost-active-callId",V.callId),console.log("[App]  Vapi callId captured from status event:",V.callId),vn&&(g!=null&&g.uid)&&cr(async()=>{const{getFirestoreDb:ee}=await Promise.resolve().then(()=>r3);return{getFirestoreDb:ee}},void 0).then(({getFirestoreDb:ee})=>{const ie=ee();ie&&cr(async()=>{const{doc:ae,updateDoc:Pe,serverTimestamp:bt}=await Promise.resolve().then(()=>n3);return{doc:ae,updateDoc:Pe,serverTimestamp:bt}},void 0).then(({doc:ae,updateDoc:Pe,serverTimestamp:bt})=>{const On=ae(ie,"calls",V.callId);Pe(On,{playbookId:vn,userId:g.uid,updatedAt:bt()}).catch(yt=>{console.warn("[App] Could not update call with playbookId:",yt)})})}),Pt("vapi_call_start",{callId:V.callId,sessionId:n.current})):V.status==="connecting"&&console.log("[App]  Vapi connecting... waiting for callId")),V.type==="transcript"){const ee=s.current||r;console.log("[App] Transcript event received:",{text:V.text,speaker:V.speaker,callId:ee});const ie=X.length>0?X:$;if(Ju(V.text,ie)){console.log("[App]  Blocked coaching cue from appearing in transcript:",V.text);return}const ae=V.text.trim().toLowerCase(),bt=["em","eh","uh","um","hmm","mhm","mm","huh","ok","okay","yeah","yes","yep","yup","sure","right","alright","got it","i see","i understand","thanks","thank you","no problem","sounds good","hi","what","how","why","when","where","who","whom","whose","which","that","this","these","those","it","they","them","his","her","its","their","who's","what's","how's","where's","who's","what's","how's","why's","when's","where's","...","..",".","","ehm","ehm","uhm","hm"].some(vt=>!!(ae===vt||ae.startsWith(vt+" ")||ae.startsWith(vt+".")||ae.startsWith(vt+",")||ae.startsWith(vt+"!")||ae.startsWith(vt+"?"))),On=V.text.trim().length<=3&&/^[a-z]{1,3}[.,!?]*$/i.test(V.text.trim());if(bt||On){console.log("[App]  Blocked filler word/acknowledgment from appearing in transcript:",V.text);return}Ji({speaker:V.speaker||"Them",text:V.text,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})});let yt=ee;!yt&&((q=T.current)!=null&&q.callId)&&(yt=T.current.callId,console.log("[App]  Found callId from VapiClient, updating state:",yt),i(yt),s.current=yt),yt&&V.text?(console.log("[App]  Calling processTranscriptForCoaching with callId:",yt),Ku(V.text,V.speaker||"Them")):console.log(`[App]  Skipping processTranscriptForCoaching: callId=${yt}, hasText=${!!V.text}, speaker=${V.speaker}`);return}if(V.type==="status"){V.status==="connected"?l("connected"):(V.status==="ended"||V.status==="disconnected")&&(l("disconnected"),i(null),s.current=null,typeof window<"u"&&window.localStorage.removeItem("ghost-active-callId"));return}li({...V,receivedAt:new Date().toISOString()})},[li,Ji,r,Ku,Ju,X,$]),Fr=async()=>{var V;l("connecting");try{await m(),S([]),M([]),Ft(!1);const q=crypto.randomUUID();n.current=q,e(q),o.current=Date.now(),g!=null&&g.uid&&(await Ox({userId:g.uid,sessionId:q,mode:Xn}),Pt("session_start",{sessionId:q,mode:Xn,callId:null})),(V=T.current)==null||V.stopSession(),T.current=new r5({onEvent:ee=>{console.log("Ghost event received:",ee),Ip(ee)},onError:ee=>{console.error("Ghost client error:",ee);const ie=(ee==null?void 0:ee.message)||"Connection issue detected";ai(`Error: ${ie}`),ee!=null&&ee.hint?Le(ee.hint):Le(ie),ee.type==="max_reconnect"||ee.type==="sdk_error"?l("disconnected"):ee.type==="connection_error"&&l("connecting")},onReconnect:ee=>{ai(`Reconnecting... (Attempt ${ee.attempt}/${ee.maxAttempts})`),l("connecting")}}),console.log("Starting Ghost session with mode:",Xn),T.current.startSession(Xn),b&&(_.current=new ub({onTranscript:ee=>{ee.isFinal&&ee.text.trim()&&Ji({speaker:"You",text:ee.text.trim(),time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})},onError:ee=>{if(ee.message==="network"||ee.message==="no-speech")return;ee.message!=="network"&&ee.message!=="no-speech"&&console.warn("[App] Speech-to-text error:",ee);const ie={"audio-capture":"Microphone is unavailable. Allow mic access in your browser settings.","not-allowed":"Microphone permission denied. Please allow access and restart Ghost."};if(ee.type==="not_supported")return;const ae=Date.now();if(ae-An.current>4e3){const Pe=ie[ee.message]||ee.message||"Microphone issue detected.";ie[ee.message]&&(ai(`Mic: ${Pe}`),An.current=ae)}ie[ee.message]&&Le(`${ie[ee.message]} We'll keep trying in the background.`)}}),_.current.start()),ai("Audio stream initialized. Connecting to Neural Engine..."),setTimeout(()=>ai("Model v4-Turbo Connected. Latency: 42ms"),1e3),l("connected")}catch{ai("Microphone access denied. Ghost needs ears to help you."),l("disconnected")}},Cp=async()=>{var ie,ae;E(),(ie=T.current)==null||ie.stopSession(),(ae=_.current)==null||ae.stop();const V=o.current?Math.round((Date.now()-o.current)/1e3):0,q=nt.length,ee=fr.length;g!=null&&g.uid&&n.current&&(await i5({userId:g.uid,sessionId:n.current,updates:{}}),gn(n.current,{duration:V,cuesGenerated:q,transcriptLines:ee,mode:Xn,callId:s.current,hasVapiCall:!!s.current})),n.current=null,e(null),o.current=null,i(null),s.current=null,l("disconnected")};return A.useEffect(()=>{var V;if(!r&&d&&((V=T.current)!=null&&V.callId)){const q=T.current.callId;console.log("[App]  Found callId from periodic check, updating state:",q),i(q),s.current=q}},[r,d]),A.useEffect(()=>{if(!d||r)return;const V=setInterval(()=>{var q;if((q=T.current)!=null&&q.callId&&!r){const ee=T.current.callId;console.log("[App]  Found callId from interval check, updating state:",ee),i(ee),s.current=ee}},2e3);return()=>clearInterval(V)},[d,r]),A.useEffect(()=>()=>{var V,q;(V=T.current)==null||V.stopSession(),(q=_.current)==null||q.stop()},[]),I.jsxs("div",{className:"min-h-screen bg-black text-gray-100 font-sans selection:bg-blue-500/30",children:[I.jsx("header",{className:"border-b border-gray-800 bg-gray-950/50 backdrop-blur-sm sticky top-0 z-50",children:I.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 h-14 sm:h-16 flex items-center justify-between gap-2",children:[I.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[I.jsx("div",{className:`w-2 h-2 sm:w-3 sm:h-3 rounded-full shrink-0 ${a==="connected"?"bg-green-500 animate-pulse":"bg-red-500"}`}),I.jsxs("h1",{className:"text-base sm:text-xl font-bold tracking-tight flex items-center gap-1 sm:gap-2 min-w-0",children:[I.jsx(L0,{className:"w-4 h-4 sm:w-6 sm:h-6 text-blue-500 shrink-0"}),I.jsxs("span",{className:"hidden xs:inline",children:["GHOST ",I.jsx("span",{className:"text-gray-600 font-light",children:"PROTOCOL"})]}),I.jsx("span",{className:"xs:hidden",children:"GHOST"})]})]}),I.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 shrink-0",children:[I.jsx("div",{className:"hidden md:flex items-center gap-1 bg-gray-900 rounded-lg p-1 border border-gray-800",children:f5.map(V=>I.jsx("button",{type:"button",onClick:()=>!d&&Yn({mode:V}),className:`px-2 sm:px-3 py-1 sm:py-1.5 rounded-md text-xs sm:text-sm font-medium capitalize transition-all ${Xn===V?"bg-blue-600 text-white shadow-lg":"text-gray-400 hover:text-white"} ${d?"opacity-50 cursor-not-allowed":""}`,children:V},V))}),I.jsx("div",{className:"hidden sm:block h-6 w-px bg-gray-800"}),I.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[I.jsxs("div",{className:"hidden sm:flex items-center gap-3 text-sm text-gray-400",children:[I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx(QD,{className:`w-4 h-4 ${a==="connected"?"text-green-500":"text-gray-600"}`}),I.jsx("span",{className:"hidden lg:inline",children:p5[a]})]}),k?I.jsx("span",{className:"text-xs text-yellow-400 font-mono",children:"Syncing..."}):g&&I.jsxs("span",{className:"text-xs text-gray-500 font-mono hidden lg:inline",children:["uid:",g.uid.slice(0,6)]})]}),I.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[D&&I.jsx(Yt,{color:D.badgeColor??"yellow",className:"text-xs hidden sm:inline-flex",children:(ho=D.label)==null?void 0:ho.toUpperCase()}),I.jsxs("a",{href:"/docs",target:"_blank",rel:"noreferrer",className:"text-xs px-2 sm:px-3 py-1 rounded-lg border border-gray-700 text-gray-300 hover:text-white hover:border-gray-500 transition-colors flex items-center gap-1",title:"Open docs",children:[I.jsx(Ug,{className:"w-3 h-3 sm:w-4 sm:h-4"}),I.jsx("span",{className:"hidden sm:inline",children:"Docs"})]}),I.jsxs(Yl,{variant:"secondary",className:"text-xs px-2 sm:px-3 py-1",onClick:Hi.open,disabled:k,title:"View plans and pricing",children:[I.jsx(qD,{className:"w-3 h-3 sm:w-4 sm:h-4"}),I.jsx("span",{className:"hidden sm:inline ml-1",children:"Pricing"})]}),g&&F&&I.jsxs(Yl,{variant:"secondary",className:"text-xs px-2 sm:px-3 py-1",onClick:Dl.open,disabled:k,title:"View past sessions",children:[I.jsx(zD,{className:"w-3 h-3 sm:w-4 sm:h-4"}),I.jsx("span",{className:"hidden sm:inline ml-1",children:"Replay"})]}),window.electronAPI&&I.jsxs(Yl,{variant:"secondary",className:"text-xs px-2 sm:px-3 py-1 flex items-center gap-1",onClick:()=>{var V;(V=window.electronAPI)!=null&&V.reopenHud&&window.electronAPI.reopenHud()},title:"Reopen floating HUD window",children:[I.jsx(M0,{className:"w-3 h-3 sm:w-4 sm:h-4"}),I.jsx("span",{className:"hidden sm:inline",children:"HUD"})]}),I.jsxs(Yl,{variant:"secondary",className:"text-xs px-2 sm:px-3 py-1 flex items-center gap-1",onClick:Ot.open,disabled:k,title:g!=null&&g.isAnonymous?"Save session & link account":"Account settings & analytics",children:[I.jsx(JD,{className:"w-3 h-3 sm:w-4 sm:h-4"}),I.jsx("span",{className:"hidden sm:inline",children:g!=null&&g.isAnonymous?"Save session":"Account"}),I.jsx("span",{className:"sm:hidden",children:g!=null&&g.isAnonymous?"Save":"Account"})]})]})]})]})]})}),le&&I.jsx("div",{className:"bg-amber-500/10 border-b border-amber-400/20 text-amber-200 text-xs sm:text-sm",children:I.jsxs("div",{className:"max-w-7xl mx-auto px-3 py-2 flex items-center gap-2",children:[I.jsx(HI,{className:"w-4 h-4 shrink-0"}),I.jsx("span",{className:"flex-1",children:le}),I.jsx("button",{type:"button",className:"text-amber-200/70 hover:text-amber-200 transition-colors",onClick:()=>pe(null),"aria-label":"Dismiss warning",children:I.jsx(WI,{className:"w-4 h-4"})})]})}),I.jsxs("main",{className:"max-w-7xl mx-auto p-2 sm:p-4 lg:px-6 lg:py-4 grid grid-cols-1 lg:grid-cols-12 gap-4 lg:gap-6 min-h-[calc(100vh-4rem)] lg:h-[calc(100vh-4rem)] lg:overflow-hidden",children:[I.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-4 lg:gap-6 h-full min-h-0 lg:pb-4",children:[I.jsxs(YD,{className:"flex items-center justify-between bg-gradient-to-r from-gray-900 to-gray-900 border-gray-800 relative overflow-hidden h-24 sm:h-32 shrink-0 lg:sticky lg:top-0 lg:z-10",children:[I.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-20 pointer-events-none gap-1",children:d?Vr:I.jsx("div",{className:"text-gray-700 font-mono text-sm",children:"WAITING FOR AUDIO STREAM..."})}),I.jsxs("div",{className:"z-10 flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-6 px-3 sm:px-4 w-full justify-between",children:[I.jsxs("div",{className:"flex-1 min-w-0",children:[I.jsx("h2",{className:"text-lg sm:text-2xl font-bold text-white mb-1 truncate",children:d?"Listening...":"Ready to engage"}),I.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:d?"Analyzing vocal patterns & sentiment":"Select a mode and start the engine"})]}),I.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[d&&I.jsx("button",{type:"button",onClick:()=>{qi(V=>{const q=V==="listening"?"speaking":"listening";return Fe("speaker_mode",q),q})},className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all flex items-center gap-2 ${Pn==="listening"?"bg-green-600/20 text-green-400 border border-green-500/50 hover:bg-green-600/30":"bg-red-600/20 text-red-400 border border-red-500/50 hover:bg-red-600/30"}`,title:Pn==="listening"?"Click when you start speaking (Ctrl+Shift+S)":"Click when you finish speaking (Ctrl+Shift+S)",children:Pn==="listening"?I.jsxs(I.Fragment,{children:[I.jsx(lm,{className:"w-3 h-3 sm:w-4 sm:h-4"}),I.jsx("span",{className:"hidden sm:inline",children:"Listening"}),I.jsx("span",{className:"sm:hidden",children:"Listen"})]}):I.jsxs(I.Fragment,{children:[I.jsx(am,{className:"w-3 h-3 sm:w-4 sm:h-4"}),I.jsx("span",{className:"hidden sm:inline",children:"Speaking"}),I.jsx("span",{className:"sm:hidden",children:"Speak"})]})}),I.jsx(Yl,{onClick:d?Cp:Fr,variant:d?"danger":"primary",className:"w-full sm:w-32 h-12 sm:h-12 text-base sm:text-lg shrink-0 touch-manipulation min-h-[48px] sm:min-h-0",disabled:!d&&k,children:d?I.jsxs(I.Fragment,{children:[I.jsx(am,{className:"w-5 h-5"})," STOP"]}):I.jsxs(I.Fragment,{children:[I.jsx(lm,{className:"w-5 h-5"}),k?"SYNCING":"START"]})})]})]})]}),I.jsxs("div",{className:"flex-1 bg-gray-900/50 border border-gray-800 rounded-xl overflow-hidden flex flex-col backdrop-blur-sm min-h-0",children:[I.jsxs("div",{className:"p-2 sm:p-3 border-b border-gray-800 bg-gray-900/85 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 shrink-0 sticky top-0 z-10",children:[I.jsx("span",{className:"text-xs font-mono text-gray-400 uppercase tracking-wider",children:"Live Transcript"}),I.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[K&&I.jsx(Yt,{color:"yellow",className:"text-xs",children:"SYNCING"}),d&&I.jsx(Yt,{color:"green",className:"text-xs",children:"RECORDING"}),d&&!b&&I.jsx(Yt,{color:"gray",className:"text-xs",children:"MOCK MODE"}),d&&b&&I.jsx(Yt,{color:"blue",className:"text-xs",children:"LIVE STT"}),d&&I.jsx(Yt,{color:Pn==="listening"?"green":"red",className:"text-xs flex items-center gap-1",title:Pn==="listening"?"Processing customer speech for coaching cues":"You are speaking - coaching cues paused",children:Pn==="listening"?I.jsxs(I.Fragment,{children:[I.jsx(lm,{className:"w-3 h-3"}),I.jsx("span",{className:"hidden sm:inline",children:"Listening"})]}):I.jsxs(I.Fragment,{children:[I.jsx(am,{className:"w-3 h-3"}),I.jsx("span",{className:"hidden sm:inline",children:"Speaking"})]})})]})]}),I.jsxs("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 space-y-3 sm:space-y-4 font-mono text-xs sm:text-sm scrollbar-thin scrollbar-thumb-gray-700 touch-pan-y",children:[fr.length===0&&I.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-600 opacity-50",children:[I.jsx(M0,{className:"w-12 h-12 mb-4"}),I.jsx("p",{children:"Awaiting conversation input..."})]}),fr.map((V,q)=>{var ae;const ee=V.time||((ae=V.createdAt)!=null&&ae.toDate?V.createdAt.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"--:--:--"),ie=q===fr.length-1;return I.jsxs("div",{className:`flex flex-col sm:flex-row gap-1 sm:gap-3 ${V.isSystem?"text-yellow-500/80":"text-gray-300"}`,ref:ie?u:void 0,children:[I.jsx("span",{className:"text-gray-600 shrink-0 select-none text-xs sm:w-20 sm:text-right",children:ee}),I.jsxs("div",{className:"flex-1 min-w-0",children:[!V.isSystem&&I.jsxs("span",{className:`font-bold mr-2 ${V.speaker==="Them"?"text-red-400":"text-blue-400"}`,children:[V.speaker,":"]}),I.jsx("span",{className:"break-words",children:V.text})]})]},V.id||`line-${q}`)})]})]})]}),I.jsxs("div",{id:"live-intel-panel",className:"lg:col-span-4 flex flex-col bg-gray-900 border border-gray-800 rounded-xl overflow-hidden shadow-2xl order-first lg:order-last lg:sticky lg:top-0 lg:self-start lg:h-[calc(100vh-4rem-1rem)]",children:[I.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-800 bg-gray-950 flex items-center justify-between shrink-0 sticky top-0 z-10",children:[I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx(j0,{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-500"}),I.jsx("span",{className:"font-bold text-gray-100 text-sm sm:text-base",children:"Live Intel"}),xt&&I.jsx(Yt,{color:"blue",className:"text-[10px] sm:text-xs",children:"Focus"}),!C&&I.jsxs(Yt,{color:"yellow",className:"text-[10px] sm:text-xs flex flex-col items-center justify-center gap-0 leading-tight px-2 py-1",title:"Upgrade to enable TTS whispers",children:[I.jsxs("span",{className:"flex items-center gap-1",children:[I.jsx("span",{children:""}),I.jsx("span",{children:"Whispers"})]}),I.jsx("span",{children:"Locked"})]}),C&&Z&&I.jsxs(Yt,{color:"red",className:"text-[10px] sm:text-xs flex items-center gap-1",children:[I.jsx(Ma,{className:"w-3 h-3"})," Muted"]})]}),I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx(Yt,{color:"blue",className:"text-xs hidden sm:inline-flex",children:"v4.0"}),I.jsx("button",{type:"button",onClick:()=>{Mr(V=>{const q=!V;return Fe("focus_mode",q?"enabled":"disabled"),q})},className:`text-[11px] sm:text-xs px-3 py-2 sm:px-2 sm:py-1 rounded-full border transition-colors touch-manipulation min-h-[44px] sm:min-h-0 ${xt?"border-blue-500 text-blue-300 bg-blue-500/10":"border-gray-700 text-gray-400 active:bg-gray-800 hover:bg-gray-800"}`,"aria-label":xt?"Disable Focus Mode":"Enable Focus Mode",children:xt?"Focus ON":"Focus OFF"})]})]}),I.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 space-y-3 sm:space-y-4 bg-gray-950/50 touch-pan-y",children:nt.length===0?I.jsxs("div",{className:"text-center mt-10 sm:mt-20",children:[I.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-900 mb-4",children:I.jsx(j0,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-700"})}),I.jsx("h3",{className:"text-gray-400 font-medium text-sm sm:text-base",children:pr.title}),I.jsx("p",{className:"text-gray-600 text-xs sm:text-sm mt-2 max-w-[240px] mx-auto",children:pr.body})]}):I.jsxs(I.Fragment,{children:[oa.map(V=>I.jsxs("div",{className:`animate-in slide-in-from-right fade-in duration-300 transform transition-all hover:scale-[1.02] cursor-pointer
                      ${V.type==="alert"?"border-l-4 border-red-500 bg-red-950/10":"border-l-4 border-blue-500 bg-blue-950/10"}
                      rounded-r-lg border-y border-r border-gray-800 p-3 sm:p-4 shadow-lg`,children:[I.jsxs("div",{className:"flex items-center justify-between mb-2",children:[V.type==="alert"?I.jsxs("span",{className:"text-xs font-bold text-red-500 tracking-wider flex items-center gap-1",children:[I.jsx(L0,{className:"w-3 h-3"})," ALERT"]}):I.jsx("div",{className:"flex items-center gap-2",children:V.ragUsed&&I.jsxs(Yt,{color:"green",className:"text-[10px] px-1.5 py-0.5 flex items-center gap-1",children:[I.jsx(sc,{className:"w-2.5 h-2.5"}),"KB"]})}),I.jsx("span",{className:"text-xs text-gray-500",children:"Just now"})]}),V.title&&I.jsx("h4",{className:"text-lg font-bold text-gray-100 mb-1",children:V.title}),I.jsx("p",{className:`text-xs sm:text-sm ${V.type==="alert"?"text-gray-300":"text-blue-100 font-medium sm:text-lg leading-relaxed"}`,children:V.text||V.content}),V.action&&I.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-800/50 flex items-center justify-between group",children:[I.jsx("span",{className:"text-xs text-gray-500 uppercase font-mono",children:"Recommended Action"}),I.jsxs("span",{className:"text-sm text-blue-400 font-bold flex items-center group-hover:translate-x-1 transition-transform",children:[V.action," ",I.jsx(BD,{className:"w-4 h-4"})]})]})]},V.id||`card-${V.title??V.text}`)),nt.length>oa.length&&I.jsx("div",{className:"text-center pt-2 pb-1",children:I.jsxs(Yt,{color:"gray",className:"text-xs",children:["+",nt.length-oa.length," more (showing latest ",oa.length,")"]})})]})}),I.jsxs("div",{className:"p-3 sm:p-4 bg-gray-900 border-t border-gray-800 grid grid-cols-3 gap-2 sm:gap-3",children:[I.jsxs("button",{type:"button",onClick:ta.open,className:"flex flex-col items-center justify-center p-3 sm:p-2 rounded-lg active:bg-gray-800 hover:bg-gray-800 transition-colors text-gray-400 hover:text-white touch-manipulation min-h-[44px] sm:min-h-0","aria-label":"Parameters",children:[I.jsx(KD,{className:"w-5 h-5 sm:w-5 sm:h-5 mb-1"}),I.jsx("span",{className:"text-xs",children:"Parameters"})]}),I.jsxs("button",{type:"button",onClick:ii.open,className:"flex flex-col items-center justify-center p-3 sm:p-2 rounded-lg active:bg-gray-800 hover:bg-gray-800 transition-colors text-gray-400 hover:text-white touch-manipulation min-h-[44px] sm:min-h-0","aria-label":"Knowledge Base",children:[I.jsx(WD,{className:"w-5 h-5 sm:w-5 sm:h-5 mb-1"}),I.jsx("span",{className:"text-xs",children:"Knowledge Base"})]}),I.jsxs("button",{type:"button",onClick:Ml.open,className:`flex flex-col items-center justify-center p-3 sm:p-2 rounded-lg active:bg-gray-800 hover:bg-gray-800 transition-colors touch-manipulation min-h-[44px] sm:min-h-0 ${vn?"text-blue-400 hover:text-blue-300":"text-gray-400 hover:text-white"}`,"aria-label":"Playbooks",children:[I.jsx(sc,{className:"w-5 h-5 sm:w-5 sm:h-5 mb-1"}),I.jsx("span",{className:"text-xs",children:"Playbooks"}),vn&&I.jsx(Yt,{color:"blue",className:"text-[8px] px-1 py-0 mt-0.5",children:"Active"})]})]})]})]}),d&&I.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 z-40 bg-gray-950/95 backdrop-blur-md border-t border-gray-800 shadow-2xl",children:I.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:I.jsxs("div",{className:"flex flex-col gap-3",children:[nt.length>0&&I.jsxs("div",{className:"flex-1 w-full",children:[I.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[I.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Latest Cue"}),((Fl=nt[0])==null?void 0:Fl.ragUsed)&&I.jsxs(Yt,{color:"green",className:"text-[10px] px-1.5 py-0.5 flex items-center gap-1",children:[I.jsx(sc,{className:"w-2.5 h-2.5"}),"KB"]})]}),I.jsx("p",{className:"text-sm text-blue-100 font-medium break-words leading-relaxed",children:((Qi=nt[0])==null?void 0:Qi.text)||((Yi=nt[0])==null?void 0:Yi.content)||"Awaiting cues..."})]}),nt.length===0&&I.jsx("div",{className:"flex-1 w-full",children:I.jsx("p",{className:"text-xs text-gray-500",children:"Ghost is listening silently"})}),I.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[I.jsx("button",{type:"button",onClick:()=>{Mr(V=>{const q=!V;return Fe("focus_mode",q?"enabled":"disabled",{source:"mobile_bottom_sheet"}),q})},className:`px-3 py-2 rounded-lg border transition-colors touch-manipulation min-h-[44px] ${xt?"border-blue-500 text-blue-300 bg-blue-500/10":"border-gray-700 text-gray-400 active:bg-gray-800"}`,"aria-label":xt?"Disable Focus Mode":"Enable Focus Mode",children:I.jsx("span",{className:"text-xs",children:xt?"Focus":"All"})}),C&&I.jsx("button",{type:"button",onClick:()=>{he(V=>{const q=!V;return Fe("tts_whispers",q?"muted":"unmuted"),q})},className:`px-3 py-2 rounded-lg border transition-colors touch-manipulation min-h-[44px] ${Z?"border-red-500 text-red-300 bg-red-500/10":"border-gray-700 text-gray-400 active:bg-gray-800"}`,"aria-label":Z?"Unmute whispers":"Mute whispers",children:Z?I.jsx(Ma,{className:"w-5 h-5"}):I.jsx($g,{className:"w-5 h-5"})})]})]})})}),!window.electronAPI&&I.jsx("div",{ref:eo,className:"hidden md:block fixed z-40 select-none transition-opacity",style:_p,children:I.jsxs("div",{className:"relative",children:[I.jsxs("div",{className:`rounded-2xl border border-gray-800/70 bg-gray-950/90 shadow-2xl backdrop-blur-md text-gray-200 ${ut?"w-96 p-4":"w-96 p-3"} transition-all`,children:[I.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 uppercase font-mono",onPointerDown:jl,style:{cursor:Zs?"grabbing":"grab"},children:[I.jsx("span",{children:"Ghost HUD"}),I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsxs("button",{type:"button",onClick:()=>Mr(V=>!V),className:`px-2 py-0.5 rounded-full border border-gray-700 hover:border-gray-500 transition-colors text-[11px] ${xt?"bg-blue-500/20 text-blue-200 border-blue-500/50":""}`,title:"Toggle focus mode (Ctrl+Shift+F)",children:["Focus ",xt?"ON":"OFF"]}),C?I.jsx("button",{type:"button",onClick:()=>{he(V=>{const q=!V;return Fe("tts_whispers",q?"muted":"unmuted"),q})},className:`px-2 py-0.5 rounded-full border border-gray-700 hover:border-gray-500 transition-colors text-[11px] ${Z?"bg-red-500/20 text-red-200 border-red-500/50":""}`,title:`${Z?"Unmute":"Mute"} whispers (Ctrl+Shift+M)`,children:Z?I.jsx(Ma,{className:"w-3.5 h-3.5"}):I.jsx($g,{className:"w-3.5 h-3.5"})}):I.jsx("button",{type:"button",onClick:Ot.open,className:"px-2 py-0.5 rounded-full border border-yellow-700/50 hover:border-yellow-600 bg-yellow-900/20 hover:bg-yellow-900/30 transition-colors text-[11px] text-yellow-300",title:"Upgrade to enable TTS whispers",children:I.jsx(Ma,{className:"w-3.5 h-3.5"})}),I.jsx("button",{type:"button",onClick:()=>{Ze(!0),Jn(V=>!V),no(!1)},className:`px-2 py-0.5 rounded-full border border-gray-700 hover:border-gray-500 transition-colors ${ea?"bg-gray-800 text-white":""}`,title:"Dock position",children:I.jsx(qI,{className:"w-4 h-4"})}),I.jsx("button",{type:"button",onClick:()=>{Ze(!0),no(V=>!V),Jn(!1)},className:`px-2 py-0.5 rounded-full border border-gray-700 hover:border-gray-500 transition-colors ${to?"bg-gray-800 text-white":""}`,title:"Keyboard shortcuts",children:I.jsx(Ug,{className:"w-4 h-4"})}),I.jsx("button",{type:"button",onClick:oo,className:`px-2 py-0.5 rounded-full border border-gray-700 transition-colors ${tt?"bg-blue-600 text-white border-blue-500":"hover:border-gray-500"}`,children:tt?"Pinned":"Pin"}),I.jsx("button",{type:"button",onClick:so,className:"px-2 py-0.5 rounded-full border border-gray-700 hover:border-gray-500 transition-colors",children:ut?"Hide":"Expand"})]})]}),!ut&&I.jsx("div",{className:"mt-2 text-sm font-semibold text-gray-100 line-clamp-2 cursor-pointer",onClick:so,children:Ll}),ut&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"mt-3 text-sm font-semibold text-gray-100 line-clamp-3",children:Ll}),I.jsx("div",{className:"mt-3 space-y-2 max-h-48 overflow-y-auto pr-1 scrollbar-thin scrollbar-thumb-gray-800",children:Qn.length===0?I.jsx("p",{className:"text-xs text-gray-500",children:"Intel cues will appear here the moment conversations heat up."}):Qn.map(V=>{const q=io&&V.id===io;return I.jsxs("div",{className:`rounded-lg p-2 border ${q?"border-blue-500/70 bg-blue-900/30 shadow-lg":"border-gray-800 bg-gray-900/60"}`,children:[I.jsxs("div",{className:"flex items-center justify-between mb-1",children:[I.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Cue"}),V.ragUsed&&I.jsxs(Yt,{color:"green",className:"text-[9px] px-1 py-0 flex items-center gap-0.5",children:[I.jsx(sc,{className:"w-2 h-2"}),"KB"]})]}),I.jsx("p",{className:"text-sm text-gray-100",children:V.text})]},V.id)})}),to&&I.jsxs("div",{className:"mt-3 border border-gray-800/60 rounded-lg p-3 bg-gray-900/60 text-xs text-gray-300 space-y-2",children:[I.jsx("div",{className:"text-gray-400 uppercase tracking-wide mb-1",children:"Shortcuts"}),I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsx("span",{children:"Toggle HUD"}),I.jsx("code",{className:"text-gray-100",children:"Ctrl+Shift+G"})]}),I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsx("span",{children:"Pin/Unpin HUD"}),I.jsx("code",{className:"text-gray-100",children:"Ctrl+Shift+H"})]}),I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsx("span",{children:"Next cue"}),I.jsx("code",{className:"text-gray-100",children:"Ctrl+Shift+I"})]}),I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsx("span",{children:"Open intel board"}),I.jsx("code",{className:"text-gray-100",children:"Ctrl+Shift+L"})]}),I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsx("span",{children:"Mute/Unmute whispers"}),I.jsx("code",{className:"text-gray-100",children:"Ctrl+Shift+M"})]}),I.jsx("button",{type:"button",className:"text-left text-blue-300 hover:text-white underline",onClick:Hu,children:"Show quick tips"})]}),ea&&I.jsxs("div",{className:"mt-3 border border-gray-800/60 rounded-lg p-3 bg-gray-900/60 text-xs text-gray-300 space-y-2",children:[I.jsx("div",{className:"text-gray-400 uppercase tracking-wide",children:"Dock position"}),g5.map(V=>I.jsxs("button",{type:"button",onClick:()=>{if(V.value==="free"){if(!yn){const q=Vl;q.top&&q.left&&Qs({top:q.top,left:q.left})}}else Qs(null);$u(V.value),Jn(!1),Xs(null)},className:`w-full text-left px-2 py-1 rounded border ${xn===V.value||V.value==="free"&&yn?"border-blue-500/50 text-blue-200 bg-blue-500/10":"border-gray-800 hover:border-gray-600 hover:text-white"}`,children:[V.label,(xn===V.value||V.value==="free"&&yn)&&I.jsx("span",{className:"ml-2 text-blue-400",children:""})]},V.value)),I.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Tip: Drag the HUD header to move it anywhere on screen. Position is saved automatically."}),I.jsx("button",{type:"button",className:"text-left text-blue-300 hover:text-white underline",onClick:Hu,children:"Re-run HUD tour"})]}),I.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-gray-500",children:[I.jsxs("label",{className:"flex items-center gap-2",children:["Opacity",I.jsx("input",{type:"range",min:"0.3",max:"1",step:"0.05",value:ri,onChange:V=>gt(parseFloat(V.target.value)),className:"accent-blue-500"})]}),I.jsx("button",{type:"button",onClick:ia,className:"text-blue-400 hover:text-blue-300 font-semibold",children:"Open board"})]})]})]}),Rn&&la&&I.jsx("div",{className:`absolute w-96 pointer-events-auto ${wp?"top-full mt-3":"bottom-full mb-3"}`,children:I.jsxs("div",{className:"rounded-2xl border border-blue-500/40 bg-gray-900/95 shadow-xl p-4 text-gray-200 space-y-3",children:[I.jsxs("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-wide text-gray-400",children:[I.jsx("span",{children:"HUD quick tour"}),I.jsxs("span",{children:["Step ",oi+1," / ",Lr.length]})]}),I.jsxs("div",{children:[I.jsx("p",{className:"text-sm font-semibold text-white",children:la.title}),I.jsx("p",{className:"text-xs text-gray-400 mt-1 leading-relaxed",children:la.body})]}),I.jsxs("div",{className:"flex items-center justify-between gap-3",children:[I.jsx("button",{type:"button",className:"text-xs text-gray-400 hover:text-gray-200",onClick:da,children:"Skip"}),I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx("button",{type:"button",className:`text-xs ${oi===0?"text-gray-600 cursor-not-allowed":"text-gray-400 hover:text-gray-200"}`,onClick:()=>ao(V=>Math.max(0,V-1)),disabled:oi===0,children:"Back"}),I.jsx("button",{type:"button",className:"px-3 py-1 rounded-full bg-blue-600 text-white text-xs font-semibold hover:bg-blue-500",onClick:qu,children:oi===Lr.length-1?"Done":"Next"})]})]})]})})]})}),I.jsx(A.Suspense,{fallback:null,children:I.jsx(s5,{isOpen:ta.isOpen,onClose:ta.close,settings:jr,onChange:Yn})}),I.jsx(A.Suspense,{fallback:null,children:I.jsx(o5,{isOpen:ii.isOpen,onClose:ii.close,documents:Gu,onUpload:Sp,onRemove:Tp,limitReached:bp,maxSizeBytes:co,totalSize:kp,planDetails:D,onUpgradeClick:Ot.open})}),I.jsx(A.Suspense,{fallback:null,children:I.jsx(h5,{isOpen:Ml.isOpen,onClose:Ml.close,userId:g==null?void 0:g.uid,playbooks:ha,onCreate:fa,onUpdate:Wu,onDelete:Be,selectedPlaybookId:vn,onSelect:lo})}),I.jsx(A.Suspense,{fallback:null,children:I.jsx(a5,{isOpen:Ot.isOpen,onClose:Ot.close,user:g,profile:N,planDetails:D,onGoogleUpgrade:j,onEmailUpgrade:U,onSignOut:z,authError:R,isProcessing:P,canAccessAnalytics:be,onOpenAnalytics:()=>{Ot.close(),Nl.open()},onUpgradeToFounders:()=>{Ot.close(),Wi("founders"),on.open()},onUpgradeToStarter:()=>{Ot.close(),Wi("starter"),on.open()},onViewPricing:()=>{Ot.close(),Hi.open()}})}),I.jsx(A.Suspense,{fallback:null,children:I.jsx(c5,{userId:g==null?void 0:g.uid,isOpen:Nl.isOpen,onClose:Nl.close})}),I.jsx(A.Suspense,{fallback:null,children:I.jsx(u5,{isOpen:on.isOpen,onClose:on.close,user:g,planDetails:D,targetPlan:na,onPaymentSuccess:()=>{window.location.reload()}})}),I.jsx(A.Suspense,{fallback:null,children:I.jsx(d5,{isOpen:Hi.isOpen,onClose:Hi.close,user:g,currentPlan:(Ul=D==null?void 0:D.label)==null?void 0:Ul.toLowerCase(),onUpgradeToFounders:()=>{Hi.close(),Wi("founders"),on.open()},onUpgradeToStarter:()=>{Hi.close(),Wi("starter"),on.open()}})}),I.jsx(A.Suspense,{fallback:null,children:I.jsx(l5,{isOpen:Dl.isOpen,onClose:Dl.close,userId:g==null?void 0:g.uid,planDetails:D,canExportSessions:L,onUpgradeClick:Ot.open})})]})}function v5({callId:t,isActive:e}){var M;const{user:n}=C1(),{planDetails:r}=P1(n==null?void 0:n.uid),{canUseTTSWhispers:i}=R1(r,n),[s,o]=A.useState(()=>{if(t)return t;if(typeof window<"u"){const O=window.localStorage.getItem("ghost-active-callId");if(O)return O}return null});A.useEffect(()=>{t&&(o(t),typeof window<"u"&&window.localStorage.setItem("ghost-active-callId",t))},[t]),A.useEffect(()=>{if(typeof window>"u")return;const O=W=>{if(W.key==="ghost-active-callId"){const X=W.newValue;X&&X!==s?(console.log("[CompactHud]  CallId updated from storage:",X),o(X)):!X&&s&&(console.log("[CompactHud]  CallId cleared from storage"),o(null))}},$=()=>{const W=window.localStorage.getItem("ghost-active-callId");W!==s&&(W?(console.log("[CompactHud]  CallId found in storage:",W),o(W)):s&&(console.log("[CompactHud]  CallId removed from storage"),o(null)))};window.addEventListener("storage",O);const K=setInterval($,2e3);return $(),()=>{window.removeEventListener("storage",O),clearInterval(K)}},[s]);const{suggestions:a}=A1({callId:s,enabled:!!s}),[l,u]=A.useState([]),[d,f]=A.useState(e||!1);A.useEffect(()=>{if(s){const le=a.some(pe=>{const Xe=pe.createdAt instanceof Date?pe.createdAt:new Date(pe.createdAt);return Date.now()-Xe.getTime()<6e4});f(le||e);return}if(!(n!=null&&n.uid)){if(!Ct()){f(!1);return}return}const O=Ct();if(!O)return;const $=Cn(O,"users",n.uid,"sessions"),K=ki($,Us("startedAt","desc"),Bo(1));let W=null;const X=Ar(K,le=>{if(W&&(W(),W=null),le.empty){u([]),f(e);return}const Xe=le.docs[0].id,Ft=Cn(O,"users",n.uid,"sessions",Xe,"suggestions"),An=ki(Ft,E1("createdAt",">",We.fromDate(new Date(Date.now()-36e5))),Us("createdAt","desc"),Bo(20));W=Ar(An,Le=>{const ut=Le.docs.map(tt=>({id:tt.id,...tt.data()}));u(ut);const Ze=ut.some(tt=>{var $e;const Wn=($e=tt.createdAt)!=null&&$e.toDate?tt.createdAt.toDate():new Date(tt.createdAt);return Date.now()-Wn.getTime()<6e4});f(Ze||e)},Le=>{console.error("[CompactHud] Firestore suggestions error:",Le)})},le=>{console.error("[CompactHud] Firestore sessions error:",le)});return()=>{X(),W&&W()}},[n==null?void 0:n.uid,e,s,a]);const m=A.useMemo(()=>a.length>0?a:l,[a,l]),[E,T]=A.useState(()=>typeof window>"u"?!1:window.localStorage.getItem("ghost-whispers-muted")==="true"),[_,b]=A.useState(()=>typeof window>"u"?!1:window.localStorage.getItem("ghost-focus-mode")==="true"),[v,g]=A.useState(!0),[k,j]=A.useState(0),[U,z]=A.useState(!1),[R,P]=A.useState(!1),[N,D]=A.useState(()=>{if(typeof window>"u")return .85;const O=window.localStorage.getItem("ghost-hud-opacity");return O?parseFloat(O):.85}),C=A.useRef(null),{whisper:F,stop:L}=x1({enabled:d&&!E&&i,volume:.4,rate:1.2,pitch:1}),be=A.useRef(new Set);A.useEffect(()=>{var K;if(!d||!F||m.length===0)return;const O=m[0],$=(K=O==null?void 0:O.text)==null?void 0:K.trim();if($){const W=`${O.id||Date.now()}-${$.substring(0,30)}`;be.current.has(W)||(be.current.add(W),F($),console.log("[CompactHud]  Whispered coaching cue:",$))}},[m,d,F]);const Pt=A.useCallback(O=>{const $=(O==null?void 0:O.trigger)||{};return $.priority==="high"||$.priority==="critical"||O.type==="alert"},[]),gn=A.useMemo(()=>{if(!_)return m;const O=m.filter(Pt);return O.length>0?O:m},[m,_,Pt]),Fe=m[0],Z=gn[0]||Fe,he=Z?Z.text:d?"Ghost is listening silently":"Tap START to unlock intel",ce=A.useMemo(()=>gn.slice(0,3),[gn]),Ne=((M=ce[k])==null?void 0:M.id)||null,Ee=A.useCallback(()=>{g(O=>!O)},[]);A.useCallback(()=>{ce.length!==0&&(g(!0),j(O=>(O+1)%ce.length))},[ce.length]);const h=A.useCallback(()=>{var O;(O=window.electronAPI)!=null&&O.closeHud&&window.electronAPI.closeHud()},[]),S=A.useCallback(()=>{var O;(O=window.electronAPI)!=null&&O.minimizeHud&&window.electronAPI.minimizeHud()},[]),w=A.useCallback(()=>{var O;(O=window.electronAPI)!=null&&O.openMainApp?window.electronAPI.openMainApp():window.open(window.location.origin+"/app","_blank")},[]);return A.useEffect(()=>{var O;typeof window<"u"&&(window.localStorage.setItem("ghost-hud-opacity",String(N)),(O=window.electronAPI)!=null&&O.setHudOpacity&&window.electronAPI.setHudOpacity(N))},[N]),A.useEffect(()=>{var K;if(!C.current||!((K=window.electronAPI)!=null&&K.setHudSize))return;const O=new ResizeObserver(W=>{for(const X of W){const{width:le,height:pe}=X.contentRect;le>0&&pe>0&&window.electronAPI.setHudSize(le,pe)}});O.observe(C.current);const $=setTimeout(()=>{if(C.current){const W=C.current.getBoundingClientRect();W.width>0&&W.height>0&&window.electronAPI.setHudSize(W.width,W.height)}},100);return()=>{O.disconnect(),clearTimeout($)}},[v,ce.length,U,R]),I.jsxs("div",{ref:C,className:"rounded-2xl border border-gray-800/70 bg-gray-950/90 shadow-2xl backdrop-blur-md text-gray-200 w-96 transition-all",style:{opacity:N,WebkitAppRegion:window.electronAPI?"no-drag":void 0},children:[I.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 uppercase font-mono p-3 border-b border-gray-800/50",style:{cursor:window.electronAPI?"grab":"default",WebkitAppRegion:window.electronAPI?"drag":void 0},children:[I.jsx("span",{children:"Ghost HUD"}),I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsxs("button",{type:"button",onClick:()=>{b(O=>{const $=!O;return typeof window<"u"&&window.localStorage.setItem("ghost-focus-mode",String($)),$})},className:`px-2 py-0.5 rounded-full border border-gray-700 hover:border-gray-500 transition-colors text-[11px] ${_?"bg-blue-500/20 text-blue-200 border-blue-500/50":""}`,title:"Toggle focus mode",style:{WebkitAppRegion:"no-drag"},children:["Focus ",_?"ON":"OFF"]}),i?I.jsx("button",{type:"button",onClick:()=>{T(O=>{const $=!O;return typeof window<"u"&&window.localStorage.setItem("ghost-whispers-muted",String($)),$&&L(),$})},className:`px-2 py-0.5 rounded-full border border-gray-700 hover:border-gray-500 transition-colors text-[11px] ${E?"bg-red-500/20 text-red-200 border-red-500/50":""}`,title:`${E?"Unmute":"Mute"} whispers`,style:{WebkitAppRegion:"no-drag"},children:E?I.jsx(Ma,{className:"w-3.5 h-3.5"}):I.jsx($g,{className:"w-3.5 h-3.5"})}):I.jsx("button",{type:"button",className:"px-2 py-0.5 rounded-full border border-yellow-700/50 hover:border-yellow-600 bg-yellow-900/20 hover:bg-yellow-900/30 transition-colors text-[11px] text-yellow-300",title:"Upgrade to enable TTS whispers",style:{WebkitAppRegion:"no-drag"},children:I.jsx(Ma,{className:"w-3.5 h-3.5"})}),I.jsx("button",{type:"button",onClick:()=>{g(!0),P(O=>!O),z(!1)},className:`px-2 py-0.5 rounded-full border border-gray-700 hover:border-gray-500 transition-colors text-[11px] ${R?"bg-gray-800 text-white":""}`,title:"Dock position",style:{WebkitAppRegion:"no-drag"},children:I.jsx(qI,{className:"w-3.5 h-3.5"})}),I.jsx("button",{type:"button",onClick:()=>{g(!0),z(O=>!O),P(!1)},className:`px-2 py-0.5 rounded-full border border-gray-700 hover:border-gray-500 transition-colors text-[11px] ${U?"bg-gray-800 text-white":""}`,title:"Keyboard shortcuts",style:{WebkitAppRegion:"no-drag"},children:I.jsx(Ug,{className:"w-3.5 h-3.5"})}),window.electronAPI&&I.jsxs(I.Fragment,{children:[I.jsx("button",{type:"button",onClick:S,className:"p-1 hover:bg-gray-800 rounded transition-colors","aria-label":"Minimize",style:{WebkitAppRegion:"no-drag"},children:I.jsx(GD,{className:"w-3 h-3"})}),I.jsx("button",{type:"button",onClick:h,className:"p-1 hover:bg-gray-800 rounded transition-colors","aria-label":"Close",style:{WebkitAppRegion:"no-drag"},children:I.jsx(WI,{className:"w-3 h-3"})})]}),I.jsx("button",{type:"button",onClick:Ee,className:"px-2 py-0.5 rounded-full border border-gray-700 hover:border-gray-500 transition-colors text-[11px]",style:{WebkitAppRegion:"no-drag"},children:v?"Hide":"Expand"})]})]}),!v&&I.jsx("div",{className:"p-3 text-sm font-semibold text-gray-100 line-clamp-2 cursor-pointer",onClick:Ee,children:he}),v&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"p-3 text-sm font-semibold text-gray-100 line-clamp-3 border-b border-gray-800/50",children:he}),I.jsx("div",{className:"p-3 space-y-2 max-h-48 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-800",children:ce.length===0?I.jsx("p",{className:"text-xs text-gray-500",children:"Intel cues will appear here the moment conversations heat up."}):ce.map(O=>{const $=Ne&&O.id===Ne;return I.jsxs("div",{className:`rounded-lg p-2 border ${$?"border-blue-500/70 bg-blue-900/30 shadow-lg":"border-gray-800 bg-gray-900/60"}`,children:[I.jsxs("div",{className:"flex items-center justify-between mb-1",children:[I.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Cue"}),O.ragUsed&&I.jsxs(Yt,{color:"green",className:"text-[9px] px-1 py-0 flex items-center gap-0.5",children:[I.jsx(sc,{className:"w-2 h-2"}),"KB"]})]}),I.jsx("p",{className:"text-sm text-gray-100",children:O.text})]},O.id)})}),U&&I.jsxs("div",{className:"p-3 border-t border-gray-800/50 space-y-2 bg-gray-900/60 text-xs text-gray-300",children:[I.jsx("div",{className:"text-gray-400 uppercase tracking-wide mb-2",children:"Shortcuts"}),I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsx("span",{children:"Toggle HUD"}),I.jsx("code",{className:"text-gray-100",children:"Ctrl+Shift+G"})]}),I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsx("span",{children:"Next cue"}),I.jsx("code",{className:"text-gray-100",children:"Ctrl+Shift+I"})]}),I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsx("span",{children:"Open intel board"}),I.jsx("code",{className:"text-gray-100",children:"Ctrl+Shift+L"})]}),I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsx("span",{children:"Mute/Unmute whispers"}),I.jsx("code",{className:"text-gray-100",children:"Ctrl+Shift+M"})]})]}),R&&I.jsxs("div",{className:"p-3 border-t border-gray-800/50 space-y-2 bg-gray-900/60 text-xs text-gray-300",children:[I.jsx("div",{className:"text-gray-400 uppercase tracking-wide mb-2",children:"Dock position"}),I.jsx("p",{className:"text-[11px] text-gray-500",children:window.electronAPI?"Drag the HUD header to move it anywhere on screen. Position is saved automatically.":"Tip: Drag the HUD header to move it anywhere on screen. Position is saved automatically."})]}),I.jsx("div",{className:"p-3 border-t border-gray-800/50",children:I.jsxs("div",{className:"flex items-center justify-between mb-2",children:[I.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-400",children:["Opacity",I.jsx("input",{type:"range",min:"0.3",max:"1",step:"0.05",value:N,onChange:O=>D(parseFloat(O.target.value)),className:"accent-blue-500",style:{WebkitAppRegion:"no-drag"}})]}),I.jsxs("button",{type:"button",onClick:w,className:"text-blue-400 hover:text-blue-300 font-semibold text-xs flex items-center gap-1",style:{WebkitAppRegion:"no-drag"},children:[I.jsx(HD,{className:"w-3 h-3"}),"Open board"]})]})})]})]})}function _5(){return I.jsx("div",{className:"bg-transparent p-0 m-0",style:{width:"fit-content",height:"fit-content"},children:I.jsx(v5,{callId:null,isActive:!1})})}class Nx extends Tb.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n)}render(){return this.state.hasError?I.jsx("div",{className:"min-h-screen bg-black text-gray-100 flex items-center justify-center p-4",children:I.jsx("div",{className:"max-w-2xl w-full bg-gray-900 border border-red-800 rounded-xl p-6",children:I.jsxs("div",{className:"flex items-start gap-4",children:[I.jsx(HI,{className:"w-8 h-8 text-red-400 shrink-0"}),I.jsxs("div",{className:"flex-1",children:[I.jsx("h1",{className:"text-2xl font-bold text-red-400 mb-2",children:"Something went wrong"}),I.jsx("p",{className:"text-gray-300 mb-4",children:"The app encountered an error. Please refresh the page or check the console for details."}),this.state.error&&I.jsxs("details",{className:"mt-4",children:[I.jsx("summary",{className:"text-sm text-gray-400 cursor-pointer mb-2",children:"Error details"}),I.jsxs("pre",{className:"text-xs text-gray-500 bg-gray-950 p-3 rounded overflow-auto max-h-48",children:[this.state.error.toString(),this.state.error.stack&&`

${this.state.error.stack}`]})]}),I.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:"Reload Page"})]})]})})}):this.props.children}}function Dx(){return A.useEffect(()=>{document.body.style.backgroundColor="transparent",document.body.style.margin="0",document.body.style.padding="0",document.body.style.overflow="hidden",document.documentElement.style.backgroundColor="transparent",document.documentElement.style.margin="0",document.documentElement.style.padding="0",document.documentElement.style.overflow="hidden";const t=document.getElementById("root");t&&(t.style.backgroundColor="transparent",t.style.margin="0",t.style.padding="0",t.style.overflow="hidden",t.style.width="fit-content",t.style.height="fit-content");const e=document.createElement("style");return e.textContent=`
      html, body, #root {
        background-color: transparent !important;
        margin: 0 !important;
        padding: 0 !important;
        overflow: hidden !important;
      }
      #root {
        width: fit-content !important;
        height: fit-content !important;
      }
    `,document.head.appendChild(e),()=>{document.body.style.backgroundColor="",document.documentElement.style.backgroundColor="",e.parentNode&&e.parentNode.removeChild(e)}},[]),I.jsx(Nx,{children:I.jsx("div",{style:{width:"fit-content",height:"fit-content",backgroundColor:"transparent",margin:0,padding:0},children:I.jsx(_5,{})})})}function hb(){const t=Ws(),e=t.pathname.replace(/^\/app/,"")||"/";return t.hash==="#hud-overlay"||e==="/hud-overlay"?I.jsx(Dx,{}):I.jsx(y5,{})}const w5="/app";Hm.createRoot(document.getElementById("root")).render(I.jsx(Tb.StrictMode,{children:I.jsx(Nx,{children:I.jsx(CD,{basename:w5,children:I.jsxs(iD,{children:[I.jsx(Zd,{path:"/",element:I.jsx(hb,{})}),I.jsx(Zd,{path:"/hud-overlay",element:I.jsx(Dx,{})}),I.jsx(Zd,{path:"*",element:I.jsx(hb,{})})]})})})}));export{M0 as A,Yt as B,qD as C,lm as M,vS as P,We as T,WI as X,j0 as Z,Yl as a,sc as b,mt as c,Cn as d,py as e,YD as f,Ct as g,zD as h,a3 as i,I as j,HI as k,Bo as l,T5 as m,Us as o,ki as q,A as r,R1 as u,E1 as w};

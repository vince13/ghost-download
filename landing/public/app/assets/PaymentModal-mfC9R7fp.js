import{c as E,r as i,j as e,B as M,a as k,C as P}from"./index-zowQoAB2.js";import{M as L}from"./Modal-pcImM4mU.js";import{C as t,S as Y}from"./sparkles-Bv1p3v1e.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=E("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]),J=({isOpen:c,onClose:j,user:l,planDetails:m,onPaymentSuccess:B,targetPlan:y="founders"})=>{var w;const[h,p]=i.useState(!1),[f,o]=i.useState(null),[I,v]=i.useState(null),[r,u]=i.useState("monthly");i.useEffect(()=>{c&&(o(null),v(null),p(!1),u("monthly"))},[c]);const C=async()=>{if(!(l!=null&&l.uid)){o("Please sign in to purchase Founders Club");return}p(!0),o(null);try{const n=y||"founders",g=await fetch("/api/stripe-create-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:l.uid,userEmail:l.email,plan:n,billingInterval:n==="starter"?r:void 0})});let a=null;const x=await g.text();try{a=x?JSON.parse(x):null}catch{a=null}if(!g.ok){const F=a&&a.error||x&&x.slice(0,200)||`Checkout failed with status ${g.status}`;throw new Error(F)}if(!a)throw new Error("Unexpected empty response from checkout endpoint");if(a.url)window.location.href=a.url;else throw new Error("No checkout URL received")}catch(n){console.error("[PaymentModal] Checkout error:",n),o(n.message||"Failed to start checkout. Please try again."),p(!1)}};if(!c)return null;const N=((w=m==null?void 0:m.label)==null?void 0:w.toLowerCase())||"free",d=N==="founders",b=N==="starter",s=y||"founders",S=s==="starter"?r==="yearly"?990:99:299;return e.jsx(L,{isOpen:c,onClose:j,title:s==="starter"?"Upgrade to Starter":"Upgrade to Founders Club",description:s==="starter"?"For individual professionals":"Lifetime access for early believers",footer:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Secure payment via Stripe"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{variant:"secondary",onClick:j,disabled:h,children:"Cancel"}),!(d&&s==="founders")&&!(b&&s==="starter")&&e.jsx(k,{variant:"primary",onClick:C,disabled:h,className:"flex items-center gap-2",children:h?e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"w-4 h-4"}),"Continue to Checkout"]})})]})]}),children:d&&s==="founders"||b&&s==="starter"?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(t,{className:"w-16 h-16 text-green-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:d&&s==="founders"?"You're already a Founder!":"You're already on Starter!"}),e.jsx("p",{className:"text-gray-400",children:d&&s==="founders"?"You have lifetime access to Founders Club benefits.":"You're already subscribed to the Starter plan."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-900/20 to-green-950/10 border border-green-800/50 rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Y,{className:"w-6 h-6 text-green-400"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:s==="starter"?"Starter":"Founders Club"})]}),e.jsx(M,{color:"green",children:s==="starter"?r==="yearly"?"YEARLY":"MONTHLY":"LIFETIME"})]}),s==="starter"&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex gap-2 p-1 bg-gray-800/50 rounded-lg border border-gray-700",children:[e.jsx("button",{type:"button",onClick:()=>u("monthly"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all ${r==="monthly"?"bg-blue-600 text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:"Monthly"}),e.jsxs("button",{type:"button",onClick:()=>u("yearly"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all ${r==="yearly"?"bg-blue-600 text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:["Yearly",e.jsx("span",{className:"ml-1 text-xs text-green-400",children:"(Save 17%)"})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsxs("span",{className:"text-4xl font-bold text-white",children:["$",S]}),e.jsx("span",{className:"text-gray-400",children:s==="starter"?r==="yearly"?"per year":"per month":"one-time"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:s==="starter"?r==="yearly"?"Billed annually, cancel anytime":"Cancel anytime":"No recurring fees, ever"})]}),e.jsx("ul",{className:"space-y-2 text-sm text-gray-300",children:s==="starter"?e.jsxs(e.Fragment,{children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(t,{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5"}),e.jsx("span",{children:"Everything in Free"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(t,{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5"}),e.jsx("span",{children:"5 MB knowledge base storage"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(t,{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5"}),e.jsx("span",{children:"50 session replays per month"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(t,{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5"}),e.jsx("span",{children:"Priority support"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(t,{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5"}),e.jsx("span",{children:"Advanced analytics"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(t,{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5"}),e.jsx("span",{children:"Email support"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(t,{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5"}),e.jsx("span",{children:"Everything in Starter"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(t,{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5"}),e.jsx("span",{children:"10 MB knowledge base storage"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(t,{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5"}),e.jsx("span",{children:"Unlimited session replays"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(t,{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5"}),e.jsx("span",{children:"Lifetime access"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(t,{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5"}),e.jsx("span",{children:"Priority support"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(t,{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5"}),e.jsx("span",{children:"Concierge onboarding"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(t,{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5"}),e.jsx("span",{children:"Founders Club badge"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(t,{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5"}),e.jsx("span",{children:"No recurring fees"})]})]})})]}),f&&e.jsx("div",{className:"p-3 rounded-lg bg-red-900/30 border border-red-700 text-sm text-red-200 mb-4",children:f}),e.jsxs("div",{className:"bg-gray-900/60 border border-gray-800 rounded-xl p-4 text-xs text-gray-400 space-y-2",children:[e.jsx("p",{className:"font-semibold text-gray-300",children:"What happens next:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[e.jsx("li",{children:"Complete secure checkout via Stripe"}),e.jsx("li",{children:"Your account will be upgraded automatically"}),e.jsx("li",{children:"You'll receive a confirmation email"}),e.jsx("li",{children:"Start using Founders Club features immediately"})]})]})]})})};export{J as PaymentModal};
